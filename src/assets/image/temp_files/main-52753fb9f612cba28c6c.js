(()=>{var e={4924:(e,t,r)=>{"use strict";var n=r(5387),i=r.n(n),a=r(3372),s=r.n(a),o=r(9994),u=r.n(o),c="6.6.0";var l=function(e,t){t.isImmediatePropagationStopped=function(){return!0},t.cancelBubble=!0,t.isPropagationStopped=function(){return!0}},d=function(e,t,r){l(0,r),e.trigger({type:t+r.type,originalEvent:r})};function h(e){"playing"===e.type?function(e,t){e.ads.isInAdMode()&&(e.ads.isContentResuming()?e.ads._contentEnding&&d(e,"content",t):d(e,"ad",t))}(this,e):"ended"===e.type?function(e,t){e.ads.isInAdMode()?e.ads.isContentResuming()?(l(0,t),e.trigger("resumeended")):d(e,"ad",t):e.ads._contentHasEnded||e.ads.stitchedAds()||(d(e,"content",t),e.trigger("readyforpostroll"))}(this,e):"loadstart"===e.type||"loadeddata"===e.type||"loadedmetadata"===e.type?function(e,t){if(!("loadstart"===t.type&&!e.ads._hasThereBeenALoadStartDuringPlayerLife||"loadeddata"===t.type&&!e.ads._hasThereBeenALoadedData||"loadedmetadata"===t.type&&!e.ads._hasThereBeenALoadedMetaData))if(e.ads.inAdBreak())d(e,"ad",t);else{if(e.currentSrc()!==e.ads.contentSrc)return;d(e,"content",t)}}(this,e):"play"===e.type?function(e,t){e.ads.inAdBreak()?d(e,"ad",t):e.ads.isContentResuming()&&d(e,"content",t)}(this,e):this.ads.isInAdMode()&&(this.ads.isContentResuming()?d(this,"content",e):d(this,"ad",e))}var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=(function(){function e(e){this.value=e}function t(t){var r,n;function i(r,n){try{var s=t[r](n),o=s.value;o instanceof e?Promise.resolve(o.value).then((function(e){i("next",e)}),(function(e){i("throw",e)})):a(s.done?"return":"normal",s.value)}catch(e){a("throw",e)}}function a(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?i(r.key,r.arg):n=null}this._invoke=function(e,t){return new Promise((function(a,s){var o={key:e,arg:t,resolve:a,reject:s,next:null};n?n=n.next=o:(r=n=o,i(e,t))}))},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),m=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},g=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},y=function(e,t){return t?encodeURIComponent(e):e},v=function(e,t,r){if(e&&e[r])for(var n=e[r],i=Object.keys(n),a=0;a<i.length;a++){t["{mediainfo."+r+"."+i[a]+"}"]=n[i[a]]}};function b(e,t,r){var n=this,a={};e=e.replace(/{([^}=]+)=([^}]+)}/g,(function(e,t,r){return a["{"+t+"}"]=r,"{"+t+"}"})),void 0===t&&(t=!1);var o={};for(var c in void 0!==r&&(o=r),o["{player.id}"]=this.options_["data-player"],o["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"",o["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"",o["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"",o["{player.duration}"]=this.duration(),o["{timestamp}"]=(new Date).getTime(),o["{document.referrer}"]=u().referrer,o["{window.location.href}"]=s().location.href,o["{random}"]=Math.floor(1e12*Math.random()),["description","tags","reference_id","ad_keys"].forEach((function(e){n.mediainfo&&n.mediainfo[e]?o["{mediainfo."+e+"}"]=n.mediainfo[e]:a["{mediainfo."+e+"}"]?o["{mediainfo."+e+"}"]=a["{mediainfo."+e+"}"]:o["{mediainfo."+e+"}"]=""})),v(this.mediainfo,o,"custom_fields"),v(this.mediainfo,o,"customFields"),o)e=e.split(c).join(y(o[c],t));for(var l in e=e.replace(/{pageVariable\.([^}]+)}/g,(function(e,r){for(var n=void 0,o=s(),u=r.split("."),c=0;c<u.length;c++)c===u.length-1?n=o[u[c]]:o=o[u[c]];var l=void 0===n?"undefined":p(n);return null===n?"null":void 0===n?a["{pageVariable."+r+"}"]?a["{pageVariable."+r+"}"]:(i().log.warn('Page variable "'+r+'" not found'),""):"string"!==l&&"number"!==l&&"boolean"!==l?(i().log.warn('Page variable "'+r+'" is not a supported type'),""):y(String(n),t)})),a)e=e.replace(l,a[l]);return e}var _={processMetadataTracks:function(e,t){for(var r=e.textTracks(),n=function(r){"metadata"===r.kind&&(e.ads.cueTextTracks.setMetadataTrackMode(r),t(e,r))},i=0;i<r.length;i++)n(r[i]);r.addEventListener("addtrack",(function(e){n(e.track)}))},setMetadataTrackMode:function(e){},getSupportedAdCue:function(e,t){return t},isSupportedAdCue:function(e,t){return!0},getCueId:function(e,t){return t.id}},T=function(e,t){return void 0!==t&&e.ads.includedCues[t]},w=function(e,t){void 0!==t&&""!==t&&(e.ads.includedCues[t]=!0)};function S(){var e=this;!1!==e.ads._shouldBlockPlay&&(e.paused()||(e.ads.debug("Playback was canceled by cancelContentPlay"),e.pause()),e.ads._cancelledPlay=!0)}_.processAdTrack=function(e,t,r,n){e.ads.includedCues={};for(var a=0;a<t.length;a++){var s=t[a],o=this.getSupportedAdCue(e,s);if(!this.isSupportedAdCue(e,s))return void i().log.warn("Skipping as this is not a supported ad cue.",s);var u=this.getCueId(e,s),c=s.startTime;if(T(e,u))return void i().log("Skipping ad already seen with ID "+u);n&&n(e,o,u,c),r(e,o,u,c),w(e,u)}};var C={},k=i();C.isMiddlewareMediatorSupported=function(){return!k.browser.IS_IOS&&!k.browser.IS_ANDROID&&!!(k.use&&k.middleware&&k.middleware.TERMINATOR)},C.playMiddleware=function(e){return{setSource:function(e,t){t(null,e)},callPlay:function(){if(e.ads&&!0===e.ads._shouldBlockPlay)return e.ads.debug("Using playMiddleware to block content playback"),e.ads._playBlocked=!0,k.middleware.TERMINATOR},play:function(t,r){e.ads&&e.ads._playBlocked&&t?(e.ads.debug("Play call to Tech was terminated."),e.trigger("play"),e.addClass("vjs-has-started"),e.ads._playBlocked=!1):r&&r.catch&&r.catch((function(t){"play() failed because the user didn't interact with the document first. https://goo.gl/xX8pDD"===t.message&&e.trigger("pause")}))}}},C.testHook=function(e){k=e};var E=C.playMiddleware,O=C.isMiddlewareMediatorSupported;var A=function(){function e(t){f(this,e),this.player=t}return e._getName=function(){return"Anonymous State"},e.prototype.transitionTo=function(e){var t=this.player,r=this;r.cleanup(t);var n=new e(t);t.ads._state=n,t.ads.debug(r.constructor._getName()+" -> "+n.constructor._getName());for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];n.init.apply(n,[t].concat(a))},e.prototype.init=function(){},e.prototype.cleanup=function(){},e.prototype.onPlay=function(){},e.prototype.onPlaying=function(){},e.prototype.onEnded=function(){},e.prototype.onAdEnded=function(){},e.prototype.onAdsReady=function(){i().log.warn("Unexpected adsready event")},e.prototype.onAdsError=function(){},e.prototype.onAdsCanceled=function(){},e.prototype.onAdTimeout=function(){},e.prototype.onAdStarted=function(){},e.prototype.onContentChanged=function(){},e.prototype.onDispose=function(){},e.prototype.onContentResumed=function(){},e.prototype.onReadyForPostroll=function(){i().log.warn("Unexpected readyforpostroll event")},e.prototype.onNoPreroll=function(){},e.prototype.onNoPostroll=function(){},e.prototype.startLinearAdMode=function(){i().log.warn("Unexpected startLinearAdMode invocation (State via "+this.constructor._getName()+")")},e.prototype.endLinearAdMode=function(){i().log.warn("Unexpected endLinearAdMode invocation (State via "+this.constructor._getName()+")")},e.prototype.skipLinearAdMode=function(){i().log.warn("Unexpected skipLinearAdMode invocation (State via "+this.constructor._getName()+")")},e.prototype.isAdState=function(){throw new Error("isAdState unimplemented for "+this.constructor._getName())},e.prototype.isWaitingForAdBreak=function(){return!1},e.prototype.isContentResuming=function(){return!1},e.prototype.inAdBreak=function(){return!1},e.prototype.handleEvent=function(e){var t=this.player;"play"===e?this.onPlay(t):"adsready"===e?this.onAdsReady(t):"adserror"===e?this.onAdsError(t):"adscanceled"===e?this.onAdsCanceled(t):"adtimeout"===e?this.onAdTimeout(t):"ads-ad-started"===e?this.onAdStarted(t):"contentchanged"===e?this.onContentChanged(t):"dispose"===e?this.onDispose(t):"contentresumed"===e?this.onContentResumed(t):"readyforpostroll"===e?this.onReadyForPostroll(t):"playing"===e?this.onPlaying(t):"ended"===e?this.onEnded(t):"nopreroll"===e?this.onNoPreroll(t):"nopostroll"===e?this.onNoPostroll(t):"adended"===e&&this.onAdEnded(t)},e}(),x=function(e){function t(r){f(this,t);var n=g(this,e.call(this,r));return n.contentResuming=!1,n.waitingForAdBreak=!1,n}return m(t,e),t.prototype.isAdState=function(){return!0},t.prototype.onPlaying=function(){this.contentResuming&&this.transitionTo(j)},t.prototype.onContentResumed=function(){this.contentResuming&&this.transitionTo(j)},t.prototype.isWaitingForAdBreak=function(){return this.waitingForAdBreak},t.prototype.isContentResuming=function(){return this.contentResuming},t.prototype.inAdBreak=function(){return!0===this.player.ads._inLinearAdMode},t}(A),P=function(e){function t(){return f(this,t),g(this,e.apply(this,arguments))}return m(t,e),t.prototype.isAdState=function(){return!1},t.prototype.onContentChanged=function(e){e.ads.debug("Received contentchanged event (ContentState)"),e.paused()?this.transitionTo(R):(this.transitionTo(I,!1),e.pause(),e.ads._pausedOnContentupdate=!0)},t}(A),L=void 0;var M={start:function(e){e.ads.debug("Starting ad break"),e.ads._inLinearAdMode=!0,e.trigger("adstart"),e.ads.shouldTakeSnapshots()&&(e.ads.snapshot=function(e){var t=void 0;t=i().browser.IS_IOS&&e.ads.isLive(e)&&e.seekable().length>0?e.currentTime()-e.seekable().end(0):e.currentTime();var r=e.$(".vjs-tech"),n=e.textTracks?e.textTracks():[],a=[],s={ended:e.ended(),currentSrc:e.currentSrc(),sources:e.currentSources(),src:e.tech_.src(),currentTime:t,type:e.currentType()};r&&(s.style=r.getAttribute("style"));for(var o=0;o<n.length;o++){var u=n[o];a.push({track:u,mode:u.mode}),u.mode="disabled"}return s.suppressedTracks=a,s}(e)),e.ads.shouldPlayContentBehindAd(e)&&(e.ads.preAdVolume_=e.volume(),e.volume(0)),e.addClass("vjs-ad-playing"),e.hasClass("vjs-live")&&e.removeClass("vjs-live"),e.ads.removeNativePoster()},end:function(e,t){e.ads.debug("Ending ad break"),void 0===t&&(t=function(){}),e.ads.adType=null,e.ads._inLinearAdMode=!1,e.trigger("adend"),e.removeClass("vjs-ad-playing"),e.ads.isLive(e)&&e.addClass("vjs-live"),e.ads.shouldTakeSnapshots()?function(e,t){var r=e.ads.snapshot;if(void 0===t&&(t=function(){}),!0===e.ads.disableNextSnapshotRestore)return e.ads.disableNextSnapshotRestore=!1,delete e.ads.snapshot,void t();var n=e.$(".vjs-tech"),a=20,s=r.suppressedTracks,o=void 0,u=function(){for(var e=0;e<s.length;e++)(o=s[e]).track.mode=o.mode},c=function(){var t=void 0;if(i().browser.IS_IOS&&e.ads.isLive(e)){if(r.currentTime<0&&(t=e.seekable().length>0?e.seekable().end(0)+r.currentTime:e.currentTime(),e.currentTime(t)),e.paused()){var n=e.play();n&&n.catch&&n.catch((function(e){i().log.warn("Play promise rejected in IOS snapshot resume",e)}))}}else if(r.ended)e.currentTime(e.duration());else{e.currentTime(r.currentTime);var a=e.play();a&&a.catch&&a.catch((function(e){i().log.warn("Play promise rejected in snapshot resume",e)}))}e.ads.shouldRemoveAutoplay_&&(e.autoplay(!1),e.ads.shouldRemoveAutoplay_=!1)},l=function t(){if(e.off("contentcanplay",t),L&&e.clearTimeout(L),(n=e.el().querySelector(".vjs-tech")).readyState>1)return c();if(void 0===n.seekable)return c();if(n.seekable.length>0)return c();if(a--)e.setTimeout(t,50);else try{c()}catch(e){i().log.warn("Failed to resume the content after an advertisement",e)}};if("style"in r&&n.setAttribute("style",r.style||""),e.ads.videoElementRecycled())e.one("resumeended",(function(){delete e.ads.snapshot,t()})),e.one("contentloadedmetadata",u),i().browser.IS_IOS&&!e.autoplay()&&(e.autoplay(!0),e.ads.shouldRemoveAutoplay_=!0),e.src(r.sources),e.one("contentcanplay",l),L=e.setTimeout(l,2e3);else{if(u(),!e.ended()){var d=e.play();d&&d.catch&&d.catch((function(e){i().log.warn("Play promise rejected in snapshot restore",e)}))}delete e.ads.snapshot,t()}}(e,t):(e.volume(e.ads.preAdVolume_),t())}},I=function(e){function t(){return f(this,t),g(this,e.apply(this,arguments))}return m(t,e),t._getName=function(){return"Preroll"},t.prototype.init=function(e,t,r){if(this.waitingForAdBreak=!0,e.addClass("vjs-ad-loading"),r||e.ads.nopreroll_)return this.resumeAfterNoPreroll(e);var n=e.ads.settings.timeout;"number"==typeof e.ads.settings.prerollTimeout&&(n=e.ads.settings.prerollTimeout),this._timeout=e.setTimeout((function(){e.trigger("adtimeout")}),n),t?this.handleAdsReady():this.adsReady=!1},t.prototype.onAdsReady=function(e){e.ads.inAdBreak()?i().log.warn("Unexpected adsready event (Preroll)"):(e.ads.debug("Received adsready event (Preroll)"),this.handleAdsReady())},t.prototype.handleAdsReady=function(){this.adsReady=!0,this.readyForPreroll()},t.prototype.afterLoadStart=function(e){var t=this.player;t.ads._hasThereBeenALoadStartDuringPlayerLife?e():(t.ads.debug("Waiting for loadstart..."),t.one("loadstart",(function(){t.ads.debug("Received loadstart event"),e()})))},t.prototype.noPreroll=function(){var e=this;this.afterLoadStart((function(){e.player.ads.debug("Skipping prerolls due to nopreroll event (Preroll)"),e.resumeAfterNoPreroll(e.player)}))},t.prototype.readyForPreroll=function(){var e=this.player;this.afterLoadStart((function(){e.ads.debug("Triggered readyforpreroll event (Preroll)"),e.trigger("readyforpreroll")}))},t.prototype.onAdsCanceled=function(e){var t=this;e.ads.debug("adscanceled (Preroll)"),this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},t.prototype.onAdsError=function(e){var t=this;i().log("adserror (Preroll)"),this.inAdBreak()?e.ads.endLinearAdMode():this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},t.prototype.startLinearAdMode=function(){var e=this.player;!this.adsReady||e.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected startLinearAdMode invocation (Preroll)"):(e.clearTimeout(this._timeout),e.ads.adType="preroll",this.waitingForAdBreak=!1,M.start(e),e.ads._shouldBlockPlay=!1)},t.prototype.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},t.prototype.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(e.removeClass("vjs-ad-loading"),e.addClass("vjs-ad-content-resuming"),M.end(e),this.contentResuming=!0)},t.prototype.skipLinearAdMode=function(){var e=this,t=this.player;t.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected skipLinearAdMode invocation"):this.afterLoadStart((function(){t.trigger("adskip"),t.ads.debug("skipLinearAdMode (Preroll)"),e.resumeAfterNoPreroll(t)}))},t.prototype.onAdTimeout=function(e){var t=this;this.afterLoadStart((function(){e.ads.debug("adtimeout (Preroll)"),t.resumeAfterNoPreroll(e)}))},t.prototype.onNoPreroll=function(e){e.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected nopreroll event (Preroll)"):this.noPreroll()},t.prototype.resumeAfterNoPreroll=function(e){this.contentResuming=!0,e.ads._shouldBlockPlay=!1,e.paused()&&(e.ads._playRequested||e.ads._pausedOnContentupdate)&&e.play()},t.prototype.cleanup=function(e){e.ads._hasThereBeenALoadStartDuringPlayerLife||i().log.warn("Leaving Preroll state before loadstart event can cause issues."),e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming"),e.clearTimeout(this._timeout)},t}(x),D=function(e){function t(){return f(this,t),g(this,e.apply(this,arguments))}return m(t,e),t._getName=function(){return"Midroll"},t.prototype.init=function(e){e.ads.adType="midroll",M.start(e),e.addClass("vjs-ad-loading")},t.prototype.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},t.prototype.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(this.contentResuming=!0,e.addClass("vjs-ad-content-resuming"),e.removeClass("vjs-ad-loading"),M.end(e))},t.prototype.onAdsError=function(e){this.inAdBreak()&&e.ads.endLinearAdMode()},t.prototype.cleanup=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming")},t}(x),U=function(e){function t(){return f(this,t),g(this,e.apply(this,arguments))}return m(t,e),t._getName=function(){return"Postroll"},t.prototype.init=function(e){if(this.waitingForAdBreak=!0,e.ads._contentEnding=!0,e.ads.nopostroll_)this.resumeContent(e),this.transitionTo(N);else{e.addClass("vjs-ad-loading");var t=e.ads.settings.timeout;"number"==typeof e.ads.settings.postrollTimeout&&(t=e.ads.settings.postrollTimeout),this._postrollTimeout=e.setTimeout((function(){e.trigger("adtimeout")}),t)}},t.prototype.startLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected startLinearAdMode invocation (Postroll)"):(e.ads.adType="postroll",e.clearTimeout(this._postrollTimeout),this.waitingForAdBreak=!1,M.start(e))},t.prototype.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},t.prototype.endLinearAdMode=function(){var e=this,t=this.player;this.inAdBreak()&&(t.removeClass("vjs-ad-loading"),this.resumeContent(t),M.end(t,(function(){e.transitionTo(N)})))},t.prototype.skipLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected skipLinearAdMode invocation"):(e.ads.debug("Postroll abort (skipLinearAdMode)"),e.trigger("adskip"),this.abort(e))},t.prototype.onAdTimeout=function(e){e.ads.debug("Postroll abort (adtimeout)"),this.abort(e)},t.prototype.onAdsError=function(e){e.ads.debug("Postroll abort (adserror)"),e.ads.inAdBreak()?e.ads.endLinearAdMode():this.abort(e)},t.prototype.onContentChanged=function(e){this.isContentResuming()?this.transitionTo(R):this.inAdBreak()||this.transitionTo(I)},t.prototype.onNoPostroll=function(e){this.isContentResuming()||this.inAdBreak()?i().log.warn("Unexpected nopostroll event (Postroll)"):this.abort(e)},t.prototype.resumeContent=function(e){this.contentResuming=!0,e.addClass("vjs-ad-content-resuming")},t.prototype.abort=function(e){this.resumeContent(e),e.removeClass("vjs-ad-loading"),this.transitionTo(N)},t.prototype.cleanup=function(e){e.removeClass("vjs-ad-content-resuming"),e.clearTimeout(this._postrollTimeout),e.ads._contentEnding=!1},t}(x),R=function(e){function t(){return f(this,t),g(this,e.apply(this,arguments))}return m(t,e),t._getName=function(){return"BeforePreroll"},t.prototype.init=function(e){this.adsReady=!1,this.shouldResumeToContent=!1,e.ads._shouldBlockPlay=!0},t.prototype.onAdsReady=function(e){e.ads.debug("Received adsready event (BeforePreroll)"),this.adsReady=!0},t.prototype.onPlay=function(e){e.ads.debug("Received play event (BeforePreroll)"),this.transitionTo(I,this.adsReady,this.shouldResumeToContent)},t.prototype.onAdsCanceled=function(e){e.ads.debug("adscanceled (BeforePreroll)"),this.shouldResumeToContent=!0},t.prototype.onAdsError=function(){this.player.ads.debug("adserror (BeforePreroll)"),this.shouldResumeToContent=!0},t.prototype.onNoPreroll=function(){this.player.ads.debug("Skipping prerolls due to nopreroll event (BeforePreroll)"),this.shouldResumeToContent=!0},t.prototype.skipLinearAdMode=function(){var e=this.player;e.trigger("adskip"),e.ads.debug("skipLinearAdMode (BeforePreroll)"),this.shouldResumeToContent=!0},t.prototype.onContentChanged=function(){this.init(this.player),this.onPlay(this.player)},t.prototype.onDispose=function(){this.init(this.player)},t}(P),j=function(e){function t(){return f(this,t),g(this,e.apply(this,arguments))}return m(t,e),t._getName=function(){return"ContentPlayback"},t.prototype.init=function(e){e.ads._shouldBlockPlay=!1},t.prototype.onAdsReady=function(e){e.ads.debug("Received adsready event (ContentPlayback)"),e.ads.nopreroll_||(e.ads.debug("Triggered readyforpreroll event (ContentPlayback)"),e.trigger("readyforpreroll"))},t.prototype.onReadyForPostroll=function(e){e.ads.debug("Received readyforpostroll event"),this.transitionTo(U)},t.prototype.startLinearAdMode=function(){this.transitionTo(D)},t}(P),N=function(e){function t(){return f(this,t),g(this,e.apply(this,arguments))}return m(t,e),t._getName=function(){return"AdsDone"},t.prototype.init=function(e){e.ads._contentHasEnded=!0,e.trigger("ended")},t.prototype.startLinearAdMode=function(){i().log.warn("Unexpected startLinearAdMode invocation (AdsDone)")},t}(P),B=function(e){function t(){return f(this,t),g(this,e.apply(this,arguments))}return m(t,e),t._getName=function(){return"StitchedAdRoll"},t.prototype.init=function(){this.waitingForAdBreak=!1,this.contentResuming=!1,this.player.ads.adType="stitched",M.start(this.player)},t.prototype.onPlaying=function(){},t.prototype.onContentResumed=function(){},t.prototype.onAdEnded=function(){this.endLinearAdMode(),this.player.trigger("ended")},t.prototype.endLinearAdMode=function(){M.end(this.player),this.transitionTo($)},t}(x),$=function(e){function t(){return f(this,t),g(this,e.apply(this,arguments))}return m(t,e),t._getName=function(){return"StitchedContentPlayback"},t.prototype.init=function(){this.player.ads._shouldBlockPlay=!1},t.prototype.onContentChanged=function(){this.player.ads.debug("Received contentchanged event ("+this._getName()+")")},t.prototype.startLinearAdMode=function(){this.transitionTo(B)},t}(P),F=C.isMiddlewareMediatorSupported,V=i().getTech("Html5").Events,H={timeout:5e3,prerollTimeout:void 0,postrollTimeout:void 0,debug:!1,stitchedAds:!1,contentIsLive:void 0,liveCuePoints:!0},q=function(e){var t=this,r=i().mergeOptions(H,e),n=V.concat(["firstplay","loadedalldata","playing"]);t.on(n,h),F()&&r.debug?i().log("ADS:","Play middleware has been registered with videojs"):function(e,t){t&&i().log("ADS:","Using cancelContentPlay to block content playback"),e.on("play",S)}(t,r.debug),t.setTimeout((function(){t.ads._hasThereBeenALoadStartDuringPlayerLife||""===t.src()||i().log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see http://videojs.github.io/videojs-contrib-ads/integrator/getting-started.html")}),5e3),t.on("ended",(function(){t.hasClass("vjs-has-started")||t.addClass("vjs-has-started")})),t.on("contenttimeupdate",(function(){t.removeClass("vjs-waiting")})),t.on(["addurationchange","adcanplay"],(function(){if((!t.ads.snapshot||t.currentSrc()!==t.ads.snapshot.currentSrc)&&t.ads.inAdBreak()){var e=t.play();e&&e.catch&&e.catch((function(e){i().log.warn("Play promise rejected when playing ad",e)}))}})),t.on("nopreroll",(function(){t.ads.debug("Received nopreroll event"),t.ads.nopreroll_=!0})),t.on("nopostroll",(function(){t.ads.debug("Received nopostroll event"),t.ads.nopostroll_=!0})),t.on("playing",(function(){t.ads._cancelledPlay=!1,t.ads._pausedOnContentupdate=!1})),t.on("play",(function(){t.ads._playRequested=!0})),t.one("loadstart",(function(){t.ads._hasThereBeenALoadStartDuringPlayerLife=!0})),t.on("loadeddata",(function(){t.ads._hasThereBeenALoadedData=!0})),t.on("loadedmetadata",(function(){t.ads._hasThereBeenALoadedMetaData=!0})),t.ads=function(e){return{disableNextSnapshotRestore:!1,_contentEnding:!1,_contentHasEnded:!1,_hasThereBeenALoadStartDuringPlayerLife:!1,_hasThereBeenALoadedData:!1,_hasThereBeenALoadedMetaData:!1,_inLinearAdMode:!1,_shouldBlockPlay:!1,_playBlocked:!1,_playRequested:!1,adType:null,VERSION:c,reset:function(){e.ads.disableNextSnapshotRestore=!1,e.ads._contentEnding=!1,e.ads._contentHasEnded=!1,e.ads.snapshot=null,e.ads.adType=null,e.ads._hasThereBeenALoadedData=!1,e.ads._hasThereBeenALoadedMetaData=!1,e.ads._cancelledPlay=!1,e.ads._shouldBlockPlay=!1,e.ads._playBlocked=!1,e.ads.nopreroll_=!1,e.ads.nopostroll_=!1,e.ads._playRequested=!1},startLinearAdMode:function(){e.ads._state.startLinearAdMode()},endLinearAdMode:function(){e.ads._state.endLinearAdMode()},skipLinearAdMode:function(){e.ads._state.skipLinearAdMode()},stitchedAds:function(e){return void 0!==e&&(i().log.warn("Using player.ads.stitchedAds() as a setter is deprecated, it should be set as an option upon initialization of contrib-ads."),this.settings.stitchedAds=!!e),this.settings.stitchedAds},videoElementRecycled:function(){if(e.ads.shouldPlayContentBehindAd(e))return!1;if(!this.snapshot)throw new Error("You cannot use videoElementRecycled while there is no snapshot.");var t=e.tech_.src()!==this.snapshot.src,r=e.currentSrc()!==this.snapshot.currentSrc;return t||r},isLive:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;return"boolean"==typeof t.ads.settings.contentIsLive?t.ads.settings.contentIsLive:t.duration()===1/0||"8"===i().browser.IOS_VERSION&&0===t.duration()},shouldPlayContentBehindAd:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;if(t)return!!t.ads.settings.liveCuePoints&&!i().browser.IS_IOS&&!i().browser.IS_ANDROID&&t.duration()===1/0;throw new Error("shouldPlayContentBehindAd requires a player as a param")},shouldTakeSnapshots:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;return!this.shouldPlayContentBehindAd(t)&&!this.stitchedAds()},isInAdMode:function(){return this._state.isAdState()},isWaitingForAdBreak:function(){return this._state.isWaitingForAdBreak()},isContentResuming:function(){return this._state.isContentResuming()},isAdPlaying:function(){return this._state.inAdBreak()},inAdBreak:function(){return this._state.inAdBreak()},removeNativePoster:function(){var t=e.$(".vjs-tech");t&&t.removeAttribute("poster")},debug:function(){if(this.settings.debug){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];1===t.length&&"string"==typeof t[0]?i().log("ADS: "+t[0]):i().log.apply(i(),["ADS:"].concat(t))}}}}(t),t.ads.settings=r,r.stitchedAds=!!r.stitchedAds,r.stitchedAds?t.ads._state=new $(t):t.ads._state=new R(t),t.ads._state.init(t),t.ads.cueTextTracks=_,t.ads.adMacroReplacement=b.bind(t),function(e){e.ads.contentSrc=e.currentSrc(),e.ads._seenInitialLoadstart=!1,e.on("loadstart",(function(){if(!e.ads.inAdBreak()){var t=e.currentSrc();t!==e.ads.contentSrc&&(e.ads._seenInitialLoadstart&&e.trigger({type:"contentchanged"}),e.trigger({type:"contentupdate",oldValue:e.ads.contentSrc,newValue:t}),e.ads.contentSrc=t),e.ads._seenInitialLoadstart=!0}}))}(t),t.on("contentchanged",t.ads.reset);var a=function(){var e=t.textTracks();if(!t.ads.shouldPlayContentBehindAd(t)&&t.ads.inAdBreak()&&t.tech_.featuresNativeTextTracks&&i().browser.IS_IOS&&!Array.isArray(t.textTracks()))for(var r=0;r<e.length;r++){var n=e[r];"showing"===n.mode&&(n.mode="disabled")}};t.ready((function(){t.textTracks().addEventListener("change",a)})),t.on(["play","playing","ended","adsready","adscanceled","adskip","adserror","adtimeout","adended","ads-ad-started","contentchanged","dispose","contentresumed","readyforpostroll","nopreroll","nopostroll"],(function(e){t.ads._state.handleEvent(e.type)})),t.on("dispose",(function(){t.ads.reset(),t.textTracks().removeEventListener("change",a)}))};q.VERSION=c,function(e){!function(){if(i().getPlugin)return Boolean(i().getPlugin("ads"));var e=i().getComponent("Player");return Boolean(e&&e.prototype.ads)}(i())&&((i().registerPlugin||i().plugin)("ads",e),O()&&!i().usingContribAdsMiddleware_&&(i().use("*",E),i().usingContribAdsMiddleware_=!0))}(q);var z=r(9945),W=r.n(z),G=r(8908),X=r.n(G),K=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},J=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Z=function(){function e(){K(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var r=this.listeners[e].indexOf(t);return this.listeners[e].splice(r,1),r>-1},e.prototype.trigger=function(e){var t=this.listeners[e],r=void 0,n=void 0,i=void 0;if(t)if(2===arguments.length)for(n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(i=Array.prototype.slice.call(arguments,1),n=t.length,r=0;r<n;++r)t[r].apply(this,i)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),ee=function(e){function t(){K(this,t);var r=J(this,e.call(this));return r.buffer="",r}return Q(t,e),t.prototype.push=function(e){var t=void 0;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(Z),te=function(e){for(var t=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),r={},n=t.length,i=void 0;n--;)""!==t[n]&&((i=/([^=]*)=(.*)/.exec(t[n]).slice(1))[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),r[i[0]]=i[1]);return r},re=function(e){function t(){K(this,t);var r=J(this,e.call(this));return r.customParsers=[],r}return Q(t,e),t.prototype.push=function(e){var t=void 0,r=void 0;if(0!==(e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length)if("#"===e[0]){for(var n=0;n<this.customParsers.length;n++)if(this.customParsers[n].call(this,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return r={type:"tag",tagType:"inf"},t[1]&&(r.duration=parseFloat(t[1])),t[2]&&(r.title=t[2]),void this.trigger("data",r);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"targetduration"},t[1]&&(r.duration=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"totalduration"},t[1]&&(r.duration=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"version"},t[1]&&(r.version=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return r={type:"tag",tagType:"media-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return r={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return r={type:"tag",tagType:"playlist-type"},t[1]&&(r.playlistType=t[1]),void this.trigger("data",r);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"byterange"},t[1]&&(r.length=parseInt(t[1],10)),t[2]&&(r.offset=parseInt(t[2],10)),void this.trigger("data",r);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return r={type:"tag",tagType:"allow-cache"},t[1]&&(r.allowed=!/NO/.test(t[1])),void this.trigger("data",r);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(r={type:"tag",tagType:"map"},t[1]){var i=te(t[1]);if(i.URI&&(r.uri=i.URI),i.BYTERANGE){var a=i.BYTERANGE.split("@"),s=a[0],o=a[1];r.byterange={},s&&(r.byterange.length=parseInt(s,10)),o&&(r.byterange.offset=parseInt(o,10))}}this.trigger("data",r)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(r={type:"tag",tagType:"stream-inf"},t[1]){if(r.attributes=te(t[1]),r.attributes.RESOLUTION){var u=r.attributes.RESOLUTION.split("x"),c={};u[0]&&(c.width=parseInt(u[0],10)),u[1]&&(c.height=parseInt(u[1],10)),r.attributes.RESOLUTION=c}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}this.trigger("data",r)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return r={type:"tag",tagType:"media"},t[1]&&(r.attributes=te(t[1])),void this.trigger("data",r);if(t=/^#EXT-X-ENDLIST/.exec(e))this.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return r={type:"tag",tagType:"program-date-time"},t[1]&&(r.dateTimeString=t[1],r.dateTimeObject=new Date(t[1])),void this.trigger("data",r);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return r={type:"tag",tagType:"key"},t[1]&&(r.attributes=te(t[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2).toLowerCase()&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void this.trigger("data",r);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return r={type:"tag",tagType:"start"},t[1]&&(r.attributes=te(t[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),void this.trigger("data",r);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-out-cont"},t[1]?r.data=t[1]:r.data="",void this.trigger("data",r);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-out"},t[1]?r.data=t[1]:r.data="",void this.trigger("data",r);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-in"},t[1]?r.data=t[1]:r.data="",void this.trigger("data",r);this.trigger("data",{type:"tag",data:e.slice(4)})}}}else this.trigger("data",{type:"comment",text:e.slice(1)})}else this.trigger("data",{type:"uri",uri:e})},t.prototype.addParser=function(e){var t=this,r=e.expression,n=e.customType,i=e.dataParser,a=e.segment;"function"!=typeof i&&(i=function(e){return e}),this.customParsers.push((function(e){if(r.exec(e))return t.trigger("data",{type:"custom",data:i(e),customType:n,segment:a}),!0}))},t}(Z),ne=function(e){function t(){K(this,t);var r=J(this,e.call(this));r.lineStream=new ee,r.parseStream=new re,r.lineStream.pipe(r.parseStream);var n=r,i=[],a={},s=void 0,o=void 0,u=function(){},c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},l=0;return r.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},r.parseStream.on("data",(function(e){var t=void 0,r=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(a.byterange=t,t.length=e.length,"offset"in e||(this.trigger("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&(a.byterange=t,t.offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(a.duration=e.duration),0===e.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key:function(){e.attributes?"NONE"!==e.attributes.METHOD?e.attributes.URI?(e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),o={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(o.iv=e.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):o=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,l=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){s={},e.uri&&(s.uri=e.uri),e.byterange&&(s.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||c,e.attributes?(a.attributes||(a.attributes={}),Y(a.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||c,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var n=this.manifest.mediaGroups[e.attributes.TYPE];n[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{},t=n[e.attributes["GROUP-ID"]],(r={default:/yes/i.test(e.attributes.DEFAULT)}).default?r.autoselect=!0:r.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(r.language=e.attributes.LANGUAGE),e.attributes.URI&&(r.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(r.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(r.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(r.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=r}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){l+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),a.dateTimeString=e.dateTimeString,a.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){a.cueOut=e.data},"cue-out-cont":function(){a.cueOutCont=e.data},"cue-in":function(){a.cueIn=e.data}}[e.tagType]||u).call(n)},uri:function(){a.uri=e.uri,i.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),o&&(a.key=o),a.timeline=l,s&&(a.map=s),a={}},comment:function(){},custom:function(){e.segment?(a.custom=a.custom||{},a.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(n)})),r}return Q(t,e),t.prototype.push=function(e){this.lineStream.push(e)},t.prototype.end=function(){this.lineStream.push("\n")},t.prototype.addParser=function(e){this.parseStream.addParser(e)},t}(Z),ie=r(9144),ae=r.n(ie),se=function(e){var t,r=e.attributes,n=e.segments,i={attributes:(t={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1};return r.contentProtection&&(i.contentProtection=r.contentProtection),i},oe=function(e){var t,r=e.attributes,n=e.segments,i={attributes:(t={NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1};return r.contentProtection&&(i.contentProtection=r.contentProtection),i},ue=function(e){var t;if(!e.length)return{};var r=e[0].attributes,n=r.sourceDuration,i=r.minimumUpdatePeriod,a=void 0===i?0:i,s=e.filter((function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType})).map(oe),o=e.filter((function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType})),u=e.filter((function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType})),c={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:n,playlists:s,minimumUpdatePeriod:1e3*a};return o.length&&(c.mediaGroups.AUDIO.audio=o.reduce((function(e,t){var r=t.attributes.role&&t.attributes.role.value||"main",n=t.attributes.lang||"",i="main";return n&&(i=t.attributes.lang+" ("+r+")"),e[i]&&e[i].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth||(e[i]={language:n,autoselect:!0,default:"main"===r,playlists:[se(t)],uri:""}),e}),{})),u.length&&(c.mediaGroups.SUBTITLES.subs=function(e){return e.reduce((function(e,t){var r,n,i,a,s=t.attributes.lang||"text";return e[s]||(e[s]={language:s,default:!1,autoselect:!1,playlists:[(r=t,i=r.attributes,a=r.segments,void 0===a&&(a=[{uri:i.baseUrl,timeline:i.periodIndex,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration),{attributes:(n={NAME:i.id,BANDWIDTH:i.bandwidth},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:i.baseUrl||"",targetDuration:i.duration,segments:a,mediaSequence:a.length?a[0].number:1})],uri:""}),e}),{})}(u)),c},ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le=function(e){return!!e&&"object"===(void 0===e?"undefined":ce(e))},de=function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.reduce((function(t,r){return Object.keys(r).forEach((function(n){Array.isArray(t[n])&&Array.isArray(r[n])?t[n]=t[n].concat(r[n]):le(t[n])&&le(r[n])?t[n]=e(t[n],r[n]):t[n]=r[n]})),t}),{})},he=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=W().buildAbsoluteURL(X().location.href,e)),W().buildAbsoluteURL(e,t))},pe=function(e){var t=e.baseUrl,r=void 0===t?"":t,n=e.source,i=void 0===n?"":n,a=e.range,s=void 0===a?"":a,o={uri:i,resolvedUri:he(r||"",i)};if(s){var u=s.split("-"),c=parseInt(u[0],10),l=parseInt(u[1],10);o.byterange={length:l-c,offset:c}}return o},fe=function(e,t,r){var n=e.NOW,i=e.clientOffset,a=e.availabilityStartTime,s=e.timescale,o=void 0===s?1:s,u=e.start,c=void 0===u?0:u,l=e.minimumUpdatePeriod,d=(n+i)/1e3+(void 0===l?0:l)-(a+c);return Math.ceil((d*o-t)/r)},me=function(e,t){for(var r=e.type,n=void 0===r?"static":r,i=e.minimumUpdatePeriod,a=void 0===i?0:i,s=e.media,o=void 0===s?"":s,u=e.sourceDuration,c=e.timescale,l=void 0===c?1:c,d=e.startNumber,h=void 0===d?1:d,p=e.periodIndex,f=[],m=-1,g=0;g<t.length;g++){var y=t[g],v=y.d,b=y.r||0,_=y.t||0;m<0&&(m=_),_&&_>m&&(m=_);var T=void 0;if(b<0){var w=g+1;T=w===t.length?"dynamic"===n&&a>0&&o.indexOf("$Number$")>0?fe(e,m,v):(u*l-m)/v:(t[w].t-m)/v}else T=b+1;for(var S=h+f.length+T,C=h+f.length;C<S;)f.push({number:C,duration:v/l,time:m,timeline:p}),m+=v,C++}return f},ge=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])},ye=function(e){if(!e.length)return[];for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t},ve={static:function(e){var t=e.duration,r=e.timescale,n=void 0===r?1:r,i=e.sourceDuration;return{start:0,end:Math.ceil(i/(t/n))}},dynamic:function(e){var t=e.NOW,r=e.clientOffset,n=e.availabilityStartTime,i=e.timescale,a=void 0===i?1:i,s=e.duration,o=e.start,u=void 0===o?0:o,c=e.minimumUpdatePeriod,l=void 0===c?0:c,d=e.timeShiftBufferDepth,h=void 0===d?1/0:d,p=(t+r)/1e3,f=n+u,m=p+l-f,g=Math.ceil(m*a/s),y=Math.floor((p-f-h)*a/s),v=Math.floor((p-f)*a/s);return{start:Math.max(0,y),end:Math.min(g,v)}}},be=function(e){var t=e.type,r=void 0===t?"static":t,n=e.duration,i=e.timescale,a=void 0===i?1:i,s=e.sourceDuration,o=ve[r](e),u=function(e,t){for(var r=[],n=e;n<t;n++)r.push(n);return r}(o.start,o.end).map(function(e){return function(t,r){var n=e.duration,i=e.timescale,a=void 0===i?1:i,s=e.periodIndex,o=e.startNumber;return{number:(void 0===o?1:o)+t,duration:n/a,timeline:s,time:r*n}}}(e));if("static"===r){var c=u.length-1;u[c].duration=s-n/a*c}return u},_e=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Te=function(e,t){return e.replace(_e,function(e){return function(t,r,n,i){if("$$"===t)return"$";if(void 0===e[r])return t;var a=""+e[r];return"RepresentationID"===r?a:(i=n?parseInt(i,10):1,a.length>=i?a:""+new Array(i-a.length+1).join("0")+a)}}(t))},we=function(e,t){var r={RepresentationID:e.id,Bandwidth:e.bandwidth||0},n=e.initialization,i=void 0===n?{sourceURL:"",range:""}:n,a=pe({baseUrl:e.baseUrl,source:Te(i.sourceURL,r),range:i.range});return function(e,t){return e.duration||t?e.duration?be(e):me(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]}(e,t).map((function(t){r.Number=t.number,r.Time=t.time;var n=Te(e.media||"",r);return{uri:n,timeline:t.timeline,duration:t.duration,resolvedUri:he(e.baseUrl||"",n),map:a,number:t.number}}))},Se="INVALID_NUMBER_OF_PERIOD",Ce="DASH_EMPTY_MANIFEST",ke="DASH_INVALID_XML",Ee="NO_BASE_URL",Oe="SEGMENT_TIME_UNSPECIFIED",Ae="UNSUPPORTED_UTC_TIMING_SCHEME",xe=function(e,t){var r=e.duration,n=e.segmentUrls,i=void 0===n?[]:n;if(!r&&!t||r&&t)throw new Error(Oe);var a=i.map((function(t){return function(e,t){var r=e.baseUrl,n=e.initialization,i=void 0===n?{}:n,a=pe({baseUrl:r,source:i.sourceURL,range:i.range}),s=pe({baseUrl:r,source:t.media,range:t.mediaRange});return s.map=a,s}(e,t)})),s=void 0;return r&&(s=be(e)),t&&(s=me(e,t)),s.map((function(e,t){if(a[t]){var r=a[t];return r.timeline=e.timeline,r.duration=e.duration,r.number=e.number,r}})).filter((function(e){return e}))},Pe=function(e){var t=e.baseUrl,r=e.initialization,n=void 0===r?{}:r,i=e.sourceDuration,a=e.timescale,s=void 0===a?1:a,o=e.indexRange,u=void 0===o?"":o,c=e.duration;if(!t)throw new Error(Ee);var l=pe({baseUrl:t,source:n.sourceURL,range:n.range}),d=pe({baseUrl:t,source:t,range:u});if(d.map=l,c){var h=be(e);h.length&&(d.duration=h[0].duration,d.timeline=h[0].timeline)}else i&&(d.duration=i/s,d.timeline=0);return d.number=0,[d]},Le=function(e){var t=e.attributes,r=e.segmentInfo,n=void 0,i=void 0;if(r.template?(i=we,n=de(t,r.template)):r.base?(i=Pe,n=de(t,r.base)):r.list&&(i=xe,n=de(t,r.list)),!i)return{attributes:t};var a=i(n,r.timeline);if(n.duration){var s=n,o=s.duration,u=s.timescale,c=void 0===u?1:u;n.duration=o/c}else a.length?n.duration=a.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):n.duration=0;return{attributes:n,segments:a}},Me=function(e,t){return ye(e.childNodes).filter((function(e){return e.tagName===t}))},Ie=function(e){return e.textContent.trim()},De=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var r=t.slice(1),n=r[0],i=r[1],a=r[2],s=r[3],o=r[4],u=r[5];return 31536e3*parseFloat(n||0)+2592e3*parseFloat(i||0)+86400*parseFloat(a||0)+3600*parseFloat(s||0)+60*parseFloat(o||0)+parseFloat(u||0)},Ue={mediaPresentationDuration:function(e){return De(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return De(e)},timeShiftBufferDepth:function(e){return De(e)},start:function(e){return De(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?De(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Re=function(e){return e&&e.attributes?ye(e.attributes).reduce((function(e,t){var r=Ue[t.name]||Ue.DEFAULT;return e[t.name]=r(t.value),e}),{}):{}};var je={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Ne=function(e,t){return t.length?ge(e.map((function(e){return t.map((function(t){return he(e,Ie(t))}))}))):e},Be=function(e){var t=Me(e,"SegmentTemplate")[0],r=Me(e,"SegmentList")[0],n=r&&Me(r,"SegmentURL").map((function(e){return de({tag:"SegmentURL"},Re(e))})),i=Me(e,"SegmentBase")[0],a=r||t,s=a&&Me(a,"SegmentTimeline")[0],o=r||i||t,u=o&&Me(o,"Initialization")[0],c=t&&Re(t);c&&u?c.initialization=u&&Re(u):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var l={template:c,timeline:s&&Me(s,"S").map((function(e){return Re(e)})),list:r&&de(Re(r),{segmentUrls:n,initialization:Re(u)}),base:i&&de(Re(i),{initialization:Re(u)})};return Object.keys(l).forEach((function(e){l[e]||delete l[e]})),l},$e=function(e){return e.reduce((function(e,t){var r=Re(t),n=je[r.schemeIdUri];if(n){e[n]={attributes:r};var i=Me(t,"cenc:pssh")[0];if(i){var a=Ie(i),s=a&&function(e){for(var t=X().atob(e),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}(a);e[n].pssh=s}}return e}),{})},Fe=function(e,t,r){return function(n){var i=Re(n),a=Ne(t,Me(n,"BaseURL")),s=Me(n,"Role")[0],o={role:Re(s)},u=de(e,i,o),c=$e(Me(n,"ContentProtection"));Object.keys(c).length&&(u=de(u,{contentProtection:c}));var l=Be(n),d=Me(n,"Representation"),h=de(r,l);return ge(d.map(function(e,t,r){return function(n){var i=Me(n,"BaseURL"),a=Ne(t,i),s=de(e,Re(n)),o=Be(n);return a.map((function(e){return{segmentInfo:de(r,o),attributes:de(s,{baseUrl:e})}}))}}(u,a,h)))}},Ve=function(e,t){return function(r,n){var i=Ne(t,Me(r,"BaseURL")),a=Re(r),s=de(e,a,{periodIndex:n}),o=Me(r,"AdaptationSet"),u=Be(r);return ge(o.map(Fe(s,i,u)))}},He=function(e){if(""===e)throw new Error(Ce);var t=(new(X().DOMParser)).parseFromString(e,"application/xml"),r=t&&"MPD"===t.documentElement.tagName?t.documentElement:null;if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error(ke);return r},qe=function(e,t){return ue(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.manifestUri,n=void 0===r?"":r,i=t.NOW,a=void 0===i?Date.now():i,s=t.clientOffset,o=void 0===s?0:s,u=Me(e,"Period");if(1!==u.length)throw new Error(Se);var c=Re(e),l=Ne([n],Me(e,"BaseURL"));return c.sourceDuration=c.mediaPresentationDuration||0,c.NOW=a,c.clientOffset=o,ge(u.map(Ve(c,l)))}(He(e),t).map(Le))},ze=function(e){return function(e){var t=Me(e,"UTCTiming")[0];if(!t)return null;var r=Re(t);switch(r.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":r.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":r.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":r.method="DIRECT",r.value=Date.parse(r.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Ae)}return r}(He(e))},We=r(7661),Ge=r.n(We),Xe=r(272),Ke=r(5547),Ye=r.n(Ke);var Qe=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Je=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Ze=null,et=function(){function e(t){Qe(this,e),Ze||(Ze=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],r=e[1],n=t[4],i=r[4],a=void 0,s=void 0,o=void 0,u=[],c=[],l=void 0,d=void 0,h=void 0,p=void 0,f=void 0;for(a=0;a<256;a++)c[(u[a]=a<<1^283*(a>>7))^a]=a;for(s=o=0;!n[s];s^=l||1,o=c[o]||1)for(h=(h=o^o<<1^o<<2^o<<3^o<<4)>>8^255&h^99,n[s]=h,i[h]=s,f=16843009*u[d=u[l=u[s]]]^65537*d^257*l^16843008*s,p=257*u[h]^16843008*h,a=0;a<4;a++)t[a][s]=p=p<<24^p>>>8,r[a][h]=f=f<<24^f>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),r[a]=r[a].slice(0);return e}()),this._tables=[[Ze[0][0].slice(),Ze[0][1].slice(),Ze[0][2].slice(),Ze[0][3].slice(),Ze[0][4].slice()],[Ze[1][0].slice(),Ze[1][1].slice(),Ze[1][2].slice(),Ze[1][3].slice(),Ze[1][4].slice()]];var r=void 0,n=void 0,i=void 0,a=void 0,s=void 0,o=this._tables[0][4],u=this._tables[1],c=t.length,l=1;if(4!==c&&6!==c&&8!==c)throw new Error("Invalid aes key size");for(a=t.slice(0),s=[],this._key=[a,s],r=c;r<4*c+28;r++)i=a[r-1],(r%c==0||8===c&&r%c==4)&&(i=o[i>>>24]<<24^o[i>>16&255]<<16^o[i>>8&255]<<8^o[255&i],r%c==0&&(i=i<<8^i>>>24^l<<24,l=l<<1^283*(l>>7))),a[r]=a[r-c]^i;for(n=0;r;n++,r--)i=a[3&n?r:r-4],s[n]=r<=4||n<4?i:u[0][o[i>>>24]]^u[1][o[i>>16&255]]^u[2][o[i>>8&255]]^u[3][o[255&i]]}return e.prototype.decrypt=function(e,t,r,n,i,a){var s=this._key[1],o=e^s[0],u=n^s[1],c=r^s[2],l=t^s[3],d=void 0,h=void 0,p=void 0,f=s.length/4-2,m=void 0,g=4,y=this._tables[1],v=y[0],b=y[1],_=y[2],T=y[3],w=y[4];for(m=0;m<f;m++)d=v[o>>>24]^b[u>>16&255]^_[c>>8&255]^T[255&l]^s[g],h=v[u>>>24]^b[c>>16&255]^_[l>>8&255]^T[255&o]^s[g+1],p=v[c>>>24]^b[l>>16&255]^_[o>>8&255]^T[255&u]^s[g+2],l=v[l>>>24]^b[o>>16&255]^_[u>>8&255]^T[255&c]^s[g+3],g+=4,o=d,u=h,c=p;for(m=0;m<4;m++)i[(3&-m)+a]=w[o>>>24]<<24^w[u>>16&255]<<16^w[c>>8&255]<<8^w[255&l]^s[g++],d=o,o=u,u=c,c=l,l=d},e}(),tt=function(){function e(){Qe(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var r=this.listeners[e].indexOf(t);return this.listeners[e].splice(r,1),r>-1},e.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var r=t.length,n=0;n<r;++n)t[n].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,i)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),rt=function(e){function t(){Qe(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,tt));return r.jobs=[],r.delay=1,r.timeout_=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},t.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(tt),nt=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},it=function(e,t,r){var n=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),i=new et(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),s=new Int32Array(a.buffer),o=void 0,u=void 0,c=void 0,l=void 0,d=void 0,h=void 0,p=void 0,f=void 0,m=void 0;for(o=r[0],u=r[1],c=r[2],l=r[3],m=0;m<n.length;m+=4)d=nt(n[m]),h=nt(n[m+1]),p=nt(n[m+2]),f=nt(n[m+3]),i.decrypt(d,h,p,f,s,m),s[m]=nt(s[m]^o),s[m+1]=nt(s[m+1]^u),s[m+2]=nt(s[m+2]^c),s[m+3]=nt(s[m+3]^l),o=d,u=h,c=p,l=f;return a},at=function(){function e(t,r,n,i){Qe(this,e);var a=e.STEP,s=new Int32Array(t.buffer),o=new Uint8Array(t.byteLength),u=0;for(this.asyncStream_=new rt,this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),r,n,o)),u=a;u<s.length;u+=a)n=new Uint32Array([nt(s[u-4]),nt(s[u-3]),nt(s[u-2]),nt(s[u-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),r,n,o));this.asyncStream_.push((function(){var e;i(null,(e=o).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return e.prototype.decryptChunk_=function(e,t,r,n){return function(){var i=it(e,t,r);n.set(i,e.byteOffset)}},Je(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),st=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=W().buildAbsoluteURL(X().location.href,e)),W().buildAbsoluteURL(e,t))},ot=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ut=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),ct=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(n):void 0},lt=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},dt=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},ht=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},pt=i().mergeOptions,ft=i().EventTarget,mt=i().log,gt=function(e,t){["AUDIO","SUBTITLES"].forEach((function(r){for(var n in e.mediaGroups[r])for(var i in e.mediaGroups[r][n]){var a=e.mediaGroups[r][n][i];t(a,r,n,i)}}))},yt=function(e,t){var r=pt(e,{}),n=r.playlists[t.uri];if(!n)return null;if(n.segments&&t.segments&&n.segments.length===t.segments.length&&n.mediaSequence===t.mediaSequence)return null;var i=pt(n,t);n.segments&&(i.segments=function(e,t,r){var n=t.slice();r=r||0;for(var i=Math.min(e.length,t.length+r),a=r;a<i;a++)n[a-r]=pt(e[a],n[a-r]);return n}(n.segments,t.segments,t.mediaSequence-n.mediaSequence)),i.segments.forEach((function(e){!function(e,t){e.resolvedUri||(e.resolvedUri=st(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=st(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=st(t,e.map.uri))}(e,i.resolvedUri)}));for(var a=0;a<r.playlists.length;a++)r.playlists[a].uri===t.uri&&(r.playlists[a]=i);return r.playlists[t.uri]=i,r},vt=function(e){for(var t=e.playlists.length;t--;){var r=e.playlists[t];e.playlists[r.uri]=r,r.resolvedUri=st(e.uri,r.uri),r.id=t,r.attributes||(r.attributes={},mt.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},bt=function(e){gt(e,(function(t){t.uri&&(t.resolvedUri=st(e.uri,t.uri))}))},_t=function(e,t){var r=e.segments[e.segments.length-1];return t&&r&&r.duration?1e3*r.duration:500*(e.targetDuration||10)},Tt=function(e){function t(e,r,n){ot(this,t);var i=dt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(i.srcUrl=e,i.hls_=r,i.withCredentials=n,!i.srcUrl)throw new Error("A non-empty playlist URL is required");return i.state="HAVE_NOTHING",i.on("mediaupdatetimeout",(function(){"HAVE_METADATA"===i.state&&(i.state="HAVE_CURRENT_METADATA",i.request=i.hls_.xhr({uri:st(i.master.uri,i.media().uri),withCredentials:i.withCredentials},(function(e,t){if(i.request)return e?i.playlistRequestError(i.request,i.media().uri,"HAVE_METADATA"):void i.haveMetadata(i.request,i.media().uri)})))})),i}return lt(t,e),ut(t,[{key:"playlistRequestError",value:function(e,t,r){this.request=null,r&&(this.state=r),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(e,t){var r=this;this.request=null,this.state="HAVE_METADATA";var n=new ne;n.push(e.responseText),n.end(),n.manifest.uri=t,n.manifest.attributes=n.manifest.attributes||{};var i=yt(this.master,n.manifest);this.targetDuration=n.manifest.targetDuration,i?(this.master=i,this.media_=this.master.playlists[n.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(X().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=X().setTimeout((function(){r.trigger("mediaupdatetimeout")}),_t(this.media(),!!i))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),X().clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var r=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var n=!this.media_||e.uri!==this.media_.uri;if(this.master.playlists[e.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(n&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(n){if(this.state="SWITCHING_MEDIA",this.request){if(st(this.master.uri,e.uri)===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:st(this.master.uri,e.uri),withCredentials:this.withCredentials},(function(n,i){if(t.request){if(n)return t.playlistRequestError(t.request,e.uri,r);t.haveMetadata(i,e.uri),"HAVE_MASTER"===r?t.trigger("loadedmetadata"):t.trigger("mediachange")}}))}}},{key:"pause",value:function(){this.stopRequest(),X().clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(e){var t=this;X().clearTimeout(this.mediaUpdateTimeout);var r=this.media();if(e){var n=r?r.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=X().setTimeout((function(){return t.load()}),n)}else this.started?r&&!r.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var e=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(t,r){if(e.request){if(e.request=null,t)return e.error={status:r.status,message:"HLS playlist request error at URL: "+e.srcUrl,responseText:r.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");var n=new ne;return n.push(r.responseText),n.end(),e.state="HAVE_MASTER",n.manifest.uri=e.srcUrl,n.manifest.playlists?(e.master=n.manifest,vt(e.master),bt(e.master),e.trigger("loadedplaylist"),void(e.request||e.media(n.manifest.playlists[0]))):(e.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:X().location.href,playlists:[{uri:e.srcUrl,id:0}]},e.master.playlists[e.srcUrl]=e.master.playlists[0],e.master.playlists[0].resolvedUri=e.srcUrl,e.master.playlists[0].attributes=e.master.playlists[0].attributes||{},e.haveMetadata(r,e.srcUrl),e.trigger("loadedmetadata"))}}))}}]),t}(ft),wt=i().createTimeRange,St=function(e,t,r){var n,i;return void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(n=function(e,t){var r=0,n=t-e.mediaSequence,i=e.segments[n];if(i){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;n--;){if(void 0!==(i=e.segments[n]).end)return{result:r+i.end,precise:!0};if(r+=i.duration,void 0!==i.start)return{result:r+i.start,precise:!0}}return{result:r,precise:!1}}(e,t)).precise?n.result:(i=function(e,t){for(var r=0,n=void 0,i=t-e.mediaSequence;i<e.segments.length;i++){if(void 0!==(n=e.segments[i]).start)return{result:n.start-r,precise:!0};if(r+=n.duration,void 0!==n.end)return{result:n.end-r,precise:!0}}return{result:-1,precise:!1}}(e,t)).precise?i.result:n.result+r},Ct=function(e,t,r){if(!e)return 0;if("number"!=typeof r&&(r=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return X()[1/0]}return St(e,t,r)},kt=function(e,t,r){var n=0;if(t>r){var i=[r,t];t=i[0],r=i[1]}if(t<0){for(var a=t;a<Math.min(0,r);a++)n+=e.targetDuration;t=0}for(var s=t;s<r;s++)n+=e.segments[s].duration;return n},Et=function(e){if(!e.segments.length)return 0;for(var t=e.segments.length-1,r=e.segments[t].duration||e.targetDuration,n=r+2*e.targetDuration;t--&&!((r+=e.segments[t].duration)>=n););return Math.max(0,t)},Ot=function(e,t,r){if(!e||!e.segments)return null;if(e.endList)return Ct(e);if(null===t)return null;t=t||0;var n=r?Et(e):e.segments.length;return St(e,e.mediaSequence+n,t)},At=function(e){return e-Math.floor(e)==0},xt=function(e,t){if(At(t))return t+.1*e;for(var r=t.toString().split(".")[1].length,n=1;n<=r;n++){var i=Math.pow(10,n),a=t*i;if(At(a)||n===r)return(a+e)/i}},Pt=xt.bind(null,1),Lt=xt.bind(null,-1),Mt=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},It=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Dt=function(e){var t=Mt(e);return!e.disabled&&!t},Ut=function(e,t){return t.attributes&&t.attributes[e]},Rt=function(e,t){if(1===e.playlists.length)return!0;var r=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!Dt(e)&&(e.attributes.BANDWIDTH||0)<r})).length},jt={duration:Ct,seekable:function(e,t){var r=t||0,n=Ot(e,t,!0);return null===n?wt():wt(r,n)},safeLiveIndex:Et,getMediaInfoForTime:function(e,t,r,n){var i=void 0,a=void 0,s=e.segments.length,o=t-n;if(o<0){if(r>0)for(i=r-1;i>=0;i--)if(a=e.segments[i],(o+=Lt(a.duration))>0)return{mediaIndex:i,startTime:n-kt(e,r,i)};return{mediaIndex:0,startTime:t}}if(r<0){for(i=r;i<0;i++)if((o-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};r=0}for(i=r;i<s;i++)if(a=e.segments[i],(o-=Pt(a.duration))<0)return{mediaIndex:i,startTime:n+kt(e,r,i)};return{mediaIndex:s-1,startTime:t}},isEnabled:Dt,isDisabled:function(e){return e.disabled},isBlacklisted:Mt,isIncompatible:It,playlistEnd:Ot,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},isFmp4:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},hasAttribute:Ut,estimateSegmentRequestTime:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!Ut("BANDWIDTH",r))return NaN;var i=e*r.attributes.BANDWIDTH;return(i-8*n)/t},isLowestEnabledRendition:Rt},Nt=i().xhr,Bt=i().mergeOptions,$t=function(){return function e(t,r){t=Bt({timeout:45e3},t);var n=e.beforeRequest||i().Hls.xhr.beforeRequest;if(n&&"function"==typeof n){var a=n(t);a&&(t=a)}var s=Nt(t,(function(e,t){var n=s.response;!e&&n&&(s.responseTime=Date.now(),s.roundTripTime=s.responseTime-s.requestTime,s.bytesReceived=n.byteLength||n.length,s.bandwidth||(s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3))),t.headers&&(s.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(s.timedout=!0),e||s.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(s&&(n||s.responseText)))),r(e,s)})),o=s.abort;return s.abort=function(){return s.aborted=!0,o.apply(s,arguments)},s.uri=t.uri,s.requestTime=Date.now(),s}},Ft=function(e,t){return e.start(t)+"-"+e.end(t)},Vt=function(e,t){var r=e.toString(16);return"00".substring(0,2-r.length)+r+(t%2?" ":"")},Ht=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},qt=function(e){var t={};return Object.keys(e).forEach((function(r){var n=e[r];ArrayBuffer.isView(n)?t[r]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:t[r]=n})),t},zt=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Wt=function(e){for(var t=Array.prototype.slice.call(e),r=16,n="",i=0;i<t.length/r;i++)n+=t.slice(i*r,i*r+r).map(Vt).join("")+" "+t.slice(i*r,i*r+r).map(Ht).join("")+"\n";return n},Gt=Object.freeze({createTransferableMessage:qt,initSegmentId:zt,hexDump:Wt,tagDump:function(e){var t=e.bytes;return Wt(t)},textRanges:function(e){var t="",r=void 0;for(r=0;r<e.length;r++)t+=Ft(e,r)+" ";return t}}),Xt=1/30,Kt=.1,Yt=function(e,t){var r=[],n=void 0;if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&r.push([e.start(n),e.end(n)]);return i().createTimeRanges(r)},Qt=function(e,t){return Yt(e,(function(e,r){return e-Xt<=t&&r+Xt>=t}))},Jt=function(e,t){return Yt(e,(function(e){return e-Xt>=t}))},Zt=function(e){var t=[];if(!e||!e.length)return"";for(var r=0;r<e.length;r++)t.push(e.start(r)+" => "+e.end(r));return t.join(", ")},er=function(e){for(var t=[],r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t},tr=function(e,t,r){var n=void 0,i=void 0;if(r&&r.cues)for(n=r.cues.length;n--;)(i=r.cues[n]).startTime<=t&&i.endTime>=e&&r.removeCue(i)},rr=function(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e},nr=function(e,t,r){var n=X().WebKitDataCue||X().VTTCue;if(t&&t.forEach((function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new n(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))}),e),r){var a=rr(e.mediaSource_.duration);if(r.forEach((function(e){var t=e.cueTime+this.timestampOffset;e.frames.forEach((function(e){var r=new n(t,t,e.value||e.url||e.data||"");r.frame=e,r.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return i().log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return i().log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return i().log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(r),this.metadataTrack_.addCue(r)}),this)}),e),e.metadataTrack_&&e.metadataTrack_.cues&&e.metadataTrack_.cues.length){for(var s=e.metadataTrack_.cues,o=[],u=0;u<s.length;u++)s[u]&&o.push(s[u]);var c=o.reduce((function(e,t){var r=e[t.startTime]||[];return r.push(t),e[t.startTime]=r,e}),{}),l=Object.keys(c).sort((function(e,t){return Number(e)-Number(t)}));l.forEach((function(e,t){var r=c[e],n=Number(l[t+1])||a;r.forEach((function(e){e.endTime=n}))}))}}},ir="undefined"!=typeof window?window:{},ar="undefined"==typeof Symbol?"__target":Symbol(),sr=ir.BlobBuilder||ir.WebKitBlobBuilder||ir.MozBlobBuilder||ir.MSBlobBuilder,or=ir.URL||ir.webkitURL||or&&or.msURL,ur=ir.Worker;function cr(e,t){return function(r){var n=this;if(!t)return new ur(e);if(ur&&!r){var i=pr(t.toString().replace(/^function.+?{/,"").slice(0,-1));return this[ar]=new ur(i),function(e,t){if(!e||!t)return;var r=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&or.revokeObjectURL(e.objURL),r.call(e)}}(this[ar],i),this[ar]}var a={postMessage:function(e){n.onmessage&&setTimeout((function(){n.onmessage({data:e,target:a})}))}};t.call(a),this.postMessage=function(e){setTimeout((function(){a.onmessage({data:e,target:n})}))},this.isThisThread=!0}}if(ur){var lr,dr=pr("self.onmessage = function () {}"),hr=new Uint8Array(1);try{(lr=new ur(dr)).postMessage(hr,[hr.buffer])}catch(e){ur=null}finally{or.revokeObjectURL(dr),lr&&lr.terminate()}}function pr(e){try{return or.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(r){var t=new sr;return t.append(e),or.createObjectURL(t.getBlob(type))}}var fr=new cr("./transmuxer-worker.worker.js",(function(e,t){var r=this;!function(){var e,t,n,i,a,s,o,u,c,l,d,h,p,f,m,g,y,v,b,_,T,w,S,C,k,E,O,A,x,P,L,M,I,D,U,R,j,N,B,$,F=Math.pow(2,32)-1;!function(){var e;if(w={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in w)w.hasOwnProperty(e)&&(w[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),k=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),C=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),O=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:E,audio:O},L=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),P=new Uint8Array([0,0,0,0,0,0,0,0]),M=new Uint8Array([0,0,0,0,0,0,0,0]),I=M,D=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),U=M,x=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),e=function(e){var t,r,n=[],i=0;for(t=1;t<arguments.length;t++)n.push(arguments[t]);for(t=n.length;t--;)i+=n[t].byteLength;for(r=new Uint8Array(i+8),new DataView(r.buffer,r.byteOffset,r.byteLength).setUint32(0,r.byteLength),r.set(e,4),t=0,i=8;t<n.length;t++)r.set(n[t],i),i+=n[t].byteLength;return r},t=function(){return e(w.dinf,e(w.dref,L))},n=function(t){return e(w.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},m=function(t){return e(w.hdlr,A[t])},f=function(t){var r=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(r[12]=t.samplerate>>>24&255,r[13]=t.samplerate>>>16&255,r[14]=t.samplerate>>>8&255,r[15]=255&t.samplerate),e(w.mdhd,r)},p=function(t){return e(w.mdia,f(t),m(t.type),s(t))},a=function(t){return e(w.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},s=function(r){return e(w.minf,"video"===r.type?e(w.vmhd,x):e(w.smhd,P),t(),y(r))},o=function(t,r){for(var n=[],i=r.length;i--;)n[i]=b(r[i]);return e.apply(null,[w.moof,a(t)].concat(n))},u=function(t){for(var r=t.length,n=[];r--;)n[r]=d(t[r]);return e.apply(null,[w.moov,l(4294967295)].concat(n).concat(c(t)))},c=function(t){for(var r=t.length,n=[];r--;)n[r]=_(t[r]);return e.apply(null,[w.mvex].concat(n))},l=function(t){var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e(w.mvhd,r)},g=function(t){var r,n,i=t.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,a[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e(w.sdtp,a)},y=function(t){return e(w.stbl,v(t),e(w.stts,U),e(w.stsc,I),e(w.stsz,D),e(w.stco,M))},v=function(t){return e(w.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===t.type?R(t):j(t))},R=function(t){var r,n=t.sps||[],i=t.pps||[],a=[],s=[];for(r=0;r<n.length;r++)a.push((65280&n[r].byteLength)>>>8),a.push(255&n[r].byteLength),a=a.concat(Array.prototype.slice.call(n[r]));for(r=0;r<i.length;r++)s.push((65280&i[r].byteLength)>>>8),s.push(255&i[r].byteLength),s=s.concat(Array.prototype.slice.call(i[r]));return e(w.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),e(w.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([n.length]).concat(a).concat([i.length]).concat(s))),e(w.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},j=function(t){return e(w.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),n(t))},h=function(t){var r=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return e(w.tkhd,r)},b=function(t){var r,n,i,a,s,o;return r=e(w.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(t.baseMediaDecodeTime/(F+1)),o=Math.floor(t.baseMediaDecodeTime%(F+1)),n=e(w.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),92,"audio"===t.type?(i=T(t,92),e(w.traf,r,n,i)):(a=g(t),i=T(t,a.length+92),e(w.traf,r,n,i,a))},d=function(t){return t.duration=t.duration||4294967295,e(w.trak,h(t),p(t))},_=function(t){var r=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(r[r.length-1]=0),e(w.trex,r)},$=function(e,t){var r=0,n=0,i=0,a=0;return e.length&&(void 0!==e[0].duration&&(r=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,r|n|i|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},B=function(t,r){var n,i,a,s;for(r+=20+16*(i=t.samples||[]).length,n=$(i,r),s=0;s<i.length;s++)a=i[s],n=n.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,61440&a.flags.degradationPriority,15&a.flags.degradationPriority,(4278190080&a.compositionTimeOffset)>>>24,(16711680&a.compositionTimeOffset)>>>16,(65280&a.compositionTimeOffset)>>>8,255&a.compositionTimeOffset]);return e(w.trun,new Uint8Array(n))},N=function(t,r){var n,i,a,s;for(r+=20+8*(i=t.samples||[]).length,n=$(i,r),s=0;s<i.length;s++)a=i[s],n=n.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size]);return e(w.trun,new Uint8Array(n))},T=function(e,t){return"audio"===e.type?N(e,t):B(e,t)};var V,H,q,z,W,G={ftyp:i=function(){return e(w.ftyp,S,C,S,k)},mdat:function(t){return e(w.mdat,t)},moof:o,moov:u,initSegment:function(e){var t,r=i(),n=u(e);return(t=new Uint8Array(r.byteLength+n.byteLength)).set(r),t.set(n,r.byteLength),t}},X=function(e){return e>>>0};q=function(e){return V(e,["moov","trak"]).reduce((function(e,t){var r,n,i,a,s;return(r=V(t,["tkhd"])[0])?(n=r[0],a=X(r[i=0===n?12:20]<<24|r[i+1]<<16|r[i+2]<<8|r[i+3]),(s=V(t,["mdia","mdhd"])[0])?(i=0===(n=s[0])?12:20,e[a]=X(s[i]<<24|s[i+1]<<16|s[i+2]<<8|s[i+3]),e):null):null}),{})},z=function(e,t){var r,n,i;return r=V(t,["moof","traf"]),n=[].concat.apply([],r.map((function(t){return V(t,["tfhd"]).map((function(r){var n,i;return n=X(r[4]<<24|r[5]<<16|r[6]<<8|r[7]),i=e[n]||9e4,(V(t,["tfdt"]).map((function(e){var t,r;return t=e[0],r=X(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(r*=Math.pow(2,32),r+=X(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),r}))[0]||1/0)/i}))}))),i=Math.min.apply(null,n),isFinite(i)?i:0},W=function(e){var t=V(e,["moov","trak"]),r=[];return t.forEach((function(e){var t=V(e,["mdia","hdlr"]),n=V(e,["tkhd"]);t.forEach((function(e,t){var i,a,s=H(e.subarray(8,12)),o=n[t];"vide"===s&&(a=0===(i=new DataView(o.buffer,o.byteOffset,o.byteLength)).getUint8(0)?i.getUint32(12):i.getUint32(20),r.push(a))}))})),r};var K={findBox:V=function(e,t){var r,n,i,a,s,o=[];if(!t.length)return null;for(r=0;r<e.byteLength;)n=X(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]),i=H(e.subarray(r+4,r+8)),a=n>1?r+n:e.byteLength,i===t[0]&&(1===t.length?o.push(e.subarray(r+8,a)):(s=V(e.subarray(r+8,a),t.slice(1))).length&&(o=o.concat(s))),r=a;return o},parseType:H=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},timescale:q,startTime:z,videoTrackIds:W},Y=function(){this.init=function(){var e={};this.on=function(t,r){e[t]||(e[t]=[]),e[t]=e[t].concat(r)},this.off=function(t,r){var n;return!!e[t]&&(n=e[t].indexOf(r),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var r,n,i,a;if(r=e[t])if(2===arguments.length)for(i=r.length,n=0;n<i;++n)r[n].call(this,arguments[1]);else{for(a=[],n=arguments.length,n=1;n<arguments.length;++n)a.push(arguments[n]);for(i=r.length,n=0;n<i;++n)r[n].apply(this,a)}},this.dispose=function(){e={}}}};Y.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),e},Y.prototype.push=function(e){this.trigger("data",e)},Y.prototype.flush=function(e){this.trigger("done",e)};var Q=Y,J=function(e,t){var r={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return r.dataOffset=t,r.compositionTimeOffset=e.pts-e.dts,r.duration=e.duration,r.size=4*e.length,r.size+=e.byteLength,e.keyFrame&&(r.flags.dependsOn=2,r.flags.isNonSyncSample=0),r},Z=function(e){var t,r,n=[],i=[];for(n.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(r=e[t]).nalUnitType?(n.length&&(n.duration=r.dts-n.dts,i.push(n)),(n=[r]).byteLength=r.data.byteLength,n.pts=r.pts,n.dts=r.dts):("slice_layer_without_partitioning_rbsp_idr"===r.nalUnitType&&(n.keyFrame=!0),n.duration=r.dts-n.dts,n.byteLength+=r.data.byteLength,n.push(r));return i.length&&(!n.duration||n.duration<=0)&&(n.duration=i[i.length-1].duration),i.push(n),i},ee=function(e){var t,r,n=[],i=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)(r=e[t]).keyFrame?(n.length&&(i.push(n),i.byteLength+=n.byteLength,i.nalCount+=n.nalCount,i.duration+=n.duration),(n=[r]).nalCount=r.length,n.byteLength=r.byteLength,n.pts=r.pts,n.dts=r.dts,n.duration=r.duration):(n.duration+=r.duration,n.nalCount+=r.length,n.byteLength+=r.byteLength,n.push(r));return i.length&&n.duration<=0&&(n.duration=i[i.length-1].duration),i.byteLength+=n.byteLength,i.nalCount+=n.nalCount,i.duration+=n.duration,i.push(n),i},te=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},re=function(e,t){var r,n,i,a,s,o=t||0,u=[];for(r=0;r<e.length;r++)for(a=e[r],n=0;n<a.length;n++)s=a[n],o+=(i=J(s,o)).size,u.push(i);return u},ne=function(e){var t,r,n,i,a,s,o=0,u=e.byteLength,c=e.nalCount,l=new Uint8Array(u+4*c),d=new DataView(l.buffer);for(t=0;t<e.length;t++)for(i=e[t],r=0;r<i.length;r++)for(a=i[r],n=0;n<a.length;n++)s=a[n],d.setUint32(o,s.data.byteLength),o+=4,l.set(s.data,o),o+=s.data.byteLength;return l},ie=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},ae=function(e,t){var r,n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),r=e.timelineStartInfo.baseMediaDecodeTime,r+=n,r=Math.max(0,r),"audio"===e.type&&(r*=e.samplerate/9e4,r=Math.floor(r)),r},se=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},oe=function(e){for(var t=0,r={payloadType:-1,payloadSize:0},n=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!r.payload&&4===n){r.payloadType=n,r.payloadSize=i,r.payload=e.subarray(t,t+i);break}t+=i,n=0,i=0}return r},ue=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},ce=function(e,t){var r,n,i,a,s=[];if(!(64&t[0]))return s;for(n=31&t[0],r=0;r<n;r++)a={type:3&t[(i=3*r)+2],pts:e},4&t[i+2]&&(a.ccData=t[i+3]<<8|t[i+4],s.push(a));return s},le=function(e){for(var t,r,n=e.byteLength,i=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===i[0]&&(s++,i.shift()),r[a]=e[s];return r},de=4,he=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new ye(0,0),new ye(0,1),new ye(1,0),new ye(1,1)],this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))}),this)};(he.prototype=new Q).push=function(e){var t,r,n;if("sei_rbsp"===e.nalUnitType&&(t=oe(e.escapedRBSP)).payloadType===de&&(r=ue(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=ce(e.pts,r),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},he.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2&&this.dispatchCea608Packet(e)}),this),this.captionPackets_.length=0,this.ccStreams_.forEach((function(e){e.flush()}),this)):this.ccStreams_.forEach((function(e){e.flush()}),this)},he.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},he.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},he.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},he.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)};var pe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},fe=function(e){return null===e?"":(e=pe[e]||e,String.fromCharCode(e))},me=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ge=function(){for(var e=[],t=15;t--;)e.push("");return e},ye=function e(t,r){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=r||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,r,n,i,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),r=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=r,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=ge();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ge();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=ge()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,i))a=fe((n=(3&n)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(n,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=fe((n=(3&n)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(n,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,i))this.column_+=3&i;else if(this.isPAC(n,i)){var s=me.indexOf(7968&t);"rollUp"===this.mode_&&this.setRollUp(e.pts,s),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===i&&(i=null),a=fe(n),a+=fe(i),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};ye.prototype=new Q,ye.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e){return e.trim()})).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},ye.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ge(),this.nonDisplayed_=ge(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},ye.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},ye.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},ye.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},ye.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},ye.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},ye.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},ye.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},ye.prototype.isNormalChar=function(e){return e>=32&&e<=127},ye.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=ge(),this.displayed_=ge()),void 0!==t&&t!==this.row_)for(var r=0;r<this.rollUpRows_;r++)this.displayed_[t-r]=this.displayed_[this.row_-r],this.displayed_[this.row_-r]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},ye.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var r=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,r)},ye.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},ye.prototype.popOn=function(e,t){var r=this.nonDisplayed_[this.row_];r+=t,this.nonDisplayed_[this.row_]=r},ye.prototype.rollUp=function(e,t){var r=this.displayed_[this.row_];r+=t,this.displayed_[this.row_]=r},ye.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},ye.prototype.paintOn=function(e,t){var r=this.displayed_[this.row_];r+=t,this.displayed_[this.row_]=r};var ve={CaptionStream:he,Cea608Stream:ye},be={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},_e=function(e,t){var r=1;for(e>t&&(r=-1);Math.abs(t-e)>4294967296;)e+=8589934592*r;return e},Te=function e(t){var r,n;e.prototype.init.call(this),this.type_=t,this.push=function(e){e.type===this.type_&&(void 0===n&&(n=e.dts),e.dts=_e(e.dts,n),e.pts=_e(e.pts,n),r=e.dts,this.trigger("data",e))},this.flush=function(){n=r,this.trigger("done")},this.discontinuity=function(){n=void 0,r=void 0}};Te.prototype=new Q;var we,Se=Te,Ce=function(e,t,r){var n,i="";for(n=t;n<r;n++)i+="%"+("00"+e[n].toString(16)).slice(-2);return i},ke=function(e,t,r){return decodeURIComponent(Ce(e,t,r))},Ee=function(e,t,r){return unescape(Ce(e,t,r))},Oe=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Ae={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=ke(e.data,1,t),e.value=ke(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=ke(e.data,1,t),e.url=ke(e.data,t+1,e.data.length);break}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=Ee(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(we=function(e){var t,r={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},n=0,i=[],a=0;if(we.prototype.init.call(this),this.dispatchType=be.METADATA_STREAM_TYPE.toString(16),r.descriptor)for(t=0;t<r.descriptor.length;t++)this.dispatchType+=("00"+r.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,s,o,u,c;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,i.length=0),0===i.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))r.debug;else if(i.push(e),a+=e.data.byteLength,1===i.length&&(n=Oe(e.data.subarray(6,10)),n+=10),!(a<n)){for(t={data:new Uint8Array(n),frames:[],pts:i[0].pts,dts:i[0].dts},c=0;c<n;)t.data.set(i[0].data.subarray(0,n-c),c),c+=i[0].data.byteLength,a-=i[0].data.byteLength,i.shift();s=10,64&t.data[5]&&(s+=4,s+=Oe(t.data.subarray(10,14)),n-=Oe(t.data.subarray(16,20)));do{if((o=Oe(t.data.subarray(s+4,s+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((u={id:String.fromCharCode(t.data[s],t.data[s+1],t.data[s+2],t.data[s+3]),data:t.data.subarray(s+10,s+o+10)}).key=u.id,Ae[u.id]&&(Ae[u.id](u),"com.apple.streaming.transportStreamTimestamp"===u.owner)){var l=u.data,d=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;d*=4,d+=3&l[7],u.timeStamp=d,void 0===t.pts&&void 0===t.dts&&(t.pts=u.timeStamp,t.dts=u.timeStamp),this.trigger("timestamp",u)}t.frames.push(u),s+=10,s+=o}while(s<n);this.trigger("data",t)}}}).prototype=new Q;var xe,Pe,Le,Me=we,Ie=Se,De=188;(xe=function(){var e=new Uint8Array(De),t=0;xe.prototype.init.call(this),this.push=function(r){var n,i=0,a=De;for(t?((n=new Uint8Array(r.byteLength+t)).set(e.subarray(0,t)),n.set(r,t),t=0):n=r;a<n.byteLength;)71!==n[i]||71!==n[a]?(i++,a++):(this.trigger("data",n.subarray(i,a)),i+=De,a+=De);i<n.byteLength&&(e.set(n.subarray(i),0),t=n.byteLength-i)},this.flush=function(){t===De&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")}}).prototype=new Q,(Pe=function(){var e,t,r,n;Pe.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,n){var i=0;n.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===n.type?t(e.subarray(i),n):r(e.subarray(i),n)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],n.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=n.pmtPid},r=function(e,t){var r,i;if(1&e[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},r=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<r;){var a=e[i],s=(31&e[i+1])<<8|e[i+2];a===be.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=s:a===be.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=s:a===be.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][s]=a),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=n.programMapTable}},this.push=function(t){var r={},n=4;if(r.payloadUnitStartIndicator=!!(64&t[1]),r.pid=31&t[1],r.pid<<=8,r.pid|=t[2],(48&t[3])>>>4>1&&(n+=t[n]+1),0===r.pid)r.type="pat",e(t.subarray(n),r),this.trigger("data",r);else if(r.pid===this.pmtPid)for(r.type="pmt",e(t.subarray(n),r),this.trigger("data",r);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,r]):this.processPes_(t,n,r)},this.processPes_=function(e,t,r){r.pid===this.programMapTable.video?r.streamType=be.H264_STREAM_TYPE:r.pid===this.programMapTable.audio?r.streamType=be.ADTS_STREAM_TYPE:r.streamType=this.programMapTable["timed-metadata"][r.pid],r.type="pes",r.data=e.subarray(t),this.trigger("data",r)}}).prototype=new Q,Pe.STREAM_TYPES={h264:27,adts:15},(Le=function(){var e=this,t={data:[],size:0},r={data:[],size:0},n={data:[],size:0},i=function(t,r,n){var i,a,s=new Uint8Array(t.size),o={type:r},u=0,c=0;if(t.data.length&&!(t.size<9)){for(o.trackId=t.data[0].pid,u=0;u<t.data.length;u++)a=t.data[u],s.set(a.data,c),c+=a.data.byteLength;var l,d,h;l=s,(d=o).packetLength=6+(l[4]<<8|l[5]),d.dataAlignmentIndicator=0!=(4&l[6]),192&(h=l[7])&&(d.pts=(14&l[9])<<27|(255&l[10])<<20|(254&l[11])<<12|(255&l[12])<<5|(254&l[13])>>>3,d.pts*=4,d.pts+=(6&l[13])>>>1,d.dts=d.pts,64&h&&(d.dts=(14&l[14])<<27|(255&l[15])<<20|(254&l[16])<<12|(255&l[17])<<5|(254&l[18])>>>3,d.dts*=4,d.dts+=(6&l[18])>>>1)),d.data=l.subarray(9+l[8]),i="video"===r||o.packetLength<=t.size,(n||i)&&(t.size=0,t.data.length=0),i&&e.trigger("data",o)}};Le.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var e,s;switch(a.streamType){case be.H264_STREAM_TYPE:case be.H264_STREAM_TYPE:e=t,s="video";break;case be.ADTS_STREAM_TYPE:e=r,s="audio";break;case be.METADATA_STREAM_TYPE:e=n,s="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&i(e,s,!0),e.data.push(a),e.size+=a.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},r=a.programMapTable;null!==r.video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+r.video,codec:"avc",type:"video"}),null!==r.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+r.audio,codec:"adts",type:"audio"}),e.trigger("data",t)}})[a.type]()},this.flush=function(){i(t,"video"),i(r,"audio"),i(n,"timed-metadata"),this.trigger("done")}}).prototype=new Q;var Ue={PAT_PID:0,MP2T_PACKET_LENGTH:De,TransportPacketStream:xe,TransportParseStream:Pe,ElementaryStream:Le,TimestampRolloverStream:Ie,CaptionStream:ve.CaptionStream,Cea608Stream:ve.Cea608Stream,MetadataStream:Me};for(var Re in be)be.hasOwnProperty(Re)&&(Ue[Re]=be[Re]);var je,Ne=Ue,Be=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(je=function(){var e;je.prototype.init.call(this),this.push=function(t){var r,n,i,a,s,o,u=0,c=0;if("audio"===t.type)for(e?(a=e,(e=new Uint8Array(a.byteLength+t.data.byteLength)).set(a),e.set(t.data,a.byteLength)):e=t.data;u+5<e.length;)if(255===e[u]&&240==(246&e[u+1])){if(n=2*(1&~e[u+1]),r=(3&e[u+3])<<11|e[u+4]<<3|(224&e[u+5])>>5,o=9e4*(s=1024*(1+(3&e[u+6])))/Be[(60&e[u+2])>>>2],i=u+r,e.byteLength<i)return;if(this.trigger("data",{pts:t.pts+c*o,dts:t.dts+c*o,sampleCount:s,audioobjecttype:1+(e[u+2]>>>6&3),channelcount:(1&e[u+2])<<2|(192&e[u+3])>>>6,samplerate:Be[(60&e[u+2])>>>2],samplingfrequencyindex:(60&e[u+2])>>>2,samplesize:16,data:e.subarray(u+7+n,i)}),e.byteLength===i)return void(e=void 0);c++,e=e.subarray(i)}else u++},this.flush=function(){this.trigger("done")}}).prototype=new Q;var $e,Fe,Ve,He=je,qe=function(e){var t=e.byteLength,r=0,n=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+n},this.loadWord=function(){var i=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");a.set(e.subarray(i,i+s)),r=new DataView(a.buffer).getUint32(0),n=8*s,t-=s},this.skipBits=function(e){var i;n>e?(r<<=e,n-=e):(e-=n,e-=8*(i=Math.floor(e/8)),t-=i,this.loadWord(),r<<=e,n-=e)},this.readBits=function(e){var i=Math.min(n,e),a=r>>>32-i;return(n-=i)>0?r<<=i:t>0&&this.loadWord(),(i=e-i)>0?a<<i|this.readBits(i):a},this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e)if(0!=(r&2147483648>>>e))return r<<=e,n-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(Fe=function(){var e,t,r=0;Fe.prototype.init.call(this),this.push=function(n){var i;for(t?((i=new Uint8Array(t.byteLength+n.data.byteLength)).set(t),i.set(n.data,t.byteLength),t=i):t=n.data;r<t.byteLength-3;r++)if(1===t[r+2]){e=r+5;break}for(;e<t.byteLength;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}r+3!==e-2&&this.trigger("data",t.subarray(r+3,e-2));do{e++}while(1!==t[e]&&e<t.length);r=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(r+3,e-2)),r=e-2,e+=3;break;default:e+=3}t=t.subarray(r),e-=r,r=0},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(r+3)),t=null,r=0,this.trigger("done")}}).prototype=new Q,Ve={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},($e=function(){var e,t,r,n,i,a,s,o=new Fe;$e.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,r=e.pts,n=e.dts,o.push(e))},o.on("data",(function(s){var o={trackId:t,pts:r,dts:n,data:s};switch(31&s[0]){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=i(s.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=i(s.subarray(1)),o.config=a(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",o)})),o.on("done",(function(){e.trigger("done")})),this.flush=function(){o.flush()},s=function(e,t){var r,n=8,i=8;for(r=0;r<e;r++)0!==i&&(i=(n+t.readExpGolomb()+256)%256),n=0===i?n:i},i=function(e){for(var t,r,n=e.byteLength,i=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===i[0]&&(s++,i.shift()),r[a]=e[s];return r},a=function(e){var t,r,n,i,a,o,u,c,l,d,h,p,f,m=0,g=0,y=0,v=0,b=1;if(r=(t=new qe(e)).readUnsignedByte(),i=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),Ve[r]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==a?8:12,f=0;f<h;f++)t.readBoolean()&&s(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===o)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),f=0;f<u;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),c=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}p&&(b=p[0]/p[1])}return{profileIdc:r,levelIdc:n,profileCompatibility:i,width:Math.ceil((16*(c+1)-2*m-2*g)*b),height:(2-d)*(l+1)*16-2*y-2*v}}}).prototype=new Q;var ze,We={H264Stream:$e,NalByteStream:Fe};(ze=function(){var e=new Uint8Array,t=0;ze.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.parseId3TagSize=function(e,t){var r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?r+20:r+10},this.parseAdtsSize=function(e,t){var r=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|r},this.push=function(r){var n,i,a,s,o=0,u=0;for(e.length?(s=e.length,(e=new Uint8Array(r.byteLength+s)).set(e.subarray(0,s)),e.set(r,s)):e=r;e.length-u>=3;)if(e[u]!=="I".charCodeAt(0)||e[u+1]!=="D".charCodeAt(0)||e[u+2]!=="3".charCodeAt(0))if(!0&e[u]&&240==(240&e[u+1])){if(e.length-u<7)break;if((o=this.parseAdtsSize(e,u))>e.length)break;a={type:"audio",data:e.subarray(u,u+o),pts:t,dts:t},this.trigger("data",a),u+=o}else u++;else{if(e.length-u<10)break;if((o=this.parseId3TagSize(e,u))>e.length)break;i={type:"timed-metadata",data:e.subarray(u,u+o)},this.trigger("data",i),u+=o}n=e.length-u,e=n>0?e.subarray(u):new Uint8Array}}).prototype=new Q;var Ge,Xe,Ke,Ye,Qe,Je,Ze,et=ze,tt=[33,16,5,32,164,27],rt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],nt=function(e){for(var t=[];e--;)t.push(0);return t},it={96e3:[tt,[227,64],nt(154),[56]],88200:[tt,[231],nt(170),[56]],64e3:[tt,[248,192],nt(240),[56]],48e3:[tt,[255,192],nt(268),[55,148,128],nt(54),[112]],44100:[tt,[255,192],nt(268),[55,163,128],nt(84),[112]],32e3:[tt,[255,192],nt(268),[55,234],nt(226),[112]],24e3:[tt,[255,192],nt(268),[55,255,128],nt(268),[111,112],nt(126),[224]],16e3:[tt,[255,192],nt(268),[55,255,128],nt(268),[111,255],nt(269),[223,108],nt(195),[1,192]],12e3:[rt,nt(268),[3,127,248],nt(268),[6,255,240],nt(268),[13,255,224],nt(268),[27,253,128],nt(259),[56]],11025:[rt,nt(268),[3,127,248],nt(268),[6,255,240],nt(268),[13,255,224],nt(268),[27,255,192],nt(268),[55,175,128],nt(108),[112]],8e3:[rt,nt(268),[3,121,16],nt(47),[7]]},at=(Ge=it,Object.keys(Ge).reduce((function(e,t){return e[t]=new Uint8Array(Ge[t].reduce((function(e,t){return e.concat(t)}),[])),e}),{}));Je=function(e,t){return Xe(Qe(e,t))},Ze=function(e,t){return Ke(Ye(e),t)};Xe=function(e){return 9e4*e},Ke=function(e,t){return e*t},Ye=function(e){return e/9e4},Qe=function(e,t){return e/t};var st,ot,ut,ct,lt,dt,ht,pt=Je,ft=Ze,mt=We.H264Stream,gt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],yt=["width","height","profileIdc","levelIdc","profileCompatibility"];lt=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},dt=function(e,t){var r;if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},ht=function(e){var t,r=0;for(t=0;t<e.length;t++)r+=e[t].data.byteLength;return r},(ot=function(e,t){var r=[],n=0,i=0,a=0,s=1/0;t=t||{},ot.prototype.init.call(this),this.push=function(t){se(e,t),e&&gt.forEach((function(r){e[r]=t[r]})),r.push(t)},this.setEarliestDts=function(t){i=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var i,a,s,o;0!==r.length?(i=this.trimAdtsFramesByEarliestDts_(r),e.baseMediaDecodeTime=ae(e,t.keepOriginalTimestamps),this.prefixWithSilence_(e,i),e.samples=this.generateSampleTable_(i),s=G.mdat(this.concatenateFrameData_(i)),r=[],a=G.moof(n,[e]),o=new Uint8Array(a.byteLength+s.byteLength),n++,o.set(a),o.set(s,a.byteLength),ie(e),this.trigger("data",{track:e,boxes:o}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(e,t){var r,n,i,o,u=0,c=0,l=0;if(t.length&&(r=pt(e.baseMediaDecodeTime,e.samplerate),n=Math.ceil(9e4/(e.samplerate/1024)),a&&s&&(u=r-Math.max(a,s),l=(c=Math.floor(u/n))*n),!(c<1||l>45e3))){for((i=at[e.samplerate])||(i=t[0].data),o=0;o<c;o++)t.splice(o,0,{data:i});e.baseMediaDecodeTime-=Math.floor(ft(l,e.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(t){return e.minSegmentDts>=i?t:(e.minSegmentDts=1/0,t.filter((function(t){return t.dts>=i&&(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0)})))},this.generateSampleTable_=function(e){var t,r,n=[];for(t=0;t<e.length;t++)r=e[t],n.push({size:r.data.byteLength,duration:1024});return n},this.concatenateFrameData_=function(e){var t,r,n=0,i=new Uint8Array(ht(e));for(t=0;t<e.length;t++)r=e[t],i.set(r.data,n),n+=r.data.byteLength;return i}}).prototype=new Q,(st=function(e,t){var r,n,i=0,a=[],s=[];t=t||{},st.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){se(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.config,e.sps=[t.data],yt.forEach((function(t){e[t]=r[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var r,n,o,u,c,l;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(r=Z(a),(o=ee(r))[0][0].keyFrame||((n=this.getGopForFusion_(a[0],e))?(o.unshift(n),o.byteLength+=n.byteLength,o.nalCount+=n.nalCount,o.pts=n.pts,o.dts=n.dts,o.duration+=n.duration):o=te(o)),s.length){var d;if(!(d=t.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");ie(e),o=d}se(e,o),e.samples=re(o),c=G.mdat(ne(o)),e.baseMediaDecodeTime=ae(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),u=G.moof(i,[e]),l=new Uint8Array(u.byteLength+c.byteLength),i++,l.set(u),l.set(c,u.byteLength),this.trigger("data",{track:e,boxes:l}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){ie(e),r=void 0,n=void 0},this.getGopForFusion_=function(t){var r,n,i,a,s,o=1/0;for(s=0;s<this.gopCache_.length;s++)i=(a=this.gopCache_[s]).gop,e.pps&&dt(e.pps[0],a.pps[0])&&e.sps&&dt(e.sps[0],a.sps[0])&&(i.dts<e.timelineStartInfo.dts||(r=t.dts-i.dts-i.duration)>=-1e4&&r<=45e3&&(!n||o>r)&&(n=a,o=r));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,r,n,i,a,o,u,c;for(a=e.byteLength,o=e.nalCount,u=e.duration,t=r=0;t<s.length&&r<e.length&&(n=s[t],i=e[r],n.pts!==i.pts);)i.pts>n.pts?t++:(r++,a-=i.byteLength,o-=i.nalCount,u-=i.duration);return 0===r?e:r===e.length?null:((c=e.slice(r)).byteLength=a,c.duration=u,c.nalCount=o,c.pts=c[0].pts,c.dts=c[0].dts,c)},this.alignGopsAtEnd_=function(e){var t,r,n,i,a,o,u;for(t=s.length-1,r=e.length-1,a=null,o=!1;t>=0&&r>=0;){if(n=s[t],i=e[r],n.pts===i.pts){o=!0;break}n.pts>i.pts?t--:(t===s.length-1&&(a=r),r--)}if(!o&&null===a)return null;if(0===(u=o?r:a))return e;var c=e.slice(u),l=c.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return c.byteLength=l.byteLength,c.duration=l.duration,c.nalCount=l.nalCount,c.pts=c[0].pts,c.dts=c[0].dts,c},this.alignGopsWith=function(e){s=e}}).prototype=new Q,(ct=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ct.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}}).prototype=new Q,ct.prototype.flush=function(e){var t,r,n,i,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,yt.forEach((function(e){s.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,gt.forEach((function(e){s.info[e]=this.audioTrack[e]}),this)),1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,n=G.initSegment(this.pendingTracks),s.initSegment=new Uint8Array(n.byteLength),s.initSegment.set(n),s.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)s.data.set(this.pendingBoxes[i],a),a+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=t.startPts-o,t.startTime/=9e4,t.endTime=t.endPts-o,t.endTime/=9e4,s.captionStreams[t.stream]=!0,s.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(r=this.pendingMetadata[i]).cueTime=r.pts-o,r.cueTime/=9e4,s.metadata.push(r);s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(ut=function(e){var t,r,n=this,i=!0;ut.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};this.transmuxPipeline_=t,t.type="aac",t.metadataStream=new Ne.MetadataStream,t.aacStream=new et,t.audioTimestampRolloverStream=new Ne.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new Ne.TimestampRolloverStream("timed-metadata"),t.adtsStream=new He,t.coalesceStream=new ct(e,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",(function(e){t.aacStream.setTimestamp(e.timeStamp)})),t.aacStream.on("data",(function(i){"timed-metadata"!==i.type||t.audioSegmentStream||(r=r||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new ot(r,e),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))})),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="ts",i.metadataStream=new Ne.MetadataStream,i.packetStream=new Ne.TransportPacketStream,i.parseStream=new Ne.TransportParseStream,i.elementaryStream=new Ne.ElementaryStream,i.videoTimestampRolloverStream=new Ne.TimestampRolloverStream("video"),i.audioTimestampRolloverStream=new Ne.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new Ne.TimestampRolloverStream("timed-metadata"),i.adtsStream=new He,i.h264Stream=new mt,i.captionStream=new Ne.CaptionStream,i.coalesceStream=new ct(e,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream),i.elementaryStream.pipe(i.videoTimestampRolloverStream).pipe(i.h264Stream),i.elementaryStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.elementaryStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",(function(a){var s;if("metadata"===a.type){for(s=a.tracks.length;s--;)t||"video"!==a.tracks[s].type?r||"audio"!==a.tracks[s].type||((r=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new st(t,e),i.videoSegmentStream.on("timelineStartInfo",(function(e){r&&(r.timelineStartInfo=e,i.audioSegmentStream.setEarliestDts(e.dts))})),i.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",(function(e){r&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),r&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new ot(r,e),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream))}})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var n=this.transmuxPipeline_;this.baseMediaDecodeTime=e,r&&(r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,ie(r),r.timelineStartInfo.baseMediaDecodeTime=e,n.audioTimestampRolloverStream&&n.audioTimestampRolloverStream.discontinuity()),t&&(n.videoSegmentStream&&(n.videoSegmentStream.gopCache_=[],n.videoTimestampRolloverStream.discontinuity()),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,ie(t),n.captionStream.reset(),t.timelineStartInfo.baseMediaDecodeTime=e),n.timedMetadataTimestampRolloverStream&&n.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){r&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(i){var t=lt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new Q;var vt,bt,_t={Transmuxer:ut,VideoSegmentStream:st,AudioSegmentStream:ot,AUDIO_PROPERTIES:gt,VIDEO_PROPERTIES:yt},Tt=K.parseType,wt=function(e){return new Date(1e3*e-20828448e5)},St=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Ct=function(e){var t,r,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=[];for(t=0;t+4<e.length;t+=r)if(r=n.getUint32(t),t+=4,r<=0)i.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:i.push("slice_layer_without_partitioning_rbsp");break;case 5:i.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:i.push("sei_rbsp");break;case 7:i.push("seq_parameter_set_rbsp");break;case 8:i.push("pic_parameter_set_rbsp");break;case 9:i.push("access_unit_delimiter_rbsp");break;default:i.push("UNKNOWN NAL - "+e[t]&31)}return i},kt={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:vt(e.subarray(78,e.byteLength))}},avcC:function(e){var t,r,n,i,a=new DataView(e.buffer,e.byteOffset,e.byteLength),s={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},o=31&e[5];for(n=6,i=0;i<o;i++)r=a.getUint16(n),n+=2,s.sps.push(new Uint8Array(e.subarray(n,n+r))),n+=r;for(t=e[n],n++,i=0;i<t;i++)r=a.getUint16(n),n+=2,s.pps.push(new Uint8Array(e.subarray(n,n+r))),n+=r;return s},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={majorBrand:Tt(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},n=8;n<e.byteLength;)r.compatibleBrands.push(Tt(e.subarray(n,n+4))),n+=4;return r},dinf:function(e){return{boxes:vt(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:vt(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:Tt(e.subarray(8,12)),name:""},r=8;for(r=24;r<e.byteLength;r++){if(0===e[r]){r++;break}t.name+=String.fromCharCode(e[r])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:Ct(e)}},mdhd:function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:r.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===i.version?(n+=4,i.creationTime=wt(r.getUint32(n)),n+=8,i.modificationTime=wt(r.getUint32(n)),n+=4,i.timescale=r.getUint32(n),n+=8,i.duration=r.getUint32(n)):(i.creationTime=wt(r.getUint32(n)),n+=4,i.modificationTime=wt(r.getUint32(n)),n+=4,i.timescale=r.getUint32(n),n+=4,i.duration=r.getUint32(n)),n+=4,t=r.getUint16(n),i.language+=String.fromCharCode(96+(t>>10)),i.language+=String.fromCharCode(96+((992&t)>>5)),i.language+=String.fromCharCode(96+(31&t)),i},mdia:function(e){return{boxes:vt(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:vt(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(r.streamDescriptor=vt(e.subarray(28))[0]),r},moof:function(e){return{boxes:vt(e)}},moov:function(e){return{boxes:vt(e)}},mvex:function(e){return{boxes:vt(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(r+=4,n.creationTime=wt(t.getUint32(r)),r+=8,n.modificationTime=wt(t.getUint32(r)),r+=4,n.timescale=t.getUint32(r),r+=8,n.duration=t.getUint32(r)):(n.creationTime=wt(t.getUint32(r)),r+=4,n.modificationTime=wt(t.getUint32(r)),r+=4,n.timescale=t.getUint32(r),r+=4,n.duration=t.getUint32(r)),r+=4,n.rate=t.getUint16(r)+t.getUint16(r+2)/16,r+=4,n.volume=t.getUint8(r)+t.getUint8(r+1)/8,r+=2,r+=2,r+=8,n.matrix=new Uint32Array(e.subarray(r,r+36)),r+=36,r+=24,n.nextTrackId=t.getUint32(r),n},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)r.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return r},sidx:function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:r.getUint32(4),timescale:r.getUint32(8),earliestPresentationTime:r.getUint32(12),firstOffset:r.getUint32(16)},i=r.getUint16(22);for(t=24;i;t+=12,i--)n.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&r.getUint32(t),subsegmentDuration:r.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&r.getUint32(t+8)});return n},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:vt(e)}},stco:function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},i=r.getUint32(4);for(t=8;i;t+=4,i--)n.chunkOffsets.push(r.getUint32(t));return n},stsc:function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n=r.getUint32(4),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;n;t+=12,n--)i.sampleToChunks.push({firstChunk:r.getUint32(t),samplesPerChunk:r.getUint32(t+4),sampleDescriptionIndex:r.getUint32(t+8)});return i},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:vt(e.subarray(8))}},stsz:function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:r.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)n.entries.push(r.getUint32(t));return n},stts:function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},i=r.getUint32(4);for(t=8;i;t+=8,i--)n.timeToSamples.push({sampleCount:r.getUint32(t),sampleDelta:r.getUint32(t+4)});return n},styp:function(e){return kt.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:r.getUint32(4)},i=1&n.flags[2],a=2&n.flags[2],s=8&n.flags[2],o=16&n.flags[2],u=32&n.flags[2],c=65536&n.flags[0],l=131072&n.flags[0];return t=8,i&&(t+=4,n.baseDataOffset=r.getUint32(12),t+=4),a&&(n.sampleDescriptionIndex=r.getUint32(t),t+=4),s&&(n.defaultSampleDuration=r.getUint32(t),t+=4),o&&(n.defaultSampleSize=r.getUint32(t),t+=4),u&&(n.defaultSampleFlags=r.getUint32(t)),c&&(n.durationIsEmpty=!0),!i&&l&&(n.baseDataOffsetIsMoof=!0),n},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(r+=4,n.creationTime=wt(t.getUint32(r)),r+=8,n.modificationTime=wt(t.getUint32(r)),r+=4,n.trackId=t.getUint32(r),r+=4,r+=8,n.duration=t.getUint32(r)):(n.creationTime=wt(t.getUint32(r)),r+=4,n.modificationTime=wt(t.getUint32(r)),r+=4,n.trackId=t.getUint32(r),r+=4,r+=4,n.duration=t.getUint32(r)),r+=4,r+=8,n.layer=t.getUint16(r),r+=2,n.alternateGroup=t.getUint16(r),r+=2,n.volume=t.getUint8(r)+t.getUint8(r+1)/8,r+=2,r+=2,n.matrix=new Uint32Array(e.subarray(r,r+36)),r+=36,n.width=t.getUint16(r)+t.getUint16(r+2)/16,r+=4,n.height=t.getUint16(r)+t.getUint16(r+2)/16,n},traf:function(e){return{boxes:vt(e)}},trak:function(e){return{boxes:vt(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&r.flags[2],a=4&r.flags[2],s=1&r.flags[1],o=2&r.flags[1],u=4&r.flags[1],c=8&r.flags[1],l=n.getUint32(4),d=8;for(i&&(r.dataOffset=n.getInt32(d),d+=4),a&&l&&(t={flags:St(e.subarray(d,d+4))},d+=4,s&&(t.duration=n.getUint32(d),d+=4),o&&(t.size=n.getUint32(d),d+=4),c&&(t.compositionTimeOffset=n.getUint32(d),d+=4),r.samples.push(t),l--);l--;)t={},s&&(t.duration=n.getUint32(d),d+=4),o&&(t.size=n.getUint32(d),d+=4),u&&(t.flags=St(e.subarray(d,d+4)),d+=4),c&&(t.compositionTimeOffset=n.getUint32(d),d+=4),r.samples.push(t);return r},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},Et={inspect:vt=function(e){for(var t,r,n,i,a,s=0,o=[],u=new ArrayBuffer(e.length),c=new Uint8Array(u),l=0;l<e.length;++l)c[l]=e[l];for(t=new DataView(u);s<e.byteLength;)r=t.getUint32(s),n=Tt(e.subarray(s+4,s+8)),i=r>1?s+r:e.byteLength,(a=(kt[n]||function(e){return{data:e}})(e.subarray(s+8,i))).size=r,a.type=n,o.push(a),s=i;return o},textify:bt=function(e,t){var r;return t=t||0,r=new Array(2*t+1).join(" "),e.map((function(e,n){return r+e.type+"\n"+Object.keys(e).filter((function(e){return"type"!==e&&"boxes"!==e})).map((function(t){var n=r+"  "+t+": ",i=e[t];if(i instanceof Uint8Array||i instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(i.buffer,i.byteOffset,i.byteLength)).map((function(e){return" "+("00"+e.toString(16)).slice(-2)})).join("").match(/.{1,24}/g);return a?1===a.length?n+"<"+a.join("").slice(1)+">":n+"<\n"+a.map((function(e){return r+"  "+e})).join("\n")+"\n"+r+"  >":n+"<>"}return n+JSON.stringify(i,null,2).split("\n").map((function(e,t){return 0===t?e:r+"  "+e})).join("\n")})).join("\n")+(e.boxes?"\n"+bt(e.boxes,t+1):"")})).join("\n")},parseTfdt:kt.tfdt,parseHdlr:kt.hdlr,parseTfhd:kt.tfhd,parseTrun:kt.trun},Ot=le,At=ve.CaptionStream,xt=function(e,t){for(var r=e,n=0;n<t.length;n++){var i=t[n];if(r<i.size)return i;r-=i.size}return null},Pt=function(e,t){var r=K.findBox(e,["moof","traf"]),n=K.findBox(e,["mdat"]),i={},a=[];return n.forEach((function(e,t){var n=r[t];a.push({mdat:e,traf:n})})),a.forEach((function(e){var r,n=e.mdat,a=e.traf,s=K.findBox(a,["tfhd"]),o=Et.parseTfhd(s[0]),u=o.trackId,c=K.findBox(a,["tfdt"]),l=c.length>0?Et.parseTfdt(c[0]).baseMediaDecodeTime:0,d=K.findBox(a,["trun"]);t===u&&d.length>0&&(r=function(e,t,r){var n,i,a,s,o=new DataView(e.buffer,e.byteOffset,e.byteLength),u=[];for(i=0;i+4<e.length;i+=a)if(a=o.getUint32(i),i+=4,!(a<=0))switch(31&e[i]){case 6:var c=e.subarray(i+1,i+1+a),l=xt(i,t);n={nalUnitType:"sei_rbsp",size:a,data:c,escapedRBSP:Ot(c),trackId:r},l?(n.pts=l.pts,n.dts=l.dts,s=l):(n.pts=s.pts,n.dts=s.dts),u.push(n)}return u}(n,function(e,t,r){var n=t,i=r.defaultSampleDuration||0,a=r.defaultSampleSize||0,s=r.trackId,o=[];return e.forEach((function(e){var t=Et.parseTrun(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=a),e.trackId=s,e.dts=n,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=n+e.compositionTimeOffset,n+=e.duration})),o=o.concat(t)})),o}(d,l,o),u),i[u]||(i[u]=[]),i[u]=i[u].concat(r))})),i},Lt={generator:G,probe:K,Transmuxer:_t.Transmuxer,AudioSegmentStream:_t.AudioSegmentStream,VideoSegmentStream:_t.VideoSegmentStream,CaptionParser:function(){var e,t,r,n,i,a=!1;this.isInitialized=function(){return a},this.init=function(){e=new At,a=!0,e.on("data",(function(e){e.startTime=e.startPts/n,e.endTime=e.endPts/n,i.captions.push(e),i.captionStreams[e.stream]=!0}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length)&&(r!==e[0]||n!==t[r])},this.parse=function(e,a,s){var o;if(!this.isInitialized())return null;if(!a||!s)return null;if(this.isNewInit(a,s))r=a[0],n=s[r];else if(!r||!n)return t.push(e),null;for(;t.length>0;){var u=t.shift();this.parse(u,a,s)}return null!==(o=function(e,t,r){return t?{seiNals:Pt(e,t)[t],timescale:r}:null}(e,r,n))&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),i):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;e.flush()},this.clearParsedCaptions=function(){i.captions=[],i.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],r=null,n=null,i?this.clearParsedCaptions():i={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}},Mt=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),It=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=r||{},this.self=t,this.init()}return Mt(e,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Lt.Transmuxer(this.options),function(e,t){t.on("data",(function(t){var r=t.initSegment;t.initSegment={data:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength};var n=t.data;t.data=n.buffer,e.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])})),t.captionStream&&t.captionStream.on("data",(function(t){e.postMessage({action:"caption",data:t})})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})}))}(this.self,this.transmuxer)}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),e}();new function(e){e.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new It(e,t.data.options):(this.messageHandlers||(this.messageHandlers=new It(e)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(r)}()})),mr={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},gr=function(e){return e.map((function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,r){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(r).toString(16)).slice(-2)}))}))},yr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={codecCount:0},r=void 0;return t.codecCount=e.split(",").length,t.codecCount=t.codecCount||2,(r=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(e))&&(t.videoCodec=r[2],t.videoObjectTypeIndicator=r[3]),t.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(e),t.audioProfile=t.audioProfile&&t.audioProfile[2],t},vr=function(e,t,r){return e+"/"+t+'; codecs="'+r.filter((function(e){return!!e})).join(", ")+'"'},br=function(e,t){var r=function(e){return e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t"}(t),n=function(e){var t=e.attributes||{};return t.CODECS?yr(t.CODECS):mr}(t),a=t.attributes||{},s=!0,o=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&a.AUDIO){var u=e.mediaGroups.AUDIO[a.AUDIO];if(u)for(var c in o=!0,s=!1,u)if(!u[c].uri&&!u[c].playlists){s=!0;break}}o&&!n.audioProfile&&(s||(n.audioProfile=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var r=e.mediaGroups.AUDIO[t];if(!r)return null;for(var n in r){var i=r[n];if(i.default&&i.playlists)return yr(i.playlists[0].attributes.CODECS).audioProfile}return null}(e,a.AUDIO)),n.audioProfile||(i().log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),n.audioProfile=mr.audioProfile));var l={};n.videoCodec&&(l.video=""+n.videoCodec+n.videoObjectTypeIndicator),n.audioProfile&&(l.audio="mp4a.40."+n.audioProfile);var d=vr("audio",r,[l.audio]),h=vr("video",r,[l.video]),p=vr("video",r,[l.video,l.audio]);return o?!s&&l.video?[h,d]:s||l.video?[p,d]:[d,d]:l.video?[p]:[d]},_r=function(e){return/mp4a\.\d+.\d+/i.test(e)},Tr=function(e){return/avc1\.[\da-f]+/i.test(e)},wr=function(e,t,r){if(null==t||!e.length)return[];var n=Math.ceil(9e4*(t-r+3)),i=void 0;for(i=0;i<e.length&&!(e[i].pts>n);i++);return e.slice(i)},Sr=function(e){function t(e,r){ot(this,t);var n=dt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i().EventTarget));n.timestampOffset_=0,n.pendingBuffers_=[],n.bufferUpdating_=!1,n.mediaSource_=e,n.codecs_=r,n.audioCodec_=null,n.videoCodec_=null,n.audioDisabled_=!1,n.appendAudioInitSegment_=!0,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=i().browser.IE_VERSION>=11;var a={remux:!1,alignGopsAtEnd:n.safeAppend_};return n.codecs_.forEach((function(e){_r(e)?n.audioCodec_=e:Tr(e)&&(n.videoCodec_=e)})),n.transmuxer_=new fr,n.transmuxer_.postMessage({action:"init",options:a}),n.transmuxer_.onmessage=function(e){return"data"===e.data.action?n.data_(e):"done"===e.data.action?n.done_(e):"gopInfo"===e.data.action?n.appendGopInfo_(e):void 0},Object.defineProperty(n,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(n,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(n,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(n,"buffered",{get:function(){return function(e,t,r){var n=null,a=null,s=0,o=[],u=[];if(!e&&!t)return i().createTimeRange();if(!e)return t.buffered;if(!t)return e.buffered;if(r)return e.buffered;if(0===e.buffered.length&&0===t.buffered.length)return i().createTimeRange();for(var c=e.buffered,l=t.buffered,d=c.length;d--;)o.push({time:c.start(d),type:"start"}),o.push({time:c.end(d),type:"end"});for(d=l.length;d--;)o.push({time:l.start(d),type:"start"}),o.push({time:l.end(d),type:"end"});for(o.sort((function(e,t){return e.time-t.time})),d=0;d<o.length;d++)"start"===o[d].type?2==++s&&(n=o[d].time):"end"===o[d].type&&1==--s&&(a=o[d].time),null!==n&&null!==a&&(u.push([n,a]),n=null,a=null);return i().createTimeRanges(u)}(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),n}return lt(t,e),ut(t,[{key:"data_",value:function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),function(e,t,r){var n=t.player_;if(r.captions&&r.captions.length)for(var i in e.inbandTextTracks_||(e.inbandTextTracks_={}),r.captionStreams)if(!e.inbandTextTracks_[i]){n.tech_.trigger({type:"usage",name:"hls-608"});var a=n.textTracks().getTrackById(i);e.inbandTextTracks_[i]=a||n.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}r.metadata&&r.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=r.metadata.dispatchType)}(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(e){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"createRealSourceBuffers_",value:function(){var e=this,t=["audio","video"];t.forEach((function(r){if(e[r+"Codec_"]&&!e[r+"Buffer_"]){var n=null;if(e.mediaSource_[r+"Buffer_"])(n=e.mediaSource_[r+"Buffer_"]).updating=!1;else{var i=r+'/mp4;codecs="'+e[r+"Codec_"]+'"';n=function(e,t){var r=e.addSourceBuffer(t),n=Object.create(null);n.updating=!1,n.realBuffer_=r;var i=function(e){"function"==typeof r[e]?n[e]=function(){return r[e].apply(r,arguments)}:void 0===n[e]&&Object.defineProperty(n,e,{get:function(){return r[e]},set:function(t){return r[e]=t}})};for(var a in r)i(a);return n}(e.mediaSource_.nativeMediaSource_,i),e.mediaSource_[r+"Buffer_"]=n}e[r+"Buffer_"]=n,["update","updatestart","updateend"].forEach((function(i){n.addEventListener(i,(function(){if("audio"!==r||!e.audioDisabled_)return"updateend"===i&&(e[r+"Buffer_"].updating=!1),t.every((function(t){return!("audio"!==t||!e.audioDisabled_)||(r===t||!e[t+"Buffer_"]||!e[t+"Buffer_"].updating)}))?e.trigger(i):void 0}))}))}}))}},{key:"appendBuffer",value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:wr(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(e){this.gopBuffer_=function(e,t,r){if(!t.length)return e;if(r)return t.slice();for(var n=t[0].pts,i=0;i<e.length&&!(e[i].pts>=n);i++);return e.slice(0,i).concat(t)}(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=function(e,t,r,n){for(var i=Math.ceil(9e4*(t-n)),a=Math.ceil(9e4*(r-n)),s=e.slice(),o=e.length;o--&&!(e[o].pts<=a););if(-1===o)return s;for(var u=o+1;u--&&!(e[u].pts<=i););return u=Math.max(u,0),s.splice(u,o-u+1),s}(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),tr(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var r in this.inbandTextTracks_)tr(e,t,this.inbandTextTracks_[r])}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};e=this.pendingBuffers_.reduce((function(e,t){var r=t.type,n=t.data,i=t.initSegment;return e[r].segments.push(n),e[r].bytes+=n.byteLength,e[r].initSegment=i,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[r].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e}),e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_),nr(this,e.captions,e.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var r=0,n=void 0;if(e.bytes){n=new Uint8Array(e.bytes),e.segments.forEach((function(e){n.set(e,r),r+=e.byteLength}));try{t.updating=!0,t.appendBuffer(n)}catch(e){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),t}(i().EventTarget),Cr=function(e){function t(){ot(this,t);var e=dt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=void 0;for(r in e.nativeMediaSource_=new(X().MediaSource),e.nativeMediaSource_)r in t.prototype||"function"!=typeof e.nativeMediaSource_[r]||(e[r]=e.nativeMediaSource_[r].bind(e.nativeMediaSource_));return e.duration_=NaN,Object.defineProperty(e,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){this.duration_=e,e===1/0||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(e,"seekable",{get:function(){return this.duration_===1/0?i().createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(e,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(e,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),e.sourceBuffers=[],e.activeSourceBuffers_=[],e.updateActiveSourceBuffers_=function(){if(e.activeSourceBuffers_.length=0,1===e.sourceBuffers.length){var t=e.sourceBuffers[0];return t.appendAudioInitSegment_=!0,t.audioDisabled_=!t.audioCodec_,void e.activeSourceBuffers_.push(t)}for(var r=!1,n=!0,i=0;i<e.player_.audioTracks().length;i++){var a=e.player_.audioTracks()[i];if(a.enabled&&"main"!==a.kind){r=!0,n=!1;break}}e.sourceBuffers.forEach((function(t,i){if(t.appendAudioInitSegment_=!0,t.videoCodec_&&t.audioCodec_)t.audioDisabled_=r;else if(t.videoCodec_&&!t.audioCodec_)t.audioDisabled_=!0,n=!1;else if(!t.videoCodec_&&t.audioCodec_&&(t.audioDisabled_=i?n:!n,t.audioDisabled_))return;e.activeSourceBuffers_.push(t)}))},e.onPlayerMediachange_=function(){e.sourceBuffers.forEach((function(e){e.appendAudioInitSegment_=!0}))},e.onHlsReset_=function(){e.sourceBuffers.forEach((function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})}))},e.onHlsSegmentTimeMapping_=function(t){e.sourceBuffers.forEach((function(e){return e.timeMapping_=t.mapping}))},["sourceopen","sourceclose","sourceended"].forEach((function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))}),e),e.on("sourceopen",(function(t){var r=ae().querySelector('[src="'+e.url_+'"]');r&&(e.player_=i()(r.parentNode),e.player_.tech_.on("hls-reset",e.onHlsReset_),e.player_.tech_.on("hls-segment-time-mapping",e.onHlsSegmentTimeMapping_),e.player_.audioTracks&&e.player_.audioTracks()&&(e.player_.audioTracks().on("change",e.updateActiveSourceBuffers_),e.player_.audioTracks().on("addtrack",e.updateActiveSourceBuffers_),e.player_.audioTracks().on("removetrack",e.updateActiveSourceBuffers_)),e.player_.on("mediachange",e.onPlayerMediachange_))})),e.on("sourceended",(function(t){for(var r=rr(e.duration),n=0;n<e.sourceBuffers.length;n++){var i=e.sourceBuffers[n],a=i.metadataTrack_&&i.metadataTrack_.cues;a&&a.length&&(a[a.length-1].endTime=r)}})),e.on("sourceclose",(function(e){this.sourceBuffers.forEach((function(e){e.transmuxer_&&e.transmuxer_.terminate()})),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))})),e}return lt(t,e),ut(t,[{key:"addSeekableRange_",value:function(e,t){var r=void 0;if(this.duration!==1/0)throw(r=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",r.code=11,r;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var t=void 0,r=function(e){var t={type:"",parameters:{}},r=e.trim().split(";");return t.type=r.shift().trim(),r.forEach((function(e){var r=e.trim().split("=");if(r.length>1){var n=r[0].replace(/"/g,"").trim(),i=r[1].replace(/"/g,"").trim();t.parameters[n]=i}})),t}(e);if(/^(video|audio)\/mp2t$/i.test(r.type)){var n=[];r.parameters&&r.parameters.codecs&&(n=r.parameters.codecs.split(","),n=(n=gr(n)).filter((function(e){return _r(e)||Tr(e)}))),0===n.length&&(n=["avc1.4d400d","mp4a.40.2"]),t=new Sr(this,n),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t}}]),t}(i().EventTarget),kr=0;i().mediaSources={};var Er=function(e,t){var r=i().mediaSources[e];if(!r)throw new Error("Media Source not found (Video.js)");r.trigger({type:"sourceopen",swfId:t})},Or=function(){return!!X().MediaSource&&!!X().MediaSource.isTypeSupported&&X().MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},Ar=function(){if(this.MediaSource={open:Er,supportsNativeMediaSources:Or},Or())return new Cr;throw new Error("Cannot use create a virtual MediaSource for this video")};Ar.open=Er,Ar.supportsNativeMediaSources=Or;var xr={createObjectURL:function(e){var t=void 0;return e instanceof Cr?(t=X().URL.createObjectURL(e.nativeMediaSource_),e.url_=t,t):e instanceof Cr?(t="blob:vjs-media-source/"+kr,kr++,i().mediaSources[t]=e,t):(t=X().URL.createObjectURL(e),e.url_=t,t)}};i().MediaSource=Ar,i().URL=xr;var Pr=i().EventTarget,Lr=i().mergeOptions,Mr=function(e,t){for(var r=Lr(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),n=0;n<t.playlists.length;n++){var i=yt(r,t.playlists[n]);i&&(r=i)}return gt(t,(function(e,t,n,i){if(e.playlists&&e.playlists.length){var a=e.playlists[0].uri,s=yt(r,e.playlists[0]);s&&((r=s).mediaGroups[t][n][i].playlists[0]=r.playlists[a])}})),r},Ir=function(e){function t(e,r,n,i){ot(this,t);var a=dt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(a.hls_=r,a.withCredentials=n,!e)throw new Error("A non-empty playlist URL or playlist is required");return a.on("minimumUpdatePeriod",(function(){a.refreshXml_()})),a.on("mediaupdatetimeout",(function(){a.refreshMedia_()})),"string"==typeof e?(a.srcUrl=e,a.state="HAVE_NOTHING",dt(a)):(a.masterPlaylistLoader_=i,a.state="HAVE_METADATA",a.started=!0,a.media(e),X().setTimeout((function(){a.trigger("loadedmetadata")}),0),a)}return lt(t,e),ut(t,[{key:"dispose",value:function(){this.stopRequest(),X().clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var t=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var r=!this.media_||e.uri!==this.media_.uri;this.state="HAVE_METADATA",r&&(this.media_&&this.trigger("mediachanging"),this.media_=e,this.refreshMedia_(),"HAVE_MASTER"!==t&&this.trigger("mediachange"))}},{key:"pause",value:function(){this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(){this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var e=qe(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});e.uri=this.srcUrl;for(var t=0;t<e.playlists.length;t++){var r="placeholder-uri-"+t;e.playlists[t].uri=r,e.playlists[r]=e.playlists[t]}return gt(e,(function(t,r,n,i){if(t.playlists&&t.playlists.length){var a="placeholder-uri-"+r+"-"+n+"-"+i;t.playlists[0].uri=a,e.playlists[a]=t.playlists[0]}})),vt(e),bt(e),e}},{key:"start",value:function(){var e=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(t,r){if(e.request){if(e.request=null,t)return e.error={status:r.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:r.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=r.responseText,r.responseHeaders&&r.responseHeaders.date?e.masterLoaded_=Date.parse(r.responseHeaders.date):e.masterLoaded_=Date.now(),e.syncClientServerClock_(e.onClientServerClockSync_.bind(e))}}))}},{key:"syncClientServerClock_",value:function(e){var t=this,r=ze(this.masterXml_);return null===r?(this.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===r.method?(this.clientOffset_=r.value-Date.now(),e()):void(this.request=this.hls_.xhr({uri:st(this.srcUrl,r.value),method:r.method,withCredentials:this.withCredentials},(function(n,i){if(t.request){if(n)return t.clientOffset_=t.masterLoaded_-Date.now(),e();var a=void 0;a="HEAD"===r.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):t.masterLoaded_:Date.parse(i.responseText),t.clientOffset_=a-Date.now(),e()}})))}},{key:"onClientServerClockSync_",value:function(){var e=this;this.master=this.parseMasterXml(),this.state="HAVE_MASTER",this.trigger("loadedplaylist"),this.media_||this.media(this.master.playlists[0]),X().setTimeout((function(){e.trigger("loadedmetadata")}),0),this.master.minimumUpdatePeriod&&X().setTimeout((function(){e.trigger("minimumUpdatePeriod")}),this.master.minimumUpdatePeriod)}},{key:"refreshXml_",value:function(){var e=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(t,r){if(e.request){if(e.request=null,t)return e.error={status:r.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:r.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=r.responseText;var n=e.parseMasterXml();e.master=Mr(e.master,n),X().setTimeout((function(){e.trigger("minimumUpdatePeriod")}),e.master.minimumUpdatePeriod)}}))}},{key:"refreshMedia_",value:function(){var e=this,t=void 0,r=void 0;this.masterPlaylistLoader_?(t=this.masterPlaylistLoader_.master,r=this.masterPlaylistLoader_.parseMasterXml()):(t=this.master,r=this.parseMasterXml());var n=Mr(t,r);n?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=n:this.master=n,this.media_=n.playlists[this.media_.uri]):this.trigger("playlistunchanged"),this.media().endList||(this.mediaUpdateTimeout=X().setTimeout((function(){e.trigger("mediaupdatetimeout")}),_t(this.media(),!!n))),this.trigger("loadedplaylist")}}]),t}(Pr),Dr=function(e){return i().log.debug?i().log.debug.bind(i(),"VHS:",e+" >"):function(){}};function Ur(){}var Rr=function(){function e(t,r,n,i){ot(this,e),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,this.processedAppend_=!1,this.type_=n,this.mimeType_=r,this.logger_=Dr("SourceUpdater["+n+"]["+r+"]"),"closed"===t.readyState?t.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,r,i)):this.createSourceBuffer_(r,i)}return ut(e,[{key:"createSourceBuffer_",value:function(e,t){var r=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_("created SourceBuffer"),t&&(t.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?t.on("sourcebufferadded",(function(){r.start_()})):this.start_()}},{key:"start_",value:function(){var e=this;this.started_=!0,this.onUpdateendCallback_=function(){var t=e.pendingCallback_;e.pendingCallback_=null,e.logger_("buffered ["+Zt(e.buffered())+"]"),t&&t(),e.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(e){var t=this;this.processedAppend_&&this.queueCallback_((function(){t.sourceBuffer_.abort()}),e)}},{key:"appendBuffer",value:function(e,t){var r=this;this.processedAppend_=!0,this.queueCallback_((function(){r.sourceBuffer_.appendBuffer(e)}),t)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:i().createTimeRanges()}},{key:"remove",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ur;this.processedAppend_&&this.queueCallback_((function(){r.logger_("remove ["+e+" => "+t+"]"),r.sourceBuffer_.remove(e,t)}),n)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(e){var t=this;return void 0!==e&&(this.queueCallback_((function(){t.sourceBuffer_.timestampOffset=e})),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var e=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),e}(),jr={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Nr=2,Br=-101,$r=-102,Fr=function(e){var t,r,n={};return e.byterange&&(n.Range=(t=e.byterange,r=t.offset+t.length-1,"bytes="+t.offset+"-"+r)),n},Vr=function(e){e.forEach((function(e){e.abort()}))},Hr=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Br,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:$r,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Nr,xhr:t}:null},qr=function(e,t,r){var n=[],i=0;return function(a,s){if(a&&(Vr(e),n.push(a)),(i+=1)===e.length){if(s.endOfAllRequests=Date.now(),n.length>0){var o=function(e){return e.reduce((function(e,t){return t.code>e.code?t:e}))}(n);return r(o,s)}return s.encryptedBytes?function(e,t,r){e.addEventListener("message",(function n(i){if(i.data.source===t.requestId){e.removeEventListener("message",n);var a=i.data.decrypted;return t.bytes=new Uint8Array(a.bytes,a.byteOffset,a.byteLength),r(null,t)}})),e.postMessage(qt({source:t.requestId,encrypted:t.encryptedBytes,key:t.key.bytes,iv:t.key.iv}),[t.encryptedBytes.buffer,t.key.bytes.buffer])}(t,s,r):r(null,s)}}},zr=function(e,t){return function(r){var n,a,s;return e.stats=i().mergeOptions(e.stats,(a=(n=r).target,(s={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-a.requestTime||0}).bytesReceived=n.loaded,s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3),s)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(r,e)}},Wr=function(e,t,r,n,a,s,o){var u=[],c=qr(u,r,o);if(a.key){var l=e(i().mergeOptions(t,{uri:a.key.resolvedUri,responseType:"arraybuffer"}),function(e,t){return function(r,n){var i=n.response,a=Hr(r,n);if(a)return t(a,e);if(16!==i.byteLength)return t({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:Nr,xhr:n},e);var s=new DataView(i);return e.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),t(null,e)}}(a,c));u.push(l)}if(a.map&&!a.map.bytes){var d=e(i().mergeOptions(t,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:Fr(a.map)}),function(e,t,r){return function(n,i){var a=i.response,s=Hr(n,i);return s?r(s,e):0===a.byteLength?r({status:i.status,message:"Empty HLS segment content at URL: "+i.uri,code:Nr,xhr:i},e):(e.map.bytes=new Uint8Array(i.response),t.isInitialized()||t.init(),e.map.timescales=Ge().timescale(e.map.bytes),e.map.videoTrackIds=Ge().videoTrackIds(e.map.bytes),r(null,e))}}(a,n,c));u.push(d)}var h=e(i().mergeOptions(t,{uri:a.resolvedUri,responseType:"arraybuffer",headers:Fr(a)}),function(e,t,r){return function(n,i){var a=i.response,s=Hr(n,i),o=void 0;return s?r(s,e):0===a.byteLength?r({status:i.status,message:"Empty HLS segment content at URL: "+i.uri,code:Nr,xhr:i},e):(e.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(i),e.key?e.encryptedBytes=new Uint8Array(i.response):e.bytes=new Uint8Array(i.response),e.map&&e.map.bytes&&(t.isInitialized()||t.init(),(o=t.parse(e.bytes,e.map.videoTrackIds,e.map.timescales))&&o.captions&&(e.captionStreams=o.captionStreams,e.fmp4Captions=o.captions)),r(null,e))}}(a,n,c));return h.addEventListener("progress",zr(a,s)),u.push(h),function(){return Vr(u)}},Gr=function(e,t){var r;return e&&(r=X().getComputedStyle(e))?r[t]:""},Xr=function(e,t){var r=e.slice();e.sort((function(e,n){var i=t(e,n);return 0===i?r.indexOf(e)-r.indexOf(n):i}))},Kr=function(e,t){var r=void 0,n=void 0;return e.attributes.BANDWIDTH&&(r=e.attributes.BANDWIDTH),r=r||X().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),r-(n=n||X().Number.MAX_VALUE)},Yr=function(e,t,r){if(!e||!t)return!1;var n=r===e.segments.length;return e.endList&&"open"===t.readyState&&n},Qr=function(e){return"number"==typeof e&&isFinite(e)},Jr=function(e){function t(e){ot(this,t);var r=dt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return r.bandwidth=e.bandwidth,r.throughput={rate:0,count:0},r.roundTrip=NaN,r.resetStats_(),r.mediaIndex=null,r.hasPlayed_=e.hasPlayed,r.currentTime_=e.currentTime,r.seekable_=e.seekable,r.seeking_=e.seeking,r.duration_=e.duration,r.mediaSource_=e.mediaSource,r.hls_=e.hls,r.loaderType_=e.loaderType,r.startingMedia_=void 0,r.segmentMetadataTrack_=e.segmentMetadataTrack,r.goalBufferLength_=e.goalBufferLength,r.sourceType_=e.sourceType,r.inbandTextTracks_=e.inbandTextTracks,r.state_="INIT",r.checkBufferTimeout_=null,r.error_=void 0,r.currentTimeline_=-1,r.pendingSegment_=null,r.mimeType_=null,r.sourceUpdater_=null,r.xhrOptions_=null,r.activeInitSegmentId_=null,r.initSegments_={},r.captionParser_=new Xe.CaptionParser,r.decrypter_=e.decrypter,r.syncController_=e.syncController,r.syncPoint_={segmentIndex:0,time:0},r.syncController_.on("syncinfoupdate",(function(){return r.trigger("syncinfoupdate")})),r.mediaSource_.addEventListener("sourceopen",(function(){return r.ended_=!1})),r.fetchAtBuffer_=!1,r.logger_=Dr("SegmentLoader["+r.loaderType_+"]"),Object.defineProperty(r,"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e)}}),r}return lt(t,e),ut(t,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():i().createTimeRanges()}},{key:"initSegment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var r=zt(e),n=this.initSegments_[r];return t&&!n&&e.bytes&&(this.initSegments_[r]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,timescales:e.timescales,videoTrackIds:e.videoTrackIds}),n||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new Rr(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var r=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var i=r?r.id:null;if(this.logger_("playlist update ["+i+" => "+e.id+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(r&&r.uri===e.uri){var a=e.mediaSequence-r.mediaSequence;this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex&&(this.mediaIndex-=a),n&&(n.mediaIndex-=a,n.mediaIndex>=0&&(n.segment=e.segments[n.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(r,e)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(X().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(e,t){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(e){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_(),e),this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(e,t,r){if(this.sourceUpdater_&&this.sourceUpdater_.remove(e,t,r),tr(e,t,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)tr(e,t,this.inbandTextTracks_[n])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&X().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X().setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&X().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=X().setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(e)Yr(this.playlist_,this.mediaSource_,e.mediaIndex)?this.endOfStream():(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&((e.timeline!==this.currentTimeline_||null!==e.startOfSegment&&e.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment,this.captionParser_.clearAllCaptions()),this.loadSegment_(e))}}},{key:"checkBuffer_",value:function(e,t,r,n,i,a){var s=0,o=void 0;e.length&&(s=e.end(e.length-1));var u=Math.max(0,s-i);if(!t.segments.length)return null;if(u>=this.goalBufferLength_())return null;if(!n&&u>=1)return null;if(null===a)return r=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,r,null,!0);if(null!==r){var c=t.segments[r];return o=c&&c.end?c.end:s,this.generateSegmentInfo_(t,r+1,o,!1)}if(this.fetchAtBuffer_){var l=jt.getMediaInfoForTime(t,s,a.segmentIndex,a.time);r=l.mediaIndex,o=l.startTime}else{var d=jt.getMediaInfoForTime(t,i,a.segmentIndex,a.time);r=d.mediaIndex,o=d.startTime}return this.generateSegmentInfo_(t,r,o,!1)}},{key:"getSyncSegmentCandidate_",value:function(e){var t=this;if(-1===this.currentTimeline_)return 0;var r=e.segments.map((function(e,t){return{timeline:e.timeline,segmentIndex:t}})).filter((function(e){return e.timeline===t.currentTimeline_}));return r.length?r[Math.min(r.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(e,t,r,n){if(t<0||t>=e.segments.length)return null;var i=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:i.resolvedUri,mediaIndex:t,isSyncRequest:n,startOfSegment:r,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:i.timeline,duration:i.duration,segment:i}}},{key:"abortRequestEarly_",value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),r=e.bandwidth,n=this.pendingSegment_.duration,i=jt.estimateSegmentRequestTime(n,r,this.playlist_,e.bytesReceived),a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return((e.length?e.end(e.length-1):0)-t)/r}(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(i<=a)return!1;var s=function(e){var t=e.master,r=e.currentTime,n=e.bandwidth,i=e.duration,a=e.segmentDuration,s=e.timeUntilRebuffer,o=e.currentTimeline,u=e.syncController,c=t.playlists.filter((function(e){return!jt.isIncompatible(e)})),l=c.filter(jt.isEnabled);l.length||(l=c.filter((function(e){return!jt.isDisabled(e)})));var d=l.filter(jt.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var t=u.getSyncPoint(e,i,o,r)?1:2;return{playlist:e,rebufferingImpact:jt.estimateSegmentRequestTime(a,n,e)*t-s}})),h=d.filter((function(e){return e.rebufferingImpact<=0}));return Xr(h,(function(e,t){return Kr(t.playlist,e.playlist)})),h.length?h[0]:(Xr(d,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),d[0]||null)}({master:this.hls_.playlists.master,currentTime:t,bandwidth:r,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var o=i-a-s.rebufferingImpact,u=.5;return a<=Xt&&(u=1),!s.playlist||s.playlist.uri===this.playlist_.uri||o<u?!1:(this.bandwidth=s.playlist.attributes.BANDWIDTH*jr.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=Wr(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(e){var t=function(e,t,r){var n=void 0;return n=e.length&&e.start(0)>0&&e.start(0)<t?e.start(0):t-30,Math.min(n,t-r)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}},{key:"createSimplifiedSegmentObj_",value:function(e){var t=e.segment,r={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var n=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);r.key={resolvedUri:t.key.resolvedUri,iv:n}}return t.map&&(r.map=this.initSegment(t.map)),r}},{key:"segmentRequestFinished_",value:function(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===$r?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===Br?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&&(!function(e,t,r){for(var n in r)if(!e[n]){t.trigger({type:"usage",name:"hls-608"});var i=t.textTracks().getTrackById(n);e[n]=i||t.addRemoteTextTrack({kind:"captions",id:n,label:n},!1).track}}(this.inbandTextTracks_,this.hls_.tech_,e.captionStreams),function(e){var t=e.inbandTextTracks,r=e.captionArray,n=e.timestampOffset;if(r){var i=window.WebKitDataCue||window.VTTCue;r.forEach((function(e){var r=e.stream,a=e.startTime,s=e.endTime;t[r]&&(a+=n,s+=n,t[r].addCue(new i(a,s,e.text)))}))}}({inbandTextTracks:this.inbandTextTracks_,captionArray:e.fmp4Captions,timestampOffset:0}),this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_){var t=this.pendingSegment_,r=t.segment,n=this.syncController_.probeSegmentInfo(t);void 0===this.startingMedia_&&n&&(n.containsAudio||n.containsVideo)&&(this.startingMedia_={containsAudio:n.containsAudio,containsVideo:n.containsVideo});var i,a,s,o=(i=this.loaderType_,a=this.startingMedia_,s=n,"main"===i&&a&&s?s.containsAudio||s.containsVideo?a.containsVideo&&!s.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!a.containsVideo&&s.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);if(o)return this.error({message:o,blacklistDuration:1/0}),void this.trigger("error");if(t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(t.timestampOffset),this.trigger("timestampoffset"));var u=this.syncController_.mappingForTimeline(t.timeline);if(null!==u&&this.trigger({type:"segmenttimemapping",mapping:u}),this.state="APPENDING",r.map){var c=zt(r.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==c){var l=this.initSegment(r.map);this.sourceUpdater_.appendBuffer(l.bytes,(function(){e.activeInitSegmentId_=c}))}}t.byteLength=t.bytes.byteLength,"number"==typeof r.start&&"number"==typeof r.end?this.mediaSecondsLoaded+=r.end-r.start:this.mediaSecondsLoaded+=r.duration,this.logger_(function(e){var t=e.segment,r=t.start,n=t.end,i=e.playlist,a=i.mediaSequence,s=i.id,o=i.segments,u=void 0===o?[]:o,c=e.mediaIndex,l=e.timeline;return["appending ["+c+"] of ["+a+", "+(a+u.length)+"] from playlist ["+s+"]","["+r+" => "+n+"] in timeline ["+l+"]"].join(" ")}(t)),this.sourceUpdater_.appendBuffer(t.bytes,this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,r=null!==this.mediaIndex;(this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration)?this.resetEverything():(r&&this.trigger("bandwidthupdate"),this.trigger("progress"),Yr(e.playlist,this.mediaSource_,e.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(e){var t=this.throughput.rate,r=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/r*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(e){if(this.segmentMetadataTrack_){var t=e.segment,r=t.start,n=t.end;if(Qr(r)&&Qr(n)){tr(r,n,this.segmentMetadataTrack_);var i=X().WebKitDataCue||X().VTTCue,a={bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.uri,start:r,end:n},s=new i(r,n,JSON.stringify(a));s.value=a,this.segmentMetadataTrack_.addCue(s)}}}}]),t}(i().EventTarget),Zr=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},en=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),tn=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ot(this,t);var n=dt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.mediaSource_=null,n.subtitlesTrack_=null,n}return lt(t,e),ut(t,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return i().createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,r=e[e.length-1].startTime;return i().createTimeRanges([[t,r]])}},{key:"initSegment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var r=zt(e),n=this.initSegments_[r];if(t&&!n&&e.bytes){var i=en.byteLength+e.bytes.byteLength,a=new Uint8Array(i);a.set(e.bytes),a.set(en,e.bytes.byteLength),this.initSegments_[r]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return n||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(e,t){tr(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}}},{key:"skipEmptySegments_",value:function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var t=this.pendingSegment_,r=t.segment;if("function"!=typeof X().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var n=function(){e.handleSegment_()};return this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",n),void this.subtitlesTrack_.tech_.one("vttjserror",(function(){e.subtitlesTrack_.tech_.off("vttjsloaded",n),e.error({message:"Error loading vtt.js"}),e.state="READY",e.pause(),e.trigger("error")}))}r.requested=!0;try{this.parseVTTCues_(t)}catch(e){return this.error({message:e.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(t,this.syncController_.timelines[t.timeline],this.playlist_),t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");t.byteLength=t.bytes.byteLength,this.mediaSecondsLoaded+=r.duration,t.cues.length&&this.remove(t.cues[0].endTime,t.cues[t.cues.length-1].endTime),t.cues.forEach((function(t){e.subtitlesTrack_.addCue(t)})),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(e){var t=void 0,r=!1;"function"==typeof X().TextDecoder?t=new(X().TextDecoder)("utf8"):(t=X().WebVTT.StringDecoder(),r=!0);var n=new(X().WebVTT.Parser)(X(),X().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=function(t){return e.timestampmap=t},n.onparsingerror=function(e){i().log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var a=e.segment.map.bytes;r&&(a=Zr(a)),n.parse(a)}var s=e.bytes;r&&(s=Zr(s)),n.parse(s),n.flush()}},{key:"updateTimeMapping_",value:function(e,t,r){var n=e.segment;if(t)if(e.cues.length){var i=e.timestampmap,a=i.MPEGTS/9e4-i.LOCAL+t.mapping;if(e.cues.forEach((function(e){e.startTime+=a,e.endTime+=a})),!r.syncInfo){var s=e.cues[0].startTime,o=e.cues[e.cues.length-1].startTime;r.syncInfo={mediaSequence:r.mediaSequence+e.mediaIndex,time:Math.min(s,o-n.duration)}}}else n.empty=!0}}]),t}(Jr),rn=function(e,t){for(var r=e.cues,n=0;n<r.length;n++){var i=r[n];if(t>=i.adStartTime&&t<=i.adEndTime)return i}return null},nn=Ye().inspect,an=[{name:"VOD",run:function(e,t,r,n,i){if(r!==1/0){return{time:0,segmentIndex:0}}return null}},{name:"ProgramDateTime",run:function(e,t,r,n,i){if(!e.datetimeToDisplayTime)return null;var a=t.segments||[],s=null,o=null;i=i||0;for(var u=0;u<a.length;u++){var c=a[u];if(c.dateTimeObject){var l=c.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,d=Math.abs(i-l);if(null!==o&&o<d)break;o=d,s={time:l,segmentIndex:u}}}return s}},{name:"Segment",run:function(e,t,r,n,i){var a=t.segments||[],s=null,o=null;i=i||0;for(var u=0;u<a.length;u++){var c=a[u];if(c.timeline===n&&void 0!==c.start){var l=Math.abs(i-c.start);if(null!==o&&o<l)break;(!s||null===o||o>=l)&&(o=l,s={time:c.start,segmentIndex:u})}}return s}},{name:"Discontinuity",run:function(e,t,r,n,i){var a=null;if(i=i||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var u=t.discontinuityStarts[o],c=t.discontinuitySequence+o+1,l=e.discontinuities[c];if(l){var d=Math.abs(i-l.time);if(null!==s&&s<d)break;(!a||null===s||s>=d)&&(s=d,a={time:l.time,segmentIndex:u})}}return a}},{name:"Playlist",run:function(e,t,r,n,i){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],sn=function(e){function t(){ot(this,t);var e=dt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.inspectCache_=void 0,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=null,e.logger_=Dr("SyncController"),e}return lt(t,e),ut(t,[{key:"getSyncPoint",value:function(e,t,r,n){var i=this.runStrategies_(e,t,r,n);return i.length?this.selectSyncPoint_(i,{key:"time",value:n}):null}},{key:"getExpiredTime",value:function(e,t){if(!e||!e.segments)return null;var r=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!r.length)return null;var n=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+kt(e,n.segmentIndex,0))}},{key:"runStrategies_",value:function(e,t,r,n){for(var i=[],a=0;a<an.length;a++){var s=an[a],o=s.run(this,e,t,r,n);o&&(o.strategy=s.name,i.push({strategy:s.name,syncPoint:o}))}return i}},{key:"selectSyncPoint_",value:function(e,t){for(var r=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),i=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<n&&(n=s,r=e[a].syncPoint,i=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+i+"]: [time:"+r.time+", segmentIndex:"+r.segmentIndex+"]"),r}},{key:"saveExpiredSegmentInfo",value:function(e,t){for(var r=t.mediaSequence-e.mediaSequence-1;r>=0;r--){var n=e.segments[r];if(n&&void 0!==n.start){t.syncInfo={mediaSequence:e.mediaSequence+r,time:n.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(e){var t=e.segment,r=e.playlist,n=void 0;return(n=t.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,n)&&(this.saveDiscontinuitySyncInfo_(e),r.syncInfo||(r.syncInfo={mediaSequence:r.mediaSequence+e.mediaIndex,time:t.start})),n}},{key:"probeMp4Segment_",value:function(e){var t=e.segment,r=Ge().timescale(t.map.bytes),n=Ge().startTime(r,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=n),{start:n,end:n+t.duration}}},{key:"probeTsSegment_",value:function(e){var t=nn(e.bytes,this.inspectCache_),r=void 0,n=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,r=t.video[0].dtsTime,n=t.video[1].dtsTime):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,r=t.audio[0].dtsTime,n=t.audio[1].dtsTime),{start:r,end:n,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,t){var r=e.segment,n=this.timelines[e.timeline];if(null!==e.timestampOffset)n={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=n,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+n.time+"] [mapping: "+n.mapping+"]"),r.start=e.startOfSegment,r.end=t.end+n.mapping;else{if(!n)return!1;r.start=t.start+n.mapping,r.end=t.end+n.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,r=e.segment;if(r.discontinuity)this.discontinuities[r.timeline]={time:r.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var i=t.discontinuityStarts[n],a=t.discontinuitySequence+n+1,s=i-e.mediaIndex,o=Math.abs(s);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>o){var u=void 0;u=s<0?r.start-kt(t,e.mediaIndex,i):r.end+kt(t,e.mediaIndex+1,i),this.discontinuities[a]={time:u,accuracy:o}}}}}]),t}(i().EventTarget),on=new cr("./decrypter-worker.worker.js",(function(e,t){var r=this;!function(){var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=null,i=function(){function t(r){e(this,t),n||(n=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],r=e[1],n=t[4],i=r[4],a=void 0,s=void 0,o=void 0,u=[],c=[],l=void 0,d=void 0,h=void 0,p=void 0,f=void 0;for(a=0;a<256;a++)c[(u[a]=a<<1^283*(a>>7))^a]=a;for(s=o=0;!n[s];s^=l||1,o=c[o]||1)for(h=(h=o^o<<1^o<<2^o<<3^o<<4)>>8^255&h^99,n[s]=h,i[h]=s,f=16843009*u[d=u[l=u[s]]]^65537*d^257*l^16843008*s,p=257*u[h]^16843008*h,a=0;a<4;a++)t[a][s]=p=p<<24^p>>>8,r[a][h]=f=f<<24^f>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),r[a]=r[a].slice(0);return e}()),this._tables=[[n[0][0].slice(),n[0][1].slice(),n[0][2].slice(),n[0][3].slice(),n[0][4].slice()],[n[1][0].slice(),n[1][1].slice(),n[1][2].slice(),n[1][3].slice(),n[1][4].slice()]];var i=void 0,a=void 0,s=void 0,o=void 0,u=void 0,c=this._tables[0][4],l=this._tables[1],d=r.length,h=1;if(4!==d&&6!==d&&8!==d)throw new Error("Invalid aes key size");for(o=r.slice(0),u=[],this._key=[o,u],i=d;i<4*d+28;i++)s=o[i-1],(i%d==0||8===d&&i%d==4)&&(s=c[s>>>24]<<24^c[s>>16&255]<<16^c[s>>8&255]<<8^c[255&s],i%d==0&&(s=s<<8^s>>>24^h<<24,h=h<<1^283*(h>>7))),o[i]=o[i-d]^s;for(a=0;i;a++,i--)s=o[3&a?i:i-4],u[a]=i<=4||a<4?s:l[0][c[s>>>24]]^l[1][c[s>>16&255]]^l[2][c[s>>8&255]]^l[3][c[255&s]]}return t.prototype.decrypt=function(e,t,r,n,i,a){var s=this._key[1],o=e^s[0],u=n^s[1],c=r^s[2],l=t^s[3],d=void 0,h=void 0,p=void 0,f=s.length/4-2,m=void 0,g=4,y=this._tables[1],v=y[0],b=y[1],_=y[2],T=y[3],w=y[4];for(m=0;m<f;m++)d=v[o>>>24]^b[u>>16&255]^_[c>>8&255]^T[255&l]^s[g],h=v[u>>>24]^b[c>>16&255]^_[l>>8&255]^T[255&o]^s[g+1],p=v[c>>>24]^b[l>>16&255]^_[o>>8&255]^T[255&u]^s[g+2],l=v[l>>>24]^b[o>>16&255]^_[u>>8&255]^T[255&c]^s[g+3],g+=4,o=d,u=h,c=p;for(m=0;m<4;m++)i[(3&-m)+a]=w[o>>>24]<<24^w[u>>16&255]<<16^w[c>>8&255]<<8^w[255&l]^s[g++],d=o,o=u,u=c,c=l,l=d},t}(),a=function(){function t(){e(this,t),this.listeners={}}return t.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.prototype.off=function(e,t){if(!this.listeners[e])return!1;var r=this.listeners[e].indexOf(t);return this.listeners[e].splice(r,1),r>-1},t.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var r=t.length,n=0;n<r;++n)t[n].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,i)},t.prototype.dispose=function(){this.listeners={}},t.prototype.pipe=function(e){this.on("data",(function(t){e.push(t)}))},t}(),s=function(t){function r(){e(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.call(this,a));return n.jobs=[],n.delay=1,n.timeout_=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},r.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},r}(a),o=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},u=function(){function r(t,n,i,a){e(this,r);var u=r.STEP,c=new Int32Array(t.buffer),l=new Uint8Array(t.byteLength),d=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(c.subarray(d,d+u),n,i,l)),d=u;d<c.length;d+=u)i=new Uint32Array([o(c[d-4]),o(c[d-3]),o(c[d-2]),o(c[d-1])]),this.asyncStream_.push(this.decryptChunk_(c.subarray(d,d+u),n,i,l));this.asyncStream_.push((function(){var e;a(null,(e=l).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return r.prototype.decryptChunk_=function(e,t,r,n){return function(){var a=function(e,t,r){var n=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),a=new i(Array.prototype.slice.call(t)),s=new Uint8Array(e.byteLength),u=new Int32Array(s.buffer),c=void 0,l=void 0,d=void 0,h=void 0,p=void 0,f=void 0,m=void 0,g=void 0,y=void 0;for(c=r[0],l=r[1],d=r[2],h=r[3],y=0;y<n.length;y+=4)p=o(n[y]),f=o(n[y+1]),m=o(n[y+2]),g=o(n[y+3]),a.decrypt(p,f,m,g,u,y),u[y]=o(u[y]^c),u[y+1]=o(u[y+1]^l),u[y+2]=o(u[y+2]^d),u[y+3]=o(u[y+3]^h),c=p,l=f,d=m,h=g;return s}(e,t,r);n.set(a,e.byteOffset)}},t(r,null,[{key:"STEP",get:function(){return 32e3}}]),r}();new function(e){e.onmessage=function(t){var r=t.data,n=new Uint8Array(r.encrypted.bytes,r.encrypted.byteOffset,r.encrypted.byteLength),i=new Uint32Array(r.key.bytes,r.key.byteOffset,r.key.byteLength/4),a=new Uint32Array(r.iv.bytes,r.iv.byteOffset,r.iv.byteLength/4);new u(n,i,a,(function(t,n){var i,a;e.postMessage((i={source:r.source,decrypted:n},a={},Object.keys(i).forEach((function(e){var t=i[e];ArrayBuffer.isView(t)?a[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:a[e]=t})),a),[n.buffer])}))}}(r)}()})),un=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},cn=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},ln=function(e,t){t.activePlaylistLoader=e,e.load()},dn={AUDIO:function(e,t){return function(){var r=t.segmentLoaders[e],n=t.mediaTypes[e],a=t.blacklistCurrentPlaylist;cn(r,n);var s=n.activeTrack(),o=n.activeGroup(),u=(o.filter((function(e){return e.default}))[0]||o[0]).id,c=n.tracks[u];if(s!==c){for(var l in i().log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[l].enabled=n.tracks[l]===c;n.onTrackChanged()}else a({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var r=t.segmentLoaders[e],n=t.mediaTypes[e];i().log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),cn(r,n);var a=n.activeTrack();a&&(a.mode="disabled"),n.onTrackChanged()}}},hn={AUDIO:function(e,t,r){if(t){var n=r.tech,i=r.requestOptions,a=r.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,i),(!n.paused()||e.endList&&"none"!==n.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),i),n.paused()||a.load()})),t.on("error",dn[e](e,r))}},SUBTITLES:function(e,t,r){var n=r.tech,i=r.requestOptions,a=r.segmentLoaders[e],s=r.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,i),a.track(s.activeTrack()),(!n.paused()||e.endList&&"none"!==n.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),i),n.paused()||a.load()})),t.on("error",dn[e](e,r))}},pn=function(e,t){return function(r){return r.attributes[e]===t}},fn=function(e){return function(t){return t.resolvedUri===e}},mn={AUDIO:function(e,t){var r=t.hls,n=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions.withCredentials,o=t.master,u=o.mediaGroups,c=o.playlists,l=t.mediaTypes[e],d=l.groups,h=l.tracks,p=t.masterPlaylistLoader;for(var f in u[e]&&0!==Object.keys(u[e]).length||(u[e]={main:{default:{default:!0}}}),u[e]){d[f]||(d[f]=[]);var m=c.filter(pn(e,f));for(var g in u[e][f]){var y=u[e][f][g];m.filter(fn(y.resolvedUri)).length&&delete y.resolvedUri;var v=void 0;if(v=y.resolvedUri?new Tt(y.resolvedUri,r,s):y.playlists&&"dash"===n?new Ir(y.playlists[0],r,s,p):null,y=i().mergeOptions({id:g,playlistLoader:v},y),hn[e](e,y.playlistLoader,t),d[f].push(y),void 0===h[g]){var b=new(i().AudioTrack)({id:g,kind:un(y),enabled:!1,language:y.language,default:y.default,label:g});h[g]=b}}}a.on("error",dn[e](e,t))},SUBTITLES:function(e,t){var r=t.tech,n=t.hls,a=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions.withCredentials,u=t.master.mediaGroups,c=t.mediaTypes[e],l=c.groups,d=c.tracks,h=t.masterPlaylistLoader;for(var p in u[e])for(var f in l[p]||(l[p]=[]),u[e][p])if(!u[e][p][f].forced){var m=u[e][p][f],g=void 0;if("hls"===a?g=new Tt(m.resolvedUri,n,o):"dash"===a&&(g=new Ir(m.playlists[0],n,o,h)),m=i().mergeOptions({id:f,playlistLoader:g},m),hn[e](e,m.playlistLoader,t),l[p].push(m),void 0===d[f]){var y=r.addRemoteTextTrack({id:f,kind:"subtitles",enabled:!1,language:m.language,label:f},!1).track;d[f]=y}}s.on("error",dn[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var r=t.tech,n=t.master.mediaGroups,a=t.mediaTypes[e],s=a.groups,o=a.tracks;for(var u in n[e])for(var c in s[u]||(s[u]=[]),n[e][u]){var l=n[e][u][c];if(l.instreamId.match(/CC\d/)&&(s[u].push(i().mergeOptions({id:c},l)),void 0===o[c])){var d=r.addRemoteTextTrack({id:l.instreamId,kind:"captions",enabled:!1,language:l.language,label:c},!1).track;o[c]=d}}}},gn={AUDIO:function(e,t){return function(){var r=t.mediaTypes[e].tracks;for(var n in r)if(r[n].enabled)return r[n];return null}},SUBTITLES:function(e,t){return function(){var r=t.mediaTypes[e].tracks;for(var n in r)if("showing"===r[n].mode)return r[n];return null}}},yn=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){mn[t](t,e)}));var t=e.mediaTypes,r=e.masterPlaylistLoader,n=e.tech,i=e.hls;["AUDIO","SUBTITLES"].forEach((function(r){t[r].activeGroup=function(e,t){return function(r){var n=t.masterPlaylistLoader,i=t.mediaTypes[e].groups,a=n.media();if(!a)return null;var s=null;return a.attributes[e]&&(s=i[a.attributes[e]]),s=s||i.main,void 0===r?s:null===r?null:s.filter((function(e){return e.id===r.id}))[0]||null}}(r,e),t[r].activeTrack=gn[r](r,e),t[r].onGroupChanged=function(e,t){return function(){var r=t.segmentLoaders,n=r[e],i=r.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),u=a.activePlaylistLoader;cn(n,a),o&&(o.playlistLoader?(n.resyncLoader(),ln(o.playlistLoader,a)):u&&i.resetEverything())}}(r,e),t[r].onTrackChanged=function(e,t){return function(){var r=t.segmentLoaders,n=r[e],i=r.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),u=a.activePlaylistLoader;cn(n,a),o&&(o.playlistLoader?u!==o.playlistLoader?(n.track&&n.track(s),n.resetEverything(),ln(o.playlistLoader,a)):ln(o.playlistLoader,a):i.resetEverything())}}(r,e)}));var a=t.AUDIO.activeGroup(),s=(a.filter((function(e){return e.default}))[0]||a[0]).id;t.AUDIO.tracks[s].enabled=!0,t.AUDIO.onTrackChanged(),r.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))}));var o=function(){t.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"hls-audio-change"})};for(var u in n.audioTracks().addEventListener("change",o),n.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),i.on("dispose",(function(){n.audioTracks().removeEventListener("change",o),n.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),n.clearTracks("audio"),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[u])},vn=void 0,bn=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],_n=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Tn=function(e){function t(e){ot(this,t);var r,n=dt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),a=e.url,s=e.withCredentials,o=e.tech,u=e.bandwidth,c=e.externHls,l=e.useCueTags,d=e.blacklistDuration,h=e.enableLowInitialPlaylist,p=e.sourceType,f=e.seekTo;if(!a)throw new Error("A non-empty playlist URL is required");vn=c,n.withCredentials=s,n.tech_=o,n.hls_=o.hls,n.seekTo_=f,n.sourceType_=p,n.useCueTags_=l,n.blacklistDuration=d,n.enableLowInitialPlaylist=h,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:n.withCredentials,timeout:null},n.mediaTypes_=(r={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){r[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Ur,activeTrack:Ur,onGroupChanged:Ur,onTrackChanged:Ur}})),r),n.mediaSource=new(i().MediaSource),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_.bind(n)),n.seekable_=i().createTimeRanges(),n.hasPlayed_=function(){return!1},n.syncController_=new sn(e),n.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new on,n.inbandTextTracks_={};var m={hls:n.hls_,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.mediaSource.duration},hasPlayed:function(){return n.hasPlayed_()},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:u,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_};return n.masterPlaylistLoader_="dash"===n.sourceType_?new Ir(a,n.hls_,n.withCredentials):new Tt(a,n.hls_,n.withCredentials),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new Jr(i().mergeOptions(m,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),e),n.audioSegmentLoader_=new Jr(i().mergeOptions(m,{loaderType:"audio"}),e),n.subtitleSegmentLoader_=new tn(i().mergeOptions(m,{loaderType:"vtt"}),e),n.setupSegmentLoaderListeners_(),bn.forEach((function(e){n[e+"_"]=_n.bind(n,e)})),n.logger_=Dr("MPC"),n.masterPlaylistLoader_.load(),n}return lt(t,e),ut(t,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),r=1.5*e.masterPlaylistLoader_.targetDuration*1e3;Rt(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=r,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),yn({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,hls:e.hls_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t);try{e.setupSourceBuffers_()}catch(t){return i().log.warn("Failed to create SourceBuffers",t),e.mediaSource.endOfStream("decode")}e.setupFirstPlay(),e.trigger("selectedinitialmedia")})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){var t=e.masterPlaylistLoader_.media();if(!t){e.excludeUnsupportedVariants_();var r=void 0;return e.enableLowInitialPlaylist&&(r=e.selectInitialPlaylist()),r||(r=e.selectPlaylist()),e.initialMedia_=r,void e.masterPlaylistLoader_.media(e.initialMedia_)}if(e.useCueTags_&&e.updateAdCues_(t),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.updateDuration(),e.tech_.paused()||(e.mainSegmentLoader_.load(),e.audioSegmentLoader_&&e.audioSegmentLoader_.load()),!t.endList){var n=function(){var t=e.seekable();0!==t.length&&e.mediaSource.addSeekableRange_(t.start(0),t.end(0))};if(e.duration()!==1/0){e.tech_.one("durationchange",(function t(){e.duration()===1/0?n():e.tech_.one("durationchange",t)}))}else n()}})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),r=1.5*e.masterPlaylistLoader_.targetDuration*1e3;Rt(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=r,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))}},{key:"triggerPresenceUsage_",value:function(e,t){var r=e.mediaGroups||{},n=!0,i=Object.keys(r.AUDIO);for(var a in r.AUDIO)for(var s in r.AUDIO[a]){r.AUDIO[a][s].uri||(n=!1)}n&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(r.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),vn.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),vn.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.length&&Object.keys(r.AUDIO[i[0]]).length>1&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",(function(){var t=e.selectPlaylist(),r=e.masterPlaylistLoader_.media(),n=e.tech_.buffered(),i=n.length?n.end(n.length-1)-e.tech_.currentTime():0,a=e.bufferLowWaterLine();(!r.endList||e.duration()<jr.MAX_BUFFER_LOW_WATER_LINE||t.attributes.BANDWIDTH<r.attributes.BANDWIDTH||i>=a)&&e.masterPlaylistLoader_.media(t),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("ended",(function(){e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(){e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)})),this.mainSegmentLoader_.on("reseteverything",(function(){e.tech_.trigger("hls-reset")})),this.mainSegmentLoader_.on("segmenttimemapping",(function(t){e.tech_.trigger({type:"hls-segment-time-mapping",mapping:t.mapping})})),this.audioSegmentLoader_.on("ended",(function(){e.onEndOfStream()}))}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var e=this,t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetEverything((function(){e.tech_.setCurrentTime(e.tech_.currentTime())})))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.seekTo_(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_())return!1;if(!t.endList){var r=this.seekable();if(!r.length)return!1;if(i().browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.seekTo_(r.end(0)),e.hasPlayed_=function(){return!0}})),!1;this.trigger("firstplay"),this.seekTo_(r.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return i().log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var r=vn.Playlist.playlistEnd(e,t),n=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return r-n<=Kt;var a=i.end(i.length-1);return a-n<=Kt&&r-a<=Kt}},{key:"blacklistCurrentPlaylist",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=void 0,n=void 0;if(r=e.playlist||this.masterPlaylistLoader_.media(),t=t||e.blacklistDuration||this.blacklistDuration,!r){this.error=e;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var a=1===this.masterPlaylistLoader_.master.playlists.filter(Dt).length;return a?(i().log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(a)):(r.excludeUntil=Date.now()+1e3*t,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),n=this.selectPlaylist(),i().log.warn("Problem encountered with the current HLS playlist."+(e.message?" "+e.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(n))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var t=Qt(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:vn.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=void 0,t=void 0;if(this.masterPlaylistLoader_){var r=this.masterPlaylistLoader_.media();if(r){var n=this.syncController_.getExpiredTime(r,this.mediaSource.duration);if(null!==n&&0!==(e=vn.Playlist.seekable(r,n)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(r=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(r,this.mediaSource.duration)))return;if(0===(t=vn.Playlist.seekable(r,n)).length)return}t?t.start(0)>e.end(0)||e.start(0)>t.end(0)?this.seekable_=e:this.seekable_=i().createTimeRanges([[t.start(0)>e.start(0)?t.start(0):e.start(0),t.end(0)<e.end(0)?t.end(0):e.end(0)]]):this.seekable_=e,this.logger_("seekable updated ["+Zt(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")}}}}},{key:"updateDuration",value:function(){var e=this,t=this.mediaSource.duration,r=vn.Playlist.duration(this.masterPlaylistLoader_.media()),n=this.tech_.buffered(),i=function t(){e.mediaSource.duration=r,e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",t)};n.length>0&&(r=Math.max(r,n.end(n.length-1))),t!==r&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",i):i())}},{key:"dispose",value:function(){var e=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach((function(t){var r=e.mediaTypes_[t].groups;for(var n in r)r[n].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e,t=this.masterPlaylistLoader_.media();if(t&&"open"===this.mediaSource.readyState){if((e=br(this.masterPlaylistLoader_.master,t)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(e),this.excludeIncompatibleVariants_(t)}}},{key:"configureLoaderMimeTypes_",value:function(e){var t=e.length>1&&-1===e[0].indexOf(",")&&e[0]!==e[1]?new(i().EventTarget):null;this.mainSegmentLoader_.mimeType(e[0],t),e[1]&&this.audioSegmentLoader_.mimeType(e[1],t)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach((function(e){var t;e.attributes.CODECS&&X().MediaSource&&X().MediaSource.isTypeSupported&&!X().MediaSource.isTypeSupported('video/mp4; codecs="'+(t=e.attributes.CODECS,t.replace(/avc1\.(\d+)\.(\d+)/i,(function(e){return gr([e])[0]}))+'"'))&&(e.excludeUntil=1/0)}))}},{key:"excludeIncompatibleVariants_",value:function(e){var t=2,r=null,n=void 0;e.attributes.CODECS&&(n=yr(e.attributes.CODECS),r=n.videoCodec,t=n.codecCount),this.master().playlists.forEach((function(e){var n={codecCount:2,videoCodec:null};e.attributes.CODECS&&(n=yr(e.attributes.CODECS)),n.codecCount!==t&&(e.excludeUntil=1/0),n.videoCodec!==r&&(e.excludeUntil=1/0)}))}},{key:"updateAdCues_",value:function(e){var t=0,r=this.seekable();r.length&&(t=r.start(0)),function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.segments)for(var n=r,i=void 0,a=0;a<e.segments.length;a++){var s=e.segments[a];if(i||(i=rn(t,n+s.duration/2)),i){if("cueIn"in s){i.endTime=n,i.adEndTime=n,n+=s.duration,i=null;continue}if(n<i.endTime){n+=s.duration;continue}i.endTime+=s.duration}else if("cueOut"in s&&((i=new(X().VTTCue)(n,n+s.duration,s.cueOut)).adStartTime=n,i.adEndTime=n+parseFloat(s.cueOut),t.addCue(i)),"cueOutCont"in s){var o=void 0,u=void 0,c=s.cueOutCont.split("/").map(parseFloat),l=ht(c,2);o=l[0],u=l[1],(i=new(X().VTTCue)(n,n+s.duration,"")).adStartTime=n-o,i.adEndTime=i.adStartTime+u,t.addCue(i)}n+=s.duration}}(e,this.cueTagsTrack_,t)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=jr.GOAL_BUFFER_LENGTH,r=jr.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,jr.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*r,n)}},{key:"bufferLowWaterLine",value:function(){var e=this.tech_.currentTime(),t=jr.BUFFER_LOW_WATER_LINE,r=jr.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,jr.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*r,n)}}]),t}(i().EventTarget),wn=function e(t,r,n){ot(this,e);var i,a,s,o=t.masterPlaylistController_.fastQualityChange_.bind(t.masterPlaylistController_);if(r.attributes.RESOLUTION){var u=r.attributes.RESOLUTION;this.width=u.width,this.height=u.height}this.bandwidth=r.attributes.BANDWIDTH,this.id=n,this.enabled=(i=t.playlists,a=r.uri,s=o,function(e){var t=i.master.playlists[a],r=It(t),n=Dt(t);return void 0===e?n:(e?delete t.disabled:t.disabled=!0,e===n||r||(s(),e?i.trigger("renditionenabled"):i.trigger("renditiondisabled")),e)})},Sn=["seeking","seeked","pause","playing","error"],Cn=function(){function e(t){var r=this;ot(this,e),this.tech_=t.tech,this.seekable=t.seekable,this.seekTo=t.seekTo,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Dr("PlaybackWatcher"),this.logger_("initialize");var n=function(){return r.monitorCurrentTime_()},i=function(){return r.techWaiting_()},a=function(){return r.cancelTimer_()},s=function(){return r.fixesBadSeeks_()};this.tech_.on("seekablechanged",s),this.tech_.on("waiting",i),this.tech_.on(Sn,a),this.tech_.on("canplay",n),this.dispose=function(){r.logger_("dispose"),r.tech_.off("seekablechanged",s),r.tech_.off("waiting",i),r.tech_.off(Sn,a),r.tech_.off("canplay",n),r.checkCurrentTimeTimeout_&&X().clearTimeout(r.checkCurrentTimeTimeout_),r.cancelTimer_()}}return ut(e,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&X().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=X().setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Kt>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var e=this.tech_.seeking(),t=this.seekable(),r=this.tech_.currentTime(),n=void 0;e&&this.afterSeekableWindow_(t,r)&&(n=t.end(t.length-1));e&&this.beforeSeekableWindow_(t,r)&&(n=t.start(0)+Kt);return void 0!==n&&(this.logger_("Trying to seek outside of seekable at time "+r+" with seekable range "+Zt(t)+". Seeking to "+n+"."),this.seekTo(n),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),r=Qt(t,e);return r.length&&e+3<=r.end(0)?(this.cancelTimer_(),this.seekTo(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+r.start(0)+" -> "+r.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var r=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+r),this.cancelTimer_(),this.seekTo(r),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var n=this.tech_.buffered(),i=Jt(n,t);if(this.videoUnderflow_(i,n,t))return this.cancelTimer_(),this.seekTo(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(i.length>0){var a=i.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+a+", seeking to "+i.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,t),!0}return!1}},{key:"afterSeekableWindow_",value:function(e,t){return!!e.length&&t>e.end(e.length-1)+Kt}},{key:"beforeSeekableWindow_",value:function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-Kt)}},{key:"videoUnderflow_",value:function(e,t,r){if(0===e.length){var n=this.gapFromVideoUnderflow_(t,r);if(n)return this.logger_("Encountered a gap in video from "+n.start+" to "+n.end+". Seeking to current time "+r),!0}return!1}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),r=this.tech_.currentTime(),n=Jt(t,r);this.cancelTimer_(),0!==n.length&&r===e&&(this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.seekTo(n.start(0)+Xt),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var r=function(e){if(e.length<2)return i().createTimeRanges();for(var t=[],r=1;r<e.length;r++){var n=e.end(r-1),a=e.start(r);t.push([n,a])}return i().createTimeRanges(t)}(e),n=0;n<r.length;n++){var a=r.start(n),s=r.end(n);if(t-a<4&&t-a>2)return{start:a,end:s}}return null}}]),e}(),kn={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},En=function e(t,r){var n=0,a=0,s=i().mergeOptions(kn,r);t.ready((function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var o=function(){a&&t.currentTime(a)},u=function(e){null!=e&&(a=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",o),t.src(e),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},c=function(){if(Date.now()-n<1e3*s.errorInterval)t.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(s.getSource&&"function"==typeof s.getSource)return n=Date.now(),s.getSource.call(t,u);i().log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},l=function e(){t.off("loadedmetadata",o),t.off("error",c),t.off("dispose",e)};t.on("error",c),t.on("dispose",l),t.reloadSourceOnError=function(r){l(),e(t,r)}},On=function(e){En(this,e)};i().use("*",(function(e){return{setSource:function(e,t){t(null,e)},setCurrentTime:function(t){return e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(t),t},play:function(){e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(e.currentTime())}}}));var An={PlaylistLoader:Tt,Playlist:jt,Decrypter:at,AsyncStream:rt,decrypt:it,utils:Gt,STANDARD_PLAYLIST_SELECTOR:function(){return function(e,t,r,n){var i=e.playlists.map((function(e){var t,r;return t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,r=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height,{bandwidth:e.attributes.BANDWIDTH||X().Number.MAX_VALUE,width:t,height:r,playlist:e}}));Xr(i,(function(e,t){return e.bandwidth-t.bandwidth}));var a=(i=i.filter((function(e){return!jt.isIncompatible(e.playlist)}))).filter((function(e){return jt.isEnabled(e.playlist)}));a.length||(a=i.filter((function(e){return!jt.isDisabled(e.playlist)})));var s=a.filter((function(e){return e.bandwidth*jr.BANDWIDTH_VARIANCE<t})),o=s[s.length-1],u=s.filter((function(e){return e.bandwidth===o.bandwidth}))[0],c=s.filter((function(e){return e.width&&e.height}));Xr(c,(function(e,t){return e.width-t.width}));var l=c.filter((function(e){return e.width===r&&e.height===n}));o=l[l.length-1];var d=l.filter((function(e){return e.bandwidth===o.bandwidth}))[0],h=void 0,p=void 0,f=void 0;d||(p=(h=c.filter((function(e){return e.width>r||e.height>n}))).filter((function(e){return e.width===h[0].width&&e.height===h[0].height})),o=p[p.length-1],f=p.filter((function(e){return e.bandwidth===o.bandwidth}))[0]);var m=f||d||u||a[0]||i[0];return m?m.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt(Gr(this.tech_.el(),"width"),10),parseInt(Gr(this.tech_.el(),"height"),10))},INITIAL_PLAYLIST_SELECTOR:function(){var e=this.playlists.master.playlists.filter(jt.isEnabled);return Xr(e,(function(e,t){return Kr(e,t)})),e.filter((function(e){return yr(e.attributes.CODECS).videoCodec}))[0]||null},comparePlaylistBandwidth:Kr,comparePlaylistResolution:function(e,t){var r=void 0,n=void 0;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(r=e.attributes.RESOLUTION.width),r=r||X().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),r===(n=n||X().Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:r-n},xhr:$t()},xn=4194304;["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach((function(e){Object.defineProperty(An,e,{get:function(){return i().log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),jr[e]},set:function(t){i().log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?i().log.warn("value of Hls."+e+" must be greater than or equal to 0"):jr[e]=t}})}));var Pn=function(e){if(/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e))return"hls";return/^application\/dash\+xml/i.test(e)?"dash":null},Ln=function(e,t){for(var r=t.media(),n=-1,i=0;i<e.length;i++)if(e[i].id===r.uri){n=i;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})};An.canPlaySource=function(){return i().log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Mn=function(e){if("dash"===e.options_.sourceType){var t=i().players[e.tech_.options_.playerId];if(t.eme){var r=function(e,t,r){if(!e)return e;var n={};for(var a in e)n[a]={audioContentType:'audio/mp4; codecs="'+r.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+t.attributes.CODECS+'"'},t.contentProtection&&t.contentProtection[a]&&t.contentProtection[a].pssh&&(n[a].pssh=t.contentProtection[a].pssh),"string"==typeof e[a]&&(n[a].url=e[a]);return i().mergeOptions(e,n)}(e.source_.keySystems,e.playlists.media(),e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());r&&(t.currentSource().keySystems=r)}}};An.supportsNativeHls=function(){var e=ae().createElement("video");if(!i().getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),An.supportsNativeDash=!!i().getTech("Html5").isSupported()&&/maybe|probably/i.test(ae().createElement("video").canPlayType("application/dash+xml")),An.supportsTypeNatively=function(e){return"hls"===e?An.supportsNativeHls:"dash"===e&&An.supportsNativeDash},An.isSupported=function(){return i().log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var In=function(e){function t(e,r,n){ot(this,t);var a=dt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n.hls));if(r.options_&&r.options_.playerId){var s=i()(r.options_.playerId);s.hasOwnProperty("hls")||Object.defineProperty(s,"hls",{get:function(){return i().log.warn("player.hls is deprecated. Use player.tech().hls instead."),r.trigger({type:"usage",name:"hls-player-access"}),a}}),s.vhs=a,s.dash=a}if(a.tech_=r,a.source_=e,a.stats={},a.setOptions_(),a.options_.overrideNative&&r.overrideNativeAudioTracks&&r.overrideNativeVideoTracks)r.overrideNativeAudioTracks(!0),r.overrideNativeVideoTracks(!0);else if(a.options_.overrideNative&&(r.featuresNativeVideoTracks||r.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return a.on(ae(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=ae().fullscreenElement||ae().webkitFullscreenElement||ae().mozFullScreenElement||ae().msFullscreenElement;t&&t.contains(a.tech_.el())&&a.masterPlaylistController_.smoothQualityChange_()})),a.on(a.tech_,"error",(function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),a.on(a.tech_,"play",a.play),a}return lt(t,e),ut(t,[{key:"setOptions_",value:function(){var e=this;this.options_.withCredentials=this.options_.withCredentials||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=xn),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===xn,["withCredentials","bandwidth"].forEach((function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])})),this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(e,t){var r=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=An,this.options_.sourceType=Pn(t),this.options_.seekTo=function(e){r.tech_.setCurrentTime(e),r.setCurrentTime(e)},this.masterPlaylistController_=new Tn(this.options_),this.playbackWatcher_=new Cn(i().mergeOptions(this.options_,{seekable:function(){return r.seekable()}})),this.masterPlaylistController_.on("error",(function(){i().players[r.tech_.options_.playerId].error(r.masterPlaylistController_.error)})),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):An.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=An.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=void 0;return t=this.throughput>0?1/this.throughput:0,Math.floor(1/(e+t))},set:function(){i().log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return r.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return r.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return r.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return r.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return r.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return r.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return r.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return r.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return er(r.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return r.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return r.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return r.tech_.name_},enumerable:!0},duration:{get:function(){return r.tech_.duration()},enumerable:!0},master:{get:function(){return r.playlists.master},enumerable:!0},playerDimensions:{get:function(){return r.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return er(r.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return r.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e,t;t=(e=r).playlists,e.representations=function(){return t.master.playlists.filter((function(e){return!It(e)})).map((function(t,r){return new wn(e,t,t.uri)}))},Mn(r)})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.tech_.ready((function(){return r.setupQualityLevels_()})),this.tech_.el()&&this.tech_.src(i().URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var e=this,t=i().players[this.tech_.options_.playerId];t&&t.qualityLevels&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t,r;t=e.qualityLevels_,(r=e).representations().forEach((function(e){t.addQualityLevel(e)})),Ln(t,r.playlists)})),this.playlists.on("mediachange",(function(){Ln(e.qualityLevels_,e.playlists)})))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),ct(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(i().getComponent("Component")),Dn={name:"videojs-http-streaming",VERSION:"1.2.5",canHandleSource:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i().mergeOptions(i().options,t);return Dn.canPlayType(e.type,r)},handleSource:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i().mergeOptions(i().options,r);return t.hls=new In(e,t,n),t.hls.xhr=$t(),t.hls.src(e.src,e.type),t.hls},canPlayType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i().mergeOptions(i().options,t),n=r.hls.overrideNative,a=Pn(e),s=a&&(!An.supportsTypeNatively(a)||n);return s?"maybe":""}};function Un(e,t,r){var n=["hls-request-manifest","hls-request-playlist","hls-request-segment-1"],i=n.length,a=0,s={uri:"",count:0};e.Hls.xhr.beforeRequest=e=>{var o,u,c,l="requester=oo",d=e.uri.match(/(m3u8?|ts)$/g);!!r.live_metadata&&d&&(o=e.uri,u=d[0],c=".ts"===u?8:3,o===s.uri?(s.count++,s.count===c&&(t.trigger("intent:pause"),t.error({code:0,message:"unable to fetch hls segment or playlist"}))):s={uri:o,count:0}),e.uri.endsWith(l)||(e.uri=e.uri.concat("?",l)),a<i&&(t.trigger(n[a]),a++)}}void 0!==i().MediaSource&&void 0!==i().URL||(i().MediaSource=Ar,i().URL=xr),Ar.supportsNativeMediaSources()&&i().getTech("Html5").registerSourceHandler(Dn,0),i().HlsHandler=In,i().HlsSourceHandler=Dn,i().Hls=An,i().use||i().registerComponent("Hls",An),i().options.hls=i().options.hls||{},i().registerPlugin?i().registerPlugin("reloadSourceOnError",On):i().plugin("reloadSourceOnError",On);var Rn=r(8314),jn=r(7376);class Nn extends Rn.AnonymousSubject{constructor(e,t,r){super(e,t.do((e=>{this._value=e}))),this._value=r}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new jn.ObjectUnsubscribedError;return this._value}unsubscribe(){super.unsubscribe(),this._value=void 0}}const Bn=Nn;var $n=r(5100);r(2761),r(3810),r(7492),r(4115),r(496),r(3705),r(6651),r(6514),r(757),r(4005),r(8713),r(8678),r(7049),r(3538),r(7701),r(242),r(2433),r(1354),r(9794),r(2743),r(2276),r(1639),r(6165),r(7775),r(5285),r(5251),r(6771),r(6261),r(7537),r(8788),r(3449),r(6593),r(8321),r(60),r(1082),r(6679),r(2417),r(6873),r(3502),r(4507),r(5532),r(2285),r(6095),r(2821),r(3187),r(8316),r(1544),r(7619),r(1498),r(8409),r(600),r(9739),r(279),r(8391);var Fn=(...e)=>e;var Vn;(Vn={filterByLatestFrom:function(...e){var t=e.pop();return this.withLatestFrom(...e).filter((e=>t(...e))).map((([e])=>e))},bufferedWith:function(e,t=Fn){return $n.Observable.create((r=>{var n,i=!1,a=[],s={next:e=>{i=!0,n=e,a.forEach((e=>{r.next(t(e,n))})),a.splice(0)},error:e=>r.error(e),complete:()=>{}},o={next:e=>{if(!i)return a.push(e);r.next(t(e,n))},error:e=>r.error(e),complete:()=>r.complete()},u=this.subscribe(o),c=e.subscribe(s);return()=>{u.unsubscribe(),c.unsubscribe()}}))},withType:function(e,...t){if(t.length){var r=new Set(t.concat(e));return this.filter((e=>r.has(e.type)))}return this.filter((t=>t.type===e))}},e=>Object.keys(Vn).forEach((t=>e.prototype[t]=Vn[t])))($n.Observable);const Hn=$n.Observable;function qn({cneBeaconLibrary$:e,cneError$:t}){var r=["http://blinkinglights.cnevids.com/livestream"];return{library$:e,events$:t.filter((({video:e})=>!!e.live_metadata)).throttleTime(1e3).map((({video:e,error:t})=>({endpoints:r,video:e,error:t})))}}var zn=(e,t,r=0)=>{var n=t.withType("loadedmetadata","dfp-ads-manager-loaded");return e.distinctUntilChanged().skip(r).switchMap((e=>n.take(1).mapTo(e)))},Wn=new Map([["dfp-ad-complete","cne:videoad:end"],["dfp-ad-firstquartile","cne:ad:quartile-1"],["dfp-ad-metadata","cne:videoad:fetchsuccess"],["dfp-ad-midpoint","cne:ad:quartile-2"],["dfp-ad-requested","cne:videoad:fetch"],["dfp-ad-started","cne:ad:start"],["dfp-ad-thirdquartile","cne:ad:quartile-3"],["ended","cne:video:end"],["pause","cne:pause"],["play","cne:play"]]),Gn=new Map([["ADS_REQUEST_NETWORK_ERROR","cne:videoad:fetchexited"],["UNKNOWN_AD_RESPONSE","cne:videoad:emptyresponse"]]),Xn=e=>({eventString:e}),Kn=e=>t=>({data:t,eventString:e});function Yn({analyticsMute$:e,cneEventLibrary$:t,currentVideo$:r,isPlaying$:n,loadVideoId$:i,playerEvent$:a,quartile$:s,videoStart$:o,viewportStatus$:u}){var c=e.distinctUntilChanged().map((e=>({eventName:e?"Mute Video":"Unmute Video"}))),l=a.withType("dfp-ad-error").map((({adError:e})=>Gn.get(e&&e.code))).filter(Boolean),d=zn(r,a),h=zn(r,a,1),p=a.map((({type:e})=>Wn.get(e))).filter(Boolean),f=Hn.merge(u.map(Kn("cne:viewport")),u.skip(1).map((e=>{switch(e){case"FULLY_IN_VIEWPORT":return"viewport-enter";case"OUT_OF_VIEWPORT":return"viewport-exit"}return null})).filter(Boolean).map(Xn));return{library$:t,events$:Hn.merge(f,n.map(Kn("cne:is-playing")),p.map(Xn),l.map(Xn),c.map(Kn("cne:mute-change")),h.map(Kn("cne:video:change")),d.map(Kn("cne:video:current")),s.map((e=>Xn("cne:quartile-".concat(e)))),o.mapTo(Xn("cne:video:start")),i.mapTo(Xn("cne:load-video-id")))}}function Qn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(r),!0).forEach((function(t){Zn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ei={type:"stop"},ti={type:"playContent"};function ri({comscoreLibrary$:e,currentVideo$:t,isPlaying$:r,isSeeking$:n,loadVideoId$:i,playerEvent$:a,replay$:s}){var o=e=>e.filterByLatestFrom(n,((e,t)=>!t)),u=a.withType("dfp-ad-started").map((e=>(e=>({type:"playAd",adDuration:e}))(e.ad?e.ad.duration:0))),c=a.withType("dfp-content-resume").map((()=>ti)),l=i.filterByLatestFrom(r,((e,t)=>!0===t)).mapTo(ei),d=o(a.withType("play")).mapTo(ti),h=o(a.withType("pause")).mapTo(ei),p=s.mapTo(ti);return{library$:e,events$:Hn.merge(l,d,p,h,u,c).withLatestFrom(t,((e,t)=>{var{comscore_config:r}=t;return Jn(Jn({},e),{},{config:r})}))}}function ni({config$:e,currentVideo$:t,facebookLibrary$:r,playerEvent$:n,quartile$:i,videoStart$:a}){var s=a.mapTo("Start"),o=i.map((e=>"".concat(25*e,"% Quartile"))),u=n.withType("ended").mapTo("Ended");return{library$:r,events$:s.merge(o,u).map((e=>({type:e,custom:!0}))).withLatestFrom(t,e,(({type:e,custom:t},{brand:r},{location:n})=>({type:e,params:{brand:r,url:n,category:"Video View"},custom:t})))}}function ii(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ai(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(r),!0).forEach((function(t){si(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ii(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function si(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oi({brand:e,cne_produced:t,duration:r,id:n,location:i,partner:a,playerConfig:s,series_title:o,season_title:u,title:c,videoView:l}){var{analyticsUrl:d,playlist:h,embedLocation:p,playerType:f,playlistId:m,iu:g,isRightRail:y}=s,v="".concat(o||"null","_").concat(u||"null");return{pageLocation:d||i,videoBrand:e,videoId:n,videoLength:r,videoOandOFlag:!!p,videoPlayerName:function({brand:e,partner:t,embedLocation:r,playerType:n,playlistId:i,isRightRail:a,iu:s}){var o="".concat(i?"_playlist":"").concat("interlude"===n?"_interlude":"").concat(a?"_rightRail":""),u="".concat(e,"_").concat(s);return"".concat(r||t||u).concat(o)}({brand:e,partner:a,embedLocation:p,playerType:f,playlistId:m,isRightRail:y,iu:g}),videoPlaylist:h&&h.title||void 0,videoProducer:t,videoSeason:v,videoTitle:c,videoViewsInVisit:l}}function ui({config$:e,currentVideo$:t,seekEnd$:r,googleAnalyticsLibrary$:n,playerEvent$:i,quartile$:a,shareIntent$:s,videoStart$:o,videoStartType$:u,videoView$:c}){var l=a.startWith(0),d=i.withType("dfp-ad-requested").mapTo({event:"video-ad-call"}),h=i.withType("dfp-ad-started").map((e=>({event:"video-ad-view",videoAdLength:e&&e.ad?e.ad.duration:void 0,videoAdPosition:function(e){switch(e){case-1:return"postroll";case 0:return"preroll";case void 0:return"undefined";default:return"midroll"}}(e&&e.ad&&e.ad.podInfo?e.ad.podInfo.getPodIndex():void 0)}))),p=o.withLatestFrom(u,((e,t)=>t)).map((e=>({event:"video-start",videoPlayMethod:e}))),f=i.withType("ended").withLatestFrom(t,((e,{duration:t})=>({event:"video-complete",videoSecondsWatched:t}))),m=i.withType("fullscreenchange").mapTo({event:"video-full-screen"}),g=a.withLatestFrom(t,((e,{duration:t})=>({event:"video-progress",videoPercent:25*e,videoSecondsWatched:Math.floor(t/4*e)}))),y=t.mapTo({event:"video-loaded"}),v=r.withLatestFrom(l,((e,t)=>({event:"video-scrub",videoPercent:25*t}))),b=s.withLatestFrom(l,((e,t)=>({event:"video-share",videoPercent:25*t,videoShareType:e}))),_=Hn.merge(e,t,c.map((e=>({videoView:e})))).scan(((e,t)=>ai(ai({},e),t))).map(oi);return{library$:n,events$:Hn.merge(d,h,p,f,m,y,g,b,v).withLatestFrom(_,((e,t)=>ai(ai({},e),t)))}}function ci({moatLibrary$:e}){return{library$:e,events$:Hn.never()}}var li={1:"AdVideoFirstQuartile",2:"AdVideoMidpoint",3:"AdVideoThirdQuartile"};function di({analyticsVolume$:e,moatContentLibrary$:t,playerEvent$:r,quartile$:n,videoStart$:i,volume$:a}){return{library$:t,events$:Hn.merge(r.withType("ended").mapTo("AdVideoComplete"),r.withType("pause").mapTo("AdVideoPaused"),r.withType("play").mapTo("AdVideoPlaying"),n.map((e=>li[e])),i.mapTo("AdVideoStart"),a.mapTo("AdVideoVolumeChange")).withLatestFrom(e,((e,t)=>({type:e,adVolume:t})))}}function hi(e){var t=e.sources&&e.sources.filter((({type:e})=>"video/mp4"===e))[0],r=t?t.src:"";return{adLoadType:"2",airdate:e.premiere_date,assetid:e.id,isfullepisode:"y",length:e.duration,mediaUrl:r,program:e.series_title||e.title,title:e.title,type:"content"}}function pi(e){if(e)return{assetId:e.adId,type:"preroll"}}function fi({ad$:e,analyticsPause$:t,currentVideo$:r,loadVideoId$:n,nielsenLibrary$:i,playerEvent$:a}){var s=r.map(hi),o=e.map(pi),u=a.withType("currentTime").map((({value:e})=>Math.floor(e))).distinctUntilChanged().filter((e=>e>0)).share(),c=t.merge(a.withType("dfp-ad-paused"),n).withLatestFrom(u,((e,t)=>({type:"stop",data:t}))),l=a.withType("ended").withLatestFrom(u,((e,t)=>({type:"end",data:t}))),d=u.map((e=>({type:"setPlayheadPosition",data:e}))),h=r.switchMapTo(a.withType("playing").take(1)).withLatestFrom(s,((e,t)=>({type:"loadMetadata",data:t}))),p=a.withType("dfp-ad-loaded").withLatestFrom(o,((e,t)=>({type:"loadMetadata",data:t})));return{library$:i,events$:Hn.merge(l,p,h,d,c)}}function mi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mi(Object(r),!0).forEach((function(t){yi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vi=(e,t=Hn.of({}))=>r=>r.withLatestFrom(t,((t,r)=>({event:t,category:e,meta:gi(gi({},r),t.meta||{})}))),bi=({cneError$:e,currentVideo$:t,playerEvent$:r,quartile$:n,videoView$:i,videoStart$:a})=>{var s=r.withType("ended").mapTo({type:"Content End"}),o=n.map((e=>({type:"".concat(25*e,"% Quartile")}))),u=a.mapTo({type:"Content Start"}),c=function({currentVideo$:e,videoStart$:t,playerEvent$:r}){var n=r.withType("dfp-ad-started");return e.switchMapTo(Hn.merge(t,n).take(1)).mapTo({type:"Any Start"})}({currentVideo$:t,playerEvent$:r,videoStart$:a}),l=e.mapTo({type:"Video Error"}),d=i.map((e=>({videoViews:e}))),h=vi("Video View",d);return Hn.merge(u,s,l,o,c).let(h)},_i=({cneOverlay$:e,playerEvent$:t})=>{var r=t.withType("fullscreenchange").mapTo({type:"Full Screen"}),n=e.filter((e=>"share"===e.type)).mapTo({type:"Share Panel"}),i=vi("Player Chrome Event");return Hn.merge(r,n).let(i)},Ti=({analyticsPause$:e,analyticsResume$:t,adDisplaying$:r,currentVideo$:n,documentHidden$:i,mute$:a,muteToggle$:s,playerEvent$:o,seekEnd$:u,videoStart$:c,viewportPercentage$:l,viewportStatus$:d})=>{var h=s.withLatestFrom(a,r,((e,t,r)=>({type:(t?"Mute ":"Unmute ")+(r?"Ad":"Video")}))),p=o.withType("ready").take(1).mapTo({type:"Player Loaded"}),f=d.filter((e=>"FULLY_IN_VIEWPORT"===e)).mapTo({type:"Player In Viewport"}),m=function({currentVideo$:e,documentHidden$:t,videoStart$:r,viewportPercentage$:n},i=Hn.timer(2e3)){return e.switchMap((({id:e})=>r.mapTo(e))).switchMap((e=>n.filter((e=>e>.5)).startWith(!0).mergeMapTo(i).mapTo(e))).filterByLatestFrom(n,t,((e,t,r)=>!r&&t>.5)).distinctUntilChanged().mapTo({type:"2 Sec In-View Moat"})}({currentVideo$:n,documentHidden$:i,videoStart$:c,viewportPercentage$:l}),g=vi("Player Event");return Hn.merge(e.mapTo({type:"Pause Video"}),t.mapTo({type:"Resume Video"}),f,h,p,u.mapTo({type:"Scrub"}),m).let(g)},wi=({playerEvent$:e,videoView$:t})=>{var r=e.withType("dfp-ad-requested").mapTo({type:"Ad Call Made"}),n=e.withType("dfp-ad-complete").mapTo({type:"Ad Complete"}),i=e.withType("dfp-ad-started").mapTo({type:"Ad Start"}),a=e.withType("dfp-ad-metadata").mapTo({type:"Ad Metadata"}),s=e.withType("dfp-ad-loaded").mapTo({type:"Ad Loaded"}),o=e.withType("dfp-ad-error").filter((e=>e.adError)).map((e=>({type:"DFP Ad Error ".concat(e.adError.type,", ").concat(e.adError.code,", ").concat(e.adError.message,", ").concat(e.adError.innerError)}))),u=Hn.merge(e.withType("dfp-ad-firstquartile").mapTo({type:"Ad 1st Quartile"}),e.withType("dfp-ad-midpoint").mapTo({type:"Ad 2nd Quartile"}),e.withType("dfp-ad-thirdquartile").mapTo({type:"Ad 3rd Quartile"})),c=Hn.merge(e.withType("dfp-ad-paused").mapTo({type:"Ad Paused"}),e.withType("dfp-ad-resume").mapTo({type:"Ad Resumed"})),l=e.withType("dfp-ad-skipped").mapTo({type:"Ad Skipped"}),d=t.map((e=>({videoViews:e}))),h=vi("Video Ad",d);return Hn.merge(r,n,o,s,a,c,u,l,i).let(h)},Si=({playerEvent$:e,isLiveVideo$:t,contentResuming$:r,adDisplaying$:n,timer$:i=Hn.timer(0,1e3)},{heartbeatTimeIntervalOverride:a})=>{var s=Hn.merge(e.withType("play").mapTo(!0),r.mapTo(!0),e.withType("pause").mapTo(!1),n.mapTo(!1)),o=t.switchMap((t=>{var r=a||(t?1e4:3e4);return i.takeUntil(e.withType("ended")).filterByLatestFrom(s,((e,t)=>t)).scan((e=>e+1),0).filter((e=>(t&&30===e&&(r=3e4),e%(r/1e3)==0))).map((e=>({type:e})))})),u=vi("Video Heartbeat");return Hn.merge(o).let(u)};function Ci(e,{heartbeatTimeIntervalOverride:t}={}){var{ad$:r,adBlocked$:n,adUnitPath$:i,config$:a,currentVideo$:s,documentHidden$:o,infinityId$:u,isPersistent$:c,playsOnPage$:l,prerollPlayed$:d,sparrowLibrary$:h,trackSparrowIntent$:p,videoStartType$:f,viewportStatus$:m,videoView$:g,widthHeight$:y}=e;return{library$:h,events$:Hn.merge(_i(e),Ti(e),p,wi(e),bi(e),Si(e,{heartbeatTimeIntervalOverride:t})).withLatestFrom(r,n,i,a,s,o,u.startWith(null),c,l,d,f,g,m.startWith(null),y,(({category:e,event:t,meta:r},n,i,a,s,o,u,c,l,d,h,p,f,m,g)=>({ad:n,adBlocked:i,adUnitPath:a,category:e,config:s,dimensions:g,documentHidden:u,infinityId:c,isPersistent:l,meta:r,playsOnPage:d,prerollPlayed:h,type:t.type,video:o,videoStartType:p,videoView:f,viewportStatus:m})))}}var ki=e=>null!=e&&void 0!==e,Ei=(e,t)=>{if(e instanceof Array&&t instanceof Array){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!Ei(e[r],t[r]))return!1;return!0}return e===t};function Oi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ai(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oi(Object(r),!0).forEach((function(t){xi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pi=e=>e,Li=(e,t)=>e.distinctUntilChanged().map((e=>{var t="$"===e.slice(-1)?e.slice(0,-1):e;return e=>r=>Ai(Ai({},r),{},{[t]:e})})(t)),Mi=(e,t={})=>{var r=((e={},t=Pi)=>Object.keys(e).map((r=>t(e[r],r,e))))(e,Li);return Hn.merge(...r).scan(((e,t)=>t(e)),t)},Ii=e=>t=>(...r)=>{r.every(e)&&t(...r)},Di=(...e)=>(t,...r)=>{var n=r;return r=>{var i=e.map((e=>r[e]));Ei(i,n)||(n=i,t(...i))}};function Ui(e,t){return e.withLatestFrom(t,(({share_links:e,title:t,branded:r,branded_caption:n},{playerConfig:i})=>{var{hideHoverTitle:a,hidePosterTitle:s}=i;return{hideHoverTitle:a,hidePosterTitle:s,title:t,url:e?e.url:null,branded:r,branded_caption:n}}))}var Ri=e=>t=>t.withType("volumechange").map((()=>e.volume())).startWith(e.volume()),ji=e=>e.pluck("isContinuousPlay"),Ni=(e,t)=>Hn.merge(t.mapTo(!0),e.mapTo(!1)),Bi=e=>Hn.merge(e.withType("dfp-ad-loaded").map((({ad:e,adUnitPath:t})=>({ad:e,adUnitPath:t}))),e.withType("dfp-ad-complete").mapTo(void 0));function $i(e,t){var{adDisplaying$:r,adFinished$:n,adBlocked$:i,adBlockedUnique$:a,adSkippable$:s,videoIfAdsNotDisabled$:o,analyticsVolume$:u,animatedClipDisplaying$:c,captionsDisplayMode$:l,config$:d,contentResuming$:h,cne360AnimationInterval$:p,cne360CanvasSource$:f,cne360LatLong$:m,cne360MouseActive$:g,cne360MouseDrag$:y,currentTimeInMs$:v,currentVideo$:b,inSyncWithLiveStream$:_,seekLatestAfterPrerollForLive$:T,isLiveVideo$:w,isPlaying$:S,isPersistent$:C,loading$:k,mute$:E,playerEvent$:O,playlist$:A,showLiveEndCard$:x,showShareDropdown$:P,showPersistentMute$:L,smallLayout$:M,updateMessageOverlay$:I,videoView$:D,videoOrAdStart$:U,videoEndedOrSwitched$:R,widthHeight$:j}=e;return{viewModel$:Mi({adDisplaying$:r,adFinished$:n,adBlocked$:i,adBlockedUnique$:a,videoIfAdsNotDisabled$:o,adSkippable$:s,adUnit$:Bi(O),animatedClipDisplaying$:c,captionsDisplayMode$:l,cne360AnimationInterval$:p,cne360CanvasSource$:f,cne360LatLong$:m,cne360MouseActive$:g,cne360ShowCompass$:Ni(b,y),cneVideoTitle$:Ui(b,d),contentResuming$:h,currentTime$:v,currentVideo$:b,isContinuousPlay$:ji(d),isFullscreen$:O.withType("fullscreen").pluck("value"),isInSyncWithLiveStream$:_,seekLatestAfterPrerollForLive$:T,isLiveVideo$:w,isPlaying$:S,isPersistent$:C,loading$:k,messageOverlay$:I,mute$:E,playerType$:d.pluck("playerConfig","playerType"),playlist$:A,showLiveEndCard$:x,showPersistentMute$:L,showShareDropdown$:P,smallLayout$:M,userVolume$:u,videoOrAdStart$:U,videoEndedOrSwitched$:R,viewCount$:D,volume$:Ri(t)(O),widthHeight$:j}).publishBehavior({}).refCount()}}var Fi=(e,t,r)=>{var n=((e,t)=>[e._cne&&e._cne[t],e[t]])(e,t);return r?e===e.top?n:[...n,...Fi(e.parent,t,r)]:n};var Vi=(e,t,r)=>e.mapTo(!0).merge(t.withType("ended").withLatestFrom(r,((e,t)=>t))).distinctUntilChanged().publishReplay(1).refCount(),Hi=(e,t)=>e.filterByLatestFrom(t,((e,t)=>!t));function qi({toggleUserActive$:e,adRestart$:t,captionsDisplayMode$:r,captionsUpdateTextTrackDisplay$:n,closeMessage$:i,cneOverlay$:a,config$:s,currentVideo$:o,enterFullScreen$:u,exitFullScreen$:c,facadeReady$:l,focusChanged$:d,initializeInBandCaptions$:h,infinityId$:p,isLiveVideo$:f,liveLoadingState$:m,loadVideoId$:g,loadCaptions$:y,mouseLeavePlayer$:v,mute$:b,playerEvent$:_,saveSettings$:T,scrub$:w,seekLatest$:S,posterFrame$:C,setTime$:k,settingsMenu$:E,reportUserActivity$:O,settingsSubMenu$:A,shouldPause$:x,mergedPlay$:P,shouldShareVideo$:L,volume$:M,widthHeight$:I}){var D=function({config$:e,facadeReady$:t,ready$:r},n=window){var i=e.map((({canAccessParent:e,playerConfig:t})=>[t.onReady,e])).filter((([e])=>"string"==typeof e)).switchMap((e=>Hn.from(Fi(n,...e)))).distinct().filter((e=>"function"==typeof e));return r.withLatestFrom(t).switchMap((([,e])=>i.map((t=>({callback:t,facade:e})))))}({config$:s,facadeReady$:l,ready$:_.withType("ready")});return{adRestart$:t,autoplay$:Vi(g,_,s.pluck("isContinuousPlay")),captionsDisplayMode$:r,captionsUpdateTextTrackDisplay$:n,closeMessage$:i,cneOverlay$:a,currentVideo$:o,enterFullScreen$:u,exitFullScreen$:c,focusChanged$:d,initializeInBandCaptions$:h,infinityId$:p,isLiveVideo$:f,liveLoadingState$:m,loadCaptions$:y,mouseLeavePlayer$:v,mute$:b,onReadyCallback$:D,saveSettings$:T,scrub$:w,seekLatest$:S,posterFrame$:C,setTime$:k,settingsMenu$:E,reportUserActivity$:O,settingsSubMenu$:A,shouldPause$:x,mergedPlay$:P,shouldShareVideo$:L,toggleUserActive$:e,updateScrubVideo$:Hi(o,s.pluck("isMobile")),volume$:M,widthHeight$:I}}function zi({library$:e,events$:t}){return t.bufferedWith(e,((e,t)=>({event:e,library:t}))).do((({event:e,library:t})=>t(e)))}var Wi=r(4401),Gi=491;function Xi({targetDiv:e,width:t}){var r=(e=>{switch(!0){case e<320:return"extra-small";case e>=320&&e<Gi:return"small";case e>=Gi&&e<800:return"medium";case e>=800&&e<1024:return"large";default:return"extra-large"}})(t);e.setAttribute("data-size",r)}var Ki=r(7317).default,Yi={},Qi=e=>e in Yi?Yi[e]:(Ki("could not find localized message for key: "+e),""),Ji="cne-360",Zi="cne-360-has-dragged",ea="cne-360-dragging",ta="cne-skippable",ra="cne-fullscreen",na="cne-insync-live",ia="cne-is-live",aa="cne-live-ended",sa="cne-loading",oa="cne-resuming",ua="cne-scrubbed",ca="cne-scrubbing",la="cne-paused",da="cne-playing",ha=e=>(t,r)=>{var{cneMessage:n}=e;t.projection_type_360&&!r?n.showMessage({message:Qi("cne-support-360-message"),buttonText:Qi("cne-support-360-button-text"),buttonIntent:"intent:show-360-message-overlay"}):n.hideMessage()},pa=e=>({adBlocked:t})=>!1!==t&&e.removeCueContainer();const fa=function({viewModel$:e},t,r=Wi.r){var n,{cneAnimatedClip:i,cneBigPlayTitle:a,cneVideoTitle:s,controlBar:o,cneOverlay:u,cne360Container:c,persistentMute:l,persistentShare:d}=t,{cneMessageOverlay:h,cneLiveOverlay:p,shareOverlay:{shareEmbed:f,shareUrl:m}}=u,{progressControl:{seekBar:g}}=o;return e.sampleTime(0,r).do(Di("adDisplaying")(Ii(ki)((e=>t=>{var{adContainer:r,controlBar:{progressControl:{seekBar:n}}}=e;n.allowTabFocus(!t),r.updateFocusable(t)})(t)))).do(Di("adSkippable")(Ii(ki)((e=>t=>t?e.addClass(ta):e.removeClass(ta))(t)))).do(Di("animatedClipDisplaying")(Ii(ki)((e=>t=>e.update(t))(i)))).do(Di("adUnit")(Ii(ki)((e=>t=>{e.setAdUnit(t.adUnitPath)})(f)))).do(Di("cne360AnimationInterval")((e=>()=>e.render())(c))).do(Di("cne360CanvasSource")((e=>t=>{e.updateSrc(t)})(c))).do(Di("cne360LatLong")(Ii(ki)((({cne360Compass:e,cne360Container:t})=>({long:r,phi:n,theta:i})=>{ki(e)&&ki(t)&&(e.updateRotation(r),t.updatePhiTheta(n,i))})(t)))).do(Di("cne360MouseActive")(Ii(ki)((e=>t=>{t?e.addClass(ea):e.removeClass(ea)})(t)))).do(Di("cne360ShowCompass")(Ii(ki)((e=>t=>t?e.addClass(Zi):e.removeClass(Zi))(t)))).do(Di("cneVideoTitle")(Ii(ki)((e=>t=>e.update(t))(a)))).do(Di("cneVideoTitle")(Ii(ki)((e=>t=>e.update(t))(s)))).do(Di("videoIfAdsNotDisabled")(Ii(ki)((n=g,e=>e.cue_points&&e.cue_points.length&&n.addCueIndicators(e))))).do(Di("adFinished")(Ii(ki)((e=>t=>t&&e.updateCuePostMidroll(t))(g)))).do(Di("adBlockedUnique")(Ii(ki)(pa(g)))).do(Di("videoEndedOrSwitched")(Ii(ki)(pa(g)))).do(Di("currentVideo","is360Supported")(Ii(ki)(ha(t)))).do(Di("currentVideo")(Ii(ki)((e=>t=>{var{parentNode:r}=e.el()||{};t.projection_type_360?r.classList.add(Ji):r.classList.remove(Ji)})(t)))).do(Di("currentVideo")(Ii(ki)((e=>t=>{var r=!!t.live_metadata;e&&r&&e.update(t)})(p)))).do(Di("currentVideo")(Ii(ki)((e=>t=>{t.share_links&&e.setVideo(t)})(f)))).do(Di("currentVideo")(Ii(ki)((e=>t=>{var{url:r}=t;r&&e.setVideo(t)})(m)))).do(Di("currentVideo")(Ii(ki)((e=>t=>{t.share_links?e.show():e.hide()})(d)))).do(Di("loading")(Ii(ki)((e=>t=>{e.el_&&[sa,ca,ua].forEach((r=>{t.indexOf(r)>-1?e.addClass(r):e.removeClass(r)}))})(t)))).do(Di("isContinuousPlay")((e=>t=>{t||e.addClass("cne-non-continuous")})(t))).do(Di("isFullscreen")((e=>t=>{var r=e.el().parentNode;t?r.classList.add(ra):r.classList.remove(ra)})(t),!1)).do(Di("isInSyncWithLiveStream")((e=>t=>t?e.addClass(na):e.removeClass(na))(t))).do(Di("seekLatestAfterPrerollForLive")((e=>()=>{e.trigger("intent:seek-latest")})(t))).do(Di("isLiveVideo")((e=>t=>{e.el_&&(t?e.addClass(ia):e.removeClass(ia))})(t))).do(Di("isPlaying")(Ii(ki)((e=>t=>{e.el_&&(t?(e.addClass(da),e.removeClass(la)):(e.addClass(la),e.removeClass(da)))})(t)))).do(Di("isPersistent")(Ii(ki)((e=>t=>{e.el_&&e.el_.parentNode.classList[t?"add":"remove"]("cne-persistent")})(t)))).do(Di("messageOverlay")(Ii(ki)((e=>t=>{e.update(t)})(h)))).do(Di("currentVideo","playlist")((({cnePlaylistContainer:e})=>(t,r)=>{e&&e.update(t,r)})(t))).do(Di("showLiveEndCard")((e=>t=>{ki(t)&&(t?e.addClass(aa):e.removeClass(aa))})(t))).do(Di("showPersistentMute")((e=>t=>e.update(t))(l))).do(Di("showShareDropdown")((e=>t=>{var{persistentShare:{shareDropdown:r}}=e;r.update(t)})(t))).do(Di("videoOrAdStart")(Ii(ki)((e=>()=>e.addClass("cne-has-started"))(t)))).do(Di("userVolume")(Ii(ki)((e=>t=>{var{controlBar:{cneVolumeAlert:r}}=e;r.update(t)})(t)))).do(Di("widthHeight")(Ii(ki)((e=>t=>{Xi(t),e.cne360Container.updateSize(t)})(t)))).do(Di("contentResuming")(Ii(ki)((e=>t=>{t?e.addClass(oa):e.removeClass(oa)})(t)))).do(Di("smallLayout")(Ii(ki)((e=>t=>{e.controlBar.updateTabOrder(t)})(t))))};var ma,ga=window.navigator&&window.navigator.userAgent||"",ya=/Android/i.test(ga),va=(/Edge/i.test(ga),/iPad/i.test(ga)),ba=/iPhone/i.test(ga)&&!va,_a=/iPod/i.test(ga),Ta=ba||va||_a,wa=(ma=ga.match(/OS (\d+)_/i))&&ma[1]?ma[1]:null,Sa="";function Ca(){return Sa.length>0?Sa:Sa=ga}function ka(){return Ta||ya}function Ea(){var e=Ca();return/safari\//i.test(e)&&!/chrom/i.test(e)}var Oa,Aa=function(){var e=0;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var r=navigator.userAgent;null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(r)&&(e=parseFloat(RegExp.$1))}return e}();function xa(e){var t=e.map((e=>e?parseInt(e):0));return 1e4*t[0]+100*t[1]+t[2]}const Pa=!(Aa||function(e){var t=/android[^\d]*(\d*)\.(\d*)\.?(\d*)?/i.exec(Ca());if(!t||!t[1])return!1;var r=xa(e.split("."));return xa(t.splice([1]))<r}("4.4.4")||(Oa=Ca(),/android/i.test(Oa)&&/aft[a-z]?\sbuild/i.test(Oa)));var La=new Set(["application/x-mpegURL","application/vnd.apple.mpegURL","audio/x-mpegURL"]);function Ma(e,{escape:t=!0,removeNull:r=!0}={}){var n=t?encodeURIComponent:e=>e;return Object.keys(e).map((t=>r&&null==e[t]?null:"".concat(n(t),"=").concat(n(e[t])))).filter(Boolean).join("&")}function Ia(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Da(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(r),!0).forEach((function(t){Ua(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ia(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ua(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ra(e){for(var t=document.activeElement;e&&t&&"BODY"!==t.tagName;){if(t.id===e)return!0;t=t.parentNode}return!1}var ja={facebook:"height=400,width=640,scrollbars=no",twitter:"height=450,width=550"};function Na(e,t,r={}){var{_openLink:n=Ba,_openEmail:i=$a}=r,{share_links:a}=e,s=a[t];"email"===t?i(s):n(s,"share",ja[t]||"height=400,width=600")}function Ba(e,t,r){window.open(e,t,r)}function $a(e){window.open(e)}var Fa=(e={})=>["subtitles","captions"].includes(e.kind)&&void 0===e.track;var Va={disabled:"cne-captions-disabled",hidden:"cne-captions-off",showing:"cne-captions-on"};var Ha=({callback:e,facade:t})=>e(t),qa=e=>t=>{e.muted(t),e.dfp.mutedConfig(t)},za=e=>()=>{var{controlBar:{cneSettings:t}}=e,r=function(e){for(var t,r=0;r<e.length;r++)if(Ra(e[r].el().id)){t=e[r].name();break}return t}([t]);e.trigger("focusedComponent",r)};function Wa(e,t,r=Na){var n,{adRestart$:i,autoplay$:a,captionsDisplayMode$:s,captionsUpdateTextTrackDisplay$:o,closeMessage$:u,cneOverlay$:c,currentVideo$:l,enterFullScreen$:d,exitFullScreen$:h,focusChanged$:p,initializeInBandCaptions$:f,infinityId$:m,isLiveVideo$:g,liveLoadingState$:y,loadCaptions$:v,mouseLeavePlayer$:b,mute$:_,onReadyCallback$:T,saveSettings$:w,scrub$:S,seekLatest$:C,posterFrame$:k,setTime$:E,settingsMenu$:O,reportUserActivity$:A,settingsSubMenu$:x,shouldPause$:P,mergedPlay$:L,shouldShareVideo$:M,toggleUserActive$:I,updateScrubVideo$:D,volume$:U,widthHeight$:R}=e,{cneOverlay:j,cneMessage:N,controlBar:{cneSettings:B,progressControl:{seekBar:{cneScrubberThumb:$}}},cneTextTrackDisplay:F,cneScrubPoster:V}=t;return Hn.merge(i.do((e=>()=>e.dfp.restartAd())(t)),M.do((e=>({action:t,video:r})=>e(r,t))(r)),b.do((e=>()=>e.userActive(!1))(t)),_.do(qa(t)),U.do((e=>({level:t})=>e.volume(t))(t)),a.do((e=>t=>e.autoplay(t))(t)),o.do((e=>()=>e.updateDisplay())(F)),l.do((e=>t=>e.dfp.video(t))(t)).map((({sources:e})=>e)).map((e=>function(e,t=Pa){return t?e:e.filter((({type:e})=>!La.has(e)))}(e))).map((n=0,e=>{var t=Ma({videoIndex:n,requester:"oo"});return n++,e.map((e=>Da(Da({},e),{},{src:e.src.concat("?",t)})))})).do((e=>t=>{e.trigger("player-set-src"),e.src(t)})(t)).withLatestFrom(_,((e,t)=>t)).do(qa(t)),d.do((e=>()=>e.requestFullscreen())(t)),h.do((e=>()=>e.exitFullscreen())(t)),m.do((e=>t=>e.dfp.infinityId(t))(t)),T.do(Ha),L.do((e=>()=>{e.paused()&&(e.play(),e.trigger("_coordinator:play"))})(t)),P.do((e=>()=>{e.paused()||(e.pause(),e.trigger("_coordinator:pause"))})(t)),S.do(((e,t)=>r=>{e.updatePosition(r),t.updatePosition(r)})($,V)),C.do((e=>t=>{var r=e.seekable();r.length&&(e.currentTime()<r.end(0)&&e.currentTime(r.end(0)),t||e.play())})(t)),E.do((e=>t=>e.currentTime(t))(t)),k.do((e=>t=>!!e.el_&&e.poster(t))(t)),I.do((e=>()=>e.userActive(!e.userActive()))(t)),c.do((e=>t=>e.update(t))(j)),u.do((e=>()=>e.hideMessage())(N)),R.do((e=>({width:t,height:r,fullscreen:n})=>{var i=n?"fullscreen":"normal";e.dfp.resize(t,r,i)})(t)),y.do((e=>({loading:t,video:r})=>{t?e.trigger("intent:show-live-waiting-message-overlay",{image:r.brand_image}):e.trigger("intent:close-overlay")})(t)),g.do((e=>t=>{e.setVideoData&&e.setVideoData({isLive:t})})(F)),v.do((e=>function(e,t){e.remoteTextTracks()&&e.remoteTextTracks().tracks_.forEach((t=>{Fa(t)||e.removeRemoteTextTrack(t)}));var r=e.remoteTextTracks().tracks_.length||!!e.textTracks().tracks_.find((e=>Fa(e)));if(t&&t.vtt){var n=e.addRemoteTextTrack({id:"player-captions",src:t.vtt.src,kind:"captions",srclang:"en",label:Qi("cne-player-caption-label"),default:!0},!1);e.trigger("cne-texttrackadded",n)}else r||e.trigger("cne-texttrackadded",null)}(t,e))),f.do((()=>function(e){var t=(e.remoteTextTracks().tracks_||[]).find((e=>Fa(e)));t&&e.trigger("cne-texttrackadded",t),e.remoteTextTracks().on("addtrack",(t=>{var{track:r}=t;Fa(r)&&e.trigger("cne-texttrackadded",r)})),e.textTracks().on("addtrack",(t=>{var{track:r}=t;e.tech_.featuresNativeTextTracks&&Fa(r)&&(e.cneTextTrackDisplay.show(),e.tech_.emulateTextTracks(),e.trigger("cne-texttrackadded",r))}))}(t))),s.do((e=>({captions:t,displayMode:r})=>{t&&(t.mode=r),e.controlBar.cneCaptionsButton.update(r)})(t)),w.do((e=>t=>e.saveSettings(t))(B)),O.do((e=>t=>{e.toggleMenu(t)})(B)),x.do((e=>({menu:t,display:r})=>{e.cneSettingsMenu.toggleSubMenu(t,r)})(B)),A.do((e=>t=>{t&&e.reportUserActivity()})(t)),D.do(((e,t)=>r=>{e.updateVideo(r),t.updateVideo(r)})($,V)),p.do(za(t))).mapTo(t).distinctUntilChanged()}var Ga="cneplayer";function Xa(e,t,r=100){var n="";if(r){var i=new Date;i.setTime(i.getTime()+24*r*60*60*1e3),n="; expires="+i.toGMTString()}document.cookie=encodeURIComponent(Ga+e)+"="+encodeURIComponent(t)+n+"; path=/"}function Ka(e,t="cneplayer"){for(var r=encodeURIComponent(t+e)+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var a=n[i];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(r))return decodeURIComponent(a.substring(r.length,a.length))}return null}var Ya="count";function Qa(){var e=Ka(Ya),t=parseInt(e)||0;return Xa(Ya,t+1)}const Ja=function({mute$:e,volume$:t,videoView$:r,captionsDisplayMode$:n,playerEvent$:i},a=Xa,s=Qa){var o=i.withType("playing").take(1);return Hn.merge(e.skipUntil(o).do((e=>t=>{e("muted",t?1:0)})(a)),t.skipUntil(o).do((e=>({level:t})=>{e("volume",t)})(a)),r.do(s),n.skipUntil(o).do((e=>t=>{"disabled"!==t.displayMode&&e("captions",t.displayMode||"hidden")})(a)))};function Za(e=document){return Hn.fromEvent(e,"visibilitychange").share().map((()=>e.hidden)).startWith(e.hidden)}function es(e,t){return Hn.from(t).mergeMap((t=>Hn.fromEvent(e,t))).share()}function ts(e,t){return Hn.fromEventPattern((r=>{e.on(t,r)}),(r=>{e.off(t,r)})).share()}const rs={100:"VAST_MALFORMED_RESPONSE",101:"VAST_SCHEMA_VALIDATION_ERROR",102:"VAST_UNSUPPORTED_VERSION",200:"VAST_TRAFFICKING_ERROR",201:"VAST_UNEXPECTED_LINEARITY",202:"VAST_UNEXPECTED_DURATION_ERROR",300:"VAST_WRAPPER_ERROR",301:"VAST_LOAD_TIMEOUT",302:"VAST_TOO_MANY_REDIRECTS",303:"VAST_NO_ADS_AFTER_WRAPPER",400:"VIDEO_PLAY_ERROR",402:"VAST_MEDIA_LOAD_TIMEOUT",403:"VAST_LINEAR_ASSET_MISMATCH",405:"VAST_PROBLEM_DISPLAYING_MEDIA_FILE",500:"OVERLAY_AD_PLAYING_FAILED",501:"NONLINEAR_DIMENSIONS_ERROR",502:"OVERLAY_AD_LOADING_FAILED",503:"VAST_NONLINEAR_ASSET_MISMATCH",602:"COMPANION_REQUIRED_ERROR",603:"COMPANION_AD_LOADING_FAILED",900:"UNKNOWN_ERROR",901:"VPAID_ERROR",1e3:"IMA_SDK_ERROR_CODE",1005:"FAILED_TO_REQUEST_ADS",1007:"VAST_ASSET_NOT_FOUND",1009:"VAST_EMPTY_RESPONSE",1010:"UNKNOWN_AD_RESPONSE",1011:"UNSUPPORTED_LOCALE",1012:"ADS_REQUEST_NETWORK_ERROR",1013:"INVALID_AD_TAG",1020:"STREAM_INITIALIZATION_FAILED",1021:"ASSET_FALLBACK_FAILED",1101:"INVALID_ARGUMENTS",1105:"INVALID_ADX_EXTENSION",120:"NATIVE_MESSAGE_ERROR"};var ns=new Map([["AD_BREAK_READY","dfp-ad-adbreakready"],["AD_CAN_PLAY","dfp-ad-canplay"],["AD_ERROR","dfp-ad-error"],["AD_METADATA","dfp-ad-metadata"],["ALL_ADS_COMPLETED","dfp-ad-alladscompleted"],["CLICK","dfp-ad-click"],["COMPLETE","dfp-ad-complete"],["CONTENT_PAUSE_REQUESTED","dfp-content-pause"],["CONTENT_RESUME_REQUESTED","dfp-content-resume"],["DURATION_CHANGE","dfp-ad-durationchange"],["FIRST_QUARTILE","dfp-ad-firstquartile"],["IMPRESSION","dfp-ad-impression"],["LOADED","dfp-ad-loaded"],["ADS_MANAGER_LOADED","dfp-ads-manager-loaded"],["MIDPOINT","dfp-ad-midpoint"],["PAUSED","dfp-ad-paused"],["RESUMED","dfp-ad-resume"],["SKIPPED","dfp-ad-skipped"],["SKIPPABLE_STATE_CHANGED","dfp-ad-skippablestatechanged"],["STARTED","dfp-ad-started"],["THIRD_QUARTILE","dfp-ad-thirdquartile"],["VOLUME_CHANGED","dfp-ad-volumechange"],["VOLUME_MUTED","dfp-ad-muted"]]),is={type:"dfp-ad-requested"},as={type:"dfp-ad-timeout"};function ss({adsManager$:e,dfpAdEvent$:t,dfpEventTypes$:r,requestAds$:n,adRequestData$:i,timeoutAds$:a,map:s=ns}){return r.switchMap((r=>Hn.from(s).mergeMap((([e,n])=>t.withType(r[e]).map((e=>({originalEvent:e,type:n}))))).merge(n.mapTo(is)).merge(a.mapTo(as)).withLatestFrom(i.pluck("adUnitPath").startWith(null),us).withLatestFrom(e.startWith(null),os).map(cs).map(ls)))}function os(e,t){return Object.assign(e,{adsManager:t})}function us(e,t){return Object.assign(e,{adUnitPath:t})}function cs(e){if(!e.originalEvent||"function"!=typeof e.originalEvent.getAd)return e;var t=e.originalEvent.getAd();return t&&t.getAdId()?Object.assign(e,{ad:{adId:t.getAdId(),advertiser:t.getAdvertiserName(),apiFramework:t.getApiFramework(),contentType:t.getContentType(),creativeadId:t.getCreativeAdId(),creativeId:t.getCreativeId(),description:t.getDescription(),duration:t.getDuration(),isLinear:t.isLinear(),mediaUrl:t.getMediaUrl(),podInfo:t.getAdPodInfo(),wrapperAdIds:t.getWrapperAdIds(),wrapperAdSystems:t.getWrapperAdSystems()}}):e}function ls(e){if(!e.originalEvent||"function"!=typeof e.originalEvent.getError)return e;var t=e.originalEvent.getError();return t?Object.assign(e,{adError:{type:t.getType(),code:rs[t.getErrorCode()],message:t.getMessage(),innerError:t.getInnerError()}}):e}function ds(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(r),!0).forEach((function(t){ps(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ds(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ps(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fs=["dispose","ended","error","keyup","fullscreenchange","loadeddata","loadedmetadata","pause","play","playing","useractive","userinactive","emptied","ended","ready","seeked","seeking","timeupdate","volumechange","click","drag","stalled","resize","player-set-src","hls-request-manifest","hls-request-playlist","hls-request-segment-1","adtimeupdate"],ms=function(e){var t=[];if(!e.next)return t;for(var r=e.next();!1===r.done;r=e.next())t.push(r.value);return t}(ns.values()).concat(is.type).concat(as.type);function gs(e,t=fs,r=ms){var n=ts(e,t),i=ts(e,r);e.on("contentcanplay",(()=>{e.currentTime(e.ads.snapshot.currentTime)}));var a=function(e,t){var r="currentTime";return t.withType("timeupdate","adtimeupdate").map((()=>({type:r,value:e.currentTime()}))).share()}(e,n),s=function(e,t){return t.map((()=>e.tech?{type:"tech",value:e.tech({IWillNotUseThisInPlugins:!0})}:""))}(e,n.withType("ready")),o=n.withType("error").map((()=>{var t=e.error();return{type:"errorCode",value:t?t.code:0}})),u=function(e,t){return e.map((e=>{var r=t.duration();return{type:"percentComplete",value:r?e/r:0}})).startWith({type:"percentComplete",value:0})}(a.pluck("value"),e),c=n.withType("fullscreenchange").map((()=>({type:"fullscreen",value:e.isFullscreen()}))).startWith({type:"fullscreen",value:!1}),l=Hn.fromEvent(e,"cne-texttrackadded",((e,t)=>({type:"cne-texttrackadded",value:t})));return n.merge(i,a,o,c,u,s,l).map(function(e){return t=>{if(t.state)return t;var{state:r}=e.ads||{};return hs(hs({},t),{},{state:r})}}(e)).distinctUntilChanged(((e,t)=>e.type===t.type&&"ended"===t.type))}class ys{constructor(e){this.getValue=()=>e.getValue()}get view(){return(this.getValue()||{}).view}get player(){return(this.getValue()||{}).videojs}}function vs(e,t){var r=new ys(e);function n(e){var{[e]:t}=r.view||{};return t}var i={currentTime(t){if(void 0===t)return n("currentTime")||0;e.next({type:"setTime",time:t})},currentVideo:()=>n("currentVideo")||null,dispose(t){t&&r.player.off(),e.next({type:"dispose"})},duration:()=>r.player.duration(),getCuePoints:()=>[],getPlayCount(){return e=Ka(Ya),parseInt(e)||1;var e},isInterlude:()=>"interlude"===n("playerType"),isLoading:()=>n("loading")||false,isPlaying:()=>n("isPlaying")||false,isPlaylist:()=>"playlist"===n("playerType"),isMuted:()=>n("mute"),load(t,n=!1){if(n){var{player:i}=r;return i.trigger("intent:load-video",{video:{id:t}})}e.next({type:"load",videoId:t})},off(e,t){var{player:n}=r;n.el_&&n.off(e,t)},on(e,t){r.player.on(e,(function(e,r){t(r,e)}))},pause(){e.next({type:"pause"})},play(){e.next({type:"play"})},setAdKeyValues(){},setNextVideo(t){var r="string"==typeof t?{id:t}:t;e.next({type:"nextVideo",video:r})},volume(t){if(void 0===t){var r=n("volume");return parseFloat(r)?r:1}e.next({type:"volume",level:t})},_overrideAutoplay(r,n){((e,t,r)=>{if(!t||t!==e)throw new Error("CNE Player: ".concat(r," is a private method"))})(t,n,"_overrideAutoplay"),e.next({type:"autoplayOverride",data:r})},_markPersistent(t){e.next({type:"persistent",persistent:t})},_requestCancelPersist(){r.player.trigger("_coordinator:cancel-persistent")},_trackPlayOnPage(){e.next({type:"play-on-page"})},_trackCNESparrow(t,r,n={}){e.next({type:"track",data:{category:r,event:{type:t},meta:n}})}};return e.next({type:"ready",facade:i}),i}function bs(e,t,r){var n=Hn.fromEvent(e,"intent:show-share").map((()=>({action:"show",type:"share",source:"click"}))),i=Hn.fromEvent(e,"intent:show-share-keyboard").map((()=>({action:"show",type:"share",source:"keyboard"}))),a=Hn.fromEvent(e,"intent:show-share-embed").map((()=>({action:"show",type:"embed"}))),s=Hn.fromEvent(e,"intent:show-share-url").map((()=>({action:"show",type:"url"}))),o=Hn.fromEvent(e,"intent:show-message-overlay").merge(t,r).map((()=>({action:"show",type:"message"}))),u=[],c=n.merge(i,a,s,o).do((e=>u.push(e)));return Hn.fromEvent(e,"intent:close-overlay").map((()=>{var e=u.pop();if(e)return{action:"hide",type:e.type}})).filter((e=>!!e)).merge(c).share()}function _s(e){return Hn.fromEvent(e,"intent:share",((e,t)=>t.action))}var Ts=({adsManager:e})=>!!e&&"function"==typeof e.getAdSkippableState&&e.getAdSkippableState();const ws=Number.isFinite||(e=>"number"==typeof e&&window.isFinite(e));function Ss(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ks({animated_clip_url_mp4:e,animated_clip_url_webm:t,animated_clip_url_high_mp4:r,animated_clip_url_high_webm:n,animated_clip_still:i},{width:a}){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ss(Object(r),!0).forEach((function(t){Cs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ss(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({action:"show",animated_clip_still:i},a>480?{animated_clip_url_mp4:r,animated_clip_url_webm:n}:{animated_clip_url_mp4:e,animated_clip_url_webm:t})}function Es({animated_clip_url_mp4:e,animated_clip_url_webm:t,animated_clip_still:r,live_metadata:n,projection_type_360:i},{autoplayEnabled:a,isMobile:s,playerConfig:o}){var{hasAnimatedThumb:u}=o;return e&&t&&r&&u&&!n&&!i&&!a&&!s}const Os=e=>{if(!/\d+x\d+/i.test(e))return 16/9;var[t,r]=e.split(/x/i),n=parseInt(t)/parseInt(r);return n<3&&n>0?n:16/9};function As(e,t=xs){return e.withType("cne-texttrackadded").pluck("value").publishReplay().refCount().switchMap((e=>e&&e.track?t(e).mapTo(e.track).startWith(null):e&&Fa(e)?Hn.of(e).startWith(null):Hn.of(null)))}function xs(e){return Hn.fromEvent(e,"load")}function Ps(e,{responseType:t=null,timeout:r=0,withCredentials:n=!1}={}){return Hn.create((i=>{var a=new XMLHttpRequest;a.open("GET",e),a.withCredentials=n,a.responseType=t||"",a.timeout=r,a.onload=function(){this.status>=200&&this.status<300?(i.next({body:this.response,message:this.statusText,status:this.status,success:!0}),i.complete()):i.error(Ls(e,this.status,this.statusText))},a.onerror=function(){i.error(Ls(e))},a.ontimeout=function(){i.error(Ls(e))},a.send()}))}var Ls=(e,t=0,r="ajax error")=>({message:"".concat(r,". Trying to GET ").concat(e,"."),status:t,success:!1});var Ms,Is=()=>"".concat("//capture.condenastdigital.com/track","?_o=").concat("cne"),Ds=/http[s]?:/g,Us=/http[s]?/,Rs=/&(?:redirect|cr)=http[s]?/,js=/http[^s]/;function Ns(e,t=document){if(e){if(!function(e){return!!(e&&e.location&&e.location.protocol)&&!js.test(e.location.protocol)}(t))return e;if(Rs.test(e)){var r=e.match(Rs)[0],n=r.replace(Us,"https");e=e.replace(r,n)}return e.replace(Ds,"https:")}}function Bs(e,t=!1){if("string"==typeof e)return t&&(e=Ns(e)),function(e){var t=document.createElement("img");return t.id="cne_"+Math.floor(1e4*Math.random()+1),t.src=e,t}(e)}function $s(){if(void 0===Ms)try{Ms=!!window.top.location.href&&"function"==typeof window.top.addEventListener}catch(e){Ms=!1}return Ms}function Fs(){return $s()?window.top.location.href:document.referrer}function Vs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qs(e,t=""){var r="".concat(e,": ").concat(t);r=r.substring(0,350),Ws.track("error",r)}function zs(e,t="",r){Ws.track(e,t,r)}var Ws={init(e){this.baseUrl=Is(),this.ssl=e.ssl,this.location=Fs(),this.sessionId=Ka("sID",""),this.pageId=Ka("pID","")},track(e,t,r={},n=Bs){var i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vs(Object(r),!0).forEach((function(t){Hs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({_ts:(new Date).toISOString(),_c:t,_t:e,sID:this.sessionId,pID:this.pageId,pHr:this.location},r);n([this.baseUrl,Ma(i)].join("&"),this.ssl)}};var Gs=((e=((e=document.cookie)=>e.split(/;\s*/).reduce(((e,t)=>{var[r,n]=t.split("=");return Object.assign(e,{[r]:decodeURIComponent(n)})}),{}))())=>{var{pID:t="",sID:r="",CN_sp:n="",CN_xid:i=""}=e,a={baseUrl:Is(),params:{app:"playerservice",cCh:"videos/show",pHr:window.location.href,pID:t,sID:r,uId:n,xid:i}};return()=>a})(),Xs=e=>{var t;try{t=JSON.stringify(e)}catch(e){t=""}return t};function Ks({type:e,category:t,message:r},n={}){var[i,a]=(e=>{var{guid:t,canAutoplay:r,interludeFailure:n,pageTemplate:i,url:a,errorData:s}=e,{videoId:o,iu:u,playerType:c}=e.initialPlayerConfig||{};return[o,{canAutoplay:r,guid:t,iu:u,playerType:c,interludeFailure:n,pageTemplate:i,url:a,errorData:s}]})(n);return{_ts:(new Date).toISOString(),_c:t,_t:e,cId:i,dim1:Xs(a),dim3:r}}var Ys=({type:e,category:t,message:r=""},n={})=>{var{baseUrl:i,params:a}=Gs();return((e,t=Image)=>(new t).src=e)([i,Ma(a),Ma(Ks({type:e,category:t,message:r},n))].join("&"))};class Qs{constructor(e="",t={}){this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.url=t.url||"",this._bodyText=e}text(){return Promise.resolve(this._bodyText)}json(){return this.text().then(JSON.parse)}}function Js(e){if(!e.ok)throw new Error("API responsed with status code ".concat(e.status));return e}function Zs(e,t={}){var{timeout:r,onTimeout:n}=t;return new Promise(((t,i)=>{var a=new XMLHttpRequest,s=()=>i(new TypeError("Network request failed"));a.timeout=r||0,a.onload=()=>{var e={status:a.status,statusText:a.statusText,url:a.responseURL},r="response"in a?a.response:a.responseText;t(new Qs(r,e))},a.onerror=s,a.ontimeout=n?n(i):s,a.open("GET",e),a.send()}))}var eo=r(7317).default;var to=r(7317).default;function ro(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function no(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(r),!0).forEach((function(t){io(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ro(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function io(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ao(e){var{environment:t,playerConfig:r,referenceWindow:n}=e,{playlist:i}=r;return Hn.create((e=>{!function(e,t,r,{fetch:n=window.fetch||Zs,_track:i=Ys}={}){e.cnsInfo=e.cnsInfo||[],e.cnsInfo.push=a=>{a&&a.sponsoredVideoId&&(e.cnsInfo[0]=a,n("".concat(t,"/next_video/").concat(a.sponsoredVideoId)).then(Js).then((e=>e.json())).then(r).catch((({message:e})=>{eo("error fetching cnsInfo:",e),i({type:"Fetch Error (Push)",category:"Video Injection",message:e})})))}}(n._cne,t.base_url,(({video:t})=>{to("late sponsored vid injection:",i),zs("Push Received (Player)","Video Injection");var r=i.videos.slice();r.splice(1,0,t);var n=no(no({},i),{},{videos:r});e.next(n)}))}))}var so=.5;function oo(e,t,r,n=uo){var i=e.switchMapTo(r.pairwise().takeUntil(t).map((([e,t])=>({x:t.x-e.x,y:t.y-e.y,time:t.time-e.time,now:t.time})))),a=t.withLatestFrom(i,((e,t)=>t)).distinctUntilChanged(((e,t)=>e.now===t.now)).switchMap((t=>n(t.time).scan((e=>({x:.95*e.x,y:.95*e.y})),t).takeWhile((e=>e.x>so||e.x<-.5||e.y>so||e.y<-.5)).concat(Hn.of({x:0,y:0})).takeUntil(e)));return i.merge(a).map((e=>({x:.2*e.x,y:.2*e.y})))}function uo(e){return Hn.interval(e)}function co(e){return{x:void 0!==e.clientX?e.clientX:e.touches[0].clientX,y:void 0!==e.clientY?e.clientY:e.touches[0].clientY,time:Date.now()}}function lo(e,t){var r=t?"ad":"video";switch(e){case 1:return"player_".concat(r,"_error_aborted");case 2:return"player_".concat(r,"_error_network");case 3:return"player_".concat(r,"_error_decode");case 4:return"player_".concat(r,"_error_src_not_supported");case 5:return"player_".concat(r,"_error_encrypted");default:return"player_".concat(r,"_error")}}function ho(e){return[/InvalidStateError\: Failed to execute 'endOfStream' on 'MediaSource'/].some((t=>t.test(e)))}function po(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?po(Object(r),!0).forEach((function(t){mo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):po(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var go=e=>{var{playerConfig:t,environment:r}=e,n=r.base_url,i={playlistId:t.playlist?t.playlist.id:null,adUnitPath:e.adUnitPath,shareToScene:t.shareToScene};return fo(fo({},e),{},{fetchVideo:e=>Ps((e=>"".concat(n,"/next_video/").concat(e,"?").concat(Ma(i)))(e)).map((e=>JSON.parse(e.body))).map((({video:e})=>e))})},yo=e=>{var{loopVideo:t,playlistId:r}=e.playerConfig;return fo(fo({},e),{},{shouldLoop:t&&!r})};function vo(e){return e.config$.switchMap((({playerEvent$:e})=>t=>e.withType("dfp-ad-requested").pluck("adUnitPath").startWith(null).map((e=>fo(fo({},t),{},{adUnitPath:e}))))(e)).switchMap((({playerEvent$:e,intentStreams:t})=>r=>t.nextVideo$.merge(e.withType("loadedmetadata").mapTo(!1)).map((e=>fo(fo({},r),{},{nextVideoOverride:e}))))(e)).switchMap((({playlist$:e})=>t=>e.map((e=>fo(fo({},t),{},{playlist:e}))))(e)).map(yo).map(go)}var bo=e=>t=>e.playlist?((e,t)=>{var r=e.playlist.videos.map((e=>e.id)),n=r.indexOf(t.id),i=r[(n+1)%r.length];return e.fetchVideo(i)})(e,t):e.nextVideoOverride?e.fetchVideo(e.nextVideoOverride.id):e.shouldLoop?Hn.of(t):e.fetchVideo(t.next_video.id);function _o(e,t){return Hn.merge((e=>e.take(1).filter((({video:e})=>e)).map((({video:e})=>()=>Hn.of(e))))(e),((e,t)=>{var{intentStreams:r,playerEvent$:n,userIdle$:i}=e;return n.withType("ended").filterByLatestFrom(i,((e,t)=>!t)).merge(r.keepPlaying$).withLatestFrom(t,((e,t)=>t)).filter((e=>e.isContinuousPlay)).map(bo)})(t,e),((e,t)=>t.switchMap((t=>e.intentStreams.loadVideoId$.map((e=>()=>t.fetchVideo(e))))))(t,e))}var To=()=>{var e=document.createElement("script");return e.async=!0,e.type="text/javascript",document.head.appendChild(e),e},wo=(e,t)=>{e.onload=t};const So=(e,t=To,r=wo)=>Hn.create((n=>{var i=t();r(i,(e=>{n.next(e),n.complete()})),i.src=e}));function Co(e,t){var r,n=function(e,t){return e.withLatestFrom(t,((e,t)=>{var{is360Supported:r,environment:n}=t,i=n.threejs_path,{projection_type_360:a=null}=e;return{needs360:r&&null!==a,threeJsPath:i,video:e}}))}(e,t).switchMap((({needs360:e,threeJsPath:t,video:r})=>e&&void 0===window.THREE?So(t).map((()=>({needs360:e,video:r}))):Hn.of({needs360:e,video:r}))).publishReplay(1).refCount(),[i,a]=n.partition((({needs360:e})=>e)),s=(r=a,i.switchMap((()=>Hn.interval(30).takeUntil(r)))),o=function(e,t){return e.skipUntil(t).map((({video:{projection_type_360:e}})=>e))}(n,i);return{cne360AnimationInterval$:s,currentVideo$:n.map((({video:e})=>e)),cne360CanvasSource$:o}}function ko({isPersistent$:e,isFullscreen$:t}){return e.combineLatest(t,((e,t)=>e&&!t)).distinctUntilChanged()}function Eo(e,t){return new Date(Oo(t)-e)}function Oo(e){return e&&e.getTime?e.getTime():(new Date).getTime()}var Ao=18e5;function xo(e,t){return Ps(function(e,t){var r={videoId:e};return"".concat(t,"/").concat("player/live_video_metadata","?").concat(Ma(r))}(e,t)).map((e=>JSON.parse(e.body)))}function Po(e,{interval:t=1e4,buffer:r=Ao,config$:n,fetchLiveSource:i=xo,scheduler:a}={}){var s=function({live_metadata:e={}},t){var{start_date:r}=e;if(!r)return null;var n=new Date(r),i=new Date,a=Eo(t,n);if(a>i)return a-i;return null}(e,r)||0;return Hn.timer(s,t,a).withLatestFrom(n.pluck("environment","base_url")).switchMap((([,t])=>i(e.id,t))).filter((({video:t})=>t.id===e.id&&t.sources.length)).map((({video:t})=>Object.assign(e,t))).first()}function Lo(e,t,r){var n=e.switchMapTo(r.withType("dfp-content-resume"));return Hn.merge(e,n).withLatestFrom(t.pluck("captions"),((e,t)=>t))}var Mo=["playing","pause","dfp-ad-started","dfp-ad-resume"],Io={spinnerWithBgPoster:[sa,ua],bgPoster:[sa,ca],spinner:[sa],none:[]};var Do="MUTED",Uo="NEVER";function Ro(e,t,r){var{environment:n,playerConfig:i}=r,a=n.canAutoplay===Do,s=i.autoplay&&a;return i.muted||"1"==e||"0"==t||s}var jo=e=>Hn.create((t=>{var r=new Image;r.onload=()=>{t.next(e),t.complete()},r.onerror=e=>t.error(e),r.src=e}));function No(e,t,r){var n=e=>e;return e.switchMapTo(t.switchMapTo(r.take(1),n),n)}var Bo=Hn.timer(0,1500);function $o({currentVideo$:e,shareIntent$:t}){return t.filter((e=>"url"!==e&&"embed"!==e)).withLatestFrom(e,((e,t)=>({action:e,video:t})))}function Fo({isLiveVideo$:e,playerEvent$:t,proposedLiveStreamEnd$:r,buffer$:n=Hn.of(Ao),scheduler:i,videoStart$:a}){return a.withLatestFrom(e,r,n).switchMap((([,e,r,n])=>e&&r?Hn.timer(function(e,t){var r=(new Date).getTime(),n=new Date(e).getTime()+t-r,i=2147483647;if(n>0)return n>i?i:n;return 0}(r,n),i).merge(t.withType("ended")).mapTo(!0):Hn.of(!1))).distinctUntilChanged()}var Vo=()=>({closeable:!1,message:"cne-support-live-overlay-message",title:"cne-support-live-overlay-title"}),Ho=({image:e})=>({closeable:!1,message:"cne-player-live-available-soon-overlay-message",image:e}),qo=()=>({closeable:!0,message:"cne-support-360-overlay-message"}),zo=({video:e})=>({buttonIntents:[{type:"intent:load-video",data:{video:e}}],buttonText:"cne-support-error-overlay-button",closeable:!1,iconType:"warning",message:"cne-support-error-overlay-message"}),Wo=()=>({buttonIntents:[{type:"intent:keep-playing"},{type:"intent:close-overlay"}],buttonText:"cne-support-idle-overlay-button",closeable:!1,title:"cne-support-idle-overlay-title"});function Go({documentHidden$:e,keepPlaying$:t,playerEvent$:r,viewportStatus$:n}){var i=function(e,t,r){return t.combineLatest(r,((e,t)=>!t&&"FULLY_IN_VIEWPORT"===e)).distinctUntilChanged().switchMap((t=>t?Hn.of(0):e.withType("ended").scan((e=>e+1),0))).share()}(r,n,e);return{userIdle$:i.map((e=>e>=4)).merge(t.mapTo(!1)).share().startWith(!1).distinctUntilChanged(),showUserIdleMessageOverlay$:i.filter((e=>5===e)).share()}}var Xo=/(?:http[s]?:)?(?:\/\/)?[a-z]+\.(?:[a-z]+\.)?[^\/]+\/?|^\/|\/$|\/?\?.*$/;function Ko({autoplayOverride$:e,config$:t,viewportStatus$:r},n=function(){return $s()?window.top:window}()){return r.filterByLatestFrom(e,t,((e,{override:t,url:r},{autoplayEnabled:i})=>!(t&&r===function(e){var[t,r]=e.split(Xo);return r||t}(n.location.href))&&"FULLY_IN_VIEWPORT"===e&&i)).share().take(1)}function Yo(e,t,r=document){var{top:n,height:i}=t.getBoundingClientRect(),a=r.querySelector("html").clientHeight,s=a-(n+i);return e.map((e=>{var{intersectionRatio:t,intersectionRect:r}=e;return{intersectionRatio:function(e,t,r,n){return n.top>0?r-e:r-t}(n,s,t*a,r)/i}}))}function Qo(){return Hn.create((e=>{window.parent.postMessage({sentinel:"amp",type:"send-intersections"},"*");var t=t=>{t.source==window.parent&&t.origin!=window.location.origin&&t.data&&"amp"==t.data.sentinel&&"intersection"==t.data.type&&t.data.changes.forEach((t=>e.next(t)))};return window.addEventListener("message",t),()=>window.removeEventListener("message",t)}))}function Jo(e,t){return Hn.create((r=>{var n,i,a=new t((([e])=>{r.next(e)}),{root:null,threshold:(n=.1,i=Math.floor(1/n),[...Array(i)].map(((e,t)=>t/i)))});return a.observe(e),()=>a.disconnect()}))}function Zo(e,{ampIO:t=Qo,applyIntersectionTransform:r=Yo,win:n=window}={}){var{canAccessParent:i,playerConfig:{pageType:a},videoEl:s}=e,o=i&&n.top.IntersectionObserver;switch(!0){case function(e){return e.IntersectionObserver&&e.IntersectionObserver.toString().length<100}(n):return Jo(s,n.IntersectionObserver);case"amp-article"===a:return r(t(),s);case o&&!!n.frameElement:return r(Jo(n.frameElement,o),s);case!!o:return Jo(s,o);default:return Hn.never()}}function eu(e,{intersectionObservable:t=Zo}={}){return e.switchMap((e=>(e=>{var r=t(e),n=(e.playerConfig.playerType,.2);return r.map((({intersectionRatio:e})=>({percent:e.toFixed(1),status:e>n?"FULLY_IN_VIEWPORT":"OUT_OF_VIEWPORT"})))})(e))).share()}function tu(e,t,r=1.7778){var n,i;return e?(n=screen.width,i=screen.height):i=(n=t.offsetWidth)/r,{height:i,width:n}}var ru=Hn.interval(50).startWith(0);function nu(e){return e.map((e=>e/1e3))}function iu(e,t,r,n){var i,a,{documentHidden$:s,windowEvent$:o}=t,{autoplayOverride$:u,closeMessage$:c,cneOverlayIntent$:l,enterFullScreen$:d,exitFullScreen$:h,facadeReady$:p,focusChanged$:f,focusedComponent$:m,keepPlaying$:g,loadVideoId$:y,mouseLeavePlayer$:v,muteToggle$:b,isPersistent$:_,persistentShareEnter$:T,persistentShareLeave$:w,playOnPage$:S,progressMouse$:C,saveSettings$:k,seekEnd$:E,seekStart$:O,seekLatestIntent$:A,setTimeIntent$:x,settingsSubMenuIntent$:P,shareIntent$:L,shouldPause$:M,shouldPlay$:I,show360MessageOverlayIntent$:D,showLiveWaitingOverlayIntent$:U,toggleCaptionsIntent$:R,touchVideo$:j,toggleSettings$:N,trackSparrowIntent$:B,volumeIntent$:$}=n,F=function(e,{ajaxObservable:t=Ps,readCookie:r=Ka}={}){var n=r("CN_xid","");if(n)return Hn.of(n).share();var i=t("//infinityid.condenastdigital.com/infinityid",{withCredentials:!0}).map((e=>e.body)).catch((e=>(qs("infinity id",e),Hn.of(""))));return e.pluck("playerConfig","gdprApplies").switchMap((e=>e?(qs("infinity id blocked - GDPR"),Hn.of("")):i)).publishReplay(1).refCount()}(r),V=eu(r),H=V.pluck("status"),q=V.pluck("percent"),{userIdle$:z,showUserIdleMessageOverlay$:W}=Go({documentHidden$:s,keepPlaying$:g,playerEvent$:e,viewportStatus$:H}),G=function(e){return e.switchMap((e=>{var t,{playerConfig:r}=e,{playlist:n}=r;if(!n)return Hn.of(null);try{t=e.sponsoredVideo||window.top._cne.sponsoredVideo}catch(e){to(e)}var i=n.videos.slice();n&&t&&i.splice(1,0,t);var a=no(no({},n),{},{videos:i});return Hn.of(a).merge(ao(e))})).publishReplay(1).refCount()}(r),{cne360AnimationInterval$:X,currentVideo$:K,cne360CanvasSource$:Y}=function(e,t=vo){return Co(_o(t(e),e).mergeScan(((e,t)=>t(e))),e.config$)}({config$:r,intentStreams:n,playerEvent$:e,playlist$:G,userIdle$:z}),{currentVideo$:Q,isLiveVideo$:J,liveLoadingState$:Z,proposedLiveStreamEnd$:ee,mobileLiveReadyPosterURL$:te}=function({currentVideo$:e,config$:t,pollForLiveSource:r=Po}){var n=e.pluck("live_metadata").map((e=>e||{})),i=e.map((e=>!!e.live_metadata)),a=n.pluck("end_date"),s=e.switchMap((e=>{var{live_metadata:n,sources:i=[]}=e,a=n&&0===i.length?r(e,{config$:t}):Hn.never();return Hn.of(e).merge(a)})).publishReplay(1).refCount(),o=s.filter((({sources:e})=>e.length>0)),u=s.filter((({live_metadata:e})=>!!e)).map((e=>({loading:0===e.sources.length,video:e}))),c=o.filterByLatestFrom(t,i,((e,t,r)=>t.isMobile&&r)).map((e=>e.live_ready_poster));return{currentVideo$:o,isLiveVideo$:i,liveLoadingState$:u,mobileLiveReadyPosterURL$:c,proposedLiveStreamEnd$:a}}({currentVideo$:K,config$:r}),re=function(e){return e.withType("dfp-ad-started","dfp-content-pause").mapTo(!0).merge(e.withType("dfp-ad-timeout","dfp-content-resume").mapTo(!1)).startWith(!1).distinctUntilChanged()}(e),ne=function({adDisplaying$:e,playerEvent$:t}){var r=t.withType("dfp-ad-skippablestatechanged").map(Ts);return e.switchMap((e=>e?r:Hn.of(e))).startWith(!1).distinctUntilChanged()}({adDisplaying$:re,playerEvent$:e}),ie=y.withLatestFrom(re,((e,t)=>t)).filter((e=>e)),ae=e.withType("tech").pluck("value"),se=function({aspectRatio$:e,targetDiv$:t,fullscreen$:r,poll$:n=ru,getWidthHeightFn:i=tu}){return n.withLatestFrom(t,r,e).map((([,e,t,r])=>{var{width:n,height:a}=i(t,e,r);return{targetDiv:e,width:n,height:a,fullscreen:t}})).distinctUntilChanged((function(e,t){return e.width===t.width&&e.height===t.height&&e.fullscreen===t.fullscreen})).publishReplay(1).refCount()}({aspectRatio$:r.pluck("aspectRatio").map((e=>Os(e))),targetDiv$:r.pluck("playerContainer"),fullscreen$:e.withType("fullscreen").pluck("value"),tech$:ae}),oe=function(e,t,r){return Hn.combineLatest(t.map((e=>({type:"cookie",level:e}))).takeUntil(e).merge(e),r,(e=>e)).filter((({level:e})=>ws(e))).distinctUntilChanged()}($,r.pluck("volumeCookie"),Q),ue=function({config$:e,muteToggle$:t,volume$:r}){return e.pluck("mutedConfig").concat(Hn.merge(t,r.filter((({type:e})=>"cookie"!==e)).map((({level:e})=>0===e)))).distinctUntilChanged()}({config$:r,muteToggle$:b,volume$:oe}),ce=Ko({autoplayOverride$:u,config$:r,viewportStatus$:H}),le=function({loadVideoId$:e,videoEnded$:t}){var r=0;return e.merge(t).map((()=>r++))}({videoEnded$:e.withType("ended"),loadVideoId$:y}),de=e.withType("currentTime").pluck("value"),he=I.merge(ce),pe=function(e,t){return e.switchMap((()=>t.first()))}(Q,e.withType("playing")),fe=function(e,t){return t.withType("dfp-ad-started").merge(e).take(1).mapTo(!0)}(pe,e),me=function({config$:e,mute$:t,touchVideo$:r,viewportAutoplay$:n}){var i=n.mapTo(!0).filterByLatestFrom(e,t,((e,{isMobile:t},r)=>t&&r)).take(1);return Hn.of(!1).merge(i).merge(t.filter((e=>!e))).merge(r.mapTo(!1)).distinctUntilChanged()}({config$:r,mute$:ue,playerEvent$:e,shouldPlay$:I,viewportAutoplay$:ce,touchVideo$:j}),ge=Fo({currentVideo$:Q,isLiveVideo$:J,playerEvent$:e,proposedLiveStreamEnd$:ee,videoStart$:pe}),ye=function(e,t){return e.mapTo(!0).merge(t.mapTo(!1)).startWith(!1)}(O,E),ve=function({config$:e,playerEvent$:t,shouldPause$:r}){var n=t.withType("playing","dfp-ad-started","dfp-ad-resume").mapTo(!0),i=r.mapTo(!1),a=e.pluck("isContinuousPlay"),s=t.withType("ended").withLatestFrom(a,((e,t)=>t));return i.merge(n).merge(s).startWith(!1).distinctUntilChanged()}({config$:r,playerEvent$:e,shouldPause$:M}),be=j.filterByLatestFrom(re,((e,t)=>!t)),_e=Hn.of(Pa),Te=J.withLatestFrom(_e,((e,t)=>e&&!t)).filter((e=>e)),we=J.filter((e=>e)),Se=function({adDisplaying$:e,currentVideo$:t,errorCode$:r,isPlaying$:n,windowError$:i,scheduler:a,checkIsPlayingDelay:s=300}){return r.withLatestFrom(e,lo).merge(i.map((({message:e})=>e)).filter(ho)).delay(s,a).filterByLatestFrom(n,((e,t)=>!t)).withLatestFrom(t,((e,t)=>({error:e,video:t})))}({adDisplaying$:re,currentVideo$:Q,errorCode$:e.withType("errorCode").pluck("value"),isPlaying$:ve,windowError$:o.withType("error")}),Ce=function({cneError$:e,currentVideo$:t,mergedPlay$:r,continuousPlay$:n,playerEvent$:i,isPlaying$:a,seekEnd$:s,shouldPlay$:o,userIdle$:u,videoStart$:c,_isMobile:l=ka(),spinnerDelay$:d=Hn.timer(500)}){var h=e=>t=>t.switchMapTo(e.takeUntil(m)).publishReplay().refCount(),p=c.switchMapTo(o.takeUntil(i.withType("ended"))),f=l?i.withType(...Mo):i.withType(...Mo,"timeupdate"),m=Hn.merge(e,f),g=s.filter((e=>e.elapsed>100&&!l)).filterByLatestFrom(a,((e,t)=>!!t)),[y,v]=s.switchMapTo(d.takeUntil(m)).filterByLatestFrom(a,((e,t)=>!!t)).mapTo(l).partition((e=>e)),b=p.let(h(d)).filter((()=>!l)),[_,T]=p.let(h(i.withType("stalled"))).mapTo(l).partition((e=>e)),w=i.withType(...Mo),S=i.withType("timeupdate").filterByLatestFrom(c,((e,t)=>!!t)),C=r.take(1).filterByLatestFrom(e.startWith(null),((e,t)=>!t)).takeUntil(i.withType("playing")),k=i.withType("dfp-ad-complete","ended").filterByLatestFrom(n,u,((e,t,r)=>t&&!r)),E=Hn.merge(g.mapTo(Io.bgPoster),v.mapTo(Io.spinnerWithBgPoster),y.mapTo(Io.spinner),b.mapTo(Io.bgPoster),T.mapTo(Io.spinnerWithBgPoster),_.mapTo(Io.spinner),k.mapTo(Io.spinner),C.mapTo(Io.spinner)).takeUntil(e),O=Hn.merge(e.mapTo(Io.none),S.mapTo(Io.none),w.mapTo(Io.none)),A=Hn.merge(E,O);return t.take(1).switchMapTo(A).distinctUntilChanged()}({cneError$:Se,currentVideo$:Q,mergedPlay$:he,continuousPlay$:r.pluck("isContinuousPlay"),playerEvent$:e,isPlaying$:ve,seekEnd$:E,shouldPlay$:I,userIdle$:z,videoStart$:pe}),ke=function({config$:e,progressMouse$:t,windowEvent$:r}){var n=e.pluck("isMobile"),i=t.withType("down").pluck("event"),a=t.withType("move").pluck("event"),s=r.withType("mousemove"),o=r.withType("mouseup"),u=i.switchMap((()=>s.takeUntil(o)));return a.merge(u).filterByLatestFrom(n,((e,t)=>!t))}({config$:r,progressMouse$:C,windowEvent$:o}),Ee=function({config$:e,mute$:t,toggleCaptionsIntent$:r,captionsTrack$:n}){var i=e.withLatestFrom(t,(({autoplayEnabled:e,captionsCookie:t},r)=>e&&r?"showing":t||"hidden")).switchMap((e=>r.scan((e=>"hidden"==e?"showing":"hidden"),e).startWith(e)));return Hn.combineLatest(i,n,((e,t)=>t?{captions:t,displayMode:e}:{captions:t,displayMode:"disabled"}))}({config$:r,mute$:ue,toggleCaptionsIntent$:R,captionsTrack$:As(e)}),Oe=e.withType("useractive").merge(e.withType("userinactive")),Ae=function(e,t,r){var n=e.map((({volumeCookie:e})=>ws(e)?e:1)).takeUntil(r).merge(r.pluck("level")).distinctUntilChanged();return t.withLatestFrom(n,((e,t)=>e?0:e||t?t:1))}(r,ue,$),xe=function(e){return e.distinctUntilChanged((function(e,t){return 0!==e&&0!==t})).map((e=>0===e))}(Ae),Pe=function({buffer:e=250,playerEvent$:t,scheduler:r}){var n=t.withType("pause","ended","seeked","play");return n.throttleTime(e,r).switchMap((t=>Hn.race(Hn.timer(e,null,r).map((()=>t)),n.mapTo(!1)))).filter(Boolean).filter((({state:e,type:t})=>("content-playback"===e||!e)&&"pause"===t)).mapTo(!0)}({playerEvent$:e}),Le=function({analyticsPause$:e,playerEvent$:t}){return e.switchMapTo(t.withType("play").take(1))}({analyticsPause$:Pe,playerEvent$:e}),Me=function(e){return e.scan((e=>e+1),0)}(Q),Ie=function({loadVideoId$:e,videoEnded$:t,viewportAutoplay$:r}){var n=e.mapTo("manual"),i=t.mapTo("continuous"),a=r.mapTo("autoplay");return n.merge(i,a).startWith("manual")}({videoEnded$:e.withType("ended"),loadVideoId$:y,viewportAutoplay$:ce}),De=function(e,t){return e.withType("dfp-ad-complete").withLatestFrom(t,((e,{id:t})=>({finishedAdIndex:e.ad.podInfo.getPodIndex(),videoId:t})))}(e,Q),Ue=function(e,t,r=Hn.of(!1)){return e.filterByLatestFrom(r,((e,t)=>t)).withLatestFrom(t,((e,t)=>t))}(A,ve,J),Re=function(e,t,r,n=Hn.of(!1)){var i=t.filter((e=>!e)).mapTo(!1);return Hn.merge(e.mapTo(!0),i,r.mapTo(!0)).filterByLatestFrom(n,((e,t)=>t)).distinctUntilChanged()}(pe,ve,Ue,J),je=function(e,t,r=Hn.of(!1)){return e.switchMapTo(t.take(1).mapTo(!0)).filterByLatestFrom(r,((e,t)=>t))}(De,pe,J),Ne=function({cneError$:e,show360MessageOverlayIntent$:t,showLiveWaitingOverlayIntent$:r,showLiveMessageOverlay$:n,showUserIdleMessageOverlay$:i}){return Hn.merge(t.map(qo),n.map(Vo),e.map(zo),i.map(Wo),r.map(Ho))}({cneError$:Se,show360MessageOverlayIntent$:D,showLiveMessageOverlay$:Te,showLiveWaitingOverlayIntent$:U,showUserIdleMessageOverlay$:W}),Be=function({adDisplaying$:e,cneError$:t,cneOverlayIntent$:r,loadVideoId$:n,showLiveMessageOverlay$:i}){var a=r.filterByLatestFrom(e,((e,t)=>"hide"===e.action||!t)).merge(t.mapTo({type:"message",action:"show"}),n.mapTo({type:"message",action:"hide"}),n.mapTo({type:"play",action:"hide"}),i.mapTo({type:"message",action:"show"})),s=a.filter((e=>"message"===e.type)).map((e=>"hide"===e.action)).startWith(!0);return a.filterByLatestFrom(s,(({type:e},t)=>t||"message"===e))}({adDisplaying$:re,cneError$:Se,cneOverlayIntent$:l,loadVideoId$:y,showLiveMessageOverlay$:Te}),{mouseDown$:$e,mouseUp$:Fe,mouseMove$:Ve}=(i=document.getElementById("cne-360-container"),{mouseDown$:Hn.fromEvent(i,"mousedown").merge(Hn.fromEvent(i,"touchstart")).map((e=>co(e))),mouseUp$:Hn.fromEvent(document,"mouseup").merge(Hn.fromEvent(i,"touchend")),mouseMove$:Hn.fromEvent(i,"mousemove").merge(Hn.fromEvent(i,"touchmove")).map((e=>co(e)))}),He=function(e,t){return e.mapTo(!0).merge(t.mapTo(!1)).startWith(!1)}($e,Fe),qe=oo($e,Fe,Ve),ze=function(e,t){return e.switchMapTo(t.scan(((e,t)=>{var r=e.long-t.x,n=e.lat+t.y,i=Math.max(-85,Math.min(85,n)),a=(r+360)%360,s=Math.PI/180;return{lat:i,long:a,phi:(90-i)*s,theta:a*s}}),{lat:0,long:180}))}(Q,qe),We=function({config$:e,currentVideo$:t,loading$:r,widthHeight$:n}){var i={action:"hide"};return Hn.of(i).concat(t.take(1).filterByLatestFrom(e,Es).withLatestFrom(n,ks)).merge(r.mapTo(i))}({config$:r,currentVideo$:Q,loading$:Ce,widthHeight$:se}),Ge=function(e,t,r,n=jo){return t.map((({poster_frame:e})=>e)).merge(r).filterByLatestFrom(e,((e,t)=>e&&"hide"===t.action)).switchMap((e=>n(e).catch((()=>Hn.of("")))))}(We,Q,te),Xe=e.withType("tech").pluck("value").map((e=>"Html5"===e.name()?"html5vpaid":e.name())),Ke=e.filter((e=>e.type.match(/dfp-ad/))),Ye=Ke.pluck("ad").filter((e=>e)).startWith(null),Qe=Ke.pluck("adUnitPath").filter((e=>e)).startWith(null),Je=Ke.pluck("adsManager").filter((e=>e)).startWith(null),Ze=function({mouseLeavePlayer$:e,persistentShareEnter$:t,persistentShareLeave$:r,showShareOverlay$:n,scheduler:i},a=250){var s=t.mapTo(!0),o=r.switchMap((()=>{var e=Hn.timer(a,null,i).mapTo("left"),r=t.mapTo("re-enter");return Hn.race(e,r)})).filter((e=>"left"===e)).mapTo(!1),u=e.merge(n).mapTo(!1);return s.merge(u,o)}({mouseLeavePlayer$:v,persistentShareEnter$:T,persistentShareLeave$:w,showShareOverlay$:l.withType("share")}),et=function({captionsDisplayMode$:e,config$:t,isPlaying$:r,playerEvent$:n,settingsMenuHasFocus$:i,toggleSettings$:a,widthHeight$:s}){var o=i.map((e=>!e)),u=s.map((({width:e})=>e<500)).combineLatest(t,e.map((({displayMode:e})=>"disabled"===e)),((e,{isMobile:t},r)=>e||t||r)),c=r.combineLatest(n.withType("userinactive").mapTo(!0),((e,t)=>e&&t)).merge(o).filter(Boolean);return a.merge(c.mapTo(!1)).map((e=>e?"show":"hide")).combineLatest(u,((e,t)=>t?"disable":e)).share()}({captionsDisplayMode$:Ee,config$:r,isPlaying$:ve,settingsMenuHasFocus$:m.map((e=>"CneSettings"===e)),playerEvent$:e,toggleSettings$:N,widthHeight$:se}),tt=function(e,t){return e.switchMap((()=>t.pluck("displayMode").map((e=>({menu:"cneCaptionOptions",display:"disabled"===e?"disable":"enable"})))))}(P,Ee),rt=function({playerEvent$:e,settingsMenu$:t},r=Bo){var n=t.filter((e=>"show"===e)),i=t.filter((e=>"show"!==e)).merge(e.withType("userinactive"));return n.switchMap((()=>r.mapTo(!0).takeUntil(i)))}({playerEvent$:e,settingsMenu$:et}),nt=e.withType("percentComplete").pluck("value"),it=function({videoStart$:e,percentComplete$:t}){var r=Hn.merge(t.filter((e=>e>=.25)).take(1).mapTo(1),t.filter((e=>e>=.5)).take(1).mapTo(2),t.filter((e=>e>=.75)).take(1).mapTo(3));return e.switchMapTo(r)}({percentComplete$:nt,videoStart$:pe}),at=e.withType("fullscreen").pluck("value"),st=se.pluck("width").map((e=>e<Gi)).distinctUntilChanged(),ot=function({currentVideo$:e,config$:t,windowGoogle:r=window.google}){var n=t.pluck("playerConfig","adsDisabled");return e.filterByLatestFrom(n,((e,t)=>!(t||r&&r.ima))).mapTo(!0)}({config$:r,currentVideo$:Q}),ut=function({playerEvent$:e,analyticsAdBlocked$:t}){return e.withType("dfp-ad-error").filter((e=>e.adError&&"ADS_REQUEST_NETWORK_ERROR"===e.adError.code)).merge(t).mapTo(!0).startWith(!1)}({playerEvent$:e,analyticsAdBlocked$:ot}),ct=function(e,t){return e.withLatestFrom(t,((e,{id:t})=>({videoId:t,adBlocked:e})))}(ut,Q),lt=function({currentVideo$:e,playerEvent$:t}){var r=t.withType("dfp-ad-started").mapTo(!0),n=e.mapTo(!1);return Hn.merge(r,n)}({currentVideo$:Q,playerEvent$:e}),dt=function(e){return e.withType("dfp-content-pause").switchMapTo(e.withType("dfp-content-resume").mapTo(!0).take(1)).merge(e.withType("playing").mapTo(!1)).distinctUntilChanged()}(e),ht=function(e){return e.scan((e=>e+1),0).startWith(0)}(S);return{ad$:Ye,adDisplaying$:re,adFinished$:De,adBlocked$:ut,adBlockedUnique$:ct,videoIfAdsNotDisabled$:function(e,t){return e.withLatestFrom(t,((e,{playerConfig:t})=>t.adsDisabled?null:e))}(Q,r),adUnitPath$:Qe,adSkippable$:ne,adsManager$:Je,analyticsAdBlocked$:ot,analyticsVolume$:Ae,animatedClipDisplaying$:We,captionsDisplayMode$:Ee,cne360MouseActive$:He,cne360CanvasSource$:Y,cne360LatLong$:ze,cneOverlay$:Be,config$:r,contentResuming$:dt,currentTimeInMs$:(a=de,a.map((e=>Math.floor(1e3*e)))),currentVideo$:Q,documentHidden$:s,facadeReady$:p,liveLoadingState$:Z,loading$:Ce,initializeInBandCaptions$:we,infinityId$:F,inSyncWithLiveStream$:Re,seekLatestAfterPrerollForLive$:je,isLiveVideo$:J,isPlaying$:ve,isSeeking$:ye,mute$:ue,posterFrame$:Ge,percentComplete$:nt,playlist$:G,isPersistent$:ko({isPersistent$:_,isFullscreen$:at}),prerollPlayed$:lt,showPersistentMute$:me,setTime$:nu(x),settingsMenu$:et,smallLayout$:st,reportUserActivity$:rt,settingsSubMenu$:tt,showLiveEndCard$:ge,showShareDropdown$:Ze,techName$:Xe,viewportPercentage$:q,viewportStatus$:H,updateMessageOverlay$:Ne,videoStartType$:Ie,viewportAutoplay$:ce,volume$:oe,videoEndedOrSwitched$:le,widthHeight$:se,analyticsMute$:xe,analyticsPause$:Pe,analyticsResume$:Le,adRestart$:ie,captionsUpdateTextTrackDisplay$:Oe,closeMessage$:c,cne360MouseDrag$:qe,cne360AnimationInterval$:X,cneError$:Se,enterFullScreen$:d,exitFullScreen$:h,focusChanged$:f,loadCaptions$:Lo(pe,Q,e),loadVideoId$:y,mouseLeavePlayer$:v,muteToggle$:b,playerEvent$:e,playsOnPage$:ht,quartile$:it,replay$:No(Q,e.withType("ended"),e.withType("play")),saveSettings$:k,scrub$:ke,seekLatest$:Ue,seekEnd$:E,shareIntent$:L,shouldPause$:M,mergedPlay$:he,shouldShareVideo$:$o({currentVideo$:Q,shareIntent$:L}),toggleUserActive$:be,trackSparrowIntent$:B,videoStart$:pe,videoOrAdStart$:fe,videoView$:Me,volumeIntent$:$}}function au(e){return Hn.of((({eventString:t,data:r})=>e.trigger({type:t,data:r},r)))}var su=e=>({config:t,type:r,adDuration:n})=>{var i=1e3*n;switch(r){case"playContent":e.playVideoContentPart(t);break;case"playAd":e.playVideoAdvertisement({ns_st_cl:i});break;case"stop":e.stop()}};function ou(e,t,{tagAction:r=su,toScript$:n=So,win:i=window}={}){return e.filter((e=>e.video&&e.video.comscore_config)).pluck("environment","comscore_library_path").switchMap((e=>n(e).map((()=>i.ns_)))).filter((e=>e&&e.StreamingTag)).switchMap((e=>t=>e.switchMap((e=>e.comscore_config?Hn.of(new t.StreamingTag({customerC2:"".concat(e.comscore_config.c2)})):Hn.never())))(t)).map(r)}var uu=((e,t,r,n,i,a,s)=>{e.fbq||(e.fbq=function(){i.callMethod?i.callMethod.apply(i,arguments):i.queue.push(arguments)},i=e.fbq,e._fbq||(e._fbq=i),i.push=i,i.loaded=!0,i.version="2.0",i.queue=[],(a=t.createElement(r)).async=!0,a.src=n,(s=t.getElementsByTagName(r)[0]).parentNode.insertBefore(a,s))}).bind(null,window,document,"script","https://connect.facebook.net/en_US/fbevents.js");function cu(e,t=uu,r=window){t();var n,{fbq:i}=r;return e.pluck("facebook_pixel_id").switchMap((e=>e?Hn.of(e):Hn.never())).distinctUntilChanged().do((e=>((e,t)=>t("init",e))(e,i))).mapTo((n=i,({type:e,params:t,custom:r})=>{n(r?"trackCustom":"track",e,t)}))}var lu=r(90),du={allure:"GTM-WPC9DS6",arstechnica:"GTM-NLXNPCQ",brides:"GTM-5HMN9N3",architecturaldigest:"GTM-MRVDKNL",architecturaldigestindia:"GTM-W4C53LN",architecturaldigestitaly:"GTM-WTNTX26",architecturaldigestfrance:"GTM-TNLG3KG",architecturaldigestgermany:"GTM-56SZBMB",architecturaldigestspain:"GTM-5W83PTH",architecturaldigestrussia:"GTM-5WZKZ74",bonappetit:"GTM-TLPN5X9",cntraveler:"GTM-5RDFB8G",epicurious:"GTM-PCTXLQR",glamour:"GTM-TXVJXJD",golfdigest:"GTM-M94KNML",gq:"GTM-PC9B6Z6",heyiris:"GTM-K5S77MT",newyorker:"GTM-NX5LSK3",nonconde:"GTM-M3LWXF2",pitchfork:"GTM-MMFBX2W",self:"GTM-KSHC4S5",teenvogue:"GTM-5WV8CLP",them:"GTM-NP9DWF8",thescene:"GTM-5JDFFGT",vanityfair:"GTM-KSG89LT",vanityfairfrance:"GTM-K8TFQ7T",vanityfairspain:"GTM-MP9L7FM",vanityfairitalia:"GTM-T9LN2QS",wired:"GTM-5HBJC2K",wmagazine:"GTM-TXW6R9J",vogue:"GTM-MC44X36",vogueindia:"GTM-M3SG2X6",gqindia:"GTM-P223J33",cntravelerindia:"GTM-5ZWM7R",cntraveleruk:"GTM-KJMKBQ5",cntravelerspain:"GTM-K5Q7ST6",vogueuk:"GTM-KG7M3XB",wireditalia:"GTM-PTX8W8W",wireduk:"GTM-5MLKVKC",tatlerrussia:"GTM-KSMT82T",tatleruk:"GTM-TRLZ9GV",voguefrance:"GTM-N5PNP2L",voguespain:"GTM-KQ8LPCC",vogueitaly:"GTM-TL59GFJ",voguegermany:"GTM-5P7NXHK",voguemexico:"GTM-57C6XM8",voguejapan:"GTM-MHBCRTH",voguetaiwan:"GTM-TPWMSWZ",voguerussia:"GTM-WQMFMCM",glamouruk:"GTM-MQK3BWT",glamourspain:"GTM-NNCNB3T",glamourrussia:"GTM-PNXVDX3",gqfrance:"GTM-K42BJLV",gquk:"GTM-W2K49QH",gqspain:"GTM-5M2Z395",gqitaly:"GTM-NRLM5D4",gqgermany:"GTM-NQPFNCC",gqjapan:"GTM-K8MFHJW",gqmexico:"GTM-TGJJPT5",gqtaiwan:"GTM-PC2V8K9",gqrussia:"GTM-MQH9V6R"};function hu(e,t,r){var{referenceWindow:n,playerConfig:i}=e,a=i.embedLocation.split("-")[0]||"nonconde";"amp-article"===i.pageType&&(a="nonconde",n._cne.ampDomain=i.analyticsUrl||n.location.host);var s=du[a],o=function(e){for(var t=[],r=e.document.querySelectorAll('script[src*="googletagmanager.com/gtm.js"]'),n=0;n<r.length;n++){var i=(0,lu.Z)(r[n].src).searchParams,a=i.get("id"),s=i.get("l")||"dataLayer";e[s]&&t.push({gtmId:a,dataLayerName:s})}return t}(n),u=o.filter((e=>e.gtmId===s))[0];return u?Hn.of({referenceWindow:n,dataLayerName:u.dataLayerName}):o.length>0?(r("GAConflict",i.analyticsUrl||n.location),Hn.never()):t("https://www.googletagmanager.com/gtm.js?id=".concat(s,"&l=cneDataLayer"),function(e){return()=>{var t=e.document;e.cneDataLayer=[{"gtm.start":(new Date).getTime(),event:"gtm.js"}];var r=t.getElementsByTagName("script")[0],n=t.createElement("script");return n.async=!0,r.parentNode.insertBefore(n,r),n}}(n),function(e){var t={referenceWindow:e,dataLayerName:"cneDataLayer"};return(e,r)=>r(t)}(n))}function pu(e,t=So,r=zs){return e.take(1).switchMap((e=>hu(e,t,r))).map((e=>function(e){return function(t){var{referenceWindow:r,dataLayerName:n}=e;r[n].push(t)}}(e)))}function fu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gu({target:e,moatApiSpecifics:t,moatPartnerCode:r,isAdTracking:n}){var{protocol:i}=window.location,a="https:"===i?"z":"js",s="_moatApi"+Math.floor(1e8*Math.random()),o="".concat(i,"//").concat(a,".").concat("moatads.com","/").concat(r,"/moatvideo.js#").concat(s),u=yu(e,n),c=[],l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fu(Object(r),!0).forEach((function(t){mu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({dispatchEvent(e){this.sendEvent?(c&&(c.push(e),e=c,c=!1),this.sendEvent(e)):c.push(e)}},t);return window[s]=l,So(o,u).mapTo(l.dispatchEvent.bind(l))}var yu=(e,t)=>()=>{var r=document.getElementById(e),n="js-cne-moat-script-".concat(t?"ad":"content"),i=r.querySelector("#".concat(n));if(i){i.parentNode.removeChild(i);var a=i.src;if(a&&a.length>0){var s=a.split("#");if(s.length>1){var o=s[s.length-1];delete window[o]}}}var u=document.createElement("script");return u.type="text/javascript",u.id=n,u.async=!0,r&&r.insertBefore(u,r.childNodes[0]||null),u};function vu({adUnitPath$:e,config$:t,currentVideo$:r},n=gu){return Hn.combineLatest(e,t,r).map((([e,t,r])=>({adUnitPath:e,config:t,currentVideo:r}))).filter((({adUnitPath:e,config:t,currentVideo:r})=>e&&r&&t)).distinctUntilChanged(((e,t)=>e.currentVideo.id===t.currentVideo.id)).switchMap((({adUnitPath:e,currentVideo:t,config:r})=>{if(!t.moat_content_partner_code)return Hn.never();var i={adData:{ids:{level1:t.title,level2:e,slicer1:r.location,zMoatAP:r.autoplayEnabled,zMoatVideoId:t.id},duration:t.duration,url:t.url}};return n({isAdTracking:!1,moatApiSpecifics:i,moatPartnerCode:t.moat_content_partner_code,target:r.playerConfig.target})}))}function bu({adsManager$:e,adUnitPath$:t,config$:r,currentVideo$:n,playerEvent$:i},a=gu){var s=i.withType("fullscreen").pluck("value");return e.withLatestFrom(t,r,n,s).map((([e,t,r,n,i])=>({adsManager:e,adUnitPath:t,config:r,currentVideo:n,fullscreen:i}))).filter((({config:e,currentVideo:t,adsManager:r,adUnitPath:n})=>e&&t&&r&&n)).distinctUntilChanged(((e,t)=>e.adsManager===t.adsManager)).switchMap((({adsManager:e,adUnitPath:t,config:r,currentVideo:n,fullscreen:i})=>{var{playerType:s,target:o}=r.playerConfig,u="interlude"===s?"condenastinlineint626489506216":n.moat_ad_partner_code;if(!u)return Hn.never();var[,c="",l="",d="",h=""]=t.split("/").filter(Boolean),p={adsManager:e,ids:{partnerCode:u,viewMode:i?"fullscreen":"normal",slicer1:r.location,slicer2:t,zMoatBrand:c,zMoatPlayer:l,zMoatSiteSection:d,zMoatTemplate:h},imaSDK:!0};return a({isAdTracking:!0,moatApiSpecifics:p,moatPartnerCode:u,target:o})}))}function _u(e){var{protocol:t}=window.location,r="".concat(t,"//cdn-gl.imrworldwide.com/conf/").concat(e,".js#name=nlsnInstance&ns=NOLBUNDLE"),n=function(){var e={g:{},ggPM(e,t){window.NOLBUNDLE.nlsnInstance.q=window.NOLBUNDLE.nlsnInstance.q||[],window.NOLBUNDLE.nlsnInstance.q.push([e,t])}};return window.NOLBUNDLE=window.NOLBUNDLE||{},window.NOLBUNDLE.nlsnInstance=window.NOLBUNDLE.nlsnInstance||e,e}();return So(r).mapTo((e=>({type:t,data:r})=>{e.ggPM(t,r)})(n))}function Tu(e,t=_u){return e.pluck("nielsen_api_id").switchMap((e=>e?Hn.of(e):Hn.never())).distinctUntilChanged().switchMap(t)}function wu(e,t,r){if(!t||0==t.length||!r||0==r.length||t.length!==r.length)return e;var n=t.indexOf("GDFP");return n>=0?r[n]:e}function Su(e){var{pageType:t,embedLocation:r}=e;return"instant-article"===t?"fbia":"amp-article"===t?"amp":r&&r.length?"oo":"non-oo"}var Cu=({adAssetsUrl:e,baseUrl:t,ssl:r})=>({ad:n,adBlocked:i,adUnitPath:a,category:s,config:o,dimensions:u,documentHidden:c,infinityId:l,isPersistent:d,meta:h={},playsOnPage:p,prerollPlayed:f,type:m,video:g,videoStartType:y,videoView:v,viewportStatus:b},{beacon:_=Bs,date:T=(new Date).toISOString(),win:w=window}={})=>{var{analyticsUrl:S,playerType:C,recAlgorithm:k="",recStrategy:E="",isRightRail:O}=o.playerConfig,A=n&&n.mediaUrl&&n.mediaUrl.indexOf(e)>=0?"site_served":null,x=o.autoplayEnabled?"autoplay":"manual",P=function({referenceWindow:e}){var[{site:t,content:r}={}]=e.dataLayer||[],{orgId:n,orgAppId:i}=t||{},{contentType:a}=r||{};return{org_id:n,org_app_id:i,contentType:a}}(o),L={_ts:T,_c:s,_t:m,app:"playerservice",cBr:g.brand,cCh:"videos/show",cCu:g.url,cId:g.id,cKe:g.tags?g.tags.toString():"",cPd:g.premiere_date,cTi:g.title,cTy:a,mDu:g.duration,pHr:S||o.location,pID:o.pageId,pWw:u.width,pWh:u.height,sID:o.sessionId,uId:o.uId,xid:l,dim1:JSON.stringify({contentStartType:y,doNotTrackSetting:o.doNotTrackSetting,environment:Su(o.playerConfig),gitBranch:o.playerConfig.gitBranch,gitSha:o.playerConfig.gitSha,guid:o.guid,isMobile:o.isMobile,isVerso:!!P.org_app_id,initialPlayerStartType:x,persistent:d,playerDepth:o.videoPagePosition,playerType:C,playsOnPage:p,prerollPlayed:f,recAlgorithm:k,recStrategy:E,isRightRail:O,tabStatus:c?"hidden":"active",versoContentType:P.contentType,videoViews:v,viewportStatus:b}),dim2:JSON.stringify({adBlocked:i,adId:n?n.adId:"",adType:n?n.apiFramework||A||"unknown":"",creativeId:n?n.creativeId:"",wrapperAdIds:n?n.wrapperAdIds:"",wrapperAdSystems:n?n.wrapperAdSystems:"",dfpLineItem:n?wu(n.adId,n.wrapperAdSystems,n.wrapperAdIds):"",publicaEnabled:o.publicaEnabled,podIndex:n&&n.podInfo?n.podInfo.getPodIndex():""})};h.adId=n?n.adId:"","GoogleTag"===s&&(L._v=w.performance.now()-h.pollStart),_([t,Ma(L),Ma(h),Ma(P)].filter((e=>e.length)).join("&"),r)};function ku(e,{track:t=Cu}={}){return e.map((({environment:e})=>t((e=>({adAssetsUrl:e.ad_assets_url,baseUrl:Is(),ssl:e.ssl}))(e))))}function Eu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ou(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Au(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function xu(e=window.fetch||Zs){return Hn.of((t=>{var{endpoints:r,video:n}=t,i=Au(t,["endpoints","video"]);return r.forEach((t=>{var r=Ma(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Eu(Object(r),!0).forEach((function(t){Ou(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:n.id,brand:n.brand,title:n.title,expiration:n.live_metadata.end_date},i));e("".concat(t,"?").concat(r))}))}))}function Pu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pu(Object(r),!0).forEach((function(t){Mu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Iu=()=>Math.floor(65536*Math.random()).toString(16);function Du(e){var t=new Map,[,r]=e.split("?");return(r?r.split("&"):[]).forEach((e=>{var[r,n]=e.split("=");t.set(r,decodeURIComponent(n))})),t}var Uu;function Ru(e=Ka){var t,r=e("aam_uuid",""),n=e("aam_fw","");return{userId:r,segmentKeyValues:(t=n)?t.split(";"):[]}}function ju(e,t){var r=e?window.top:window,n=e&&window.frameElement||t,{top:i}=n.getBoundingClientRect();return r.pageYOffset+i}function Nu(){if(!Uu)try{var e=document.createElement("canvas");Uu=!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){Uu=!1}return Uu}function Bu(e){var{sponsoredVideo:t,environment:r,playerConfig:n,video:i}=e,a=$s(),s=function({target:e}){var t=document.getElementById(e);if(!t)throw new Error("Could not find playerContainer with id '#".concat(e,"'"));return t}(n),o=function(e){var t=document.createElement("video"),r=Qi("cne-support-enable-javascript"),n='<a href="http://videojs.com/html5-video-support/" target="_blank">'.concat(Qi("cne-support-html5-video"),"</a>");return t.className="vjs-default-skin",t.removeAttribute("controls"),t.setAttribute("webkit-playsinline",""),t.setAttribute("playsinline",""),t.setAttribute("crossorigin","anonymous"),t.innerHTML='<p class="vjs-no-js">'.concat(r," ").concat(n,"</p>"),e.appendChild(t),t}(s),u=Fs(),c=parseFloat(Ka("volume")),l=a?window.top:window;return{aspectRatio:n.aspectRatio,audienceManagerConfig:Ru(),autoplayEnabled:r.canAutoplay!==Uo&&n.autoplay,canAccessParent:a,canAutoplay:r.canAutoplay!==Uo,captionsCookie:Ka("captions"),doNotTrackSetting:l.navigator?l.navigator.doNotTrack:null,environment:r,guid:r.guid||Iu()+Iu()+"-"+Iu()+"-"+Iu()+"-"+Iu()+"-"+Iu()+Iu()+Iu(),is360Supported:Nu()&&!Ea(),isContinuousPlay:n.continuousPlay||n.loopVideo,isMobile:ka(),isScriptEmbed:n.isScriptEmbed,location:u,mutedConfig:Ro(Ka("muted"),c,e),pageId:Ka("pID",""),playerConfig:n,playerContainer:s,publicaEnabled:!!e.publicaEnabled,referenceWindow:l,sessionId:Ka("sID",""),sponsoredVideo:t,uId:Ka("CN_sp",""),urlVars:Du(u),video:i,videoEl:o,videoPagePosition:ju(a,o),volumeCookie:c}}var $u="#222",Fu="#ccc",Vu=()=>({colors:{white:"#fff",black:"#fff"},fonts:{families:{ArialMT:"ArialMT",casual:'"Comic Sans MS", Impact, fantasy',default:"ArialMT",monospace:"monospace",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",sansSerif:"sans-serif",script:'"Monotype Corsiva", cursive',serif:"serif",smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif',SUFIText:"SFUIText, sans-serif"},sizes:{small:"16px",medium:"20px",large:"24px"},variants:{smallcaps:"small-caps"}},languages:{english:Qi("cne-caption-language-english")},textShadows:{dropshadow:"2px 2px 3px ".concat($u,",\n      2px 2px 4px ").concat($u,",\n      2px 2px 5px ").concat($u),raised:"1px 1px ".concat($u,",\n      2px 2px ").concat($u,",\n      3px 3px ").concat($u),depressed:"1px 1px ".concat(Fu,",\n      0 1px ").concat(Fu,",\n      -1px -1px ").concat($u,",\n      0 -1px ").concat($u),uniform:"0 0 4px ".concat($u,",\n      0 0 4px ").concat($u,",\n      0 0 4px ").concat($u,",\n      0 0 4px ").concat($u)},positions:{top:{top:"2px",bottom:"auto"},bottom:{top:"auto",bottom:"2px"},auto:null},defaultValues:{backgroundColor:"#000",backgroundOpacity:"0.5",color:"#fff",edgeStyle:"dropshadow",fontSize:"14px",fontFamily:"SUFIText",language:"English",position:"auto",videoQuality:"auto"}}),Hu={auto:"auto",UHD4K:"4k",HD1080:"1080",HD720:"720",SD360:"360"},qu={videoQuality:"auto"},zu=()=>{var e=Qi("cne-player-font-small"),t=Qi("cne-player-font-medium"),r=Qi("cne-player-font-large"),n=Qi("cne-player-position-auto"),i=Qi("cne-player-position-bottom"),a=Qi("cne-player-position-top"),s=Qi("cne-player-quality-auto");return{fontSize:[[e,Vu().fonts.sizes.small],[t,Vu().fonts.sizes.medium],[r,Vu().fonts.sizes.large]],language:[[Qi("cne-caption-language-english"),Vu().languages.english]],position:[[n,"auto"],[i,"bottom"],[a,"top"]],videoQuality:[[s,Hu.auto],['2160<span class="resolution">4k<span>',Hu.UHD4K],['1080<span class="resolution">HD<span>',Hu.HD1080],["720",Hu.HD720],["360",Hu.SD360]]}};var Wu=()=>{var e={progressControl:{children:{seekBar:{children:{loadProgressBar:!0,playProgressBar:{timeTooltip:!0},cneScrubberThumb:!0}}}},cneFullscreenToggle:!0,playToggle:!0,cneLiveIndicator:!0,cneVolumeToggle:{children:{muteToggle:!0,volumeControl:{vertical:!0,children:{volumeBar:{children:{volumeLevel:!0}}}}}},cneVolumeAlert:!0,cneCaptionsButton:!0,cneSettings:{children:{cneSettingsToggle:!0,cneSettingsMenu:{children:{settingsHeader:!0,settingsBody:{children:{cnePlayerSettings:{title:Qi("cne-player-settings-title"),children:[{name:"cneOptionGroup",className:"cne-settings-option-group cne-video-quality",defaultValue:qu.videoQuality,label:Qi("cne-player-video-quality"),listItems:zu().videoQuality,settingKey:"videoQuality",title:"player settings"},{name:"cneButton",className:"cne-settings-button",text:Qi("cne-player-caption-options"),intents:[{type:"intent:show-settings-submenu",data:"CnePlayerSettings"}]}]},cneCaptionOptions:{title:Qi("cne-player-caption-title"),children:[{name:"cneDropdown",className:"cne-captions-language",defaultValue:Vu().defaultValues.language,label:Qi("cne-player-language"),listItems:zu().language,settingKey:"language",title:"closed captions language"},{name:"cneDropdown",className:"cne-captions-font-size",defaultValue:Vu().defaultValues.fontSize,label:Qi("cne-player-font-size"),listItems:zu().fontSize,settingKey:"fontSize",title:"closed captions font size"},{name:"cneOptionGroup",className:"cne-captions-position",defaultValue:Vu().defaultValues.position,label:Qi("cne-player-position"),listItems:zu().position,settingKey:"position",title:"closed captions position"},{name:"cneButton",className:"cne-settings-button cne-style-options-button",text:Qi("cne-player-style-options"),intents:[{type:"intent:show-settings-submenu",data:"CneCaptionStyles"}]}]}}},settingsFooter:!0}}}},currentTimeDisplay:!0,durationDisplay:!0,remainingTimeDisplay:!0,fullscreenToggle:!0};return e};var Gu=i().getComponent("Component");class Xu extends Gu{createEl(){var e=document.createElement("div");e.id="awesome-container";var t=super.createEl("div",{className:"awesome-wrapper"});return t.appendChild(e),this.adEl_=e,t}adEl(){return this.adEl_}updateFocusable(e){this.toggleClass("cne-invisible",!e)}}i().registerComponent("AdContainer",Xu);var Ku=i().getComponent("Component");class Yu extends Ku{createEl(){return super.createEl("div",{className:"click-mask"})}}i().registerComponent("AdClickMask",Yu);var Qu=i().getComponent("Component"),Ju=500;class Zu extends Qu{createEl(){var e,t=this.options_.projection_type_360,r=this.player_.tech({IWillNotUseThisInPlugins:!0}).el(),n=this.options_.width,i=this.options_.height;this.scene=new window.THREE.Scene,this.camera=new window.THREE.PerspectiveCamera(75,n/i,1,2e3),this.camera.target=new window.THREE.Vector3(0,0,0),this.renderer=new window.THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.setRendererSize(n,i),this.renderer.autoClear=!1,this.renderer.setClearColor(0,1),this.texture=new window.THREE.Texture(r),this.texture.generateMipmaps=!1,this.texture.minFilter=window.THREE.LinearFilter,this.texture.maxFilter=window.THREE.LinearFilter,this.texture.format=window.THREE.RGBFormat,(e="equirectangular"===t?new window.THREE.SphereGeometry(Ju,60,40):new window.THREE.SphereBufferGeometry(Ju,60,40).toNonIndexed()).scale(-1,1,1);var a=new window.THREE.Mesh(e,new window.THREE.MeshBasicMaterial({map:this.texture}));return this.scene.add(a),this.time=(new Date).getTime(),this.renderer.domElement}render(){4===this.player_.readyState()&&(this.texture.needsUpdate=!0),this.renderer.render(this.scene,this.camera),this.camera.lookAt(this.camera.target)}updateCamera(e,t){this.camera.target.x=Ju*Math.sin(e)*Math.cos(t),this.camera.target.y=Ju*Math.cos(e),this.camera.target.z=Ju*Math.sin(e)*Math.sin(t)}updateSize({width:e,height:t}){this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.setRendererSize(e,t)}setRendererSize(e,t){e>3840&&(t=t/e*3840,e=3840),this.renderer.setSize(e,t,!1)}}i().registerComponent("Cne360Canvas",Zu);var ec='width="100%" height="100%"',tc='viewBox="0 0 30 30"',rc="\n<svg ".concat(ec,' viewBox="0 0 56 56" focusable="false">\n  <rect transform="translate(4 4)" fill="#000" width="48" height="48" rx="24" fill-opacity=".6"/>\n  <circle cx="28" cy="28" r="25" stroke="#FFF" stroke-width="3" fill="none" stroke-opacity=".6" />\n  <use xlink:href="#svg-big-play-icon" />\n</svg>'),nc='\n<svg height="100%" viewBox="0 0 33.48 24" focusable="false">\n  <use xlink:href="#svg-email" />\n</svg>',ic='\n<svg height="100%" '.concat(tc,' focusable="false">\n  <use xlink:href="#svg-facebook" />\n</svg>'),ac="\n<svg ".concat(ec,' viewBox="0 0 38.2999992 30" focusable="false">\n  <use xlink:href="#svg-full-screen" class="svg-full-screen" />\n  <use xlink:href="#svg-full-screen" class="svg-full-screen shadow" />\n\n  <use xlink:href="#svg-full-screen-exit" class="svg-full-screen-exit" />\n  <use xlink:href="#svg-full-screen-exit" class="svg-full-screen-exit shadow" />\n</svg>'),sc="\n<svg ".concat(ec,' viewBox="0 0 37.5 30" focusable="false">\n  <use xlink:href="#svg-muted" class="svg-muted" />\n  <use xlink:href="#svg-muted" class="svg-muted shadow" />\n  <use xlink:href="#svg-speaker" class="svg-speaker" />\n  <use xlink:href="#svg-speaker" class="svg-speaker shadow" />\n  <use xlink:href="#svg-volume-high" class="svg-volume-high" />\n  <use xlink:href="#svg-volume-high" class="svg-volume-high shadow" />\n  <use xlink:href="#svg-volume-low" class="svg-volume-low" />\n  <use xlink:href="#svg-volume-low" class="svg-volume-low shadow" />\n</svg>'),oc="\n<svg ".concat(ec,' viewBox="0 0 37.5 30" focusable="false">\n  <use xlink:href="#svg-muted" class="svg-muted" />\n  <use xlink:href="#svg-muted" class="svg-muted shadow" />\n  <use xlink:href="#svg-speaker" class="svg-speaker" />\n  <use xlink:href="#svg-speaker" class="svg-speaker shadow" />\n</svg>'),uc='\n<svg height="100%" '.concat(tc,' focusable="false">\n  <use xlink:href="#svg-pinterest" />\n</svg>'),cc="\n<svg ".concat(ec,' viewBox="0 0 26.1000004 30" focusable="false">\n  <use xlink:href="#svg-play" />\n  <use xlink:href="#svg-play" class="shadow" />\n</svg>'),lc="\n<svg ".concat(ec,' viewBox="0 0 26.1000004 30" focusable="false">\n  <use xlink:href="#svg-pause" class="svg-pause" />\n  <use xlink:href="#svg-pause" class="svg-pause shadow" />\n\n  <use xlink:href="#svg-play" class="svg-play" />\n  <use xlink:href="#svg-play" class="svg-play shadow" />\n</svg>'),dc="\n<svg ".concat(ec,' viewBox="0 0 28 30" focusable="false">\n  <use xlink:href="#svg-share" />\n  <use xlink:href="#svg-share" class="shadow" />\n</svg>'),hc="\n<svg ".concat(ec,' viewBox="0 0 40 30" focusable="false">\n  <use xlink:href="#svg-360-dial" />\n</svg>'),pc="\n<svg ".concat(ec,' viewBox="0 0 75 30" focusable="false">\n  <use xlink:href="#svg-360-icon" />\n</svg>'),fc='\n<svg height="100%" '.concat(tc,' focusable="false">\n  <use xlink:href="#svg-tumblr" />\n</svg>'),mc='\n<svg height="100%" '.concat(tc,' focusable="false">\n  <use xlink:href="#svg-twitter" />\n</svg>'),gc='\n<svg height="100%" '.concat(tc,' focusable="false">\n  <use xlink:href="#svg-url" />\n</svg>'),yc='\n<svg height="9" viewBox="0 0 12 9" focusable="false">\n  <use xlink:href="#svg-check" />\n</svg>',vc=i().getComponent("Component");class bc extends vc{createEl(){return super.createEl("div",{className:"cne-360-compass",innerHTML:pc})}updateRotation(e){this.el().innerHTML='\n      <div class="cne-360-icon">'.concat(pc,'</div>\n      <div class="cne-360-compass-dial" style="transform:rotate(').concat(e,'deg);">\n        ').concat(hc,"\n      </div>")}}i().registerComponent("Cne360Compass",bc);var _c;function Tc(){if(void 0===_c)try{_c=!!window.AudioContext}catch(e){_c=!1}return _c}var wc=i().getComponent("Component"),Sc=Math.PI/2,Cc=Math.PI;class kc extends wc{createEl(){return super.createEl("div",{className:"cne-360-container",id:"cne-360-container"})}updateSrc(e){this.removeChild("Cne360Canvas"),this.removeClass("active"),e&&window.THREE&&(this.initializeAudio(),this.addClass("active"),this.addChild("Cne360Canvas",{projection_type_360:e,width:this.width,height:this.height}),this.updatePhiTheta(Sc,Cc))}render(){var e=this.getChild("Cne360Canvas");e&&e.render()}updateSize({width:e,height:t}){this.width=e,this.height=t;var r=this.getChild("Cne360Canvas");r&&r.updateSize({width:e,height:t})}updatePhiTheta(e,t){var r=this.getChild("Cne360Canvas");r&&(r.updateCamera(e,t),this.updateAudio(e,t))}initializeAudio(){if(!this.foaDecoder&&Tc()){var{Euler:e,Matrix3:t,Matrix4:r,Omnitone:n,Quaternion:i}=window.THREE,a=this.player_.tech({IWillNotUseThisInPlugins:!0}).el();this.euler_=new e,this.orientation_=new i,this.rotationQuarternion_=new i,this.rotationMatrix4_=new r,this.rotationMatrix_=new t;var s=new AudioContext,o=n.createFOADecoder(s,a,{postGainDB:2,channelMap:[0,1,2,3]});o.initialize().then((()=>{o.setMode("ambisonic")})),this.foaDecoder=o}}updateAudio(e=0,t=0){this.foaDecoder&&Tc()&&(this.euler_.set(e,t,0,"YXZ"),this.orientation_.setFromEuler(this.euler_),this.rotationQuarternion_=this.orientation_.inverse(),this.rotationMatrix4_.makeRotationFromQuaternion(this.rotationQuarternion_),this.rotationMatrix_.setFromMatrix4(this.rotationMatrix4_),this.rotationMatrix_.getNormalMatrix(this.rotationMatrix4_),this.foaDecoder.setRotationMatrix(this.rotationMatrix_.elements))}}i().registerComponent("Cne360Container",kc);var Ec=i().getComponent("ClickableComponent");class Oc extends Ec{constructor(){super(),this.el_.removeAttribute("role")}createEl(){return super.createEl("div",{className:"cne-animated-clip",tabIndex:"-1"},{"aria-live":"off"})}update({action:e,animated_clip_url_mp4:t,animated_clip_url_webm:r,animated_clip_still:n}){"show"===e?this.el().innerHTML='<video loop muted autoplay webkit-playsinline playsinline\n                                poster="'.concat(n,'" >\n                                <source src="').concat(t,"\" type='video/mp4'>\n                                <source src=\"").concat(r,"\" type='video/webm'>\n                             </video>"):"hide"===e&&(this.el().innerHTML="")}handleClick(){this.player_.trigger("intent:play")}}i().registerComponent("CneAnimatedClip",Oc);var Ac=i().getComponent("ClickableComponent");const xc=class extends Ac{createControlTextEl(){}controlText(){}handleKeyUp(e){32===e.keyCode&&e.stopPropagation()}};class Pc extends xc{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){return super.createEl("div",{className:"cne-big-play-title"})}handleClick(){this.player_.trigger("intent:play")}update({title:e,hidePosterTitle:t}){this.el_.innerHTML=this.getInnerHTML(e),t?this.addClass("hide-title"):this.removeClass("hide-title")}getInnerHTML(e){return"<div class='vjs-big-play-button' tabindex='-1'>".concat(rc,"</div>\n            <div class='cne-big-play-title-section'>\n              <div class='cne-big-play-title-watch'>").concat(Qi("cne-player-big-play-title-watch"),"</div>\n              <div class='cne-big-play-title-text'>").concat(e,"</div>\n            </div>")}}i().registerComponent("CneBigPlayTitle",Pc);class Lc extends xc{createEl(){var e=this.options_.text;return this.intents=this.options_.intents,super.createEl("div",{className:this.options_.className||"cne-button"},{"data-msg":e})}handleClick(){for(var e of this.intents)e.data?this.player_.trigger(e.type,e.data):this.player_.trigger(e)}}i().registerComponent("CneButton",Lc);var Mc='\n<span class="custom-control-focus" tabindex="-1">\n  '.concat('\n<svg width="20" height="16" viewBox="0 0 20 16" focusable="false">\n  <use xlink:href="#svg-cc-on" class="svg-cc-on" />\n  <use xlink:href="#svg-cc-on" class="svg-cc-on shadow" />\n  <use xlink:href="#svg-cc-off" class="svg-cc-off" />\n  <use xlink:href="#svg-cc-off" class="svg-cc-off shadow" />\n  <use xlink:href="#svg-cc-disabled" class="svg-cc-disabled" />\n  <use xlink:href="#svg-cc-disabled" class="svg-cc-disabled shadow" />\n</svg>',"\n</span>");class Ic extends xc{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){var e={"aria-label":Qi("cne-aria-closed-captions"),"aria-pressed":"false"};return super.createEl("div",{innerHTML:Mc,className:"vjs-captions-button "+super.buildCSSClass()},e)}update(e){this.resetStyle(),this.addClass(Va[e]),"disabled"===e?this.player_.trigger("intent:disable-settings-submenu","cneCaptionOptions"):"showing"==e?(this.setAttribute("aria-pressed","true"),this.player_.trigger("intent:enable-settings-submenu","cneCaptionOptions")):"hidden"===e&&this.setAttribute("aria-pressed","false")}resetStyle(){[Va.disabled,Va.showing,Va.hidden].map((e=>this.removeClass(e)))}handleClick(){this.player_.trigger("intent:toggle-captions")}}i().registerComponent("CneCaptionsButton",Ic);var Dc={TAB:9,RETURN:13,SHIFT:16,ESC:27,SPACE:32,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40},Uc=[Dc.UP,Dc.DOWN,Dc.LEFT,Dc.RIGHT];class Rc extends xc{constructor(e,t){super(e,t),this.on("keydown",this.handleKeyDown),this.on("keyup",this.handleKeyUp)}createEl(){this.intent=this.options_.intent,this.callback=this.options_.callback,this.className=this.options_.className||"";var e={"aria-label":Qi("cne-aria-close-share")};return super.createEl("div",{innerHTML:'<span class="custom-control-focus" tabindex="-1"></span>',className:this.buildCSSClass()},e)}buildCSSClass(){return"cne-close ".concat(this.className)}handleKeyUp(e){e.keyCode===Dc.SPACE?e.stopPropagation():e.keyCode===Dc.ESC&&this.player_.trigger("intent:close-overlay")}handleKeyDown(e){e.keyCode!==Dc.TAB||e.shiftKey||this.player_.hasClass("overlay-active")&&(this.player_.trigger("intent:close-overlay"),this.player_.focus())}handleClick(e){e&&e.stopPropagation(),this.callback&&this.callback(),this.intent?this.player_.trigger(this.intent):this.player_.trigger("intent:close-overlay")}}i().registerComponent("CneClose",Rc);var jc=i().getComponent("Component");class Nc extends jc{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"},{"aria-label":Qi("cne-aria-player-control-bar"),role:"group"})}updateTabOrder(){this.player_.el_.clientWidth<Gi?(this.player_.persistentShare.shareWidget.el_.tabIndex="1",this.playToggle.el_.tabIndex="2",this.cneVolumeToggle.muteToggle.el_.tabIndex="3",this.progressControl.seekBar.el_.tabIndex="4"):(this.player_.persistentShare.shareWidget.el_.tabIndex="0",this.playToggle.el_.tabIndex="0",this.cneVolumeToggle.muteToggle.el_.tabIndex="0",this.progressControl.seekBar.el_.tabIndex="0")}}i().registerComponent("ControlBar",Nc);var Bc=i().getComponent("Component");class $c extends Bc{constructor(e,t){super(e,t),this.id=t.id}getId(){var e=this.options_.settingKey||"";return"".concat(this.player_.id_,"-settings-").concat(e.toLowerCase())}selectionChanged(){this.player_.trigger("intent:save-settings",{source:this,key:this.key(),val:this.getValue()})}buildCSSClass(){return"cne-option-control"}key(){return this.options_.settingKey}listElement(){return this.$("ul")}optionElements(){var e=this.listElement();return[].slice.call(e.children)}getValue(){return this.value||this.options_.default}selectedOption(){return this.el().querySelector(".cne-option-selected")}selectedText(){var e=this.selectedOption()||this.optionElements()[0];return e?e.innerText.trim():""}selectedId(){var e=this.selectedOption()||this.optionElements[0];return e?e.id:""}setValue(e){this.optionElements().map((t=>{t.getAttribute("value")===e?t.className="cne-option-selected":t.className=""})),this.value=e,this.updateAriaAttributes&&this.updateAriaAttributes()}}i().registerComponent("CneOptionControl",$c);const Fc=$c;class Vc extends Fc{constructor(e,t){super(e,t),this.init(),this.on(this.comboBox,"click",this.comboBoxClick),this.on(this.comboBox,"keydown",this.comboBoxKeyDown),this.on(this.listBox,"click",this.optionClick),this.on(this.comboBox,"keyup",(e=>e.stopPropagation())),this.on(this.listBox,"keyup",(e=>e.stopPropagation())),this.optionElements().map((e=>{this.on(e,"blur",this.optionLostFocus),this.on(e,"keydown",this.optionsKeyDown)}))}createEl(){return super.createEl("div",{id:this.getId(),className:super.buildCSSClass()+" cne-dropdown",innerHTML:'\n<svg width="6" height="10" viewBox="0 0 6 10" focusable="false">\n  <use xlink:href="#svg-chevron-down" />\n</svg>'})}init(){var e=this.getId(),{listItems:t,defaultValue:r,label:n}=this.options_;this.dropDownLabel=this.addChild("CneLabel",{label:n,id:"".concat(e,"-label")}),this.dropDownLabel.el_.setAttribute("for","".concat(e,"-textbox")),this.comboBox=this.addChild("CneDropdownOptions",{label:n,listItems:t,defaultValue:r,id:e}),this.listBox=this.$(".cne-dropdown-listbox"),this.textBox=this.$(".cne-dropdown-textbox"),this.setValue(r),this.updateAriaAttributes(),this.searchString=""}setValue(e){super.setValue(e),this.textBox.value=this.selectedText()}updateAriaAttributes(){var e=this.selectedId();this.comboBox.setAttribute("aria-expanded",this.expanded()),this.comboBox.setAttribute("aria-activedescendant",this.selectedId()),e&&(this.selectedOption().setAttribute("aria-selected","true"),this.optionElements().map((t=>{e!==t.id&&t.setAttribute("aria-selected","false")})))}hideList(e=!1){this.comboBox.removeClass("expanded"),this.updateAriaAttributes(),this.searchString="",e||this.textBox.focus()}showList(){this.comboBox.addClass("expanded"),this.updateAriaAttributes(),this.listBox.children[0].focus()}expanded(){return this.comboBox.hasClass("expanded")}findOption(){var e=this.optionElements().filter((e=>0===e.innerText.trim().toLowerCase().indexOf(this.searchString)));e.length>0&&e[0].focus(),this.clearSearchString()}clearSearchString(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((()=>{this.searchString=""}),1500)}comboBoxClick(){this.expanded()||this.showList()}comboBoxKeyDown(e){switch(e.keyCode){case Dc.RETURN:case Dc.SPACE:this.showList();break;case Dc.ESC:this.expanded()?this.hideList():this.player_.trigger("intent:close-settings");break;case Dc.DOWN:e.preventDefault(),this.expanded()||this.showList();break;case Dc.UP:e.preventDefault();break;default:if(!/^[a-zA-Z0-9-_ ]$/.test(e.key))return;this.expanded()||this.showList(),this.searchString+=e.key,this.findOption()}}optionsKeyDown(e){switch(e.keyCode){case Dc.RETURN:case Dc.SPACE:this.optionClick(e);break;case Dc.TAB:var t=e.target.parentNode;t&&t.nextElementSibling&&t.nextElementSibling.focus();break;case Dc.DOWN:if(e.preventDefault(),this.expanded()){var r=e.target.nextElementSibling||e.target.parentNode.firstElementChild;r&&r.focus()}else this.showList();break;case Dc.UP:e.preventDefault();var n=e.target.previousElementSibling||e.target.parentNode.lastElementChild;n&&n.focus()}}optionLostFocus(e){clearTimeout(this.listTimeout),this.listTimeout=setTimeout((()=>{document.activeElement.parentNode!==e.target.parentNode&&this.hideList(!0)}),100)}optionClick(e){e.stopPropagation(),this.setValue(e.target.getAttribute("value")),this.hideList(),super.selectionChanged()}}i().registerComponent("CneDropdown",Vc);const Hc=e=>{return"<input type='text' id=\"".concat(e.id,'-textbox" \n    class="cne-dropdown-textbox" \n    tabIndex="-1" />\n  <ul id="').concat(e.id,'-listbox" class="cne-dropdown-listbox" role="listbox">\n    ').concat((t=e.id,r=e.listItems,n=e.defaultOption,r.reduce(((e="",r)=>{var i=r[0]===n?'class="cne-option-selected"':"",a=t+"-"+r[0].replace(" ","").toLowerCase();return"".concat(e,"\n      <li id=").concat(a," ").concat(i,' value="').concat(r[1],'" role="option" tabindex="-1">\n        ').concat(yc,"\n        ").concat(r[0],"\n      </li>")}),"")),"\n  </ul>");var t,r,n};var qc=i().getComponent("Component");class zc extends qc{createEl(){var{label:e,listItems:t,defaultOption:r}=this.options_,n="".concat(this.options_.id,"-combobox"),i={"aria-activedescendant":"","aria-expanded":"false","aria-labelledby":"".concat(this.options_.id,"-label"),"aria-owns":"".concat(this.options_.id,"-listbox"),readonly:"true",role:"combobox",tabindex:"0"};return super.createEl("div",{id:n,className:"cne-dropdown-combobox",innerHTML:Hc({id:this.options_.id,label:e,listItems:t,defaultOption:r})},i)}}i().registerComponent("CneDropdownOptions",zc);var Wc=i().getComponent("Component");class Gc extends Wc{createEl(){return super.createEl("label",{id:this.options_.id,className:"cne-label",innerHTML:this.options_.label})}}i().registerComponent("CneLabel",Gc);var Xc=i().getComponent("Component");class Kc extends Xc{createEl(){return super.createEl("div",{className:"cne-message"})}showMessage({message:e,buttonText:t,buttonIntent:r}){this.el_.innerHTML="<h4>".concat(e,"</h4>"),this.el_.className=this.getCSSClass(!0),this.addChild("CneClose",{intent:"intent:close-message"}),this.addChild("CneButton",{text:t,intents:["intent:close-message","intent:pause",r]})}hideMessage(){this.el_.innerHTML.length>0&&(this.removeChild("CneClose"),this.removeChild("CneButton"),this.el_.className=this.getCSSClass(!1),this.el_.innerHTML="")}getCSSClass(e){return"cne-message".concat(e?" active":" inactive")}}i().registerComponent("CneMessage",Kc);var Yc=i().getComponent("Component");class Qc extends Yc{createEl(){return super.createEl("div",{className:"cne-overlay-content message-overlay"})}update({title:e,message:t,buttonText:r,buttonIntents:n,iconType:i,closeable:a,image:s}){var o="";s&&(o+="<img class='image' src=\"".concat(s,'" height="50px" alt="logo" />')),i&&(o+="<div class='icon-".concat(i,"'></div>")),e&&(o+="<h3>".concat(Qi(e),"</h3>")),t&&(o+="<h4>".concat(Qi(t),"</h4>")),a||this.player_.cneOverlay.cneClose.hide(),this.el().innerHTML=o,r&&n&&this.addChild("CneButton",{intents:n,text:"   "+Qi(r)},3),this.player_.trigger("intent:show-message-overlay")}}i().registerComponent("CneMessageOverlay",Qc);class Jc extends Fc{constructor(e,t){super(e,t),this.focusedIndex=-1,this.setValue(this.options_.defaultValue),this.on(this.$("ul"),"click",this.handleOptionClick),this.optionElements().map((e=>{this.on(e,"keyup",this.handleKeyUp)}))}createEl(){var e,t,r,n,i,a=this.getId(),s=(e=a,t=this.options_.className,r=this.options_.label,n=this.options_.listItems,i=this.options_.defaultValue,'<label id="'.concat(e,'-label" class="cne-label" for="').concat(e,'-radiogroup">').concat(r,'</label>\n  <ul id="').concat(e,'-radiogroup" \n    role="radiogroup"\n    class="').concat(t,'"\n    tabindex="-1"\n    aria-labelledby="').concat(e,'-label">\n    ').concat(function(e,t,r){return t.reduce(((t="",n)=>{var i=n[0]===r?'class="cne-option-selected" aria-checked="true"':'aria-checked="false"',a=e+"-"+n[0].replace(" ","").toLowerCase();return"".concat(t,'\n      <li role="radio" id=').concat(a,' tabindex="0" ').concat(i,' value="').concat(n[1],'">\n        <span class="custom-control-focus" tabindex="-1" value="').concat(n[1],'">\n          ').concat(n[0],"\n        </span>\n      </li>")}),"")}(e,n,i),"\n  </ul>"));return super.createEl("div",{className:super.buildCSSClass()+" cne-option-group",innerHTML:s})}updateAriaAttributes(){var e=this.selectedId();e&&(this.selectedOption().setAttribute("aria-checked","true"),this.optionElements().map((t=>{e!==t.id&&t.setAttribute("aria-checked","false")})))}handleKeyUp(e){switch(e.keyCode){case Dc.RETURN:case Dc.SPACE:this.handleOptionClick(e),e.stopPropagation();break;case Dc.LEFT:var t=e.target.previousElementSibling||e.target.parentNode.lastElementChild;t&&t.focus();break;case Dc.RIGHT:var r=e.target.nextElementSibling||e.target.parentNode.firstElementChild;r&&r.focus()}}handleOptionClick(e){this.setValue(e.target.getAttribute("value")),super.selectionChanged(),this.updateAriaAttributes()}}i().registerComponent("CneOptionGroup",Jc);var Zc=i().getComponent("Component"),el="cne-overlay",tl={embed:"share",url:"share"},rl={embed:"share",url:"share"};class nl extends Zc{constructor(e,t){super(e,t),this.on("webkitAnimationEnd",this.handleAnimationEnd)}createEl(){return super.createEl("div",{className:el})}update({type:e,action:t,source:r}){this[t](e,r)}hide(e){var t=rl[e],r=this.buildStateClass(t);this.el_.className=r,this.player_&&this.player_.removeClass&&r===el?(this.el_.className="".concat(r," inactive"),this.player_.removeClass("overlay-active")):this.el_.className=r,this.updateFocus(t)}show(e,t){this.el_.className=this.buildStateClass(e),this.player_&&this.player_.removeClass&&this.player_.addClass("overlay-active"),this.activeOverlay=e,this.openedBy=t}handleAnimationEnd(e){switch(e.animationName){case"displayIn":case"shiftInLeft":this.updateFocus(this.activeOverlay)}}updateFocus(e){if(e){var t;switch(e){case"share":t="keyboard"===this.openedBy?document.querySelector(".share-facebook-trigger"):document.querySelector(".share-facebook-trigger .custom-control-focus");break;case"embed":t=document.querySelector("#share-content-embed");break;case"url":t=document.querySelector("#share-content-url")}t&&t.focus()}}buildStateClass(e){if(!e)return el;var t=tl[e],r=t?"".concat(t,"-active "):"";return"".concat(el," active ").concat(r).concat(e,"-active")}}i().registerComponent("CneOverlay",nl);var{getPointerPosition:il}=i().dom,al=i().getComponent("Component");class sl extends al{createEl(){return super.createEl("div",{innerHTML:'<video class="cne-scrub-poster__video" playsinline webkit-playsinline preload="metadata"></video>',className:this.buildCSSClass()})}buildCSSClass(){return"cne-scrub-poster"}updateVideo({thumb_encode:e,duration:t}){var r=this.video();r.addEventListener("loadedmetadata",(()=>r.currentTime=1)),this.duration=t,r.currentSrc!==e&&r.setAttribute("src",e)}updatePosition(e){var t=this.getSeekBarEl(),r=il(t,e).x*this.duration||0;this.video().currentTime=r+1.5}video(){return this.el().querySelector("video")}getSeekBarEl(){return this.player().getChild("controlBar").getChild("progressControl").getChild("seekBar").el()}}i().registerComponent("cneScrubPoster",sl);var{findPosition:ol,getPointerPosition:ul}=i().dom,cl=i().getComponent("Component");class ll extends cl{createEl(){return super.createEl("div",{innerHTML:'\n  <div class="cne-scrubber-thumb__container">\n    <video class="cne-scrubber-thumb__video"></video>\n    <div class="cne-scrubber-thumb__time js-scrubber-time"></div>\n  </div>',className:this.buildCSSClass()})}buildCSSClass(){return"cne-scrubber-thumb"}updateVideo({thumb_encode:e,duration:t}){var r=this.video();this.duration=t,r.currentSrc!==e&&r.setAttribute("src",e)}updatePosition(e){var t=this.getSeekBarEl(),r=ul(t,e).x*this.duration||0,n=i().formatTime(r),a=this.el();a.querySelector(".js-scrubber-time").innerHTML=n,this.video().currentTime=r+1.5;var s=e.pageX-ol(t).left,o=t.clientWidth,u=a.clientWidth,c=Math.max(s-u/2,0);a.style.left=Math.min(c,o-u)+"px"}video(){return this.el().querySelector("video")}getSeekBarEl(){return this.player().getChild("controlBar").getChild("progressControl").getChild("seekBar").el()}}i().registerComponent("CneScrubberThumb",ll);var dl=r(7317).default;function hl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hl(Object(r),!0).forEach((function(t){fl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ml=i().getComponent("Component"),gl="cne-player-settings";class yl extends ml{constructor(e,t,r){super(e,t);var n=r||this.cneSettingsMenu;this.playerSubMenus={CnePlayerSettings:n.settingsBody.cnePlayerSettings},this.captionSubMenus={CneCaptionOptions:n.settingsBody.cneCaptionOptions},this.subMenus=pl(pl({},this.playerSubMenus),this.captionSubMenus),e.options_.persistTextTrackSettings&&this.loadSavedSettings(),n.showSubMenu(this.subMenus.CneCaptionOptions),this.on(this.player_,"caption-settings-disabled",this.disable)}createEl(){var e={id:"".concat(this.player_.id_,"-settings"),tabindex:"-1"};return super.createEl("div",{className:"cne-settings vjs-control"},e)}toggleMenu(e){"disable"===e?this.disable():"enable"===e?this.enable():(this.isDisabled()&&this.enable(),"show"===e?this.cneSettingsMenu.show():"hide"===e&&this.cneSettingsMenu.hide()),this.cneSettingsToggle.setAttribute("aria-expanded","show"===e)}disable(){this.addClass("vjs-hidden"),this.addClass("cne-settings-disabled")}enable(){this.removeClass("vjs-hidden"),this.removeClass("cne-settings-disabled")}isDisabled(){return this.el().className.indexOf("cne-settings-disabled")>=0}getSavedSettings(){return function(e){try{return JSON.parse(window.localStorage.getItem(e))}catch(e){dl(e)}}(gl)}saveSettings(){var e=this.getCurrentSettings(!0);!function(e,t=null){try{if(t){var r=t;"object"==typeof t&&(r=JSON.stringify(t)),window.localStorage.setItem(e,r)}else window.localStorage.removeItem(e)}catch(e){dl(e)}}(gl,e),this.showCaptions(),this.updateCaptionPreview()}getCurrentSettings(e=!1){return(e||null==this.currentSettings)&&(this.currentSettings=pl(pl({},this.getPlayerSettings(e)),this.getCaptionSettings(e))),this.currentSettings}getCaptionSettings(e=!1){return(e||null==this.captionSettings)&&(this.captionSettings=pl(pl({},Vu().defaultValues),this.buildSettingsObject(this.captionSubMenus))),this.captionSettings}getPlayerSettings(e=!1){return(e||null==this.playerSettings)&&(this.playerSettings=this.buildSettingsObject(this.playerSubMenus)),this.playerSettings}buildSettingsObject(e=this.subMenus){var t=this.getSavedSettings()||{};return Object.keys(e).map((e=>{[...this.subMenus[e].children()].map((e=>{e.options_.settingKey&&(t[e.options_.settingKey]=e.getValue())}))})),t}updateCaptionPreview(){var e=this.activeCaptions();e&&(this.el().querySelector(".cne-captions-sample-text").style.cssText="font-size: "+this.captionSettings.fontSize,this.updateCaptionsDisplay(),e.mode="showing")}updateCaptionsDisplay(){var e=this.player_.getChild("cneTextTrackDisplay");e&&e.updateDisplay()}loadSavedSettings(){var e=this.getSavedSettings();e&&this.applySettings(e)}applySettings(e){Object.keys(this.subMenus).map((t=>{[...this.subMenus[t].children()].map((t=>{t.options_.settingKey&&t.setValue(e[t.key()])}))}))}showCaptions(){var e=this.activeCaptions();e&&"hidden"===e.mode&&this.player_.trigger("intent:toggle-captions")}activeCaptions(){return this.player_.textTracks().tracks_.find((e=>"captions"===e.kind))}}i().registerComponent("CneSettings",yl);var vl=i().getComponent("Component");class bl extends vl{createEl(){return super.createEl("div",{innerHTML:'\n<svg class="svg-defs" focusable="false">\n  <defs>\n    <filter height="130%" id="icon-shadow">\n      <feGaussianBlur in="SourceGraphic" stdDeviation="1" result="blur"/>\n      <feOffset in="blur" dx="0" dy="0" result="offsetBlur"/>\n      <feMerge>\n        <feMergeNode in="offsetBlur"/>\n        <feMergeNode in="SourceGraphic"/>\n      </feMerge>\n    </filter>\n\n    <path id="svg-360-dial" d="M39.9333344 8.8072824C34.8318254 3.396724 27.7832164.05 19.9982777.05c-7.7837925 0-14.830103 3.3455062-19.93161 8.7548447l19.93161 21.145157L39.9333344 8.8072823z" />\n    <path id="svg-360-icon" d="M60.35 15.122v1.215c5.105.608 8.994 1.459 8.994 2.917 0 2.796-18.718 2.917-21.635 2.917v3.889s27.104-.608 27.104-6.685c-.12-2.43-6.805-3.646-14.463-4.253zM.186 19.376c0 5.956 26.861 6.685 34.033 6.685v3.889l9.359-5.713-9.359-5.713v3.889s-28.563.608-28.563-3.16c0-1.337 3.889-2.309 8.994-2.917v-1.215C6.871 15.729.186 16.945.186 19.376zm18.596-5.835l1.459-.365c.122-.122.243 0 .365.122.365 1.094 1.215 2.188 3.039 2.188 1.823 0 2.917-1.215 2.917-2.917 0-1.945-1.215-3.16-3.039-3.16 0 0-.972-.122-.972-.243V7.829c-.122-.122.851-.243.851-.243 1.702 0 2.796-1.094 2.796-2.796 0-1.58-.972-2.674-2.674-2.674-1.58 0-2.431.851-2.674 2.066-.122.122-2.066-.365-1.945-.608.365-1.823 2.066-3.403 4.74-3.403 3.039 0 4.862 1.945 4.862 4.497 0 1.702-.851 2.917-2.066 3.646v.122c1.094.365 2.431 1.945 2.431 4.133 0 2.917-2.066 4.983-5.105 4.983-2.674 0-4.497-1.459-5.105-3.525-.123-.364-.001-.486.12-.486zm14.829-5.104l4.254-7.9c.122-.122.122-.122.365-.122h1.702c.122 0 .243.122.122.243l-3.768 6.928.122.122c.365-.243.972-.365 1.702-.365 2.674 0 4.862 1.945 4.862 4.983 0 3.282-2.188 5.226-5.226 5.226-3.039 0-5.105-1.945-5.105-5.105-.124-1.58.362-2.917.97-4.01zm4.132 6.928c1.823 0 3.039-1.337 3.039-3.16s-1.215-3.16-3.039-3.16c-1.823 0-3.039 1.337-3.039 3.16s1.216 3.16 3.039 3.16zM46.13 8.68c0-3.889.122-4.862.365-5.47.608-1.945 2.188-3.16 4.619-3.16 2.309 0 4.011 1.094 4.619 3.16.122.608.365 1.58.365 5.47s-.122 4.862-.365 5.47c-.608 2.066-2.309 3.16-4.619 3.16-2.309 0-4.011-1.094-4.619-3.16-.244-.609-.365-1.581-.365-5.47zm5.105 6.685c1.215 0 2.188-.608 2.552-1.702.122-.486.243-1.215.243-4.983 0-3.889-.122-4.497-.243-5.105-.365-1.094-1.337-1.702-2.552-1.702s-2.188.608-2.552 1.702c-.122.486-.243 1.215-.243 5.105 0 3.768.122 4.497.243 4.983.242 1.215 1.215 1.702 2.552 1.702zM62.66 4.79c-1.337 0-2.431-1.094-2.431-2.431S61.323.05 62.66.05s2.309 1.094 2.309 2.309c0 1.337-.972 2.431-2.309 2.431zm0-3.525c-.608 0-1.215.486-1.215 1.094s.486 1.094 1.215 1.094c.608 0 1.094-.486 1.094-1.094 0-.607-.487-1.094-1.094-1.094z" />\n    <path id="svg-big-play-icon" fill="#FFF" d="M38 27.019l-16 9.068V18.039z" />\n    <path id="svg-email" d="M4,3v17h24V3H4L4,3z M23.9,5.2L16,11.6L8.1,5.2H23.9L23.9,5.2z M6.1,17.9V6.4l9.9,8l9.9-8v11.5H6.1 L6.1,17.9z" />\n    <path id="svg-embed" d="M10.967 25.884L.053 14.969 11.061 4.055l2.352 2.352-8.656 8.562 8.562 8.562-2.352 2.353zm36.13-10.915L36.183 4.055l-2.352 2.352 8.562 8.562-8.656 8.562 2.352 2.352 11.008-10.914zM17.581 28.921l3.128 1.029 9.494-28.871L27.075.05l-9.494 28.871z" />\n    <path id="svg-facebook" d="M22.724.34v4.72h-2.807c-1.025 0-1.716.215-2.074.644-.358.429-.536 1.073-.536 1.931v3.379h5.238l-.697 5.292h-4.541v13.57h-5.471v-13.57h-4.56v-5.292h4.559V7.116c0-2.217.62-3.936 1.859-5.158S16.584.125 18.646.125c1.753 0 3.112.072 4.078.215z" />\n    <path id="svg-full-screen" d="M3.5644 9.8778H.05V.0222h10.4667997v3.5144003H3.5644V9.8778zM38.253399 9.184h-3.514397V3.5304003h-5.6536026V.016h9.1679993v9.168zM38.253399 29.9477997H27.7866V26.433401h6.9524022v-6.3412017h3.5143967v9.8556004zM9.2180176 26.4384155v3.5143433H.0499878V20.78479H3.564392v5.6536255h5.6536256z" />\n    <path id="svg-full-screen-exit" d="M11.061904 29.9500008H7.3433752v-7.361168H.0580964v-3.642639h11.003808v11.003807zM30.9766235 29.9500008h-3.7185268v-11.003807H38.261902v3.642639h-7.2852784v7.361168zM38.261902 11.0319033H27.2580966V.028097h3.7185268v7.3611673h7.2852783v3.642639zM11.061904 11.0319033H.0580964V7.389264h7.2852788V.028097h3.7185287v11.0038063z" />\n    <path id="svg-googleplus" d="M14.842 12.797v5.194h8.655c-.315 2.202-2.518 6.452-8.497 6.452-5.194 0-9.284-4.249-9.284-9.442S9.963 5.559 15 5.559c2.99 0 4.878 1.259 5.98 2.36l4.09-3.934C22.395 1.466 19.092.05 15 .05 6.659.05.051 6.817.051 15c0 8.184 6.766 14.95 14.949 14.95 8.655 0 14.476-6.138 14.476-14.635 0-.944-.158-1.731-.158-2.518H14.842zm32.257 0H42.85V8.549h-4.249v4.248h-4.247v4.249h4.247v4.248h4.249v-4.248h4.249v-4.249z" />\n    <path id="svg-muted" d="M31.8312 13.1313l-3.7375-3.7375-1.8687 1.8687L29.9625 15l-3.7375 3.7375 1.8687 1.8688 3.7375-3.7375 3.7375 3.7375 1.8688-1.8688L33.7 15l3.7375-3.7375-1.8688-1.8687-3.7375 3.7375z" />\n    <path id="svg-pause" d="M.4850805.02h4.13172v29.9399986h-4.13172V.02zm20.8981192 29.939999h4.1317215V.02h-4.1317215v29.939999z" />\n    <path id="svg-pinterest" d="M15 .073C6.742.073.075 6.74.075 14.999c0 6.369 3.98 11.742 9.452 13.931-.1-1.195-.199-2.985.1-4.279.298-1.195 1.791-7.463 1.791-7.463s-.497-.897-.497-2.189c0-2.09 1.194-3.582 2.687-3.582 1.294 0 1.891.995 1.891 2.091 0 1.293-.796 3.184-1.195 4.975-.398 1.493.796 2.688 2.19 2.688 2.687 0 4.677-2.786 4.677-6.867 0-3.582-2.588-6.069-6.269-6.069-4.278 0-6.766 3.183-6.766 6.468 0 1.293.497 2.687 1.094 3.382.099.199.099.298.099.398 0 .497-.298 1.493-.298 1.791-.099.298-.199.298-.497.2-1.89-.896-2.985-3.582-2.985-5.771 0-4.678 3.383-9.056 9.851-9.056 5.174 0 9.154 3.682 9.154 8.657 0 5.175-3.284 9.255-7.761 9.255-1.493 0-2.886-.797-3.383-1.691l-.896 3.58c-.298 1.294-1.294 2.887-1.89 3.883 1.393.397 2.886.596 4.378.596 8.258 0 14.925-6.667 14.925-14.926S23.258.073 15 .073z" />\n    <path id="svg-play" d="M0 0l26.1 15l-26.1 15z" />\n    <path id="svg-share" d="M6.1531944 12.656022l-2.386861-2.373024L14.0298356.078994l10.2038317 10.144678-2.3868618 2.373024-6.1461678-6.1698623v14.1194935h-3.4012766V6.5454845L6.1531944 12.656022zm18.080473 4.2403174v9.3033333H3.7663334v-9.3033333H.045v13.0246658h27.9099998V16.8963394h-3.7213324z" />\n    <path id="svg-speaker" d="M20.6187 29.95L8.649 22.475H.0625V7.525h7.475L20.6187.05v29.9zM3.8 18.7375h3.7375v-7.475H3.8v7.475zM16.8813 7.525l-5.6063 3.3222v8.3056l5.6063 3.3222V7.525z" />\n    <path id="svg-tumblr" d="M18.346 29.95c-6.69 0-9.199-4.685-9.199-7.973V12.21H6.01V8.322C10.819 6.728 11.864 2.64 12.177.25c0-.199.105-.199.209-.199h4.601v7.575h6.272v4.485h-6.272v9.269c0 1.295.523 2.99 2.926 2.99h.104c.836 0 1.986-.299 2.509-.498l1.464 4.285c-.523.798-3.137 1.694-5.437 1.793h-.207z" />\n    <path id="svg-twitter" d="M29.95 5.742c-.847 1.24-1.872 2.296-3.073 3.168.013.177.019.443.019.797 0 1.644-.24 3.285-.721 4.923s-1.211 3.209-2.191 4.715c-.98 1.505-2.147 2.836-3.5 3.994s-2.985 2.081-4.895 2.77-3.953 1.034-6.128 1.034c-3.428 0-6.564-.917-9.41-2.751.443.051.936.076 1.48.076 2.846 0 5.382-.873 7.608-2.618-1.328-.025-2.517-.433-3.567-1.224s-1.772-1.8-2.164-3.027c.417.063.803.095 1.157.095.544 0 1.081-.07 1.613-.209-1.417-.291-2.59-.996-3.519-2.115s-1.394-2.419-1.394-3.899v-.076c.86.481 1.783.74 2.77.778-.835-.557-1.499-1.284-1.992-2.182-.493-.898-.74-1.872-.74-2.922 0-1.113.278-2.144.835-3.092C3.667 5.862 5.53 7.37 7.724 8.502c2.194 1.132 4.544 1.761 7.048 1.888-.101-.481-.152-.949-.152-1.404 0-1.695.598-3.14 1.793-4.335s2.64-1.793 4.335-1.793c1.771 0 3.263.645 4.477 1.935 1.379-.266 2.675-.759 3.889-1.48-.468 1.455-1.366 2.58-2.694 3.377 1.177-.126 2.354-.442 3.53-.948z" />\n    <path id="svg-url" d="M24.942 5.371l-4.126-4.126C20.038.469 19.08.05 18.004.05s-2.033.419-2.751 1.136L7.121 9.319c-1.555 1.555-1.555 4.008 0 5.562l4.127 4.126c.778.777 1.795 1.136 2.751 1.136 1.017 0 2.032-.359 2.751-1.136l1.495-1.495-2.154-2.153-1.494 1.494c-.358.36-.957.36-1.256 0l-4.127-4.125c-.358-.358-.358-.957 0-1.256l8.134-8.133c.18-.179.418-.299.657-.299s.479.119.657.239l4.127 4.126c.179.18.24.419.24.658 0 .239-.12.478-.24.657l-2.033 2.094 2.153 2.153 2.033-2.033c.718-.718 1.136-1.734 1.136-2.751s-.419-2.094-1.136-2.812zm-6.161 5.622c-1.555-1.555-4.007-1.555-5.561 0l-1.495 1.495 2.153 2.153 1.494-1.495c.359-.358.957-.358 1.257 0l4.126 4.127c.18.179.24.418.24.657 0 .24-.12.479-.24.657l-8.072 8.073c-.359.358-.957.358-1.256 0L7.24 22.534c-.358-.358-.358-.957 0-1.256l2.033-2.033-2.153-2.153-2.033 2.033c-1.555 1.555-1.555 4.007 0 5.562l4.126 4.126c.778.778 1.795 1.136 2.751 1.136 1.017 0 2.033-.358 2.751-1.136l8.133-8.133c.719-.719 1.136-1.735 1.136-2.751 0-1.017-.418-2.033-1.136-2.751l-4.067-4.185z" />\n    <path id="svg-volume-high" d="M33.0288 26.2125c2.8487-3.0481 4.4087-7.0396 4.4087-11.2488s-1.56-8.2007-4.3409-11.1762l-2.0348 2.1772c2.2383 2.4675 3.4591 5.7333 3.4591 9.0716s-1.2209 6.5316-3.527 8.999l2.0349 2.1772z" />\n    <path id="svg-volume-low" d="M28.2598 21.2277l-2.0348-2.1772c1.0174-1.0886 1.56-2.4675 1.56-3.9915s-.5426-2.9029-1.56-3.9915l2.0348-2.1772c1.56 1.6692 2.3739 3.8464 2.3739 6.0961 0 2.3949-.8817 4.5721-2.3739 6.2413z" />\n    <path id="svg-cc-off" fill="#FFF" fill-rule="evenodd" d="M0 0h20v16H0V0zm1 1h18v14H1V1zm6.226 10.171c1.626 0 2.804-1.024 2.857-2.474H8.536c-.093.681-.611 1.13-1.306 1.13-.887 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.048-1.437-1.257-2.5-2.852-2.5-1.903 0-3.067 1.27-3.067 3.34 0 2.069 1.169 3.343 3.067 3.343zm6.79 0c1.626 0 2.803-1.024 2.856-2.474h-1.547c-.092.681-.61 1.13-1.305 1.13-.888 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.049-1.437-1.257-2.5-2.852-2.5-1.903 0-3.068 1.27-3.068 3.34 0 2.069 1.17 3.343 3.068 3.343z"/>\n    <path id="svg-cc-on" d="M0 0h20v16H0V0zm7.226 11.171c1.626 0 2.804-1.024 2.857-2.474H8.536c-.093.681-.611 1.13-1.306 1.13-.887 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.048-1.437-1.257-2.5-2.852-2.5-1.903 0-3.067 1.27-3.067 3.34 0 2.069 1.169 3.343 3.067 3.343zm6.79 0c1.626 0 2.803-1.024 2.856-2.474h-1.547c-.092.681-.61 1.13-1.305 1.13-.888 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.049-1.437-1.257-2.5-2.852-2.5-1.903 0-3.068 1.27-3.068 3.34 0 2.069 1.17 3.343 3.068 3.343z"/>\n    <path id="svg-cc-disabled"  opacity=".4" fill="#FFF" fill-rule="evenodd" d="M0 0h20v16H0V0zm1 1h18v14H1V1zm6.226 10.171c1.626 0 2.804-1.024 2.857-2.474H8.536c-.093.681-.611 1.13-1.306 1.13-.887 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.048-1.437-1.257-2.5-2.852-2.5-1.903 0-3.067 1.27-3.067 3.34 0 2.069 1.169 3.343 3.067 3.343zm6.79 0c1.626 0 2.803-1.024 2.856-2.474h-1.547c-.092.681-.61 1.13-1.305 1.13-.888 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.049-1.437-1.257-2.5-2.852-2.5-1.903 0-3.068 1.27-3.068 3.34 0 2.069 1.17 3.343 3.068 3.343z"/>\n    <path id="svg-settings" fill="#FFF" fill-rule="evenodd" d="M8 11.36a3.361 3.361 0 1 1 0-6.722 3.361 3.361 0 0 1 0 6.723zm8-2.026V6.666h-2.796c-.128-.499-.325-.97-.582-1.403L14.6 3.286 12.714 1.4l-1.977 1.978a5.343 5.343 0 0 0-1.403-.582V0H6.666v2.796c-.499.128-.97.325-1.403.582L3.286 1.4 1.4 3.286l1.978 1.977a5.343 5.343 0 0 0-.582 1.403H0v2.668h2.796c.128.499.325.97.582 1.403L1.4 12.714 3.286 14.6l1.977-1.978c.433.257.904.454 1.403.582V16h2.668v-2.796c.499-.128.97-.325 1.403-.582l1.977 1.978 1.886-1.886-1.978-1.977c.257-.433.454-.904.582-1.403H16z"/>\n    <path id="svg-tooltip-caret" transform="rotate(-180 6,2) " fill="#000" fill-opacity=".9" fill-rule="evenodd" d="M6 0l6 6H0z"/>\n    <path id="svg-chevron-down" fill="#FFF" fill-rule="evenodd" d="M0 1l1-1 4 4 4-4 1 1-5 5z"/>\n    <path id="svg-chevron-back" fill="#FFF" fill-rule="evenodd" d="M5 10l1-1-4-4 4-4-1-1-5 5z"/>\n    <path id="svg-check" fill="#FFF" fill-rule="evenodd" d="M4.222 9L0 4.829l1.33-1.315L4.223 6.37 10.669 0 12 1.315z"/>\n    <path id="svg-close" fill="#FFF" fill-opacity=".5" fill-rule="evenodd" d="M5.95 4.536L1.707.293.293 1.707 4.536 5.95.293 10.192l1.414 1.415L5.95 7.364l4.242 4.243 1.415-1.415L7.364 5.95l4.243-4.243L10.192.293 5.95 4.536z"/>\n  </defs>\n</svg>',className:"svg-definitions"})}}i().registerComponent("CneSvgDefs",bl);var _l=i().getComponent("Component");class Tl extends _l{createEl(){return super.createEl("div",{innerHTML:'\n<div class="live-overlay--msg">\n  <img src="" height="50px" class="live-overlay--msg--image" />\n  <h4>'.concat(Qi("cne-player-live-overlay-header"),"</h4>\n</div>"),className:"cne-overlay-content live-overlay"})}update({brand_image:e}){this.el_&&(this.$("img").src=e)}}i().registerComponent("CneLiveOverlay",Tl);class wl extends xc{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){var e=Qi("cne-player-live-data-label");return super.createEl("div",{innerHTML:'<span class="custom-control-focus" tabindex="-1" data-label='.concat(e,"></span>"),className:"vjs-control live-indicator"})}handleClick(){this.player_.trigger("intent:seek-latest")}}i().registerComponent("CneLiveIndicator",wl);class Sl extends xc{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){var e=Qi("cne-player-live-data-label");return super.createEl("div",{innerHTML:'<span class="custom-control-focus" tabindex="-1">'.concat(e,"</span>"),className:"vjs-control live-indicator-active"})}handleClick(){this.player_.trigger("intent:seek-latest")}}i().registerComponent("CneLiveIndicatorActive",Sl);class Cl extends xc{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){var e=Qi("cne-player-live-ad-label");return super.createEl("div",{innerHTML:'<span class="custom-control-focus" tabindex="-1">'.concat(e,"</span>"),className:"vjs-control live-indicator-ad"})}}i().registerComponent("CneLiveIndicatorAd",Cl);var kl=i().getComponent("TextTrackDisplay"),El={small:.0356,medium:.0445,large:.0533};function Ol(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")"}class Al extends kl{buildCSSClass(){return"cne-text-track-display ".concat(super.buildCSSClass)}setVideoData(e){this.videoData=e}originalPlayerHeight(){return this.originalHeight||(this.originalHeight=this.player_.el().clientHeight),this.originalHeight}updateForTrack(e){if("function"==typeof window.WebVTT&&e.activeCues){var t=this.player_.controlBar.cneSettings.getCaptionSettings()||{},r=Array.from(e.activeCues);window.WebVTT.processCues(window,r,this.el_),r.map(((e,n)=>{this.updateCueStyles(e,t,n,r.length)}))}}updateCueStyles(e,t,r=0,n=0){if(e){var{fonts:i,textShadows:a,positions:s}=Vu(),o=e.displayState,u=t.fontVariant||t.fontFamily,c=Ol(t.backgroundColor||"#000",t.backgroundOpacity||1),l=null;if(t.fontFamily&&(o.firstChild.style.fontFamily=i.families[u]),t.fontSize&&(o.style.fontSize=t.fontSize,Object.keys(i.sizes).map((e=>{var r="captions-".concat(e);t.fontSize===i.sizes[e]?(this.addClass(r),l=El[e]):this.removeClass(r)}))),l){var d=Math.round(l*this.player_.el_.clientHeight);o.style.fontSize=Math.max(12,d)+"px",o.style.height="auto"}var h=t.position;if("auto"===h&&this.videoData&&this.videoData.isLive&&(h="bottom"),s[h]){var p=s[h].top,f=s[h].bottom,m=o.offsetHeight,g=Math.max(n-r-1,0);o.style.top="auto"!==p?"".concat(parseInt(p)+m*g,"px"):p,o.style.bottom="auto"!==f?"".concat(parseInt(f)+m*g,"px"):f}if(t.color&&(o.firstChild.style.color=t.color),t.textOpacity){var y=Ol(t.color||"#fff",t.textOpacity);o.firstChild.style.color=y}t.backgroundColor&&(o.firstChild.style.backgroundColor=c),t.edgeStyle&&(o.firstChild.style.textShadow=a[t.edgeStyle])}}}i().registerComponent("CneTextTrackDisplay",Al);var xl=i().getComponent("Component");class Pl extends xl{createEl(){var e={id:"cne-volume-alert","aria-live":"assertive","aria-label":Qi("cne-aria-volume-alert")};return super.createEl("div",{className:"hidden-accessible"},e)}update(e){var t=Qi("cne-aria-volume-update");this.el_.innerText="".concat(t," ").concat(Math.round(100*e),"%")}}i().registerComponent("CneVolumeAlert",Pl);var Ll=i().getComponent("Component");class Ml extends Ll{createEl(){return super.createEl("div",{className:"cne-volume-toggle vjs-control"},{tabindex:"-1"})}}i().registerComponent("CneVolumeToggle",Ml);var Il=i().getComponent("Component");class Dl extends Il{createEl(){return super.createEl("div",{className:this.buildCSSClass()})}update({hideHoverTitle:e,title:t,url:r,branded:n,branded_caption:i}){if(!e){Array.from(this.el_.childNodes).forEach((e=>{this.el_.removeChild(e)}));var a=document.createElement("h2");if(a.innerHTML=t,a.className="video-title-text",!r)return this.el_.appendChild(a),void(n&&this.el_.appendChild(this.buildBrandedContent(i)));var s=document.createElement("a");s.href=r,s.target="_blank",s.className="video-title-link",s.appendChild(a),n&&s.appendChild(this.buildBrandedContent(i)),this.el_.appendChild(s)}}buildCSSClass(){return"cne-video-title"}buildBrandedContent(e){var t=document.createElement("p");return t.className="branded-content",t.innerHTML=e||"Sponsored",t}}i().registerComponent("CneVideoTitle",Dl);var Ul='\n<span class="custom-control-focus" tabindex="-1">\n  '.concat(ac,"\n</span>");class Rl extends xc{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){var e={"aria-label":Qi("cne-aria-fullscreen")};return super.createEl("div",{innerHTML:Ul,className:"vjs-fullscreen-control ".concat(super.buildCSSClass())},e)}handleClick(){this.player_.isFullscreen()?(this.player_.trigger("intent:exit-fullscreen"),this.setAttribute("aria-label",Qi("cne-aria-fullscreen"))):(this.player_.trigger("intent:enter-fullscreen"),this.setAttribute("aria-label",Qi("cne-aria-exit-fullscreen")))}}i().registerComponent("FullscreenToggle",Rl);var jl=i().getComponent("Component");class Nl extends jl{createEl(){return super.createEl("div",{innerHTML:'<div class="cne-loading-spinner-circle"></div>',className:"cne-loading-spinner"})}}i().registerComponent("LoadingSpinner",Nl);var Bl=i().getComponent("Button");class $l extends Bl{constructor(e,t){super(e,t),this.checkVolumeSupport(),this.on(e,"volumechange",this.update),this.on(e,"loadstart",this.update),this.on("keydown",this.handleKeyDown),this.on("keyup",this.handleKeyUp),this.on("focus",(()=>this.handleFocus(!0))),this.on("focusout",(()=>this.handleFocus(!1)))}createEl(){return super.createEl("button",{innerHTML:'\n<div class="mute-toggle-container">\n  <span class="custom-control-focus" tabindex="-1">\n    '.concat(sc,'\n  </span>\n</div>\n<span style="display:none;" id="cne-volume-instructions">\n  ').concat(Qi("cne-player-volume-instructions"),"\n</span>")},{id:"cne-mute-toggle","aria-controls":"".concat(this.player_.id_,"-cne-volume-control"),"aria-describedby":"cne-volume-instructions","aria-haspopup":"true","aria-live":"polite","aria-roledescription":"Mute Button",role:"application",tabindex:"0"})}buildCSSClass(){return"vjs-mute-control ".concat(super.buildCSSClass())}checkVolumeSupport(){Ta&&"9"===wa&&this.addClass("vjs-hidden")}update(){var e=this.player_.volume(),t=3;0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);var r=this.player_.muted()?Qi("cne-player-volume-unmute"):Qi("cne-player-volume-mute");this.controlText()!==r&&this.controlText(r);for(var n=0;n<4;n++)this.removeClass("vjs-vol-".concat(n));this.addClass("vjs-vol-".concat(t))}handleKeyDown(e){var t,r;switch(e.stopPropagation(),e.keyCode){case Dc.UP:case Dc.DOWN:e.preventDefault(),t=this.player_.volume(),r=e.keyCode==Dc.UP?Math.min(t+.1,1):Math.max(t-.1,0),this.player_.trigger("intent:volume-change",{level:r})}}handleKeyUp(e){32===e.keyCode&&e.stopPropagation()}handleClick(e){e.stopPropagation(),this.player_.trigger("intent:mute-toggle",!this.player_.muted())}handleFocus(e){this.player_.trigger("intent:mute-focus",e)}}$l.prototype.controlText_="Mute",i().registerComponent("MuteToggle",$l);class Fl extends xc{createEl(){return super.createEl("div",{innerHTML:this.options_.content,className:"share-content js-share-content",id:"share-content-".concat(this.options_.type)})}handleClick(){!function(e){var t=document.getElementById(e);if(document.body.createTextRange)document.body.createTextRange().moveToElementText(t).select();else if(window.getSelection){var r=window.getSelection(),n=document.createRange();n.selectNodeContents(t),r.removeAllRanges(),r.addRange(n)}}("share-content-".concat(this.options_.type))}}i().registerComponent("OverlayTextBox",Fl);var Vl=i().getComponent("Component");class Hl extends Vl{createEl(){return super.createEl("div",{className:"persistent-share"})}}i().registerComponent("PersistentShare",Hl);var ql=i().getComponent("ClickableComponent");class zl extends ql{constructor(e,t){var r=Object.assign(t);r.reportTouchActivity=!1,super(e,r),this.on(["mousedown","touchstart"],(e=>{e.stopPropagation()})),this.on(["mouseup","touchend"],(e=>{e.stopPropagation(),this.unmute()}))}createEl(){return super.createEl("div",{innerHTML:"<div class='persistent-mute-icon'>".concat(oc,"</div>"),className:"persistent-mute"})}update(e){e?this.show():this.hide()}unmute(){this.player_.trigger("intent:mute-toggle",!1)}}i().registerComponent("PersistentMute",zl);var Wl=i().getComponent("PlayToggle"),Gl='\n<div class="play-toggle-container">\n  <span class="custom-control-focus" tabindex="-1">\n    '.concat(lc,"\n  </span>\n</div>");class Xl extends Wl{createEl(){return super.createEl("button",{innerHTML:Gl},{tabindex:"0"})}createControlTextEl(){}controlText(){}handleClick(){this.player_.paused()?this.player_.trigger("intent:play"):this.player_.trigger("intent:pause")}handlePlay(e){var t=Qi("cne-aria-pause");this.setAttribute("aria-label",t),super.handlePlay(e)}handlePause(e){var t=Qi("cne-aria-play");this.setAttribute("aria-label",t),super.handlePause(e)}}i().registerComponent("PlayToggle",Xl);var Kl=i().getComponent("ClickableComponent");class Yl extends Kl{createEl(){var e=Qi("cne-aria-playlist-next"),t=Qi("cne-aria-playlist-previous"),r="right"===this.options_.direction?e:t;return super.createEl("div",{innerHTML:'<span class="playlist-caret" aria-label="'.concat(r,'"></span>'),className:"playlist-arrow ".concat(this.options_.direction)})}handleClick(){this.clickCallback(this.options_.direction)}updatePage(e,t){var r=this.options_.direction;"left"===r&&0===e||"right"===r&&e===t?this.addClass("disabled"):this.removeClass("disabled")}clickCallback(){}}i().registerComponent("PlaylistArrow",Yl);var Ql=i().getComponent("Component");class Jl extends Ql{createEl(){return this.playlist={},super.createEl("div",{className:"playlist-body"})}update(e,t){var[r,n,i]=this.children();if(n.update(e,t),t&&t.videos&&t.id!=this.playlist.id){this.playlist=t,r.clickCallback=this.movePage.bind(this),i.clickCallback=this.movePage.bind(this),n.updatePageFromIndex=this.updatePageFromIndex.bind(this);var a=t.videos.length,s=n.el().getBoundingClientRect().width;this.pageSize=Math.floor(s/156),this.maxPage=Math.ceil(a/this.pageSize)-1,this.curPage=0,this.updateChildPages()}}movePage(e){"left"===e?this.curPage=Math.max(this.curPage-1,0):"right"===e&&(this.curPage=Math.min(this.curPage+1,this.maxPage)),this.updateChildPages()}updatePageFromIndex(e){this.curPage=Math.floor(e/this.pageSize),this.updateChildPages()}updateChildPages(){for(var e of this.children())e.updatePage(this.curPage,this.maxPage,this.pageSize)}}i().registerComponent("PlaylistBody",Jl);var Zl=i().getComponent("Component");class ed extends Zl{createEl(){return super.createEl("div",{className:"playlist-container"})}update(e,t){for(var r of this.children())r.update(e,t)}}i().registerComponent("PlaylistContainer",ed);var td=i().getComponent("Component");class rd extends td{createEl(){return super.createEl("div",{className:"playlist-header"})}update(e,t){t&&t.videos&&(this.playlist=t,e?this.playlist.videos.forEach(((t,r)=>{e.id===t.id&&this.renderWithIndex(r+1)})):this.renderWithIndex(1))}renderWithIndex(e){var t;this.el().setAttribute("data-title",this.playlist.title),this.el().innerHTML=(t={length:this.playlist.videos.length,index:e},'<div class="playlist-index"><span>'.concat(t.index,"</span><span>/ ").concat(t.length,"</span></div>"))}}i().registerComponent("PlaylistHeader",rd);var nd=i().getComponent("Component");class id extends nd{createEl(){return this.playlist={},this.video={},super.createEl("div",{className:"playlist-items"})}update(e,t){t&&t.videos&&this.playlist.id!==t.id&&(this.playlist=t,t.videos.forEach(((e,t)=>{this.addChild("PlaylistItem",{video:e,index:t})})));e&&this.video.id!==e.id&&(this.video=e,this.children().forEach(((t,r)=>{t.video.id===e.id?(t.makeSelected(),this.updatePageFromIndex(r)):t.makeUnselected()})))}moveTo(e){this.el().style.transform="translateX(".concat(-e,"px)")}updatePageFromIndex(){}}i().registerComponent("PlaylistItems",id);var ad=i().getComponent("Component");class sd extends ad{createEl(){return super.createEl("div",{className:"playlist-items-container"})}update(e,t){t!==this.playlist&&(this.playlist=t,this.removeChild("PlaylistItems"),this.addChild("PlaylistItems"));var r=this.childNameIndex_.PlaylistItems;r.updatePageFromIndex=this.updatePageFromIndex,r.update(e,t)}updatePage(e,t,r){var n=this.childNameIndex_.PlaylistItems;if(e===t){var i=this.el().getBoundingClientRect().width,a=n.el().getBoundingClientRect().width;n.moveTo(a-i)}else n.moveTo(e*r*156)}updatePageFromIndex(){}}i().registerComponent("PlaylistItemsContainer",sd);const od=(e,t,r,n)=>'<div class="poster-thumb-container">\n    <div class="poster-thumb" style="background-image:url('.concat(t,');"></div>\n    <div class="little-play-btn">').concat(e,"</div>\n  </div>\n  <h5>").concat(function(e){return e?'<span class="poster-thumb-title-sponsored">'.concat(Qi("cne-player-sponsored"),": </span>"):""}(n)).concat(r,"</h5>");var ud=i().getComponent("ClickableComponent");class cd extends ud{constructor(e,t){super(e,t),this.video=t.video,this.index=t.index}createEl(){var e=this.options().video,t=function(e,t,r=""){return e.length<t&&(r=""),e.slice(0,t)+r}(e.title,43,"...");return super.createEl("div",{className:"playlist-item",innerHTML:od(cc,e.poster_frame,t,e.paid_content)})}handleClick(){this.player().trigger("intent:load-video",{video:this.video,index:this.index})}makeSelected(){this.addClass("selected")}makeUnselected(){this.removeClass("selected")}}i().registerComponent("PlaylistItem",cd);var ld=i().getComponent("PosterImage");class dd extends ld{handleClick(){this.player_.trigger("intent:play")}}i().registerComponent("PosterImage",dd);var hd=i().getComponent("ProgressControl");class pd extends hd{constructor(e,t){super(e,t),e.ready((()=>{this.on(this.el(),"mousemove",this.triggerMouseMoveIntent),this.on(this.el(),"touchmove",this.triggerMouseMoveIntent),this.on(this.el(),"mousedown",this.triggerMouseDownIntent),this.on(this.el(),"touchstart",this.triggerMouseDownIntent)}))}triggerMouseDownIntent(e){this.player_.trigger("intent:progress-mouse",{event:e,type:"down"})}triggerMouseMoveIntent(e){this.player_.trigger("intent:progress-mouse",{event:e,type:"move"})}}i().registerComponent("ProgressControl",pd);var fd=i().getComponent("SeekBar");class md extends fd{handleMouseDown(e){super.handleMouseDown(e),this.player().trigger("intent:seek-start"),this.start=Date.now()}handleMouseUp(e){super.handleMouseUp(e),this.player().trigger({type:"intent:seek-end",elapsed:Date.now()-this.start})}allowTabFocus(e){this.el().setAttribute("tabindex",e?"0":"-1")}updateCuePostMidroll({finishedAdIndex:e}){var t=this.cues&&this.cues.filter((t=>t.idx===e))[0];t&&(t.node.parentNode.removeChild(t.node),t.node=null),!this.el_.querySelectorAll(".cne-cue-marker").length&&this.removeCueContainer()}removeCueContainer(){var e=this.el_.querySelectorAll(".cne-cue-container");e.length&&e.forEach((e=>e.parentNode.removeChild(e)))}addCueIndicators({cue_points:e,duration:t}){this.cues=[];var r=1e3*t,n=document.createElement("div");n.className="cne-cue-container",e.forEach(((e,t)=>{var i=document.createElement("div"),a=e/r*100;i.className="cne-cue-marker",i.style.left="calc(".concat(a,"% - 4px)"),n.append(i),this.cues&&this.cues.push({idx:t+1,node:i})})),this.el_.appendChild(n)}}i().registerComponent("SeekBar",md);var gd=i().getComponent("Component");class yd extends gd{createEl(){return super.createEl("div",{className:"cne-settings-body"})}}i().registerComponent("SettingsBody",yd);var vd=i().getComponent("Component");class bd extends vd{createEl(){return super.createEl("div",{className:"cne-settings-submenu cne-caption-options"},{title:this.options_.title})}}i().registerComponent("CneCaptionOptions",bd);var _d=i().getComponent("Component");class Td extends _d{createEl(){return super.createEl("div",{className:"cne-settings-footer",innerHTML:'<span class="cne-captions-sample-text" style="">'.concat(Qi("cne-player-caption-sample-text"),"</span>")})}}i().registerComponent("SettingsFooter",Td);var wd=i().getComponent("Component");class Sd extends wd{constructor(e,t){super(e,t),this.on(this.$(".cne-settings-close"),"click",this.closeMenu),this.on(this.$(".cne-settings-close"),"keyup",this.closeButtonKeyUp)}createEl(){return super.createEl("div",{innerHTML:'<div class="cne-settings-back">\n    <span class="cne-settings-back-arrow">'.concat('\n<svg width="6" height="10" viewBox="0 0 6 10" focusable="false">\n  <use xlink:href="#svg-chevron-back" />\n</svg>','&nbsp;</span>\n    <span class="cne-settings-back-text">').concat(Qi("cne-player-settings-back"),'</span>\n  </div>\n  <h3 class="cne-settings-title">').concat(Qi("cne-player-settings-title"),'</h3>\n  <div class="cne-settings-close" tabindex="0" aria-label="').concat(Qi("cne-aria-exit-settings"),'" role="button">\n    <span class="custom-control-focus" tabindex="-1">\n      ').concat('\n<svg width="12" height="12" viewBox="0 0 12 12" focusable="false">\n  <use xlink:href="#svg-close" />\n</svg>','\n    </span>\n    <span class="vjs-hidden">').concat(Qi("cne-player-settings-close"),"</span>\n  </div>"),className:"cne-settings-header"})}closeButtonKeyUp(e){e.keyCode!==Dc.SPACE&&e.keyCode!==Dc.RETURN||this.closeMenu(),e.stopPropagation()}closeMenu(){this.player_.trigger("intent:close-settings")}title(e=null){if(!e)return this.el_.querySelector(".cne-settings-title").innerHTML;this.el_.querySelector(".cne-settings-title").innerHTML=e}}i().registerComponent("SettingsHeader",Sd);var Cd=i().getComponent("Component");class kd extends Cd{constructor(e,t){super(e,t),this.hide()}createEl(){return super.createEl("div",{id:"".concat(this.player_.id_,"-settings-menu"),className:"cne-settings-menu",innerHTML:'\n<svg class="cne-tooltip-caret" width="12" height="6" viewBox="0 0 12 6" focusable="false">\n  <use xlink:href="#svg-tooltip-caret" />\n</svg>'})}disableCaptionSettings(){this.player_.trigger("caption-settings-disabled")}enableCaptionSettings(){this.player_.trigger("caption-settings-enabled")}hideSubMenu(e){e.el_.style.display="none"}showSubMenu(e){var t=this.getSubMenus(),r=e||t[0];t.map((e=>{e.name()===r.name()?(e.el_.style.display="block",this.settingsHeader.title(r.getAttribute("title"))):e.el_.style.display="none"}))}toggleSubMenu(e,t){var r=this.settingsBody[e];r&&("show"==t?this.showSubMenu(r):"hide"===t?this.hideSubMenu(r):"disable"===t?this.disableCaptionSettings():"enable"===t&&this.enableCaptionSettings())}getSubMenus(e){return this.settingsBody.children().filter((t=>t.el_.className&&t.el_.className.indexOf("cne-settings-submenu")>=0&&(!e||t.el_.className.indexOf(e)>=0)))||[]}getDisabledSubMenus(){return this.getSubMenus("cne-menu-disabled")}visible(){return!this.hasClass("vjs-hidden")}}i().registerComponent("CneSettingsMenu",kd);var Ed=i().getComponent("Component");class Od extends Ed{createEl(){return super.createEl("div",{className:"cne-settings-submenu cne-player-settings"},{title:this.options_.title})}}i().registerComponent("CnePlayerSettings",Od);var Ad='\n<span class="custom-control-focus" tabindex="-1">\n  '.concat('\n<svg width="16" height="16" viewbox="0 0 16 16" focusable="false">\n  <use xLink:href="#svg-settings" class="svg-settings" />\n  <use xLink:href="#svg-settings" class="svg-settings shadow" />\n</svg>',"\n</span>");class xd extends xc{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp),this.on("keydown",this.handleKeyDown),this.el_.removeAttribute("aria-live")}createEl(){var e={"aria-label":Qi("cne-aria-settings-label"),"aria-controls":"".concat(this.player_.id_,"_settings"),"aria-expanded":"false",tabindex:"0",role:"button"};return super.createEl("div",{innerHTML:Ad,className:"cne-settings-toggle ".concat(super.buildCSSClass())},e)}handleKeyDown(e){Uc.indexOf(e.keyCode)>-1&&e.preventDefault()}handleKeyUp(e){switch(e.stopPropagation(),e.keyCode){case Dc.UP:case Dc.DOWN:e.preventDefault(),this.handleClick(e);break;case Dc.ESC:this.player_.controlBar.cneSettings.cneSettingsMenu.visible()&&this.player_.trigger("intent:close-settings")}}handleClick(){this.player_.controlBar.cneSettings.cneSettingsMenu.visible()?this.player_.trigger("intent:close-settings"):this.player_.trigger("intent:show-settings")}}i().registerComponent("CneSettingsToggle",xd);var Pd={facebook:ic,twitter:mc,tumblr:fc,googleplus:'\n<svg height="100%" viewBox="0 0 47.15 30" focusable="false">\n  <use xlink:href="#svg-googleplus" />\n</svg>',pinterest:uc,embed:'\n<svg height="100%" viewBox="0 0 47.15 30" focusable="false">\n  <use xlink:href="#svg-embed" />\n</svg>',url:gc,email:nc};class Ld extends xc{constructor(e,t){super(e,t),this.on("keyup",(e=>e.stopPropagation()))}createEl(){var{action:e}=this.options_,{ariaLabel:t}=this.options_,r={"aria-label":t},n=Pd[e]||"",i=super.createEl("div",{innerHTML:'<span class="custom-control-focus" tabindex="-1">\n                      '.concat(n,"\n                    </span>"),className:"share-".concat(e,"-trigger")},r);return i.removeAttribute("aria-live"),i}handleClick(e){e.stopPropagation();var{action:t}=this.options_;switch(t){case"embed":this.player_.trigger("intent:show-share-embed"),this.player_.trigger("intent:share",{action:"embed"});break;case"url":this.player_.trigger("intent:show-share-url"),this.player_.trigger("intent:share",{action:"url"});break;default:this.player_.trigger("intent:share",{action:t})}}}i().registerComponent("ShareActionButton",Ld);var Md=i().getComponent("Component");class Id extends Md{createEl(){return super.createEl("div",{className:"share-overlay--container share-actions"})}}i().registerComponent("ShareActions",Id);var Dd=i().getComponent("Component");class Ud extends Dd{constructor(e,t){super(e,t),this.contentEl_=document.createElement("div"),this.contentEl_.className="share-content--container",this.stopPropagationFn_=function(e){e.stopPropagation()},this.contentEl_.addEventListener("click",this.stopPropagationFn_),this.el_.appendChild(this.contentEl_),this.header=document.createElement("h4"),this.header.innerHTML=t.headerText,this.type=t.type}createEl(){return super.createEl("div",{className:this.buildCSSClass()})}dispose(){this.contentEl_.removeEventListener("click",this.stopPropagationFn_),super.dispose()}render(){this.removeChild("OverlayTextBox"),this.addChild("OverlayTextBox",{content:this.getContent(),type:this.options_.type}),this.contentEl().insertBefore(this.header,this.contentEl().firstChild)}buildCSSClass(){return"share-overlay--container share-".concat(this.options_.type)}}i().registerComponent("ShareLink",Ud);const Rd=Ud;var jd={allure:"/3379/allure.dart/share",architecturaldigest:"/3379/arch.dart/share",arstechnica:"/3379/ars.dart/share",bonappetit:"/3379/bonapp.dart/share",brides:"/479/brides.dart/share",cntraveler:"/3379/cntraveler.dart/share",epicurious:"/3379/epi.dart/share",glamour:"/3379/glamour.dart/share",iris:"/3379/thescene.dart/watch/share",pitchfork:"/3379/pitchfork.dart/share",self:"/3379/self.dart/share",teenvogue:"/3379/teenvogue.dart/share",thenewyorker:"/3379/newyorker.dart/share",vanityfair:"/3379/vanityfair.dart/share",vogue:"/3379/vogue.dart/share",w:"/3379/wmagazine.dart/share",golfdigest:"/3379/conde.golfdigest/partner",gq:"/3379/conde.gq/partner",wired:"/3379/conde.wired/partner",architecturaldigestindia:"/5574/in.archdigest",architecturaldigestitaly:"/5574/it.ad",architecturaldigestmexico:"/5574/mx.ad",architecturaldigestfrance:"/5574/fr.archdigest",architecturaldigestgermany:"/5574/de.archdigest",architecturaldigestspain:"/5574/es.archdigest",architecturaldigestrussia:"/45577845/ru.archdigest",cntravelerindia:"/5574/in.cntraveller",cntraveleruk:"/5574/uk.cntraveller",cntravelerspain:"/5574/es.cntraveller",vogueindia:"/5574/in.vogue",vogueuk:"/5574/uk.vogue",voguefrance:"/5574/fr.vogue",voguespain:"/5574/es.vogue",vogueitaly:"/5574/it.vogue",voguegermany:"/5574/de.vogue",voguemexico:"/5574/mx.vogue",voguejapan:"/5574/jp.vogue",voguetaiwan:"/5574/tw.vogue",voguerussia:"/45577845/ru.vogue",wireditalia:"/5574/it.wired",wireduk:"/5574/uk.wired",tatlerrussia:"/45577845/ru.tatler",tatleruk:"/5574/uk.tatler",glamouruk:"/5574/uk.glamour",glamourspain:"/5574/es.glamour",glamourmexico:"/5574/mx.glamour",glamourrussia:"/45577845/ru.glamour",gqindia:"/5574/in.gq",gqfrance:"/5574/fr.gq",gquk:"/5574/uk.gq",gqspain:"/5574/es.gq",gqitaly:"/5574/it.gq",gqgermany:"/5574/de.gq",gqjapan:"/5574/jp.gq",gqmexico:"/5574/mx.gq",gqtaiwan:"/5574/tw.gq",gqrussia:"/45577845/mx.gq",houseandgardenuk:"/5574/uk.houseandgarden",vanityfairfrance:"/5574/fr.vanityfair",vanityfairspain:"/5574/es.vanityfair",vanityfairitalia:"/5574/it.vanityfair"};function Nd(e,t,r){var n=function(e,t){return e.match(/thescene/)?jd.iris:jd[t]||e||""}(t,r);return e.replace("[SHARE_AD_UNIT]",n)}class Bd extends Rd{constructor(e){super(e,{type:"embed",headerText:"EMBED URL"})}getContent(){var{embed:e}=this.video_&&this.video_.share_links||{};return e?Nd(e,this.adUnit_,this.video_.brand):""}setVideo(e){if(!this.adUnit_){var t=this.player().dfp.options();this.adUnit_=t.adUnitPath||t.fallbackAdUnitPath}this.video_=e,this.render()}setAdUnit(e){this.adUnit_=e,this.render()}}i().registerComponent("ShareEmbed",Bd);var $d=i().getComponent("Component");class Fd extends $d{constructor(e,t){super(e,t),this.on("click",(function(){this.player_.trigger("intent:close-overlay")})),this.on("keydown",this.handleKeyDown)}createEl(){return super.createEl("div",{className:this.buildCSSClass()},{role:"presentation"})}buildCSSClass(){return"cne-overlay-content share-overlay"}handleKeyDown(e){e.keyCode===Dc.ESC&&this.player_.trigger("intent:close-overlay")}}i().registerComponent("ShareOverlay",Fd);class Vd extends Rd{constructor(e){super(e,{type:"url",headerText:Qi("cne-player-share-url-header")})}getContent(){return this.video_.url}setVideo(e){this.video_=e,this.render()}}i().registerComponent("ShareUrl",Vd);class Hd extends xc{constructor(e,t){super(e,t),this.on("keypress",this.handleKeyPress)}createEl(){var e='\n      <span class="custom-control-focus" tabindex="-1">\n        '.concat(dc,"\n      </span>"),t={"aria-label":Qi("cne-aria-share-options")};return super.createEl("div",{innerHTML:e,className:"share-widget"},t)}handleClick(){this.player_.trigger("intent:show-share")}handleKeyPress(e){[Dc.RETURN,Dc.SPACE].indexOf(e.keyCode)>=0&&this.player_.trigger("intent:show-share-keyboard")}}i().registerComponent("ShareWidget",Hd);var qd=i().getComponent("Component");class zd extends qd{createEl(){return super.createEl("div",{className:"share-dropdown"})}update(e){!0===e?this.addClass("show"):this.removeClass("show")}}i().registerComponent("ShareDropdown",zd);var Wd={email:nc,facebook:ic,twitter:mc},Gd={facebook:"cne-player-share",twitter:"cne-player-tweet",email:"cne-player-email",more:"cne-player-more"};class Xd extends xc{createEl(){var e,{action:t}=this.options_,r='\n      <div class="share-'.concat(t,'-text">\n      ').concat(Qi(Gd[t]),"\n      </div>\n    ");"more"===t?e=r:e='\n      <div class="share-dropdown-item-icon share-dropdown-item-icon--'.concat(t,'">\n        ').concat(Wd[t],"\n      </div>\n      ")+r;return super.createEl("div",{innerHTML:e||"",className:"share-dropdown-item"},{"data-label":t})}handleClick(e){e.stopPropagation();var{action:t}=this.options_;switch(t){case"more":this.player_.trigger("intent:show-share");break;default:this.player_.trigger("intent:share",{action:t})}}}i().registerComponent("ShareDropdownItem",Xd);var Kd=i().getComponent("VolumeBar");class Yd extends Kd{constructor(e,t){super(e,t),this.el_.setAttribute("tabindex","-1")}handleMouseMove(e){var t=this.calculateDistance(e);this.player_.trigger("intent:volume-change",{level:t})}}i().registerComponent("VolumeBar",Yd);var Qd={useStyledNonLinearAds:!0,loadVideoTimeout:ka()?4e3:2e3};var Jd=ka()?9e3:5e3;function Zd(e){return ts(e,["play","adplay"])}var eh=Hn.interval(250);function th({adComplete$:e,adPaused$:t,adResumed$:r,startMidroll$:n,startPreroll$:i,updateInterval$:a=eh}){var s=Hn.merge(r.mapTo(!0),t.mapTo(!1)).startWith(!0);return Hn.merge(i,n).switchMapTo(a.filterByLatestFrom(s,((e,t)=>t)).takeUntil(e))}function rh(e,t){return e.withType("start").filter((()=>t.hasCompanion)).map((e=>{var{companion:r,companionSize:{width:n,height:i},target:a}=t;return{companionDivId:r||"cne-auto-companion",html:function(e,t,r){var n=e.getAd();if(!n)return"";try{var i=n.getCompanionAds(t,r);return i&&i[0]&&i[0].getContent()?i[0].getContent():""}catch(e){return qs("DFP Ad Error. Companion Ad Error",e),""}}(e,n,i),parentDivId:a,width:n,height:i}})).skipWhile((({html:e})=>""===e))}var nh=["AD_ERROR","CONTENT_RESUME_REQUESTED","CONTENT_PAUSE_REQUESTED","CLICK","DURATION_CHANGE","EXPANDED_CHANGED","STARTED","IMPRESSION","PAUSED","RESUMED","FIRST_QUARTILE","MIDPOINT","THIRD_QUARTILE","COMPLETE","USER_CLOSE","LINEAR_CHANGED","LOADED","AD_CAN_PLAY","AD_METADATA","AD_BREAK_READY","ALL_ADS_COMPLETED","SKIPPED","SKIPPABLE_STATE_CHANGED","LOG","VOLUME_CHANGED","VOLUME_MUTED"],ih=({eventTarget$:e,dfpEventTypes$:t,events:r,fromAdEvent:n})=>e.withLatestFrom(t).switchMap((([e,t])=>Hn.from(r).mergeMap((r=>n(e,t,r)))));function ah(e,t,r){return Hn.fromEvent(e,t[r])}function sh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sh(Object(r),!0).forEach((function(t){uh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function uh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ch=r(7317).default;const lh=e=>e?()=>{try{var t=e.pubads(),r=t.getSlots()||[],n=t.getCorrelator(),i=(e=>(e.getTargetingKeys()||[]).reduce(((t,r)=>(t[r]=e.getTargeting(r),t)),{}))(t),a=i.ctx_line_items||[],s=(e=>window.parent.cnBus&&window.parent.cnBus.history("ads.refreshing.#").length?(ch("Ad render check passed via cnBus"),!0):e.map((e=>e.getSlotElementId())).filter((e=>window.parent.document.querySelectorAll("#".concat(e," ").concat("div[id^='google_ads_iframe']")).length>0)).length>0?(ch("Ad render check passed via DOM Iframes"),!0):(ch("Ad render check failed"),!1))(r),o=(e=>e.filter((e=>e.getOutOfPage())).map((e=>{var t=e.getResponseInformation();return t&&t.lineItemId})).filter(Boolean))(r),u=window.top.cne_failsafe_lineitem||[],c=(d=window.top._cne&&window.top._cne.cnsInfo&&window.top._cne.cnsInfo[0])?d.sopLineItem:null,l=[...a,...o,...u,c].filter(Boolean).map((e=>e.toString()));return i.ctx_line_items=[...new Set(l)],ch("found lineItems:",i.ctx_line_items),{adsRendered:s,adUnits:r.map((e=>e.getAdUnitPath())),correlator:n,slots:r,targeting:i}}catch(e){return{error:e.message}}var d}:(ch("GPT Not Present"),null);var dh=r(7317).default;function hh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ph(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fh=(e,t)=>(r={})=>{var{adUnits:n,error:i="",targeting:a={}}=r,{embedLocation:s,publicaEnabled:o,videoId:u}=t;zs("gptData",e,{dim1:JSON.stringify({adBlocked:!(window.google&&window.google.ima),adUnits:n,embedLocation:s,error:i,lineItems:a.ctx_line_items,publicaEnabled:o,videoId:u})})},mh=()=>$s()?(window.parent.googletag=window.parent.googletag||{},window.parent.googletag.cmd=window.parent.googletag.cmd||[],window.parent.googletag):null,gh=(e,t)=>()=>{var{gptQueue:r=!1,gpt:n}=t;return Hn.create((i=>{var a=()=>{var r=e();return r.adsRendered?(i.next(r),i.complete()):(dh("GPT Ads Not Loaded"),void(r.error&&(dh("GPT Error",r.error),fh("gptError",t)(r))))};r?n.cmd.push(a):a()}))};function yh(e,{gpt:t=mh(),timeout$:r=Hn.timer(3e3)}={}){var{embedLocation:n=""}=e;if(!n.length)return dh("Not checking for ad targeting data: not on O&O"),fh("notOnOO",e)(),Hn.of({});if(n.endsWith("videoportal"))return dh("Not checking ad targeting data: on video watch page"),fh("onVideoWatchPage",e)(),Hn.of({});if(!t)return dh("Not checking ad targeting data: no GPT library found"),fh("gptNotFound",e)(),Hn.of({});var i=lh(t),a=gh(i,e),s=gh(i,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hh(Object(r),!0).forEach((function(t){ph(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({gptQueue:!0,gpt:t},e))().do((t=>{dh("Initial gpt check successful"),fh("initial",e)(t)})),o=(e=>Hn.create((t=>{e.cmd.push((()=>{e.pubads().addEventListener("slotRenderEnded",(()=>{t.next(),t.complete()}))}))})))(t).switchMap(a).do((t=>{dh("slotRenderEnded gpt check successful"),fh("slotRenderEnded",e)(t)})),u=r.map(i).do((t=>{dh("gpt check timed out"),fh("timedOut",e)(t)}));return Hn.race(s,o,u)}function vh(e){return e.trim().replace("&","and").replace(/[^\s\-_A-Za-z0-9]/g,"").replace(/[\s\-_]+/g,"-").toLowerCase()}function bh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bh(Object(r),!0).forEach((function(t){Th(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Th(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wh=["golfdigest"],Sh=(e,t=!1)=>t?"rail-player":"interlude"===e?"inline-player":"player",Ch=({adUnitPath:e,brand:t,position:r,brandMap:n})=>{if(!$s())return e;var i=((e,t,r)=>{var{adUnit:n}=window.top.cns||{},{category:i,contentType:a}=n||{};return i&&a?"".concat(r[e],"/").concat(t,"/").concat(i,"/").concat(a):null})(t,r,n);if(i)return i;var a=(()=>{var e=window.top.copilot||{},{categories:{channels:t=[]}={}}=e;return t.map((({slug:e})=>e))[0]})()||(window.top.digitalData?window.top.digitalData.section:null)||(()=>{var e=window.top.cns||{},{pageContext:{channel:t}={}}=e;return t})(),s=a?vh(a):null,o=(()=>{var[e]=window.dataLayer||window.top.dataLayer||[],{content:t={}}=e||{};return t.contentType})(),u=[n[t],r,s,o].filter(Boolean);return"".concat(u.join("/")).toLowerCase()},kh=({adUnitPath:e,brand:t,isRightRail:r,pageType:n,playerType:i,section:a,brandMap:s,iu:o})=>{if(o)return o;if(!((e,t)=>t[e])(t,s))return e;if("amp-article"===n)return(({brand:e,section:t,position:r,brandMap:n})=>{var i="string"==typeof t?t.toLowerCase():"misc";return"".concat(n[e],"/").concat(r,"/").concat(vh(i),"/amp/1")})({brand:t,section:a,position:Sh(i),brandMap:s});if("videoportals"===n&&!wh.includes(t))return((e,t)=>"".concat(t[e],"/player/video/watch-page/1"))(t,s);return Ch({adUnitPath:e,brand:t,position:Sh(i,r),brandMap:s})};function Eh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Eh(Object(r),!0).forEach((function(t){Ah(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ah(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xh=({dfpAdEvent$:e,dfpEventTypes$:t,publicaEnabled:r,pApi:n=window.pAPI}={})=>{if(!r)return Hn.never();var i,a=t.map((i=n,e=>{var t=(e=>t=>()=>e.logEvent('{"type": "'.concat(t,'"}')))(i);return{[e.IMPRESSION]:t("IMPRESSION"),[e.STARTED]:t("START"),[e.SKIPPED]:t("SKIP"),[e.CLICK]:t("CLICK"),[e.FIRST_QUARTILE]:t("QUARTILE1"),[e.MIDPOINT]:t("QUARTILE2"),[e.THIRD_QUARTILE]:t("QUARTILE3"),[e.COMPLETE]:t("COMPLETE"),[e.MUTED]:t("MUTE"),[e.ALL_ADS_COMPLETED]:()=>i("ima3_reset")}}));return e.withLatestFrom(a).map((([{type:e},t])=>t[e])).filter((e=>e))};function Ph(e,t){var r,n=e.options();return function({deferredTagData$:e,currentVideo$:t,options:r},n={allure:"/3379/conde.allure",architecturaldigest:"/3379/conde.arch",arstechnica:"/3379/conde.ars",bonappetit:"/3379/conde.bonapp",brides:"/479/conde.brides",cntraveler:"/3379/conde.cntraveler",epicurious:"/3379/conde.epi",glamour:"/3379/conde.glamour",golfdigest:"/21849421099/golfdigest",gq:"/3379/conde.gq",pitchfork:"/3379/conde.pitchfork",self:"/3379/conde.self",teenvogue:"/3379/conde.teenvogue",them:"/3379/conde.them",thenewyorker:"/3379/conde.newyorker",vanityfair:"/3379/conde.vanityfair",vogue:"/3379/conde.vogue",w:"/3379/conde.w",wired:"/3379/conde.wired",architecturaldigestindia:"/5574/in.archdigest",architecturaldigestfrance:"/5574/fr.archdigest",architecturaldigestgermany:"/5574/de.archdigest",architecturaldigestspain:"/5574/es.archdigest",architecturaldigestitaly:"/5574/it.ad",architecturaldigestmexico:"/5574/mx.ad",architecturaldigestrussia:"/45577845/ru.archdigest",vogueindia:"/5574/in.vogue",voguefrance:"/5574/fr.vogue",vogueuk:"/5574/uk.vogue",voguespain:"/5574/es.vogue",vogueitaly:"/5574/it.vogue",voguegermany:"/5574/de.vogue",voguemexico:"/5574/mx.vogue",voguejapan:"/5574/jp.vogue",voguetaiwan:"/5574/tw.vogue",voguerussia:"/45577845/ru.vogue",cntravelerindia:"/5574/in.cntraveller",cntraveleruk:"/5574/uk.cntraveller",cntravelerspain:"/5574/es.cntraveller",wireditalia:"/5574/it.wired",wireduk:"/5574/uk.wired",tatlerrussia:"/45577845/ru.tatler",tatleruk:"/5574/uk.tatler",glamouruk:"/5574/uk.glamour",glamourspain:"/5574/es.glamour",glamourmexico:"/5574/mx.glamour",glamourrussia:"/45577845/ru.glamour",gqindia:"/5574/in.gq",gqfrance:"/5574/fr.gq",gquk:"/5574/uk.gq",gqspain:"/5574/es.gq",gqitaly:"/5574/it.gq",gqgermany:"/5574/de.gq",gqjapan:"/5574/jp.gq",gqmexico:"/5574/mx.gq",gqtaiwan:"/5574/tw.gq",gqrussia:"/45577845/ru.gq",houseandgardenuk:"/5574/uk.houseandgarden",vanityfairfrance:"/5574/fr.vanityfair",vanityfairspain:"/5574/es.vanityfair",vanityfairitalia:"/5574/it.vanityfair"}){return t.bufferedWith(e,((e,t)=>{var{brand:i}=e,{adUnitPath:a}=t,s=kh(_h(_h({},r),{},{adUnitPath:a,brand:i,brandMap:n}));return _h(_h({},t),{},{adUnitPath:s,video:e})})).share()}({deferredTagData$:yh(n).map((e=>({slots:t=[],correlator:r,targeting:n})=>{var i=t.map((e=>e.getAdUnitPath())).filter((e=>e&&!e.match(/\.cm/)))[0],a=e.adUnitPath,s=e.fallbackAdUnitPath;return{adUnitPath:(a||i||s).replace(/\/$/,""),correlator:r,targeting:n}})(n)),currentVideo$:t.withType("dfp-currentvideo").map((({value:e})=>e)),options:n}).map((r=e.options().publicaEnabled,e=>{if(!r)return e;var t=e.adUnitPath.split("/").filter((e=>e.length)),n=t[1].indexOf("conde")>-1?(([e,t,r])=>"".concat(e,"/").concat(t,"/").concat(r,"/ab-inventory"))(t):(([e,t])=>"".concat(e,"/").concat(t,"/swish"))(t);return Oh(Oh({},e),{},{adUnitPath:n})}))}var Lh=r(7317).default;function Mh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ih(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mh(Object(r),!0).forEach((function(t){Dh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Uh=/^https?:\/\/|^\/\//;function Rh({aoTest:e,companionSize:t,embedLocation:r,height:n,infinityId:i,muted:a,adRequestData:s,playerSizeForAdRequest:o,isRightRail:u,isSticky:c,urlVars:l,width:d,ampTargeting:h,cntPlatform:p,prebidData:f}){var{adUnitPath:m,correlator:g,targeting:y,video:v}=s,b=((e,t)=>{if(e)return e;try{var r=JSON.parse(t);if(r)return r}catch(e){Lh("Error Parsing ampTargeting")}return Lh("No Valid Ad Targeting Data Found"),{}})(y,h),_=(e=>e?null:"player_embed")(r),T=Ih(Ih(Ih({},b),f),{},{ao_test:e||l.get("ao_test"),excl_cat:_,height:Math.round(n),mbid:l.get("mbid"),muted:a?1:0,right_rail:u?1:0,sensitive:v.sensitive,series:v.series_id,width:Math.round(d),cnt_platform:p});"2549131"===v.dfp_cms_id&&["height","muted","sensitive","width"].forEach((e=>{T["cne_".concat(e)]=T[e],delete T[e]})),v.live_metadata&&(T.traffic_type="live"),c&&(T.feature_flags="sticky-player");var w=encodeURIComponent(Ma(T));Lh("CUST_PARAMS: ",w);var S=Ma({sz:"".concat(o,"|").concat("480x70"),iu:m,ciu_szs:"".concat(t.width,"x").concat(t.height),gdfp_req:"1",env:"vp",output:"vmap",unviewed_position_start:"1",cust_params:w,correlator:g,description_url:encodeURIComponent(v.url||""),vid:v.id,cmsid:v.dfp_cms_id||"1495",ppid:i?i.replace(/-/g,""):""},{escape:!1,removeNull:!1}),C="".concat("https://pubads.g.doubleclick.net/gampad/ads","?").concat(S);return(()=>{var{_CNE_AD_FIXTURE_:e}=window;return e&&Uh.test(e)?e:(delete window._CNE_AD_FIXTURE_,null)})()||C}var jh=r(7317).default,Nh=(()=>{var e;try{e=window.top.performance}catch(t){e=window.performance}return e})();function Bh(e,t,r,n=Nh){if(null!=n&&"function"==typeof n.mark)try{n.mark(r),n.measure(e,t,r)}catch(e){jh(e)}}const $h={js:{evaluatedJSMark:"js_evaluatedJS",startedJSExecutionMark:"js_player_js_start_execution",jsStartedInlineMeasure:"js_jsStarted_inline",jsStartedScriptMeasure:"js_jsStarted_script",evaluateMainJSMeasure:"js_timeToEvaluate_main",evaluateMobileJSMeasure:"js_timeToEvaluate_mobile"},ads:{requestAdsMark:"ads_dfp_plugin_requestAds",requestAdsMeasure:"ads_requestAds",requestAdsManagerMark:"ads_dfp_plugin_requestAdsManager",requestAdsManagerMeasure:"ads_requestAdsManager",requestAdsLoaderMark:"ads_dfp_plugin_requestAdsLoader",requestAdsLoaderMeasure:"ads_requestAdsLoader",vastAdFetchStartedMark:"ads_fetchVASTAd_started",vastAdFetchCompleteMark:"ads_fetchVASTAd_complete",vastAdFetchMeasure:"ads_vastAdDuration",adStartingMark:"ads_AD_IS_STARTING",adStartingMeasure:"ads_startedAd"},misc:{loadEmbedPiecesMark:"promise_resolution_loadEmbedPieces",buildEmbedPiecesMark:"promise_resolution_buildEmbedPieces",buildScriptPlayerStarted:"loaderjs_assets_loaded",embedPiecesMeasure:"buildEmbedPiecesToLoadEmbedPieces",scriptEmbedCompleteMark:"scriptEmbedPromises_complete",scriptEmbedStartedMark:"scriptEmbedPromises_started",scriptEmbedCompleteMeasure:"scriptEmbedPromises_complete",createPlayerStartedMark:"createPlayer_started",createPlayerStartedMeasure:"createPlayer_started",fetchConfigStartedMark:"fetchConfig_started",fetchConfigCompletedMark:"fetchConfig_complete",fetchConfigCompletedMeasure:"fetchConfig_complete",fetchPrebidStartedMark:"fetchPrebid_started",fetchPrebidCompletedMark:"fetchPrebid_complete"}};var{ads:{vastAdFetchStartedMark:Fh,vastAdFetchCompleteMark:Vh,vastAdFetchMeasure:Hh}}=$h,qh=e=>{var t=function(e){var t=(new DOMParser).parseFromString(e,"application/xml"),r=t.getElementsByTagNameNS("*","AdBreak");if(1!==r.length)return null;var n=r[0],i=n.getAttributeNode("timeOffset").textContent;if("start"!==i)return null;var a=t.getElementsByTagNameNS("*","AdSource")[0],s=t.getElementsByTagNameNS("*","AdTagURI")[0];return s&&n&&a?{adBreak:{timeOffset:i,breakType:n.getAttributeNode("breakType").textContent,breakId:n.getAttributeNode("breakId").textContent},adSource:{id:a.getAttributeNode("id").textContent,allowMultipleAds:a.getAttributeNode("allowMultipleAds").textContent,followRedirects:a.getAttributeNode("followRedirects").textContent},adTagURI:s.textContent}:null}(e);if(!t)return null;var{adTagURI:r}=t;return r},zh=e=>t=>(function(e,t=Nh){null!=t&&"function"==typeof t.mark&&t.mark(e)}(Fh),Ps(t).map((t=>{Bh(Hh,Fh,Vh);var r=qh(t.body);return r?Object.assign(e,{adTagUrl:r}):e}))),Wh=e=>(({adTagUrl:e,pApi:t=window.pAPI,timeout$:r=Hn.timer(1e3)}={})=>{var n=r.mapTo(e),i=Hn.create((r=>{if(!t||!t.ready)return r.next(e),void r.complete();t.ready((n=>{n&&n.adblock_detected?r.next(t.proxyResource(e,{filter:"ima3"})):r.next(e),r.complete()}))}));return Hn.race(i,n)})(e).switchMap(zh(e));function Gh(e,t){return Hn.fromEvent(e,t)}var Xh=e=>"FULLY_IN_VIEWPORT"!==e;function Kh(e,t,r){var{adsDisabled:n,autoplay:i,disableOutOfViewportAds:a,publicaEnabled:s}=t.options(),o=Hn.of(function(e){if(!e&&window.google&&window.google.ima){var t=window.google.ima;return t.settings.setVpaidMode(t.ImaSdkSettings.VpaidMode.ENABLED),{ima:t}}return{}}(n)).pluck("ima").filter(Boolean),u=r.withType("adsLoader").pluck("value"),c=r.withType("adsManager").pluck("value"),l=e.$("video.vjs-tech"),d=function({adContainer:e,googleIMA$:t,videoElement:r}){return t.map((t=>new t.AdDisplayContainer(e,r))).publishReplay(1).refCount()}({adContainer:e.getChild("adContainer").adEl(),googleIMA$:o,videoElement:l}),h=function(e,t=Qd){return e.pluck("AdsRenderingSettings").map((e=>{var r=new e;return Object.assign(r,t)})).publishReplay(1).refCount()}(o),p=function(e){return Hn.of(e)}(l),f=function(e){return e.map((e=>oh(oh(oh({},e.AdEvent.Type),e.AdErrorEvent.Type),e.AdsManagerLoadedEvent.Type))).publishReplay().refCount()}(o),m=function({adsManager$:e,adsLoader$:t,dfpEventTypes$:r,events:n=nh,loaderEvents:i=["AD_ERROR","ADS_MANAGER_LOADED"],fromAdEvent:a=ah}){var s=ih({eventTarget$:e,dfpEventTypes$:r,events:n,fromAdEvent:a}),o=ih({eventTarget$:t,dfpEventTypes$:r,events:i,fromAdEvent:a});return Hn.merge(s,o).share()}({adsManager$:c,adsLoader$:u,dfpEventTypes$:f}),g=ts(e,["cne:load-video-id","cne:viewport","contentupdate","dfp-currentvideo","dfp-resize","ended","play","readyforpreroll","volumechange"]),y=Ph(t,g),v=g.withType("dfp-currentvideo","volumechange").map((()=>e.muted()?0:e.volume())).startWith(e.muted()?0:e.volume()),b=function(e,t){var r=t.take(1).withLatestFrom(e,((e,t)=>Xh(t))),n=e.skipUntil(t).map(Xh);return r.merge(n).startWith(!1)}(g.withType("cne:viewport").map((({data:e})=>e)),g.withType("play")),_=function({disableOutOfViewportAds:e,documentHidden$:t,skipAdRequestOutsideViewport$:r}){return r.combineLatest(t,((t,r)=>r||t&&e))}({disableOutOfViewportAds:a,documentHidden$:Za(),skipAdRequestOutsideViewport$:b}),T=function({adsLoader$:e,selectPlayerEvents$:t,googleIMA$:r,adRequestData$:n,skipAdRequest$:i,dfp:a,adTag:s=Rh,tryExtractVASTAdRequest:o=Wh}){var u=t.withType("dfp-resize").take(1),c=Hn.combineLatest(e,r,i,u);return n.zip(t.withType("contentupdate")).bufferedWith(c,(([e],[t,r,n])=>(({adsLoader:e,adTag:t,adRequestData:r,dfp:n,ima:i,skipAdRequest:a})=>{var{aoTest:s,companionSize:o,embedLocation:u,urlVars:c,isRightRail:l,isSticky:d,ampTargeting:h,cntPlatform:p,prebidData:f}=n.options(),m=n.width(),g=n.height(),y=n.infinityId(),v=n.mutedConfig(),b=n.playerSizeForAdRequest();return{adsLoader:e,AdsRequest:i.AdsRequest,adTagUrl:t({aoTest:s,companionSize:o,embedLocation:u,height:g,infinityId:y,muted:v,adRequestData:r,playerSizeForAdRequest:b,isRightRail:l,isSticky:d,urlVars:c,width:m,ampTargeting:h,cntPlatform:p,prebidData:f}),height:g,width:m,skipAdRequest:a}})({adsLoader:t,adTag:s,adRequestData:e,dfp:a,ima:r,skipAdRequest:n}))).switchMap((e=>e.skipAdRequest||a.video().disableAds?Hn.of(e):o(e))).publishReplay().refCount()}({adsLoader$:u,selectPlayerEvents$:g,adRequestData$:y,dfp:t,skipAdRequest$:_,googleIMA$:o}),w=function(e,t){return e.switchMap((e=>t.withType("ended","cne:load-video-id").mapTo(e)))}(u,g),S=function({dfpAdEvent$:e,dfpEventTypes$:t}){return t.pluck("LOADED").switchMap((t=>e.withType(t))).map((e=>e.getAd())).publishReplay(1).refCount()}({dfpAdEvent$:m,dfpEventTypes$:f}),C=e=>f.pluck(e).switchMap((e=>m.withType(e))),k=C("AD_ERROR"),E=C("STARTED"),O=C("LOADED").withLatestFrom(v,((e,t)=>t)),A=C("PAUSED"),x=C("RESUMED"),P=C("CONTENT_PAUSE_REQUESTED"),L=C("CONTENT_RESUME_REQUESTED"),M=rh(m,t.options()),I=M.map((({html:e})=>""!==e)).distinctUntilChanged(),D=function({autoplay:e,adDisplayContainer$:t,playIntent$:r}){return e?t.mapTo(!0).take(1):Hn.combineLatest(r,t).mapTo(!0).take(1)}({autoplay:i,adDisplayContainer$:d,playIntent$:g.withType("play")}),U=function({adStarted$:e,contentResumeRequested$:t,requestAds$:r,vjsPlayForTimeout$:n,timer$:i=Hn.timer(Jd)}){var a=e.merge(t);return r.switchMapTo(n.take(1)).switchMapTo(i.takeUntil(a)).share()}({adStarted$:E,contentResumeRequested$:L,requestAds$:T,vjsPlayForTimeout$:Zd(e)}),R=g.withType("readyforpreroll").withLatestFrom(v,((e,t)=>t)),j=L.merge(U),N=function({adComplete$:e,allAdsCompleted$:t,cachedVolume$:r,contentPauseRequested$:n,startPreroll$:i}){return i.switchMapTo(e).switchMapTo(n.withLatestFrom(r,((e,t)=>t)).takeUntil(t))}({adComplete$:j,allAdsCompleted$:C("ALL_ADS_COMPLETED"),cachedVolume$:v,contentPauseRequested$:P,startPreroll$:R}),B=function({adDisplayContainer$:e,googleIMA$:t}){return t.zip(e).publishReplay().refCount()}({adDisplayContainer$:d,googleIMA$:o}),$=function({adsLoader$:e,adsRenderingSettings$:t,contentPlayback$:r,dfpEventTypes$:n,adsManagerLoaded:i=Gh}){return e.withLatestFrom(n.pluck("ADS_MANAGER_LOADED")).switchMap((([e,t])=>i(e,t))).withLatestFrom(r,t)}({adsLoader$:u,adsRenderingSettings$:h,contentPlayback$:p,dfpEventTypes$:f}),F=B.switchMap((e=>U.withLatestFrom(u,v,((t,r,n)=>({timeout:t,adsLoader:r,initialData:e,cachedVolume:n}))))),V=$.switchMapTo(U.withLatestFrom(c,v,((e,t,r)=>({adsManager:t,cachedVolume:r}))));return{adDisplayContainer$:d,adError$:k,adsManager$:c,adsRenderingSettings$:h,adStarted$:E,adTimeUpdate$:th({startPreroll$:R,startMidroll$:N,adComplete$:j,adPaused$:A,adResumed$:x}),companionAd$:M,companionAdShowing$:I,contentComplete$:w,contentResumeRequested$:L,currentAd$:S,initDfpAdContainer$:D,initializeContribAds$:o.mapTo(!0),notifyPublica$:xh({dfpAdEvent$:m,dfpEventTypes$:f,publicaEnabled:s}),requestAds$:T,requestAdsLoader$:B,requestAdsManager$:$,retriggerOnPlayer$:ss({adsManager$:c,adRequestData$:y,dfpAdEvent$:m,dfpEventTypes$:f,requestAds$:T,timeoutAds$:F.merge(V)}),setAdVolume$:O,startMidroll$:N,startPreroll$:R,timeoutAdsLoader$:F,timeoutAdsManager$:V}}var Yh={liveCuePoints:!1};function Qh(e,t,r=Yh){e.ads(r)}var Jh="dfp",Zh={canHandleSource:({type:e})=>e===Jh,canPlayType:e=>e===Jh?"maybe":"",handleSource:({dfp:e},t)=>new ep(e,t)};class ep{constructor(e,t){this.tech_=t,t.setupAdMode(e)}dispose(){this.tech_.disposeAdMode()}}var{ads:{requestAdsMark:tp,requestAdsMeasure:rp,requestAdsLoaderMark:np,requestAdsLoaderMeasure:ip,requestAdsManagerMark:ap,requestAdsManagerMeasure:sp,adStartingMark:op,adStartingMeasure:up},js:{evaluatedJSMark:cp}}=$h;function lp(e,t,r,n,i=function(){try{return window.frameElement}catch(e){return null}}()){var{adDisplayContainer$:a,adError$:s,adsManager$:o,adsRenderingSettings$:u,adStarted$:c,adTimeUpdate$:l,companionAd$:d,companionAdShowing$:h,contentComplete$:p,currentAd$:f,contentResumeRequested$:m,initDfpAdContainer$:g,initializeContribAds$:y,notifyPublica$:v,requestAds$:b,requestAdsLoader$:_,requestAdsManager$:T,retriggerOnPlayer$:w,setAdVolume$:S,startMidroll$:C,startPreroll$:k,timeoutAdsLoader$:E,timeoutAdsManager$:O}=r,A=e.$("video.vjs-tech"),x=Qh.bind(null,e),P=([e,t])=>{Bh(ip,cp,np);var r=new e.AdsLoader(t,A);n.next({type:"adsLoader",value:r})},L=r=>{t.volume(r),Bh(up,void 0,op),t.startAds(),e.ads.startLinearAdMode(),e.pause(),e.src({src:"dfp-placeholder",dfp:t,type:Jh})};return Hn.merge(a.do((e=>{t.adDisplayContainer(e)})),s.do((()=>e.trigger("adserror"))),o.do((r=>{t.adsManager(r),e.trigger("adsready")})),u,c.do((()=>{t.startedAd(),e.trigger("ads-ad-started")})),l.do((()=>{e.trigger("timeupdate")})),d.do((({companionDivId:e,html:t,parentDivId:r,width:n,height:i})=>{var a=document.getElementById(e);if(!a){var s=document.getElementById(r);(a=document.createElement("div")).id=e,s.appendChild(a)}a.innerHTML="",function({bodyContent:e="",headContent:t="",target:r,options:n={}}){var i=document.createElement("iframe");Object.assign(i,{frameBorder:0,marginWidth:0,marginHeight:0},n);var a="<html><head>".concat(t,"</head><body>").concat(e,"</body></html>");r.appendChild(i),i.contentDocument.open(),i.contentDocument.write(a),i.contentDocument.close()}({bodyContent:t,headContent:"<style>body { overflow: hidden; }</style>",target:a,options:{width:n,height:i}})})),h.do((e=>{if(i){var t=i.parentElement,r=parseInt(t.style.height)||0;t.style.height="".concat(e?75+r:r,"px")}})),p.do((e=>e.contentComplete())),m.do((()=>e.ads.endLinearAdMode())),f.do((r=>{r.isLinear()?e.removeClass("cne-non-linear"):e.addClass("cne-non-linear"),t.currentAd(r)})),g.do((()=>t.initAdContainer())),y.do(x),v.do((e=>e())),k.do((e=>{t.initAds(),L(e)})),C.do(L),S.do((e=>{t.volume(e)})),b.do((({adsLoader:r,AdsRequest:n,adTagUrl:i,height:a,skipAdRequest:s,width:o})=>{if(s||t.video().disableAds)e.ads.skipLinearAdMode();else{var u=Object.assign(new n,{adTagUrl:i,linearAdSlotHeight:a,linearAdSlotWidth:o});Bh(rp,np,tp),r.requestAds(u)}})),_.do(P),T.do((([e,t,r])=>{Bh(sp,tp,ap);var i=e.getAdsManager(t,r);n.next({type:"adsManager",value:i})})),w.do((t=>e.trigger(t))),E.do((({adsLoader:t,initialData:r,cachedVolume:n})=>{t.destroy(),0==n&&e.muted(!0),e.ads.skipLinearAdMode(),zs("Ad Timeout (before adsManager was created)"),P(r)})),O.do((({adsManager:t,cachedVolume:r})=>{t.destroy(),0==r&&e.muted(!0),e.ads.endLinearAdMode(),zs("Ad Timeout (after adsManager was created)")})))}var dp=r(9122),hp=i().getTech("Html5"),pp=i().getTech("Tech");class fp extends hp{adMode(e){return"boolean"==typeof e&&(this.adMode_=e),this.adMode_||!1}setupAdMode(e){this.dfp=e,this.adMode(!0),this.trigger("durationchange"),this.dfp.on("dfp-currentad",(()=>this.trigger("durationchange")))}disposeAdMode(){this.adMode(!1),this.dfp.el()&&this.dfp.off("dfp-currentad"),delete this.dfp,delete this.adIsPaused_}pause(){if(this.adMode()){if(this.paused())return;this.adIsPaused_=!0,this.dfp.pause(),this.trigger({type:"pause",adMode:!0})}else super.pause()}play(){if(this.adMode()){if(!this.paused())return;this.adIsPaused_=!1,this.dfp.play(),this.trigger({type:"play",adMode:!0})}else super.play()}load(){this.adMode()||super.load()}paused(){return this.adMode()?void 0===this.adIsPaused_||!!this.adIsPaused_:super.paused()}volume(){return this.adMode()?this.dfp.volume():super.volume()}setVolume(e){this.adMode()&&(this.dfp.volume(e),this.trigger("volumechange")),super.setVolume(e)}muted(){return this.adMode()?0===this.volume():super.muted()}setMuted(e){this.adMode()?e?(this.preMutedVolume_=this.volume(),this.setVolume(0)):this.setVolume(this.preMutedVolume_||1):e||0!==super.volume()||this.setVolume(this.preMutedVolume_||1),super.setMuted(e),this.trigger("volumechange")}duration(){if(this.adMode()){var e=this.dfp.duration();return this._parseAdDuration(e)}return super.duration()}_parseAdDuration(e){var t=parseFloat(e);return t&&t>0?t:0}currentTime(){return this.adMode()?this._adCurrentTime():super.currentTime()}_adCurrentTime(){var e=this.dfp.remainingTime(),t=this.duration();return e<0?0:t?t-e:e}}pp.withSourceHandlers(fp),fp.registerSourceHandler(Zh),i().registerTech("Html5",fp);var mp=i().getComponent("Component");class gp extends mp{constructor(e,t){super(e,t),this.muted_=this.options_.muted,this.inViewportAutoplay_=!this.options_.isIframeEmbed&&this.options_.autoplay,this.autoplay_=this.options_.autoplay,this.startedAd_=!1}options(){return this.options_}dispose(e){if(e){var t=[e.adTimeoutTimeout,e.cancelPlayTimeout];for(var r of t)window.clearTimeout(r)}this.adDisplayContainerCall_("destroy"),this.adsManagerCall_("destroy"),super.dispose()}adsManager(e){if(!e)return this.adsManager_;this.adsManagerCall_("destroy"),this.adsManager_=e}adDisplayContainer(e){if(!e)return this.adDisplayContainer_;this.adDisplayContainerCall_("destroy"),this.adDisplayContainer_=e}currentAd(e){if(!e)return this.currentAd_;this.currentAd_=e,this.sendLineItemToGPT_(),this.trigger("dfp-currentad")}initAds(){this.adsManagerCall_("init",this.width(),this.height(),this.viewMode())}startAds(){this.startedAd_=!1,this.adsManagerCall_("start")}startedAd(){this.startedAd_=!0}initAdContainer(){this.adDisplayContainerCall_("initialize")}resize(e,t,r){this.width_=e,this.height_=t,this.viewMode_=r,this.adsManagerCall_("resize",e,t,r),this.player().trigger("dfp-resize")}viewMode(){return this.viewMode_||"normal"}height(){return this.height_}width(){return this.width_}playerSizeForAdRequest(){var{playerType:e}=this.options();return"interlude"===e?"640x360":"640x480"}play(){this.startedAd_&&this.adsManagerCall_("resume")}pause(){this.startedAd_&&this.adsManagerCall_("pause")}skip(){this.adsManagerCall_("skip")}volume(e){var t=this.adsManagerGet_("getVolume");if("number"!=typeof e||e===t)return t;this.adsManagerCall_("setVolume",e)}duration(){return this.currentAdGet_("getDuration")}remainingTime(){return this.adsManagerGet_("getRemainingTime")}video(e){if(!e)return this.video_||{};this.video_=e,this.player().trigger({type:"dfp-currentvideo",value:e})}infinityId(e){return e&&(this.infinityId_=e),this.infinityId_}mutedConfig(e){if(void 0===e)return this.muted_;this.muted_=e}sendLineItemToGPT_(){if($s()&&window.top.googletag)try{var e=wu(this.currentAdGet_("adId"),this.currentAdGet_("getWrapperAdSystems"),this.currentAdGet_("getWrapperAdIds")),t=[...window.top.googletag.pubads().getTargeting("ctx_line_items")||[],e],r=[...new Set(t)];window.top.googletag.pubads().setTargeting("ctx_line_items",r)}catch(e){qs("Error thrown setting GPT targeting",e)}}restartAd(){var e=this.player();e.ads.endLinearAdMode(),e.trigger("contentresumed"),this.adsManagerCall_("destroy")}adsManagerCall_(e,...t){var r=this.adsManager();r&&"function"==typeof r[e]&&r[e](...t)}adsManagerGet_(e,...t){var r=this.adsManager();if(r&&"function"==typeof r[e])return r[e](...t)}adDisplayContainerCall_(e,...t){var r=this.adDisplayContainer();r&&"function"==typeof r[e]&&r[e](...t)}currentAdGet_(e){var t=this.currentAd();if(t&&"function"==typeof t[e])return t[e]()}}function yp(e){var[t,r]=e?e.split(/x/i):[];return{width:t||"300",height:r||"60"}}i().registerPlugin("dfp",(function(e,t=Kh,r=lp){var n=this,i=new gp(n,e),a=new dp.BehaviorSubject({});r(n,i,t(n,i,a),a).subscribe(),this.dfp=i}));var vp=r(7317).default;function bp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bp(Object(r),!0).forEach((function(t){Tp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Tp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var{misc:{loadEmbedPiecesMark:wp,createPlayerStartedMark:Sp,createPlayerStartedMeasure:Cp}}=$h,kp=(e,t,r)=>{var{autoplayEnabled:n,urlVars:a,playerConfig:s,publicaEnabled:o,video:u,videoEl:c}=e;r.addLanguage(t.language,t.videos_js_language_data);var l=r(c,t);return l.addClass("video-js"),l.dfp(_p(_p({},s),{},{autoplay:n,adsDisabled:s.adsDisabled,adUnitPath:s.iu,brand:u.brand,companionSize:yp(s.companionSize),disableOutOfViewportAds:s.doova,urlVars:a,publicaEnabled:o,prebidData:u.prebidData})),s.has_playlist&&0!=s.showPlaylistBar&&function(e,{playerConfig:t,playerContainer:r}){if(0!=t.hasRail){var n=i().getComponent("PlaylistContainer");e.cnePlaylistContainer=new n(e,{children:{playlistHeader:!0,playlistBody:{children:[{name:"playlistArrow",direction:"left"},{name:"playlistItemsContainer",children:{playlistItems:!0}},{name:"playlistArrow",direction:"right"}]}}});var a=e.cnePlaylistContainer.el();"light"===t.theme?a.className+=" playlist-light":"vogueworld"===t.theme&&(a.className+=" playlist-vw"),r.appendChild(a)}}(l,e),l};const Ep=(e,t,r={})=>{(function({environment:e}){Ws.init(e)})(t),zs("Player Requested");var n=Bu(t),i=n.playerContainer;i.classList.add("player-container");var a=t.playerConfig.play_btn_styles;a&&function(e,t){var r=document.createElement("style");r.innerHTML=e,r.setAttribute("type","text/css"),t.appendChild(r)}(a,i);var{playerConfig:{aspectRatio:s}}=t;"16x9"!==s&&function(e,t){var r=document.createElement("style"),n=":root { --aspect-ratio: ".concat(Os(e),"; }");r.innerHTML=n,r.setAttribute("type","text/css"),t.appendChild(r)}(s,i);var o=kp(n,r,e),u=gs(o),c=Hn.of(_p(_p({},n),{},{videoEl:o.$("video.vjs-tech")})),l=function(e){var t;return{documentHidden$:Za(),windowEvent$:Hn.merge((t=es(window.top,["scroll","resize"]),e.switchMap((({canAccessParent:e})=>e?t:Hn.never()))),es(window,["error","mousemove","mouseup"])).share()}}(c),d=new Rn.Subject,h=function(e,t){var r=e.withType("dispose"),n=e.withType("ready").pluck("facade"),i=Hn.fromEvent(t,"intent:enter-fullscreen"),a=Hn.fromEvent(t,"intent:exit-fullscreen"),s=Hn.fromEvent(t,"intent:progress-mouse",((e,t)=>t)),o=Hn.fromEvent(t,"intent:seek-latest"),u=Hn.fromEvent(t,"intent:seek-start"),c=Hn.fromEvent(t,"intent:seek-end"),l=e.withType("nextVideo").pluck("video").startWith(!1),d=Hn.fromEvent(t,"intent:load-video",((e,t)=>t)).map((e=>e.video.id)),h=e.withType("load").pluck("videoId").merge(d),p=e=>{var t=e.target&&e.target.classList;return t&&(t.contains("vjs-tech")||t.contains("click-mask"))},f=Hn.fromEvent(t.el_,"touchend").filter((e=>p(e)&&"touchend"===e.type)).share(),m=Hn.fromEvent(t.el_,"mousedown").filter((e=>{var t=1===e.which||e.buttons&&e.buttons<2;return p(e)&&t})).share(),g=m.filter((e=>e.currentTarget.classList.contains("cne-playing"))),y=m.filter((e=>e.currentTarget.classList.contains("cne-paused"))),v=Hn.fromEvent(t.el_,"mouseleave"),b=t.$(".persistent-share"),_=Hn.fromEvent(b,"mouseenter"),T=Hn.fromEvent(b,"mouseleave"),w=e.withType("volume"),S=Hn.fromEvent(t,"intent:volume-change",((e,t)=>t)),C=w.merge(S).map((({level:e=null})=>({type:"intent",level:e}))).filter((e=>null!==e)),k=Hn.fromEvent(t,"intent:mute-toggle",((e,t)=>t)),E=e.withType("setTime").pluck("time"),O=Hn.fromEvent(t,"keydown").filter((e=>32===e.keyCode&&e.preventDefault())),A=Hn.fromEvent(t,"keyup").filter((e=>32===e.keyCode)).map((()=>t.paused()?"play":"pause")).merge(O).share(),x=Hn.fromEvent(t,"keyup").filter((e=>27===e.keyCode)).share(),P=e.withType("play").merge(ts(t,"intent:play")).merge(y).merge(A.filter((e=>"play"===e))),L=e.withType("pause").merge(ts(t,["dfp-ad-click","dfp-ad-paused","intent:pause","intent:show-message-overlay"])).merge(g).merge(A.filter((e=>"pause"===e))),M=Hn.fromEvent(t,"intent:close-message"),I=Hn.fromEvent(t,"intent:show-360-message-overlay"),D=Hn.fromEvent(t,"intent:show-live-waiting-message-overlay",((e,t)=>t)).publishReplay(1).refCount(),U=Hn.fromEvent(t,"intent:toggle-captions"),R=e.withType("autoplayOverride").pluck("data").startWith({override:!1}),j=e.withType("persistent").pluck("persistent").startWith(!1),N=Hn.fromEvent(t,"intent:save-settings",((e,t)=>t)),B=Hn.fromEvent(t,"intent:close-settings").mapTo(!1).merge(Hn.fromEvent(t,"intent:show-settings").mapTo(!0)).merge(x.mapTo(!1)),$=Hn.fromEvent(t,"intent:hide-settings-submenu",((e,t)=>({menu:t,display:"hide"}))).merge(Hn.fromEvent(t,"intent:show-settings-submenu",((e,t)=>({menu:t,display:"show"})))),F=Hn.fromEvent(t,"click").merge(Hn.fromEvent(t,"keyup").filter((e=>"Tab"===e.key)),Hn.fromEvent(t,"intent:mute-toggle"),u),V=e.withType("track").map((({data:e})=>e)),H=e.withType("play-on-page");return{autoplayOverride$:R,closeMessage$:M,cneOverlayIntent$:bs(t,I,D),dispose$:r,enterFullScreen$:i,exitFullScreen$:a,facadeReady$:n,focusChanged$:F,focusedComponent$:Hn.fromEvent(t,"focusedComponent",((e,t)=>t)),intentSubject:e,isPersistent$:j,keepPlaying$:Hn.fromEvent(t,"intent:keep-playing"),loadVideoId$:h,mouseLeavePlayer$:v,muteToggle$:k,nextVideo$:l,persistentShareEnter$:_,persistentShareLeave$:T,playOnPage$:H,progressMouse$:s,saveSettings$:N,seekStart$:u,seekEnd$:c,seekLatestIntent$:o,setTimeIntent$:E,settingsSubMenuIntent$:$,shareIntent$:_s(t),shouldPause$:L,shouldPlay$:P,show360MessageOverlayIntent$:I,showLiveWaitingOverlayIntent$:D,toggleCaptionsIntent$:U,touchVideo$:f,toggleSettings$:B,trackSparrowIntent$:V,volumeIntent$:C}}(d,o),p=function(e,t){return{cneBeacon:qn(e),cneEvents:Yn(e),cookies:e,comscore:ri(e),facebook:ni(e),googleAnalytics:ui(e),moat:ci(e),moatContent:di(e),nielsen:fi(e),sparrow:Ci(e),view:$i(e,t),vjs:qi(e)}}(function(e){return function(t){var{config$:r,currentVideo$:n}=t;return Lu(Lu({},t),{},{cneBeaconLibrary$:xu(),cneEventLibrary$:au(e),comscoreLibrary$:ou(r,n),facebookLibrary$:cu(n),googleAnalyticsLibrary$:pu(r),moatContentLibrary$:vu(t),moatLibrary$:bu(t),nielsenLibrary$:Tu(n),sparrowLibrary$:ku(r)})}}(o)(iu(u,l,c,h)),o),f=Mi(function(e,t){var{cneBeacon:r,cneEvents:n,cookies:i,comscore:a,facebook:s,googleAnalytics:o,moat:u,moatContent:c,sparrow:l,view:d,vjs:h}=e;return{cneBeacon$:zi(r),cneEventDriver$:zi(n),comscore$:zi(a),cookies$:Ja(i),facebookPixel$:zi(s),gooleAnalytics$:zi(o),moat$:zi(u),moatContent$:zi(c),sparrow$:zi(l),videojs$:Wa(h,t),view$:fa(d,t)}}(p,o)),m=new Bn(d,f,{}),g=d.withType("dispose");return Bh(Cp,wp,Sp),m.takeUntil(g).subscribe((()=>{}),(e=>vp(e)),(()=>function(e,t){var r=e.el().parentNode;r&&r.classList.remove("player-container");var{cnePlaylistContainer:n}=e;n&&n.dispose();t.complete(),e.dfp.dispose(e.ads),setTimeout((()=>{e.dispose()}))}(o,d))),{facade:vs(m,t.environment.secret),player:o}};var{js:{evaluatedJSMark:Op,startedJSExecutionMark:Ap,evaluateMainJSMeasure:xp}}=$h;Bh(xp,Ap,Op),(window._cne=window._cne||{},window._cne).createPlayer=function(e){var t;t=e.video.localized_messages,Yi=t||{};var r=!!e.video.live_metadata,n={fluid:!0,autoplay:!1,preload:"metadata",children:{cneSvgDefs:!0,mediaLoader:!0,cne360Container:!0,adClickMask:!0,adContainer:!0,posterImage:!0,cneAnimatedClip:!0,cneScrubPoster:!0,cneBigPlayTitle:!0,loadingSpinner:!0,cneTextTrackDisplay:!0,persistentShare:{children:{shareWidget:!0,shareDropdown:{children:[{name:"ShareDropdownItem",action:"facebook"},{name:"ShareDropdownItem",action:"twitter"},{name:"ShareDropdownItem",action:"email"},{name:"ShareDropdownItem",action:"more"}]}}},cneOverlay:{children:{shareOverlay:{children:{shareActions:{children:[{name:"ShareActionButton",action:"facebook",ariaLabel:Qi("cne-aria-share-facebook")},{name:"ShareActionButton",action:"twitter",ariaLabel:Qi("cne-aria-share-twitter")},{name:"ShareActionButton",action:"tumblr",ariaLabel:Qi("cne-aria-share-tumblr")},{name:"ShareActionButton",action:"googleplus",ariaLabel:Qi("cne-aria-share-googleplus")},{name:"ShareActionButton",action:"pinterest",ariaLabel:Qi("cne-aria-share-pinterest")},{name:"ShareActionButton",action:"embed",ariaLabel:Qi("cne-aria-share-embed")},{name:"ShareActionButton",action:"url",ariaLabel:Qi("cne-aria-share-url")},{name:"ShareActionButton",action:"email",ariaLabel:Qi("cne-aria-share-email")}]},shareEmbed:!0,shareUrl:!0}},cneMessageOverlay:!0,cneLiveOverlay:!0,cneClose:!0}},cneLiveIndicatorActive:!0,cneLiveIndicatorAd:!0,controlBar:{children:Wu()},cneMessage:!0,cne360Compass:!0,cneVideoTitle:!0,persistentMute:!0},html5:{nativeTextTracks:r&&Ea()||Ta,hls:{bandwidth:2097152,overrideNative:!i().browser.IS_SAFARI},nativeAudioTracks:i().browser.IS_SAFARI,nativeVideoTracks:i().browser.IS_SAFARI},persistTextTrackSettings:!0,language:e.video.locale,videos_js_language_data:e.video.videos_js_language_data},{facade:a,player:s}=Ep(i(),e,n);return Un(i(),s,e.video),a}},7317:(e,t,r)=>{"use strict";r.r(t),r.d(t,{enableDebugMode:()=>a,default:()=>s});var n=r(90),i=null;function a(e=window){var t=(0,n.Z)(e.location.href).searchParams.get("cneDebug");return i="true"===t||e._CNE_DEV_MODE_}function s(...e){null===i&&a(),i&&console.warn("cneLog: ",...e)}},90:(e,t,r)=>{"use strict";function n(e){try{return new URL(e)}catch(c){var t=document.createElement("a");t.href=e;var{host:r="",hostname:n="",pathname:i="",port:a="",protocol:s="",search:o=""}=t,u={};return(0===t.search.indexOf("?")?t.search.substring(1):t.search).split("&").forEach((e=>{var t=e.split("=");2===t.length&&(u[t[0]]=t[1])})),{host:r,hostname:n,pathname:i,port:a,protocol:s,search:o,searchParams:{get:e=>u[e]}}}}r.d(t,{Z:()=>n})},7878:(e,t,r)=>{r(6253),r(9115),r(1181),r(8416),r(5645).Map},7657:(e,t,r)=>{r(5767),r(8132),r(8388),r(7470),r(4882),r(1520),r(7476),r(9622),r(9375),r(3533),r(4672),r(4157),r(5095),r(9892),r(5115),r(9176),r(8838),r(6253),r(5645).Object},9074:(e,t,r)=>{r(6253),r(9115),r(1181),r(851),r(5645).Promise},2298:(e,t,r)=>{r(6253),r(9115),r(1181),r(8184),r(5645).Set},4244:(e,t,r)=>{r(5767),r(6253),r(5645).Symbol},8938:(e,t,r)=>{r(2310),r(5645).Array.find},4963:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},7722:(e,t,r)=>{var n=r(6314)("unscopables"),i=Array.prototype;null==i[n]&&r(7728)(i,n,{}),e.exports=function(e){i[n][e]=!0}},3328:e=>{e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},7007:(e,t,r)=>{var n=r(5286);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},9315:(e,t,r)=>{var n=r(2110),i=r(875),a=r(2337);e.exports=function(e){return function(t,r,s){var o,u=n(t),c=i(u.length),l=a(s,c);if(e&&r!=r){for(;c>l;)if((o=u[l++])!=o)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}}},50:(e,t,r)=>{var n=r(741),i=r(9797),a=r(508),s=r(875),o=r(6886);e.exports=function(e,t){var r=1==e,u=2==e,c=3==e,l=4==e,d=6==e,h=5==e||d,p=t||o;return function(t,o,f){for(var m,g,y=a(t),v=i(y),b=n(o,f,3),_=s(v.length),T=0,w=r?p(t,_):u?p(t,0):void 0;_>T;T++)if((h||T in v)&&(g=b(m=v[T],T,y),e))if(r)w[T]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return T;case 2:w.push(m)}else if(l)return!1;return d?-1:c||l?l:w}}},2736:(e,t,r)=>{var n=r(5286),i=r(4302),a=r(6314)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},6886:(e,t,r)=>{var n=r(2736);e.exports=function(e,t){return new(n(e))(t)}},1488:(e,t,r)=>{var n=r(2032),i=r(6314)("toStringTag"),a="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:a?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},2032:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},9824:(e,t,r)=>{"use strict";var n=r(9275).f,i=r(2503),a=r(4408),s=r(741),o=r(3328),u=r(3531),c=r(2923),l=r(5436),d=r(2974),h=r(7057),p=r(4728).fastKey,f=r(1616),m=h?"_s":"size",g=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,c){var l=e((function(e,n){o(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,null!=n&&u(n,r,e[c],e)}));return a(l.prototype,{clear:function(){for(var e=f(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var r=f(this,t),n=g(r,e);if(n){var i=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=i),i&&(i.p=a),r._f==n&&(r._f=i),r._l==n&&(r._l=a),r[m]--}return!!n},forEach:function(e){f(this,t);for(var r,n=s(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!g(f(this,t),e)}}),h&&n(l.prototype,"size",{get:function(){return f(this,t)[m]}}),l},def:function(e,t,r){var n,i,a=g(e,t);return a?a.v=r:(e._l=a={i:i=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[m]++,"F"!==i&&(e._i[i]=a)),e},getEntry:g,setStrong:function(e,t,r){c(e,t,(function(e,r){this._t=f(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?l(0,"keys"==t?r.k:"values"==t?r.v:[r.k,r.v]):(e._t=void 0,l(1))}),r?"entries":"values",!r,!0),d(t)}}},5795:(e,t,r)=>{"use strict";var n=r(3816),i=r(2985),a=r(7234),s=r(4408),o=r(4728),u=r(3531),c=r(3328),l=r(5286),d=r(4253),h=r(7462),p=r(2943),f=r(266);e.exports=function(e,t,r,m,g,y){var v=n[e],b=v,_=g?"set":"add",T=b&&b.prototype,w={},S=function(e){var t=T[e];a(T,e,"delete"==e||"has"==e?function(e){return!(y&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof b&&(y||T.forEach&&!d((function(){(new b).entries().next()})))){var C=new b,k=C[_](y?{}:-0,1)!=C,E=d((function(){C.has(1)})),O=h((function(e){new b(e)})),A=!y&&d((function(){for(var e=new b,t=5;t--;)e[_](t,t);return!e.has(-0)}));O||((b=t((function(t,r){c(t,b,e);var n=f(new v,t,b);return null!=r&&u(r,g,n[_],n),n}))).prototype=T,T.constructor=b),(E||A)&&(S("delete"),S("has"),g&&S("get")),(A||k)&&S(_),y&&T.clear&&delete T.clear}else b=m.getConstructor(t,e,g,_),s(b.prototype,r),o.NEED=!0;return p(b,e),w[e]=b,i(i.G+i.W+i.F*(b!=v),w),y||m.setStrong(b,e,g),b}},5645:e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},741:(e,t,r)=>{var n=r(4963);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},1355:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},7057:(e,t,r)=>{e.exports=!r(4253)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},2457:(e,t,r)=>{var n=r(5286),i=r(3816).document,a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},4430:e=>{e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},5541:(e,t,r)=>{var n=r(7184),i=r(4548),a=r(4682);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var s,o=r(e),u=a.f,c=0;o.length>c;)u.call(e,s=o[c++])&&t.push(s);return t}},2985:(e,t,r)=>{var n=r(3816),i=r(5645),a=r(7728),s=r(7234),o=r(741),u=function(e,t,r){var c,l,d,h,p=e&u.F,f=e&u.G,m=e&u.S,g=e&u.P,y=e&u.B,v=f?n:m?n[t]||(n[t]={}):(n[t]||{}).prototype,b=f?i:i[t]||(i[t]={}),_=b.prototype||(b.prototype={});for(c in f&&(r=t),r)d=((l=!p&&v&&void 0!==v[c])?v:r)[c],h=y&&l?o(d,n):g&&"function"==typeof d?o(Function.call,d):d,v&&s(v,c,d,e&u.U),b[c]!=d&&a(b,c,h),g&&_[c]!=d&&(_[c]=d)};n.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},4253:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},3531:(e,t,r)=>{var n=r(741),i=r(8851),a=r(6555),s=r(7007),o=r(875),u=r(9002),c={},l={},d=e.exports=function(e,t,r,d,h){var p,f,m,g,y=h?function(){return e}:u(e),v=n(r,d,t?2:1),b=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(a(y)){for(p=o(e.length);p>b;b++)if((g=t?v(s(f=e[b])[0],f[1]):v(e[b]))===c||g===l)return g}else for(m=y.call(e);!(f=m.next()).done;)if((g=i(m,v,f.value,t))===c||g===l)return g};d.BREAK=c,d.RETURN=l},18:(e,t,r)=>{e.exports=r(3825)("native-function-to-string",Function.toString)},3816:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},9181:e=>{var t={}.hasOwnProperty;e.exports=function(e,r){return t.call(e,r)}},7728:(e,t,r)=>{var n=r(9275),i=r(681);e.exports=r(7057)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},639:(e,t,r)=>{var n=r(3816).document;e.exports=n&&n.documentElement},1734:(e,t,r)=>{e.exports=!r(7057)&&!r(4253)((function(){return 7!=Object.defineProperty(r(2457)("div"),"a",{get:function(){return 7}}).a}))},266:(e,t,r)=>{var n=r(5286),i=r(7375).set;e.exports=function(e,t,r){var a,s=t.constructor;return s!==r&&"function"==typeof s&&(a=s.prototype)!==r.prototype&&n(a)&&i&&i(e,a),e}},7242:e=>{e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},9797:(e,t,r)=>{var n=r(2032);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},6555:(e,t,r)=>{var n=r(2803),i=r(6314)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},4302:(e,t,r)=>{var n=r(2032);e.exports=Array.isArray||function(e){return"Array"==n(e)}},5286:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},8851:(e,t,r)=>{var n=r(7007);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw void 0!==a&&n(a.call(e)),t}}},9988:(e,t,r)=>{"use strict";var n=r(2503),i=r(681),a=r(2943),s={};r(7728)(s,r(6314)("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=n(s,{next:i(1,r)}),a(e,t+" Iterator")}},2923:(e,t,r)=>{"use strict";var n=r(4461),i=r(2985),a=r(7234),s=r(7728),o=r(2803),u=r(9988),c=r(2943),l=r(468),d=r(6314)("iterator"),h=!([].keys&&"next"in[].keys()),p="keys",f="values",m=function(){return this};e.exports=function(e,t,r,g,y,v,b){u(r,t,g);var _,T,w,S=function(e){if(!h&&e in O)return O[e];switch(e){case p:case f:return function(){return new r(this,e)}}return function(){return new r(this,e)}},C=t+" Iterator",k=y==f,E=!1,O=e.prototype,A=O[d]||O["@@iterator"]||y&&O[y],x=A||S(y),P=y?k?S("entries"):x:void 0,L="Array"==t&&O.entries||A;if(L&&(w=l(L.call(new e)))!==Object.prototype&&w.next&&(c(w,C,!0),n||"function"==typeof w[d]||s(w,d,m)),k&&A&&A.name!==f&&(E=!0,x=function(){return A.call(this)}),n&&!b||!h&&!E&&O[d]||s(O,d,x),o[t]=x,o[C]=m,y)if(_={values:k?x:S(f),keys:v?x:S(p),entries:P},b)for(T in _)T in O||a(O,T,_[T]);else i(i.P+i.F*(h||E),t,_);return _}},7462:(e,t,r)=>{var n=r(6314)("iterator"),i=!1;try{var a=[7][n]();a.return=function(){i=!0},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var a=[7],s=a[n]();s.next=function(){return{done:r=!0}},a[n]=function(){return s},e(a)}catch(e){}return r}},5436:e=>{e.exports=function(e,t){return{value:t,done:!!e}}},2803:e=>{e.exports={}},4461:e=>{e.exports=!1},4728:(e,t,r)=>{var n=r(3953)("meta"),i=r(5286),a=r(9181),s=r(9275).f,o=0,u=Object.isExtensible||function(){return!0},c=!r(4253)((function(){return u(Object.preventExtensions({}))})),l=function(e){s(e,n,{value:{i:"O"+ ++o,w:{}}})},d=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[n].i},getWeak:function(e,t){if(!a(e,n)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[n].w},onFreeze:function(e){return c&&d.NEED&&u(e)&&!a(e,n)&&l(e),e}}},4351:(e,t,r)=>{var n=r(3816),i=r(4193).set,a=n.MutationObserver||n.WebKitMutationObserver,s=n.process,o=n.Promise,u="process"==r(2032)(s);e.exports=function(){var e,t,r,c=function(){var n,i;for(u&&(n=s.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){s.nextTick(c)};else if(!a||n.navigator&&n.navigator.standalone)if(o&&o.resolve){var l=o.resolve(void 0);r=function(){l.then(c)}}else r=function(){i.call(n,c)};else{var d=!0,h=document.createTextNode("");new a(c).observe(h,{characterData:!0}),r=function(){h.data=d=!d}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},3499:(e,t,r)=>{"use strict";var n=r(4963);function i(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)}e.exports.f=function(e){return new i(e)}},5345:(e,t,r)=>{"use strict";var n=r(7057),i=r(7184),a=r(4548),s=r(4682),o=r(508),u=r(9797),c=Object.assign;e.exports=!c||r(4253)((function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=c({},e)[r]||Object.keys(c({},t)).join("")!=n}))?function(e,t){for(var r=o(e),c=arguments.length,l=1,d=a.f,h=s.f;c>l;)for(var p,f=u(arguments[l++]),m=d?i(f).concat(d(f)):i(f),g=m.length,y=0;g>y;)p=m[y++],n&&!h.call(f,p)||(r[p]=f[p]);return r}:c},2503:(e,t,r)=>{var n=r(7007),i=r(5588),a=r(4430),s=r(9335)("IE_PROTO"),o=function(){},u=function(){var e,t=r(2457)("iframe"),n=a.length;for(t.style.display="none",r(639).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[a[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(o.prototype=n(e),r=new o,o.prototype=null,r[s]=e):r=u(),void 0===t?r:i(r,t)}},9275:(e,t,r)=>{var n=r(7007),i=r(1734),a=r(1689),s=Object.defineProperty;t.f=r(7057)?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),i)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},5588:(e,t,r)=>{var n=r(9275),i=r(7007),a=r(7184);e.exports=r(7057)?Object.defineProperties:function(e,t){i(e);for(var r,s=a(t),o=s.length,u=0;o>u;)n.f(e,r=s[u++],t[r]);return e}},8693:(e,t,r)=>{var n=r(4682),i=r(681),a=r(2110),s=r(1689),o=r(9181),u=r(1734),c=Object.getOwnPropertyDescriptor;t.f=r(7057)?c:function(e,t){if(e=a(e),t=s(t,!0),u)try{return c(e,t)}catch(e){}if(o(e,t))return i(!n.f.call(e,t),e[t])}},9327:(e,t,r)=>{var n=r(2110),i=r(616).f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(e){return s.slice()}}(e):i(n(e))}},616:(e,t,r)=>{var n=r(189),i=r(4430).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},4548:(e,t)=>{t.f=Object.getOwnPropertySymbols},468:(e,t,r)=>{var n=r(9181),i=r(508),a=r(9335)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},189:(e,t,r)=>{var n=r(9181),i=r(2110),a=r(9315)(!1),s=r(9335)("IE_PROTO");e.exports=function(e,t){var r,o=i(e),u=0,c=[];for(r in o)r!=s&&n(o,r)&&c.push(r);for(;t.length>u;)n(o,r=t[u++])&&(~a(c,r)||c.push(r));return c}},7184:(e,t,r)=>{var n=r(189),i=r(4430);e.exports=Object.keys||function(e){return n(e,i)}},4682:(e,t)=>{t.f={}.propertyIsEnumerable},3160:(e,t,r)=>{var n=r(2985),i=r(5645),a=r(4253);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],s={};s[e]=t(r),n(n.S+n.F*a((function(){r(1)})),"Object",s)}},188:e=>{e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},94:(e,t,r)=>{var n=r(7007),i=r(5286),a=r(3499);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=a.f(e);return(0,r.resolve)(t),r.promise}},681:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},4408:(e,t,r)=>{var n=r(7234);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},7234:(e,t,r)=>{var n=r(3816),i=r(7728),a=r(9181),s=r(3953)("src"),o=r(18),u="toString",c=(""+o).split(u);r(5645).inspectSource=function(e){return o.call(e)},(e.exports=function(e,t,r,o){var u="function"==typeof r;u&&(a(r,"name")||i(r,"name",t)),e[t]!==r&&(u&&(a(r,s)||i(r,s,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=r:o?e[t]?e[t]=r:i(e,t,r):(delete e[t],i(e,t,r)))})(Function.prototype,u,(function(){return"function"==typeof this&&this[s]||o.call(this)}))},7195:e=>{e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},7375:(e,t,r)=>{var n=r(5286),i=r(7007),a=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=r(741)(Function.call,r(8693).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return a(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:a}},2974:(e,t,r)=>{"use strict";var n=r(3816),i=r(9275),a=r(7057),s=r(6314)("species");e.exports=function(e){var t=n[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},2943:(e,t,r)=>{var n=r(9275).f,i=r(9181),a=r(6314)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},9335:(e,t,r)=>{var n=r(3825)("keys"),i=r(3953);e.exports=function(e){return n[e]||(n[e]=i(e))}},3825:(e,t,r)=>{var n=r(5645),i=r(3816),a="__core-js_shared__",s=i[a]||(i[a]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(4461)?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},8364:(e,t,r)=>{var n=r(7007),i=r(4963),a=r(6314)("species");e.exports=function(e,t){var r,s=n(e).constructor;return void 0===s||null==(r=n(s)[a])?t:i(r)}},4496:(e,t,r)=>{var n=r(1467),i=r(1355);e.exports=function(e){return function(t,r){var a,s,o=String(i(t)),u=n(r),c=o.length;return u<0||u>=c?e?"":void 0:(a=o.charCodeAt(u))<55296||a>56319||u+1===c||(s=o.charCodeAt(u+1))<56320||s>57343?e?o.charAt(u):a:e?o.slice(u,u+2):s-56320+(a-55296<<10)+65536}}},4193:(e,t,r)=>{var n,i,a,s=r(741),o=r(7242),u=r(639),c=r(2457),l=r(3816),d=l.process,h=l.setImmediate,p=l.clearImmediate,f=l.MessageChannel,m=l.Dispatch,g=0,y={},v="onreadystatechange",b=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},_=function(e){b.call(e.data)};h&&p||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++g]=function(){o("function"==typeof e?e:Function(e),t)},n(g),g},p=function(e){delete y[e]},"process"==r(2032)(d)?n=function(e){d.nextTick(s(b,e,1))}:m&&m.now?n=function(e){m.now(s(b,e,1))}:f?(a=(i=new f).port2,i.port1.onmessage=_,n=s(a.postMessage,a,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",_,!1)):n=v in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(s(b,e,1),0)}),e.exports={set:h,clear:p}},2337:(e,t,r)=>{var n=r(1467),i=Math.max,a=Math.min;e.exports=function(e,t){return(e=n(e))<0?i(e+t,0):a(e,t)}},1467:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},2110:(e,t,r)=>{var n=r(9797),i=r(1355);e.exports=function(e){return n(i(e))}},875:(e,t,r)=>{var n=r(1467),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},508:(e,t,r)=>{var n=r(1355);e.exports=function(e){return Object(n(e))}},1689:(e,t,r)=>{var n=r(5286);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},3953:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+r).toString(36))}},575:(e,t,r)=>{var n=r(3816).navigator;e.exports=n&&n.userAgent||""},1616:(e,t,r)=>{var n=r(5286);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},6074:(e,t,r)=>{var n=r(3816),i=r(5645),a=r(4461),s=r(8787),o=r(9275).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:s.f(e)})}},8787:(e,t,r)=>{t.f=r(6314)},6314:(e,t,r)=>{var n=r(3825)("wks"),i=r(3953),a=r(3816).Symbol,s="function"==typeof a;(e.exports=function(e){return n[e]||(n[e]=s&&a[e]||(s?a:i)("Symbol."+e))}).store=n},9002:(e,t,r)=>{var n=r(1488),i=r(6314)("iterator"),a=r(2803);e.exports=r(5645).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||a[n(e)]}},2310:(e,t,r)=>{"use strict";var n=r(2985),i=r(50)(5),a="find",s=!0;a in[]&&Array(1).find((function(){s=!1})),n(n.P+n.F*s,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(7722)(a)},6997:(e,t,r)=>{"use strict";var n=r(7722),i=r(5436),a=r(2803),s=r(2110);e.exports=r(2923)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},8416:(e,t,r)=>{"use strict";var n=r(9824),i=r(1616),a="Map";e.exports=r(5795)(a,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=n.getEntry(i(this,a),e);return t&&t.v},set:function(e,t){return n.def(i(this,a),0===e?0:e,t)}},n,!0)},5115:(e,t,r)=>{var n=r(2985);n(n.S+n.F,"Object",{assign:r(5345)})},8132:(e,t,r)=>{var n=r(2985);n(n.S,"Object",{create:r(2503)})},7470:(e,t,r)=>{var n=r(2985);n(n.S+n.F*!r(7057),"Object",{defineProperties:r(5588)})},8388:(e,t,r)=>{var n=r(2985);n(n.S+n.F*!r(7057),"Object",{defineProperty:r(9275).f})},9375:(e,t,r)=>{var n=r(5286),i=r(4728).onFreeze;r(3160)("freeze",(function(e){return function(t){return e&&n(t)?e(i(t)):t}}))},4882:(e,t,r)=>{var n=r(2110),i=r(8693).f;r(3160)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(n(e),t)}}))},9622:(e,t,r)=>{r(3160)("getOwnPropertyNames",(function(){return r(9327).f}))},1520:(e,t,r)=>{var n=r(508),i=r(468);r(3160)("getPrototypeOf",(function(){return function(e){return i(n(e))}}))},9892:(e,t,r)=>{var n=r(5286);r(3160)("isExtensible",(function(e){return function(t){return!!n(t)&&(!e||e(t))}}))},4157:(e,t,r)=>{var n=r(5286);r(3160)("isFrozen",(function(e){return function(t){return!n(t)||!!e&&e(t)}}))},5095:(e,t,r)=>{var n=r(5286);r(3160)("isSealed",(function(e){return function(t){return!n(t)||!!e&&e(t)}}))},9176:(e,t,r)=>{var n=r(2985);n(n.S,"Object",{is:r(7195)})},7476:(e,t,r)=>{var n=r(508),i=r(7184);r(3160)("keys",(function(){return function(e){return i(n(e))}}))},4672:(e,t,r)=>{var n=r(5286),i=r(4728).onFreeze;r(3160)("preventExtensions",(function(e){return function(t){return e&&n(t)?e(i(t)):t}}))},3533:(e,t,r)=>{var n=r(5286),i=r(4728).onFreeze;r(3160)("seal",(function(e){return function(t){return e&&n(t)?e(i(t)):t}}))},8838:(e,t,r)=>{var n=r(2985);n(n.S,"Object",{setPrototypeOf:r(7375).set})},6253:(e,t,r)=>{"use strict";var n=r(1488),i={};i[r(6314)("toStringTag")]="z",i+""!="[object z]"&&r(7234)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},851:(e,t,r)=>{"use strict";var n,i,a,s,o=r(4461),u=r(3816),c=r(741),l=r(1488),d=r(2985),h=r(5286),p=r(4963),f=r(3328),m=r(3531),g=r(8364),y=r(4193).set,v=r(4351)(),b=r(3499),_=r(188),T=r(575),w=r(94),S="Promise",C=u.TypeError,k=u.process,E=k&&k.versions,O=E&&E.v8||"",A=u.Promise,x="process"==l(k),P=function(){},L=i=b.f,M=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[r(6314)("species")]=function(e){e(P,P)};return(x||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t&&0!==O.indexOf("6.6")&&-1===T.indexOf("Chrome/66")}catch(e){}}(),I=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var r=e._c;v((function(){for(var n=e._v,i=1==e._s,a=0,s=function(t){var r,a,s,o=i?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{o?(i||(2==e._h&&j(e),e._h=1),!0===o?r=n:(l&&l.enter(),r=o(n),l&&(l.exit(),s=!0)),r===t.promise?c(C("Promise-chain cycle")):(a=I(r))?a.call(r,u,c):u(r)):c(n)}catch(e){l&&!s&&l.exit(),c(e)}};r.length>a;)s(r[a++]);e._c=[],e._n=!1,t&&!e._h&&U(e)}))}},U=function(e){y.call(u,(function(){var t,r,n,i=e._v,a=R(e);if(a&&(t=_((function(){x?k.emit("unhandledRejection",i,e):(r=u.onunhandledrejection)?r({promise:e,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)})),e._h=x||R(e)?2:1),e._a=void 0,a&&t.e)throw t.v}))},R=function(e){return 1!==e._h&&0===(e._a||e._c).length},j=function(e){y.call(u,(function(){var t;x?k.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},N=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},B=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw C("Promise can't be resolved itself");(t=I(e))?v((function(){var n={_w:r,_d:!1};try{t.call(e,c(B,n,1),c(N,n,1))}catch(e){N.call(n,e)}})):(r._v=e,r._s=1,D(r,!1))}catch(e){N.call({_w:r,_d:!1},e)}}};M||(A=function(e){f(this,A,S,"_h"),p(e),n.call(this);try{e(c(B,this,1),c(N,this,1))}catch(e){N.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(4408)(A.prototype,{then:function(e,t){var r=L(g(this,A));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=x?k.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&D(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new n;this.promise=e,this.resolve=c(B,e,1),this.reject=c(N,e,1)},b.f=L=function(e){return e===A||e===s?new a(e):i(e)}),d(d.G+d.W+d.F*!M,{Promise:A}),r(2943)(A,S),r(2974)(S),s=r(5645).Promise,d(d.S+d.F*!M,S,{reject:function(e){var t=L(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(o||!M),S,{resolve:function(e){return w(o&&this===s?A:this,e)}}),d(d.S+d.F*!(M&&r(7462)((function(e){A.all(e).catch(P)}))),S,{all:function(e){var t=this,r=L(t),n=r.resolve,i=r.reject,a=_((function(){var r=[],a=0,s=1;m(e,!1,(function(e){var o=a++,u=!1;r.push(void 0),s++,t.resolve(e).then((function(e){u||(u=!0,r[o]=e,--s||n(r))}),i)})),--s||n(r)}));return a.e&&i(a.v),r.promise},race:function(e){var t=this,r=L(t),n=r.reject,i=_((function(){m(e,!1,(function(e){t.resolve(e).then(r.resolve,n)}))}));return i.e&&n(i.v),r.promise}})},8184:(e,t,r)=>{"use strict";var n=r(9824),i=r(1616);e.exports=r(5795)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return n.def(i(this,"Set"),e=0===e?0:e,e)}},n)},9115:(e,t,r)=>{"use strict";var n=r(4496)(!0);r(2923)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})}))},5767:(e,t,r)=>{"use strict";var n=r(3816),i=r(9181),a=r(7057),s=r(2985),o=r(7234),u=r(4728).KEY,c=r(4253),l=r(3825),d=r(2943),h=r(3953),p=r(6314),f=r(8787),m=r(6074),g=r(5541),y=r(4302),v=r(7007),b=r(5286),_=r(508),T=r(2110),w=r(1689),S=r(681),C=r(2503),k=r(9327),E=r(8693),O=r(4548),A=r(9275),x=r(7184),P=E.f,L=A.f,M=k.f,I=n.Symbol,D=n.JSON,U=D&&D.stringify,R=p("_hidden"),j=p("toPrimitive"),N={}.propertyIsEnumerable,B=l("symbol-registry"),$=l("symbols"),F=l("op-symbols"),V=Object.prototype,H="function"==typeof I&&!!O.f,q=n.QObject,z=!q||!q.prototype||!q.prototype.findChild,W=a&&c((function(){return 7!=C(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=P(V,t);n&&delete V[t],L(e,t,r),n&&e!==V&&L(V,t,n)}:L,G=function(e){var t=$[e]=C(I.prototype);return t._k=e,t},X=H&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},K=function(e,t,r){return e===V&&K(F,t,r),v(e),t=w(t,!0),v(r),i($,t)?(r.enumerable?(i(e,R)&&e[R][t]&&(e[R][t]=!1),r=C(r,{enumerable:S(0,!1)})):(i(e,R)||L(e,R,S(1,{})),e[R][t]=!0),W(e,t,r)):L(e,t,r)},Y=function(e,t){v(e);for(var r,n=g(t=T(t)),i=0,a=n.length;a>i;)K(e,r=n[i++],t[r]);return e},Q=function(e){var t=N.call(this,e=w(e,!0));return!(this===V&&i($,e)&&!i(F,e))&&(!(t||!i(this,e)||!i($,e)||i(this,R)&&this[R][e])||t)},J=function(e,t){if(e=T(e),t=w(t,!0),e!==V||!i($,t)||i(F,t)){var r=P(e,t);return!r||!i($,t)||i(e,R)&&e[R][t]||(r.enumerable=!0),r}},Z=function(e){for(var t,r=M(T(e)),n=[],a=0;r.length>a;)i($,t=r[a++])||t==R||t==u||n.push(t);return n},ee=function(e){for(var t,r=e===V,n=M(r?F:T(e)),a=[],s=0;n.length>s;)!i($,t=n[s++])||r&&!i(V,t)||a.push($[t]);return a};H||(o((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===V&&t.call(F,r),i(this,R)&&i(this[R],e)&&(this[R][e]=!1),W(this,e,S(1,r))};return a&&z&&W(V,e,{configurable:!0,set:t}),G(e)}).prototype,"toString",(function(){return this._k})),E.f=J,A.f=K,r(616).f=k.f=Z,r(4682).f=Q,O.f=ee,a&&!r(4461)&&o(V,"propertyIsEnumerable",Q,!0),f.f=function(e){return G(p(e))}),s(s.G+s.W+s.F*!H,{Symbol:I});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)p(te[re++]);for(var ne=x(p.store),ie=0;ne.length>ie;)m(ne[ie++]);s(s.S+s.F*!H,"Symbol",{for:function(e){return i(B,e+="")?B[e]:B[e]=I(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),s(s.S+s.F*!H,"Object",{create:function(e,t){return void 0===t?C(e):Y(C(e),t)},defineProperty:K,defineProperties:Y,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var ae=c((function(){O.f(1)}));s(s.S+s.F*ae,"Object",{getOwnPropertySymbols:function(e){return O.f(_(e))}}),D&&s(s.S+s.F*(!H||c((function(){var e=I();return"[null]"!=U([e])||"{}"!=U({a:e})||"{}"!=U(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(b(t)||void 0!==e)&&!X(e))return y(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!X(t))return t}),n[1]=t,U.apply(D,n)}}),I.prototype[j]||r(7728)(I.prototype,j,I.prototype.valueOf),d(I,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},1181:(e,t,r)=>{for(var n=r(6997),i=r(7184),a=r(7234),s=r(3816),o=r(7728),u=r(2803),c=r(6314),l=c("iterator"),d=c("toStringTag"),h=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=i(p),m=0;m<f.length;m++){var g,y=f[m],v=p[y],b=s[y],_=b&&b.prototype;if(_&&(_[l]||o(_,l,h),_[d]||o(_,d,y),u[y]=h,v))for(g in n)_[g]||a(_,g,n[g],!0)}},9144:(e,t,r)=>{var n="undefined"!=typeof window?window:{},i=r(6533);if("undefined"!=typeof document)e.exports=document;else{var a=n["__GLOBAL_DOCUMENT_CACHE@4"];a||(a=n["__GLOBAL_DOCUMENT_CACHE@4"]=i),e.exports=a}},8908:e=>{"undefined"!=typeof window?e.exports=window:"undefined"!=typeof self?e.exports=self:e.exports={}},4827:(e,t,r)=>{"use strict";var n,i=r(1961);(n=function(){var e=new Uint8Array,t=0;n.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.parseId3TagSize=function(e,t){var r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?r+20:r+10},this.parseAdtsSize=function(e,t){var r=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|r},this.push=function(r){var n,i,a,s,o=0,u=0;for(e.length?(s=e.length,(e=new Uint8Array(r.byteLength+s)).set(e.subarray(0,s)),e.set(r,s)):e=r;e.length-u>=3;)if(e[u]!=="I".charCodeAt(0)||e[u+1]!=="D".charCodeAt(0)||e[u+2]!=="3".charCodeAt(0))if(!0&e[u]&&240==(240&e[u+1])){if(e.length-u<7)break;if((o=this.parseAdtsSize(e,u))>e.length)break;a={type:"audio",data:e.subarray(u,u+o),pts:t,dts:t},this.trigger("data",a),u+=o}else u++;else{if(e.length-u<10)break;if((o=this.parseId3TagSize(e,u))>e.length)break;i={type:"timed-metadata",data:e.subarray(u,u+o)},this.trigger("data",i),u+=o}n=e.length-u,e=n>0?e.subarray(u):new Uint8Array}}).prototype=new i,e.exports=n},7323:e=>{"use strict";var t=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]};e.exports={parseId3TagSize:function(e,t){var r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?r+20:r+10},parseAdtsSize:function(e,t){var r=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|r},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var r=0;r+5<e.length;){if(255===e[r]&&240==(246&e[r+1]))return t[(60&e[r+2])>>>2];r++}return null},parseAacTimestamp:function(e){var t,n,i;t=10,64&e[5]&&(t+=4,t+=r(e.subarray(10,14)));do{if((n=r(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){i=e.subarray(t+10,t+n+10);for(var a=0;a<i.byteLength;a++)if(0===i[a]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(e,t,r){var n,i="";for(n=t;n<r;n++)i+="%"+("00"+e[n].toString(16)).slice(-2);return i}(i,0,a))){var s=i.subarray(a+1),o=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return o*=4,o+=3&s[7]}break}}t+=10,t+=n}while(t<e.byteLength);return null}}},4886:(e,t,r)=>{"use strict";var n,i=r(1961),a=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(n=function(){var e;n.prototype.init.call(this),this.push=function(t){var r,n,i,s,o,u,c=0,l=0;if("audio"===t.type)for(e?(s=e,(e=new Uint8Array(s.byteLength+t.data.byteLength)).set(s),e.set(t.data,s.byteLength)):e=t.data;c+5<e.length;)if(255===e[c]&&240==(246&e[c+1])){if(n=2*(1&~e[c+1]),r=(3&e[c+3])<<11|e[c+4]<<3|(224&e[c+5])>>5,u=9e4*(o=1024*(1+(3&e[c+6])))/a[(60&e[c+2])>>>2],i=c+r,e.byteLength<i)return;if(this.trigger("data",{pts:t.pts+l*u,dts:t.dts+l*u,sampleCount:o,audioobjecttype:1+(e[c+2]>>>6&3),channelcount:(1&e[c+2])<<2|(192&e[c+3])>>>6,samplerate:a[(60&e[c+2])>>>2],samplingfrequencyindex:(60&e[c+2])>>>2,samplesize:16,data:e.subarray(c+7+n,i)}),e.byteLength===i)return void(e=void 0);l++,e=e.subarray(i)}else c++},this.flush=function(){this.trigger("done")}}).prototype=new i,e.exports=n},6618:(e,t,r)=>{"use strict";var n,i,a,s=r(1961),o=r(9798);(i=function(){var e,t,r=0;i.prototype.init.call(this),this.push=function(n){var i;for(t?((i=new Uint8Array(t.byteLength+n.data.byteLength)).set(t),i.set(n.data,t.byteLength),t=i):t=n.data;r<t.byteLength-3;r++)if(1===t[r+2]){e=r+5;break}for(;e<t.byteLength;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}r+3!==e-2&&this.trigger("data",t.subarray(r+3,e-2));do{e++}while(1!==t[e]&&e<t.length);r=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(r+3,e-2)),r=e-2,e+=3;break;default:e+=3}t=t.subarray(r),e-=r,r=0},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(r+3)),t=null,r=0,this.trigger("done")}}).prototype=new s,a={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(n=function(){var e,t,r,s,u,c,l,d=new i;n.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,r=e.pts,s=e.dts,d.push(e))},d.on("data",(function(n){var i={trackId:t,pts:r,dts:s,data:n};switch(31&n[0]){case 5:i.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:i.nalUnitType="sei_rbsp",i.escapedRBSP=u(n.subarray(1));break;case 7:i.nalUnitType="seq_parameter_set_rbsp",i.escapedRBSP=u(n.subarray(1)),i.config=c(i.escapedRBSP);break;case 8:i.nalUnitType="pic_parameter_set_rbsp";break;case 9:i.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",i)})),d.on("done",(function(){e.trigger("done")})),this.flush=function(){d.flush()},l=function(e,t){var r,n=8,i=8;for(r=0;r<e;r++)0!==i&&(i=(n+t.readExpGolomb()+256)%256),n=0===i?n:i},u=function(e){for(var t,r,n=e.byteLength,i=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===i[0]&&(s++,i.shift()),r[a]=e[s];return r},c=function(e){var t,r,n,i,s,u,c,d,h,p,f,m,g,y=0,v=0,b=0,_=0,T=1;if(r=(t=new o(e)).readUnsignedByte(),i=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),a[r]&&(3===(s=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(f=3!==s?8:12,g=0;g<f;g++)t.readBoolean()&&l(g<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(u=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===u)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),c=t.readUnsignedExpGolomb(),g=0;g<c;g++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),d=t.readUnsignedExpGolomb(),h=t.readUnsignedExpGolomb(),0===(p=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(y=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb(),b=t.readUnsignedExpGolomb(),_=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:m=[1,1];break;case 2:m=[12,11];break;case 3:m=[10,11];break;case 4:m=[16,11];break;case 5:m=[40,33];break;case 6:m=[24,11];break;case 7:m=[20,11];break;case 8:m=[32,11];break;case 9:m=[80,33];break;case 10:m=[18,11];break;case 11:m=[15,11];break;case 12:m=[64,33];break;case 13:m=[160,99];break;case 14:m=[4,3];break;case 15:m=[3,2];break;case 16:m=[2,1];break;case 255:m=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}m&&(T=m[0]/m[1])}return{profileIdc:r,levelIdc:n,profileCompatibility:i,width:Math.ceil((16*(d+1)-2*y-2*v)*T),height:(2-p)*(h+1)*16-2*b-2*_}}}).prototype=new s,e.exports={H264Stream:n,NalByteStream:i}},4212:e=>{var t,r=[33,16,5,32,164,27],n=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],i=function(e){for(var t=[];e--;)t.push(0);return t},a={96e3:[r,[227,64],i(154),[56]],88200:[r,[231],i(170),[56]],64e3:[r,[248,192],i(240),[56]],48e3:[r,[255,192],i(268),[55,148,128],i(54),[112]],44100:[r,[255,192],i(268),[55,163,128],i(84),[112]],32e3:[r,[255,192],i(268),[55,234],i(226),[112]],24e3:[r,[255,192],i(268),[55,255,128],i(268),[111,112],i(126),[224]],16e3:[r,[255,192],i(268),[55,255,128],i(268),[111,255],i(269),[223,108],i(195),[1,192]],12e3:[n,i(268),[3,127,248],i(268),[6,255,240],i(268),[13,255,224],i(268),[27,253,128],i(259),[56]],11025:[n,i(268),[3,127,248],i(268),[6,255,240],i(268),[13,255,224],i(268),[27,255,192],i(268),[55,175,128],i(108),[112]],8e3:[n,i(268),[3,121,16],i(47),[7]]};e.exports=(t=a,Object.keys(t).reduce((function(e,r){return e[r]=new Uint8Array(t[r].reduce((function(e,t){return e.concat(t)}),[])),e}),{}))},3754:(e,t,r)=>{"use strict";var n=r(1961),i=r(6221),a=function(){a.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new l(0,0),new l(0,1),new l(1,0),new l(1,1)],this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))}),this)};a.prototype=new n,a.prototype.push=function(e){var t,r,n;if("sei_rbsp"===e.nalUnitType&&(t=i.parseSei(e.escapedRBSP)).payloadType===i.USER_DATA_REGISTERED_ITU_T_T35&&(r=i.parseUserData(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=i.parseCaptionPackets(e.pts,r),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},a.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2&&this.dispatchCea608Packet(e)}),this),this.captionPackets_.length=0,this.ccStreams_.forEach((function(e){e.flush()}),this)):this.ccStreams_.forEach((function(e){e.flush()}),this)},a.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},a.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},a.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},a.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)};var s={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},o=function(e){return null===e?"":(e=s[e]||e,String.fromCharCode(e))},u=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],c=function(){for(var e=[],t=15;t--;)e.push("");return e},l=function(e,t){l.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,r,n,i,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),r=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=r,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=c();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=c();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=c()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,i))a=o((n=(3&n)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(n,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=o((n=(3&n)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(n,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,i))this.column_+=3&i;else if(this.isPAC(n,i)){var s=u.indexOf(7968&t);"rollUp"===this.mode_&&this.setRollUp(e.pts,s),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===i&&(i=null),a=o(n),a+=o(i),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};l.prototype=new n,l.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e){return e.trim()})).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},l.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=c(),this.nonDisplayed_=c(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},l.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},l.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},l.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},l.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},l.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},l.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},l.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},l.prototype.isNormalChar=function(e){return e>=32&&e<=127},l.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=c(),this.displayed_=c()),void 0!==t&&t!==this.row_)for(var r=0;r<this.rollUpRows_;r++)this.displayed_[t-r]=this.displayed_[this.row_-r],this.displayed_[this.row_-r]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},l.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var r=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,r)},l.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},l.prototype.popOn=function(e,t){var r=this.nonDisplayed_[this.row_];r+=t,this.nonDisplayed_[this.row_]=r},l.prototype.rollUp=function(e,t){var r=this.displayed_[this.row_];r+=t,this.displayed_[this.row_]=r},l.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},l.prototype.paintOn=function(e,t){var r=this.displayed_[this.row_];r+=t,this.displayed_[this.row_]=r},e.exports={CaptionStream:a,Cea608Stream:l}},7379:(e,t,r)=>{"use strict";var n,i,a,s=r(1961),o=r(3754),u=r(5215),c=r(817).TimestampRolloverStream,l=r(5215),d=188;(n=function(){var e=new Uint8Array(d),t=0;n.prototype.init.call(this),this.push=function(r){var n,i=0,a=d;for(t?((n=new Uint8Array(r.byteLength+t)).set(e.subarray(0,t)),n.set(r,t),t=0):n=r;a<n.byteLength;)71!==n[i]||71!==n[a]?(i++,a++):(this.trigger("data",n.subarray(i,a)),i+=d,a+=d);i<n.byteLength&&(e.set(n.subarray(i),0),t=n.byteLength-i)},this.flush=function(){t===d&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")}}).prototype=new s,(i=function(){var e,t,r,n;i.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,n){var i=0;n.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===n.type?t(e.subarray(i),n):r(e.subarray(i),n)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],n.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=n.pmtPid},r=function(e,t){var r,i;if(1&e[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},r=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<r;){var a=e[i],s=(31&e[i+1])<<8|e[i+2];a===u.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=s:a===u.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=s:a===u.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][s]=a),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=n.programMapTable}},this.push=function(t){var r={},n=4;if(r.payloadUnitStartIndicator=!!(64&t[1]),r.pid=31&t[1],r.pid<<=8,r.pid|=t[2],(48&t[3])>>>4>1&&(n+=t[n]+1),0===r.pid)r.type="pat",e(t.subarray(n),r),this.trigger("data",r);else if(r.pid===this.pmtPid)for(r.type="pmt",e(t.subarray(n),r),this.trigger("data",r);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,r]):this.processPes_(t,n,r)},this.processPes_=function(e,t,r){r.pid===this.programMapTable.video?r.streamType=u.H264_STREAM_TYPE:r.pid===this.programMapTable.audio?r.streamType=u.ADTS_STREAM_TYPE:r.streamType=this.programMapTable["timed-metadata"][r.pid],r.type="pes",r.data=e.subarray(t),this.trigger("data",r)}}).prototype=new s,i.STREAM_TYPES={h264:27,adts:15},(a=function(){var e=this,t={data:[],size:0},r={data:[],size:0},n={data:[],size:0},i=function(t,r,n){var i,a,s=new Uint8Array(t.size),o={type:r},u=0,c=0;if(t.data.length&&!(t.size<9)){for(o.trackId=t.data[0].pid,u=0;u<t.data.length;u++)a=t.data[u],s.set(a.data,c),c+=a.data.byteLength;var l,d,h;l=s,(d=o).packetLength=6+(l[4]<<8|l[5]),d.dataAlignmentIndicator=0!=(4&l[6]),192&(h=l[7])&&(d.pts=(14&l[9])<<27|(255&l[10])<<20|(254&l[11])<<12|(255&l[12])<<5|(254&l[13])>>>3,d.pts*=4,d.pts+=(6&l[13])>>>1,d.dts=d.pts,64&h&&(d.dts=(14&l[14])<<27|(255&l[15])<<20|(254&l[16])<<12|(255&l[17])<<5|(254&l[18])>>>3,d.dts*=4,d.dts+=(6&l[18])>>>1)),d.data=l.subarray(9+l[8]),i="video"===r||o.packetLength<=t.size,(n||i)&&(t.size=0,t.data.length=0),i&&e.trigger("data",o)}};a.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var e,s;switch(a.streamType){case u.H264_STREAM_TYPE:case l.H264_STREAM_TYPE:e=t,s="video";break;case u.ADTS_STREAM_TYPE:e=r,s="audio";break;case u.METADATA_STREAM_TYPE:e=n,s="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&i(e,s,!0),e.data.push(a),e.size+=a.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},r=a.programMapTable;null!==r.video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+r.video,codec:"avc",type:"video"}),null!==r.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+r.audio,codec:"adts",type:"audio"}),e.trigger("data",t)}})[a.type]()},this.flush=function(){i(t,"video"),i(r,"audio"),i(n,"timed-metadata"),this.trigger("done")}}).prototype=new s;var h={PAT_PID:0,MP2T_PACKET_LENGTH:d,TransportPacketStream:n,TransportParseStream:i,ElementaryStream:a,TimestampRolloverStream:c,CaptionStream:o.CaptionStream,Cea608Stream:o.Cea608Stream,MetadataStream:r(8659)};for(var p in u)u.hasOwnProperty(p)&&(h[p]=u[p]);e.exports=h},8659:(e,t,r)=>{"use strict";var n,i=r(1961),a=r(5215),s=function(e,t,r){var n,i="";for(n=t;n<r;n++)i+="%"+("00"+e[n].toString(16)).slice(-2);return i},o=function(e,t,r){return decodeURIComponent(s(e,t,r))},u=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},c={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=o(e.data,1,t),e.value=o(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=o(e.data,1,t),e.url=o(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,r;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(r=e.data,unescape(s(r,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(n=function(e){var t,r={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},i=0,s=[],o=0;if(n.prototype.init.call(this),this.dispatchType=a.METADATA_STREAM_TYPE.toString(16),r.descriptor)for(t=0;t<r.descriptor.length;t++)this.dispatchType+=("00"+r.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,a,l,d;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(o=0,s.length=0),0===s.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))r.debug;else if(s.push(e),o+=e.data.byteLength,1===s.length&&(i=u(e.data.subarray(6,10)),i+=10),!(o<i)){for(t={data:new Uint8Array(i),frames:[],pts:s[0].pts,dts:s[0].dts},d=0;d<i;)t.data.set(s[0].data.subarray(0,i-d),d),d+=s[0].data.byteLength,o-=s[0].data.byteLength,s.shift();n=10,64&t.data[5]&&(n+=4,n+=u(t.data.subarray(10,14)),i-=u(t.data.subarray(16,20)));do{if((a=u(t.data.subarray(n+4,n+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((l={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+a+10)}).key=l.id,c[l.id]&&(c[l.id](l),"com.apple.streaming.transportStreamTimestamp"===l.owner)){var h=l.data,p=(1&h[3])<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;p*=4,p+=3&h[7],l.timeStamp=p,void 0===t.pts&&void 0===t.dts&&(t.pts=l.timeStamp,t.dts=l.timeStamp),this.trigger("timestamp",l)}t.frames.push(l),n+=10,n+=a}while(n<i);this.trigger("data",t)}}}).prototype=new i,e.exports=n},4149:(e,t,r)=>{"use strict";var n=r(5215),i=function(e){var t=31&e[1];return t<<=8,t|=e[2]},a=function(e){return!!(64&e[1])},s=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},o=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};e.exports={parseType:function(e,t){var r=i(e);return 0===r?"pat":r===t?"pmt":t?"pes":null},parsePat:function(e){var t=a(e),r=4+s(e);return t&&(r+=e[r]+1),(31&e[r+10])<<8|e[r+11]},parsePmt:function(e){var t={},r=a(e),n=4+s(e);if(r&&(n+=e[n]+1),1&e[n+5]){var i;i=3+((15&e[n+1])<<8|e[n+2])-4;for(var o=12+((15&e[n+10])<<8|e[n+11]);o<i;){var u=n+o;t[(31&e[u+1])<<8|e[u+2]]=e[u],o+=5+((15&e[u+3])<<8|e[u+4])}return t}},parsePayloadUnitStartIndicator:a,parsePesType:function(e,t){switch(t[i(e)]){case n.H264_STREAM_TYPE:return"video";case n.ADTS_STREAM_TYPE:return"audio";case n.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!a(e))return null;var t=4+s(e);if(t>=e.byteLength)return null;var r,n=null;return 192&(r=e[t+7])&&((n={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,n.pts*=4,n.pts+=(6&e[t+13])>>>1,n.dts=n.pts,64&r&&(n.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,n.dts*=4,n.dts+=(6&e[t+18])>>>1)),n},videoPacketContainsKeyFrame:function(e){for(var t=4+s(e),r=e.subarray(t),n=0,i=0,a=!1;i<r.byteLength-3;i++)if(1===r[i+2]){n=i+5;break}for(;n<r.byteLength;)switch(r[n]){case 0:if(0!==r[n-1]){n+=2;break}if(0!==r[n-2]){n++;break}i+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===o(31&r[i+3])&&(a=!0);do{n++}while(1!==r[n]&&n<r.length);i=n-2,n+=3;break;case 1:if(0!==r[n-1]||0!==r[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===o(31&r[i+3])&&(a=!0),i=n-2,n+=3;break;default:n+=3}return r=r.subarray(i),n-=i,i=0,r&&r.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===o(31&r[i+3])&&(a=!0),a}}},5215:e=>{"use strict";e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},817:(e,t,r)=>{"use strict";var n=r(1961),i=function(e,t){var r=1;for(e>t&&(r=-1);Math.abs(t-e)>4294967296;)e+=8589934592*r;return e},a=function(e){var t,r;a.prototype.init.call(this),this.type_=e,this.push=function(e){e.type===this.type_&&(void 0===r&&(r=e.dts),e.dts=i(e.dts,r),e.pts=i(e.pts,r),t=e.dts,this.trigger("data",e))},this.flush=function(){r=t,this.trigger("done")},this.discontinuity=function(){r=void 0,t=void 0}};a.prototype=new n,e.exports={TimestampRolloverStream:a,handleRollover:i}},6659:(e,t,r)=>{"use strict";var n=r(6221).discardEmulationPreventionBytes,i=r(3754).CaptionStream,a=r(7661),s=r(2628),o=function(e,t){for(var r=e,n=0;n<t.length;n++){var i=t[n];if(r<i.size)return i;r-=i.size}return null},u=function(e,t){var r=a.findBox(e,["moof","traf"]),i=a.findBox(e,["mdat"]),u={},c=[];return i.forEach((function(e,t){var n=r[t];c.push({mdat:e,traf:n})})),c.forEach((function(e){var r,i=e.mdat,c=e.traf,l=a.findBox(c,["tfhd"]),d=s.parseTfhd(l[0]),h=d.trackId,p=a.findBox(c,["tfdt"]),f=p.length>0?s.parseTfdt(p[0]).baseMediaDecodeTime:0,m=a.findBox(c,["trun"]);t===h&&m.length>0&&(r=function(e,t,r){var i,a,s,u,c=new DataView(e.buffer,e.byteOffset,e.byteLength),l=[];for(a=0;a+4<e.length;a+=s)if(s=c.getUint32(a),a+=4,!(s<=0))switch(31&e[a]){case 6:var d=e.subarray(a+1,a+1+s),h=o(a,t);i={nalUnitType:"sei_rbsp",size:s,data:d,escapedRBSP:n(d),trackId:r},h?(i.pts=h.pts,i.dts=h.dts,u=h):(i.pts=u.pts,i.dts=u.dts),l.push(i)}return l}(i,function(e,t,r){var n=t,i=r.defaultSampleDuration||0,a=r.defaultSampleSize||0,o=r.trackId,u=[];return e.forEach((function(e){var t=s.parseTrun(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=a),e.trackId=o,e.dts=n,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=n+e.compositionTimeOffset,n+=e.duration})),u=u.concat(t)})),u}(m,f,d),h),u[h]||(u[h]=[]),u[h]=u[h].concat(r))})),u};e.exports=function(){var e,t,r,n,a,s=!1;this.isInitialized=function(){return s},this.init=function(){e=new i,s=!0,e.on("data",(function(e){e.startTime=e.startPts/n,e.endTime=e.endPts/n,a.captions.push(e),a.captionStreams[e.stream]=!0}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length)&&(r!==e[0]||n!==t[r])},this.parse=function(e,i,s){var o;if(!this.isInitialized())return null;if(!i||!s)return null;if(this.isNewInit(i,s))r=i[0],n=s[r];else if(!r||!n)return t.push(e),null;for(;t.length>0;){var c=t.shift();this.parse(c,i,s)}return null!==(o=function(e,t,r){return t?{seiNals:u(e,t)[t],timescale:r}:null}(e,r,n))&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),a):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;e.flush()},this.clearParsedCaptions=function(){a.captions=[],a.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],r=null,n=null,a?this.clearParsedCaptions():a={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}},9586:e=>{var t=function(e,t){var r={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return r.dataOffset=t,r.compositionTimeOffset=e.pts-e.dts,r.duration=e.duration,r.size=4*e.length,r.size+=e.byteLength,e.keyFrame&&(r.flags.dependsOn=2,r.flags.isNonSyncSample=0),r};e.exports={groupNalsIntoFrames:function(e){var t,r,n=[],i=[];for(n.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(r=e[t]).nalUnitType?(n.length&&(n.duration=r.dts-n.dts,i.push(n)),(n=[r]).byteLength=r.data.byteLength,n.pts=r.pts,n.dts=r.dts):("slice_layer_without_partitioning_rbsp_idr"===r.nalUnitType&&(n.keyFrame=!0),n.duration=r.dts-n.dts,n.byteLength+=r.data.byteLength,n.push(r));return i.length&&(!n.duration||n.duration<=0)&&(n.duration=i[i.length-1].duration),i.push(n),i},groupFramesIntoGops:function(e){var t,r,n=[],i=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)(r=e[t]).keyFrame?(n.length&&(i.push(n),i.byteLength+=n.byteLength,i.nalCount+=n.nalCount,i.duration+=n.duration),(n=[r]).nalCount=r.length,n.byteLength=r.byteLength,n.pts=r.pts,n.dts=r.dts,n.duration=r.duration):(n.duration+=r.duration,n.nalCount+=r.length,n.byteLength+=r.byteLength,n.push(r));return i.length&&n.duration<=0&&(n.duration=i[i.length-1].duration),i.byteLength+=n.byteLength,i.nalCount+=n.nalCount,i.duration+=n.duration,i.push(n),i},extendFirstKeyFrame:function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},generateSampleTable:function(e,r){var n,i,a,s,o,u=r||0,c=[];for(n=0;n<e.length;n++)for(s=e[n],i=0;i<s.length;i++)o=s[i],u+=(a=t(o,u)).size,c.push(a);return c},concatenateNalData:function(e){var t,r,n,i,a,s,o=0,u=e.byteLength,c=e.nalCount,l=new Uint8Array(u+4*c),d=new DataView(l.buffer);for(t=0;t<e.length;t++)for(i=e[t],r=0;r<i.length;r++)for(a=i[r],n=0;n<a.length;n++)s=a[n],d.setUint32(o,s.data.byteLength),o+=4,l.set(s.data,o),o+=s.data.byteLength;return l}}},272:(e,t,r)=>{e.exports={generator:r(2014),probe:r(7661),Transmuxer:r(5064).Transmuxer,AudioSegmentStream:r(5064).AudioSegmentStream,VideoSegmentStream:r(5064).VideoSegmentStream,CaptionParser:r(6659)}},2014:e=>{"use strict";var t,r,n,i,a,s,o,u,c,l,d,h,p,f,m,g,y,v,b,_,T,w,S,C,k,E,O,A,x,P,L,M,I,D,U,R,j,N,B,$,F,V=Math.pow(2,32)-1;!function(){var e;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in S)S.hasOwnProperty(e)&&(S[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),E=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),k=new Uint8Array([0,0,0,1]),O=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),A=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),x={video:O,audio:A},M=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),L=new Uint8Array([0,0,0,0,0,0,0,0]),I=new Uint8Array([0,0,0,0,0,0,0,0]),D=I,U=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),R=I,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,r,n=[],i=0;for(t=1;t<arguments.length;t++)n.push(arguments[t]);for(t=n.length;t--;)i+=n[t].byteLength;for(r=new Uint8Array(i+8),new DataView(r.buffer,r.byteOffset,r.byteLength).setUint32(0,r.byteLength),r.set(e,4),t=0,i=8;t<n.length;t++)r.set(n[t],i),i+=n[t].byteLength;return r},r=function(){return t(S.dinf,t(S.dref,M))},n=function(e){return t(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},i=function(){return t(S.ftyp,C,k,C,E)},g=function(e){return t(S.hdlr,x[e])},a=function(e){return t(S.mdat,e)},m=function(e){var r=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(r[12]=e.samplerate>>>24&255,r[13]=e.samplerate>>>16&255,r[14]=e.samplerate>>>8&255,r[15]=255&e.samplerate),t(S.mdhd,r)},f=function(e){return t(S.mdia,m(e),g(e.type),o(e))},s=function(e){return t(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},o=function(e){return t(S.minf,"video"===e.type?t(S.vmhd,P):t(S.smhd,L),r(),v(e))},u=function(e,r){for(var n=[],i=r.length;i--;)n[i]=_(r[i]);return t.apply(null,[S.moof,s(e)].concat(n))},c=function(e){for(var r=e.length,n=[];r--;)n[r]=h(e[r]);return t.apply(null,[S.moov,d(4294967295)].concat(n).concat(l(e)))},l=function(e){for(var r=e.length,n=[];r--;)n[r]=T(e[r]);return t.apply(null,[S.mvex].concat(n))},d=function(e){var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(S.mvhd,r)},y=function(e){var r,n,i=e.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,a[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return t(S.sdtp,a)},v=function(e){return t(S.stbl,b(e),t(S.stts,R),t(S.stsc,D),t(S.stsz,U),t(S.stco,I))},b=function(e){return t(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?j(e):N(e))},j=function(e){var r,n=e.sps||[],i=e.pps||[],a=[],s=[];for(r=0;r<n.length;r++)a.push((65280&n[r].byteLength)>>>8),a.push(255&n[r].byteLength),a=a.concat(Array.prototype.slice.call(n[r]));for(r=0;r<i.length;r++)s.push((65280&i[r].byteLength)>>>8),s.push(255&i[r].byteLength),s=s.concat(Array.prototype.slice.call(i[r]));return t(S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(S.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([n.length]).concat(a).concat([i.length]).concat(s))),t(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},N=function(e){return t(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),n(e))},p=function(e){var r=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(S.tkhd,r)},_=function(e){var r,n,i,a,s,o;return r=t(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/(V+1)),o=Math.floor(e.baseMediaDecodeTime%(V+1)),n=t(S.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),92,"audio"===e.type?(i=w(e,92),t(S.traf,r,n,i)):(a=y(e),i=w(e,a.length+92),t(S.traf,r,n,i,a))},h=function(e){return e.duration=e.duration||4294967295,t(S.trak,p(e),f(e))},T=function(e){var r=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(r[r.length-1]=0),t(S.trex,r)},F=function(e,t){var r=0,n=0,i=0,a=0;return e.length&&(void 0!==e[0].duration&&(r=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,r|n|i|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},$=function(e,r){var n,i,a,s;for(r+=20+16*(i=e.samples||[]).length,n=F(i,r),s=0;s<i.length;s++)a=i[s],n=n.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,61440&a.flags.degradationPriority,15&a.flags.degradationPriority,(4278190080&a.compositionTimeOffset)>>>24,(16711680&a.compositionTimeOffset)>>>16,(65280&a.compositionTimeOffset)>>>8,255&a.compositionTimeOffset]);return t(S.trun,new Uint8Array(n))},B=function(e,r){var n,i,a,s;for(r+=20+8*(i=e.samples||[]).length,n=F(i,r),s=0;s<i.length;s++)a=i[s],n=n.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size]);return t(S.trun,new Uint8Array(n))},w=function(e,t){return"audio"===e.type?B(e,t):$(e,t)},e.exports={ftyp:i,mdat:a,moof:u,moov:c,initSegment:function(e){var t,r=i(),n=c(e);return(t=new Uint8Array(r.byteLength+n.byteLength)).set(r),t.set(n,r.byteLength),t}}},7661:(e,t,r)=>{"use strict";var n,i,a,s,o,u=r(1976).toUnsigned;n=function(e,t){var r,a,s,o,c,l=[];if(!t.length)return null;for(r=0;r<e.byteLength;)a=u(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]),s=i(e.subarray(r+4,r+8)),o=a>1?r+a:e.byteLength,s===t[0]&&(1===t.length?l.push(e.subarray(r+8,o)):(c=n(e.subarray(r+8,o),t.slice(1))).length&&(l=l.concat(c))),r=o;return l},i=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},a=function(e){return n(e,["moov","trak"]).reduce((function(e,t){var r,i,a,s,o;return(r=n(t,["tkhd"])[0])?(i=r[0],s=u(r[a=0===i?12:20]<<24|r[a+1]<<16|r[a+2]<<8|r[a+3]),(o=n(t,["mdia","mdhd"])[0])?(a=0===(i=o[0])?12:20,e[s]=u(o[a]<<24|o[a+1]<<16|o[a+2]<<8|o[a+3]),e):null):null}),{})},s=function(e,t){var r,i,a;return r=n(t,["moof","traf"]),i=[].concat.apply([],r.map((function(t){return n(t,["tfhd"]).map((function(r){var i,a;return i=u(r[4]<<24|r[5]<<16|r[6]<<8|r[7]),a=e[i]||9e4,(n(t,["tfdt"]).map((function(e){var t,r;return t=e[0],r=u(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(r*=Math.pow(2,32),r+=u(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),r}))[0]||1/0)/a}))}))),a=Math.min.apply(null,i),isFinite(a)?a:0},o=function(e){var t=n(e,["moov","trak"]),r=[];return t.forEach((function(e){var t=n(e,["mdia","hdlr"]),a=n(e,["tkhd"]);t.forEach((function(e,t){var n,s,o=i(e.subarray(8,12)),u=a[t];"vide"===o&&(s=0===(n=new DataView(u.buffer,u.byteOffset,u.byteLength)).getUint8(0)?n.getUint32(12):n.getUint32(20),r.push(s))}))})),r},e.exports={findBox:n,parseType:i,timescale:a,startTime:s,videoTrackIds:o}},5557:e=>{e.exports={clearDtsInfo:function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(e,t){var r,n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),r=e.timelineStartInfo.baseMediaDecodeTime,r+=n,r=Math.max(0,r),"audio"===e.type&&(r*=e.samplerate/9e4,r=Math.floor(r)),r},collectDtsInfo:function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))}}},5064:(e,t,r)=>{"use strict";var n,i,a,s,o,u,c,l=r(1961),d=r(2014),h=r(9586),p=r(5557),f=r(7379),m=r(4886),g=r(6618).H264Stream,y=r(4827),v=r(4212),b=r(1489),_=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],T=["width","height","profileIdc","levelIdc","profileCompatibility"];o=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},u=function(e,t){var r;if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},c=function(e){var t,r=0;for(t=0;t<e.length;t++)r+=e[t].data.byteLength;return r},(i=function(e,t){var r=[],n=0,a=0,s=0,o=1/0;t=t||{},i.prototype.init.call(this),this.push=function(t){p.collectDtsInfo(e,t),e&&_.forEach((function(r){e[r]=t[r]})),r.push(t)},this.setEarliestDts=function(t){a=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){s=e},this.flush=function(){var i,a,s,o;0!==r.length?(i=this.trimAdtsFramesByEarliestDts_(r),e.baseMediaDecodeTime=p.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.prefixWithSilence_(e,i),e.samples=this.generateSampleTable_(i),s=d.mdat(this.concatenateFrameData_(i)),r=[],a=d.moof(n,[e]),o=new Uint8Array(a.byteLength+s.byteLength),n++,o.set(a),o.set(s,a.byteLength),p.clearDtsInfo(e),this.trigger("data",{track:e,boxes:o}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(e,t){var r,n,i,a,u=0,c=0,l=0;if(t.length&&(r=b.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),n=Math.ceil(9e4/(e.samplerate/1024)),s&&o&&(u=r-Math.max(s,o),l=(c=Math.floor(u/n))*n),!(c<1||l>45e3))){for((i=v[e.samplerate])||(i=t[0].data),a=0;a<c;a++)t.splice(a,0,{data:i});e.baseMediaDecodeTime-=Math.floor(b.videoTsToAudioTs(l,e.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(t){return e.minSegmentDts>=a?t:(e.minSegmentDts=1/0,t.filter((function(t){return t.dts>=a&&(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0)})))},this.generateSampleTable_=function(e){var t,r,n=[];for(t=0;t<e.length;t++)r=e[t],n.push({size:r.data.byteLength,duration:1024});return n},this.concatenateFrameData_=function(e){var t,r,n=0,i=new Uint8Array(c(e));for(t=0;t<e.length;t++)r=e[t],i.set(r.data,n),n+=r.data.byteLength;return i}}).prototype=new l,(n=function(e,t){var r,i,a=0,s=[],o=[];t=t||{},n.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){p.collectDtsInfo(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.config,e.sps=[t.data],T.forEach((function(t){e[t]=r[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.data,e.pps=[t.data]),s.push(t)},this.flush=function(){for(var r,n,i,u,c,l;s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(r=h.groupNalsIntoFrames(s),(i=h.groupFramesIntoGops(r))[0][0].keyFrame||((n=this.getGopForFusion_(s[0],e))?(i.unshift(n),i.byteLength+=n.byteLength,i.nalCount+=n.nalCount,i.pts=n.pts,i.dts=n.dts,i.duration+=n.duration):i=h.extendFirstKeyFrame(i)),o.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(i):this.alignGopsAtStart_(i)))return this.gopCache_.unshift({gop:i.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");p.clearDtsInfo(e),i=f}p.collectDtsInfo(e,i),e.samples=h.generateSampleTable(i),c=d.mdat(h.concatenateNalData(i)),e.baseMediaDecodeTime=p.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",i.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),this.gopCache_.unshift({gop:i.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),u=d.moof(a,[e]),l=new Uint8Array(u.byteLength+c.byteLength),a++,l.set(u),l.set(c,u.byteLength),this.trigger("data",{track:e,boxes:l}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){p.clearDtsInfo(e),r=void 0,i=void 0},this.getGopForFusion_=function(t){var r,n,i,a,s,o=1/0;for(s=0;s<this.gopCache_.length;s++)i=(a=this.gopCache_[s]).gop,e.pps&&u(e.pps[0],a.pps[0])&&e.sps&&u(e.sps[0],a.sps[0])&&(i.dts<e.timelineStartInfo.dts||(r=t.dts-i.dts-i.duration)>=-1e4&&r<=45e3&&(!n||o>r)&&(n=a,o=r));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,r,n,i,a,s,u,c;for(a=e.byteLength,s=e.nalCount,u=e.duration,t=r=0;t<o.length&&r<e.length&&(n=o[t],i=e[r],n.pts!==i.pts);)i.pts>n.pts?t++:(r++,a-=i.byteLength,s-=i.nalCount,u-=i.duration);return 0===r?e:r===e.length?null:((c=e.slice(r)).byteLength=a,c.duration=u,c.nalCount=s,c.pts=c[0].pts,c.dts=c[0].dts,c)},this.alignGopsAtEnd_=function(e){var t,r,n,i,a,s,u;for(t=o.length-1,r=e.length-1,a=null,s=!1;t>=0&&r>=0;){if(n=o[t],i=e[r],n.pts===i.pts){s=!0;break}n.pts>i.pts?t--:(t===o.length-1&&(a=r),r--)}if(!s&&null===a)return null;if(0===(u=s?r:a))return e;var c=e.slice(u),l=c.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return c.byteLength=l.byteLength,c.duration=l.duration,c.nalCount=l.nalCount,c.pts=c[0].pts,c.dts=c[0].dts,c},this.alignGopsWith=function(e){o=e}}).prototype=new l,(s=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,s.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}}).prototype=new l,s.prototype.flush=function(e){var t,r,n,i,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,T.forEach((function(e){s.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,_.forEach((function(e){s.info[e]=this.audioTrack[e]}),this)),1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,n=d.initSegment(this.pendingTracks),s.initSegment=new Uint8Array(n.byteLength),s.initSegment.set(n),s.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)s.data.set(this.pendingBoxes[i],a),a+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=t.startPts-o,t.startTime/=9e4,t.endTime=t.endPts-o,t.endTime/=9e4,s.captionStreams[t.stream]=!0,s.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(r=this.pendingMetadata[i]).cueTime=r.pts-o,r.cueTime/=9e4,s.metadata.push(r);s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(a=function(e){var t,r,u=this,c=!0;a.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};this.transmuxPipeline_=t,t.type="aac",t.metadataStream=new f.MetadataStream,t.aacStream=new y,t.audioTimestampRolloverStream=new f.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new f.TimestampRolloverStream("timed-metadata"),t.adtsStream=new m,t.coalesceStream=new s(e,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",(function(e){t.aacStream.setTimestamp(e.timeStamp)})),t.aacStream.on("data",(function(n){"timed-metadata"!==n.type||t.audioSegmentStream||(r=r||{timelineStartInfo:{baseMediaDecodeTime:u.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new i(r,e),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))})),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var a={};this.transmuxPipeline_=a,a.type="ts",a.metadataStream=new f.MetadataStream,a.packetStream=new f.TransportPacketStream,a.parseStream=new f.TransportParseStream,a.elementaryStream=new f.ElementaryStream,a.videoTimestampRolloverStream=new f.TimestampRolloverStream("video"),a.audioTimestampRolloverStream=new f.TimestampRolloverStream("audio"),a.timedMetadataTimestampRolloverStream=new f.TimestampRolloverStream("timed-metadata"),a.adtsStream=new m,a.h264Stream=new g,a.captionStream=new f.CaptionStream,a.coalesceStream=new s(e,a.metadataStream),a.headOfPipeline=a.packetStream,a.packetStream.pipe(a.parseStream).pipe(a.elementaryStream),a.elementaryStream.pipe(a.videoTimestampRolloverStream).pipe(a.h264Stream),a.elementaryStream.pipe(a.audioTimestampRolloverStream).pipe(a.adtsStream),a.elementaryStream.pipe(a.timedMetadataTimestampRolloverStream).pipe(a.metadataStream).pipe(a.coalesceStream),a.h264Stream.pipe(a.captionStream).pipe(a.coalesceStream),a.elementaryStream.on("data",(function(s){var o;if("metadata"===s.type){for(o=s.tracks.length;o--;)t||"video"!==s.tracks[o].type?r||"audio"!==s.tracks[o].type||((r=s.tracks[o]).timelineStartInfo.baseMediaDecodeTime=u.baseMediaDecodeTime):(t=s.tracks[o]).timelineStartInfo.baseMediaDecodeTime=u.baseMediaDecodeTime;t&&!a.videoSegmentStream&&(a.coalesceStream.numberOfTracks++,a.videoSegmentStream=new n(t,e),a.videoSegmentStream.on("timelineStartInfo",(function(e){r&&(r.timelineStartInfo=e,a.audioSegmentStream.setEarliestDts(e.dts))})),a.videoSegmentStream.on("processedGopsInfo",u.trigger.bind(u,"gopInfo")),a.videoSegmentStream.on("baseMediaDecodeTime",(function(e){r&&a.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),a.h264Stream.pipe(a.videoSegmentStream).pipe(a.coalesceStream)),r&&!a.audioSegmentStream&&(a.coalesceStream.numberOfTracks++,a.audioSegmentStream=new i(r,e),a.adtsStream.pipe(a.audioSegmentStream).pipe(a.coalesceStream))}})),a.coalesceStream.on("data",this.trigger.bind(this,"data")),a.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var n=this.transmuxPipeline_;this.baseMediaDecodeTime=e,r&&(r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,p.clearDtsInfo(r),r.timelineStartInfo.baseMediaDecodeTime=e,n.audioTimestampRolloverStream&&n.audioTimestampRolloverStream.discontinuity()),t&&(n.videoSegmentStream&&(n.videoSegmentStream.gopCache_=[],n.videoTimestampRolloverStream.discontinuity()),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,p.clearDtsInfo(t),n.captionStream.reset(),t.timelineStartInfo.baseMediaDecodeTime=e),n.timedMetadataTimestampRolloverStream&&n.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){r&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(c){var t=o(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),c=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){c=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new l,e.exports={Transmuxer:a,VideoSegmentStream:n,AudioSegmentStream:i,AUDIO_PROPERTIES:_,VIDEO_PROPERTIES:T}},6221:e=>{"use strict";e.exports={parseSei:function(e){for(var t=0,r={payloadType:-1,payloadSize:0},n=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!r.payload&&4===n){r.payloadType=n,r.payloadSize=i,r.payload=e.subarray(t,t+i);break}t+=i,n=0,i=0}return r},parseUserData:function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},parseCaptionPackets:function(e,t){var r,n,i,a,s=[];if(!(64&t[0]))return s;for(n=31&t[0],r=0;r<n;r++)a={type:3&t[(i=3*r)+2],pts:e},4&t[i+2]&&(a.ccData=t[i+3]<<8|t[i+4],s.push(a));return s},discardEmulationPreventionBytes:function(e){for(var t,r,n=e.byteLength,i=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===i[0]&&(s++,i.shift()),r[a]=e[s];return r},USER_DATA_REGISTERED_ITU_T_T35:4}},2628:(e,t,r)=>{"use strict";var n,i,a=r(7661).parseType,s=function(e){return new Date(1e3*e-20828448e5)},o=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},u=function(e){var t,r,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=[];for(t=0;t+4<e.length;t+=r)if(r=n.getUint32(t),t+=4,r<=0)i.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:i.push("slice_layer_without_partitioning_rbsp");break;case 5:i.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:i.push("sei_rbsp");break;case 7:i.push("seq_parameter_set_rbsp");break;case 8:i.push("pic_parameter_set_rbsp");break;case 9:i.push("access_unit_delimiter_rbsp");break;default:i.push("UNKNOWN NAL - "+e[t]&31)}return i},c={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:n(e.subarray(78,e.byteLength))}},avcC:function(e){var t,r,n,i,a=new DataView(e.buffer,e.byteOffset,e.byteLength),s={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},o=31&e[5];for(n=6,i=0;i<o;i++)r=a.getUint16(n),n+=2,s.sps.push(new Uint8Array(e.subarray(n,n+r))),n+=r;for(t=e[n],n++,i=0;i<t;i++)r=a.getUint16(n),n+=2,s.pps.push(new Uint8Array(e.subarray(n,n+r))),n+=r;return s},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={majorBrand:a(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},n=8;n<e.byteLength;)r.compatibleBrands.push(a(e.subarray(n,n+4))),n+=4;return r},dinf:function(e){return{boxes:n(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:n(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:a(e.subarray(8,12)),name:""},r=8;for(r=24;r<e.byteLength;r++){if(0===e[r]){r++;break}t.name+=String.fromCharCode(e[r])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:u(e)}},mdhd:function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:r.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===i.version?(n+=4,i.creationTime=s(r.getUint32(n)),n+=8,i.modificationTime=s(r.getUint32(n)),n+=4,i.timescale=r.getUint32(n),n+=8,i.duration=r.getUint32(n)):(i.creationTime=s(r.getUint32(n)),n+=4,i.modificationTime=s(r.getUint32(n)),n+=4,i.timescale=r.getUint32(n),n+=4,i.duration=r.getUint32(n)),n+=4,t=r.getUint16(n),i.language+=String.fromCharCode(96+(t>>10)),i.language+=String.fromCharCode(96+((992&t)>>5)),i.language+=String.fromCharCode(96+(31&t)),i},mdia:function(e){return{boxes:n(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:n(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(r.streamDescriptor=n(e.subarray(28))[0]),r},moof:function(e){return{boxes:n(e)}},moov:function(e){return{boxes:n(e)}},mvex:function(e){return{boxes:n(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(r+=4,n.creationTime=s(t.getUint32(r)),r+=8,n.modificationTime=s(t.getUint32(r)),r+=4,n.timescale=t.getUint32(r),r+=8,n.duration=t.getUint32(r)):(n.creationTime=s(t.getUint32(r)),r+=4,n.modificationTime=s(t.getUint32(r)),r+=4,n.timescale=t.getUint32(r),r+=4,n.duration=t.getUint32(r)),r+=4,n.rate=t.getUint16(r)+t.getUint16(r+2)/16,r+=4,n.volume=t.getUint8(r)+t.getUint8(r+1)/8,r+=2,r+=2,r+=8,n.matrix=new Uint32Array(e.subarray(r,r+36)),r+=36,r+=24,n.nextTrackId=t.getUint32(r),n},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)r.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return r},sidx:function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:r.getUint32(4),timescale:r.getUint32(8),earliestPresentationTime:r.getUint32(12),firstOffset:r.getUint32(16)},i=r.getUint16(22);for(t=24;i;t+=12,i--)n.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&r.getUint32(t),subsegmentDuration:r.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&r.getUint32(t+8)});return n},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:n(e)}},stco:function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},i=r.getUint32(4);for(t=8;i;t+=4,i--)n.chunkOffsets.push(r.getUint32(t));return n},stsc:function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n=r.getUint32(4),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;n;t+=12,n--)i.sampleToChunks.push({firstChunk:r.getUint32(t),samplesPerChunk:r.getUint32(t+4),sampleDescriptionIndex:r.getUint32(t+8)});return i},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:n(e.subarray(8))}},stsz:function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:r.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)n.entries.push(r.getUint32(t));return n},stts:function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},i=r.getUint32(4);for(t=8;i;t+=8,i--)n.timeToSamples.push({sampleCount:r.getUint32(t),sampleDelta:r.getUint32(t+4)});return n},styp:function(e){return c.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:r.getUint32(4)},i=1&n.flags[2],a=2&n.flags[2],s=8&n.flags[2],o=16&n.flags[2],u=32&n.flags[2],c=65536&n.flags[0],l=131072&n.flags[0];return t=8,i&&(t+=4,n.baseDataOffset=r.getUint32(12),t+=4),a&&(n.sampleDescriptionIndex=r.getUint32(t),t+=4),s&&(n.defaultSampleDuration=r.getUint32(t),t+=4),o&&(n.defaultSampleSize=r.getUint32(t),t+=4),u&&(n.defaultSampleFlags=r.getUint32(t)),c&&(n.durationIsEmpty=!0),!i&&l&&(n.baseDataOffsetIsMoof=!0),n},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(r+=4,n.creationTime=s(t.getUint32(r)),r+=8,n.modificationTime=s(t.getUint32(r)),r+=4,n.trackId=t.getUint32(r),r+=4,r+=8,n.duration=t.getUint32(r)):(n.creationTime=s(t.getUint32(r)),r+=4,n.modificationTime=s(t.getUint32(r)),r+=4,n.trackId=t.getUint32(r),r+=4,r+=4,n.duration=t.getUint32(r)),r+=4,r+=8,n.layer=t.getUint16(r),r+=2,n.alternateGroup=t.getUint16(r),r+=2,n.volume=t.getUint8(r)+t.getUint8(r+1)/8,r+=2,r+=2,n.matrix=new Uint32Array(e.subarray(r,r+36)),r+=36,n.width=t.getUint16(r)+t.getUint16(r+2)/16,r+=4,n.height=t.getUint16(r)+t.getUint16(r+2)/16,n},traf:function(e){return{boxes:n(e)}},trak:function(e){return{boxes:n(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&r.flags[2],a=4&r.flags[2],s=1&r.flags[1],u=2&r.flags[1],c=4&r.flags[1],l=8&r.flags[1],d=n.getUint32(4),h=8;for(i&&(r.dataOffset=n.getInt32(h),h+=4),a&&d&&(t={flags:o(e.subarray(h,h+4))},h+=4,s&&(t.duration=n.getUint32(h),h+=4),u&&(t.size=n.getUint32(h),h+=4),l&&(t.compositionTimeOffset=n.getUint32(h),h+=4),r.samples.push(t),d--);d--;)t={},s&&(t.duration=n.getUint32(h),h+=4),u&&(t.size=n.getUint32(h),h+=4),c&&(t.flags=o(e.subarray(h,h+4)),h+=4),l&&(t.compositionTimeOffset=n.getUint32(h),h+=4),r.samples.push(t);return r},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}};n=function(e){for(var t,r,n,i,s,o=0,u=[],l=new ArrayBuffer(e.length),d=new Uint8Array(l),h=0;h<e.length;++h)d[h]=e[h];for(t=new DataView(l);o<e.byteLength;)r=t.getUint32(o),n=a(e.subarray(o+4,o+8)),i=r>1?o+r:e.byteLength,(s=(c[n]||function(e){return{data:e}})(e.subarray(o+8,i))).size=r,s.type=n,u.push(s),o=i;return u},i=function(e,t){var r;return t=t||0,r=new Array(2*t+1).join(" "),e.map((function(e,n){return r+e.type+"\n"+Object.keys(e).filter((function(e){return"type"!==e&&"boxes"!==e})).map((function(t){var n=r+"  "+t+": ",i=e[t];if(i instanceof Uint8Array||i instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(i.buffer,i.byteOffset,i.byteLength)).map((function(e){return" "+("00"+e.toString(16)).slice(-2)})).join("").match(/.{1,24}/g);return a?1===a.length?n+"<"+a.join("").slice(1)+">":n+"<\n"+a.map((function(e){return r+"  "+e})).join("\n")+"\n"+r+"  >":n+"<>"}return n+JSON.stringify(i,null,2).split("\n").map((function(e,t){return 0===t?e:r+"  "+e})).join("\n")})).join("\n")+(e.boxes?"\n"+i(e.boxes,t+1):"")})).join("\n")},e.exports={inspect:n,textify:i,parseTfdt:c.tfdt,parseHdlr:c.hdlr,parseTfhd:c.tfhd,parseTrun:c.trun}},5547:(e,t,r)=>{"use strict";var n=r(5215),i=r(817).handleRollover,a={};a.ts=r(4149),a.aac=r(7323);var s=9e4,o=188,u=71,c=function(e,t,r){for(var n,i,s,c,l=0,d=o,h=!1;d<e.byteLength;)if(e[l]!==u||e[d]!==u)l++,d++;else{switch(n=e.subarray(l,d),a.ts.parseType(n,t.pid)){case"pes":i=a.ts.parsePesType(n,t.table),s=a.ts.parsePayloadUnitStartIndicator(n),"audio"===i&&s&&(c=a.ts.parsePesTime(n))&&(c.type="audio",r.audio.push(c),h=!0)}if(h)break;l+=o,d+=o}for(l=(d=e.byteLength)-o,h=!1;l>=0;)if(e[l]!==u||e[d]!==u)l--,d--;else{switch(n=e.subarray(l,d),a.ts.parseType(n,t.pid)){case"pes":i=a.ts.parsePesType(n,t.table),s=a.ts.parsePayloadUnitStartIndicator(n),"audio"===i&&s&&(c=a.ts.parsePesTime(n))&&(c.type="audio",r.audio.push(c),h=!0)}if(h)break;l-=o,d-=o}},l=function(e,t,r){for(var n,i,s,c,l,d,h,p=0,f=o,m=!1,g={data:[],size:0};f<e.byteLength;)if(e[p]!==u||e[f]!==u)p++,f++;else{switch(n=e.subarray(p,f),a.ts.parseType(n,t.pid)){case"pes":if(i=a.ts.parsePesType(n,t.table),s=a.ts.parsePayloadUnitStartIndicator(n),"video"===i&&(s&&!m&&(c=a.ts.parsePesTime(n))&&(c.type="video",r.video.push(c),m=!0),!r.firstKeyFrame)){if(s&&0!==g.size){for(l=new Uint8Array(g.size),d=0;g.data.length;)h=g.data.shift(),l.set(h,d),d+=h.byteLength;a.ts.videoPacketContainsKeyFrame(l)&&(r.firstKeyFrame=a.ts.parsePesTime(l),r.firstKeyFrame.type="video"),g.size=0}g.data.push(n),g.size+=n.byteLength}}if(m&&r.firstKeyFrame)break;p+=o,f+=o}for(p=(f=e.byteLength)-o,m=!1;p>=0;)if(e[p]!==u||e[f]!==u)p--,f--;else{switch(n=e.subarray(p,f),a.ts.parseType(n,t.pid)){case"pes":i=a.ts.parsePesType(n,t.table),s=a.ts.parsePayloadUnitStartIndicator(n),"video"===i&&s&&(c=a.ts.parsePesTime(n))&&(c.type="video",r.video.push(c),m=!0)}if(m)break;p-=o,f-=o}},d=function(e){var t={pid:null,table:null},r={};for(var i in function(e,t){for(var r,n=0,i=o;i<e.byteLength;)if(e[n]!==u||e[i]!==u)n++,i++;else{switch(r=e.subarray(n,i),a.ts.parseType(r,t.pid)){case"pat":t.pid||(t.pid=a.ts.parsePat(r));break;case"pmt":t.table||(t.table=a.ts.parsePmt(r))}if(t.pid&&t.table)return;n+=o,i+=o}}(e,t),t.table){if(t.table.hasOwnProperty(i))switch(t.table[i]){case n.H264_STREAM_TYPE:r.video=[],l(e,t,r),0===r.video.length&&delete r.video;break;case n.ADTS_STREAM_TYPE:r.audio=[],c(e,t,r),0===r.audio.length&&delete r.audio}}return r};e.exports={inspect:function(e,t){var r,n;return(n=(r=e)[0]==="I".charCodeAt(0)&&r[1]==="D".charCodeAt(0)&&r[2]==="3".charCodeAt(0)?function(e){for(var t,r=!1,n=0,i=null,o=null,u=0,c=0;e.length-c>=3;){switch(a.aac.parseType(e,c)){case"timed-metadata":if(e.length-c<10){r=!0;break}if((u=a.aac.parseId3TagSize(e,c))>e.length){r=!0;break}null===o&&(t=e.subarray(c,c+u),o=a.aac.parseAacTimestamp(t)),c+=u;break;case"audio":if(e.length-c<7){r=!0;break}if((u=a.aac.parseAdtsSize(e,c))>e.length){r=!0;break}null===i&&(t=e.subarray(c,c+u),i=a.aac.parseSampleRate(t)),n++,c+=u;break;default:c++}if(r)return null}if(null===i||null===o)return null;var l=s/i;return{audio:[{type:"audio",dts:o,pts:o},{type:"audio",dts:o+1024*n*l,pts:o+1024*n*l}]}}(e):d(e))&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var r=t;void 0===r&&(r=e.audio[0].dts),e.audio.forEach((function(e){e.dts=i(e.dts,r),e.pts=i(e.pts,r),e.dtsTime=e.dts/s,e.ptsTime=e.pts/s}))}if(e.video&&e.video.length){var n=t;if(void 0===n&&(n=e.video[0].dts),e.video.forEach((function(e){e.dts=i(e.dts,n),e.pts=i(e.pts,n),e.dtsTime=e.dts/s,e.ptsTime=e.pts/s})),e.firstKeyFrame){var a=e.firstKeyFrame;a.dts=i(a.dts,n),a.pts=i(a.pts,n),a.dtsTime=a.dts/s,a.ptsTime=a.dts/s}}}(n,t),n):null}}},1976:e=>{e.exports={toUnsigned:function(e){return e>>>0}}},1489:e=>{var t,r,n,i,a,s;t=function(e){return 9e4*e},r=function(e,t){return e*t},n=function(e){return e/9e4},i=function(e,t){return e/t},a=function(e,r){return t(i(e,r))},s=function(e,t){return r(n(e),t)},e.exports={secondsToVideoTs:t,secondsToAudioTs:r,videoTsToSeconds:n,audioTsToSeconds:i,audioTsToVideoTs:a,videoTsToAudioTs:s}},9798:e=>{"use strict";var t;t=function(e){var t=e.byteLength,r=0,n=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+n},this.loadWord=function(){var i=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");a.set(e.subarray(i,i+s)),r=new DataView(a.buffer).getUint32(0),n=8*s,t-=s},this.skipBits=function(e){var i;n>e?(r<<=e,n-=e):(e-=n,e-=8*(i=Math.floor(e/8)),t-=i,this.loadWord(),r<<=e,n-=e)},this.readBits=function(e){var i=Math.min(n,e),a=r>>>32-i;return(n-=i)>0?r<<=i:t>0&&this.loadWord(),(i=e-i)>0?a<<i|this.readBits(i):a},this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e)if(0!=(r&2147483648>>>e))return r<<=e,n-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},e.exports=t},1961:e=>{"use strict";var t=function(){this.init=function(){var e={};this.on=function(t,r){e[t]||(e[t]=[]),e[t]=e[t].concat(r)},this.off=function(t,r){var n;return!!e[t]&&(n=e[t].indexOf(r),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var r,n,i,a;if(r=e[t])if(2===arguments.length)for(i=r.length,n=0;n<i;++n)r[n].call(this,arguments[1]);else{for(a=[],n=arguments.length,n=1;n<arguments.length;++n)a.push(arguments[n]);for(i=r.length,n=0;n<i;++n)r[n].apply(this,a)}},this.dispose=function(){e={}}}};t.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),e},t.prototype.push=function(e){this.trigger("data",e)},t.prototype.flush=function(e){this.trigger("done",e)},e.exports=t},9122:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8314),a=r(7376),s=function(e){function t(t){e.call(this),this._value=t}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new a.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(i.Subject);t.BehaviorSubject=s},7056:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r,n){e.call(this),this.parent=t,this.outerValue=r,this.outerIndex=n,this.index=0}return n(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(r(5239).Subscriber);t.InnerSubscriber=i},8270:(e,t,r)=>{"use strict";var n=r(5100),i=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return n.Observable.of(this.value);case"E":return n.Observable.throw(this.error);case"C":return n.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):this.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return this.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();t.Notification=i},5100:(e,t,r)=>{"use strict";var n=r(7919),i=r(9510),a=r(683),s=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,a=i.toSubscriber(e,t,r);if(n?n.call(a,this.source):a.add(this._trySubscribe(a)),a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var r=this;if(t||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?t=n.root.Rx.config.Promise:n.root.Promise&&(t=n.root.Promise)),!t)throw new Error("no Promise impl found");return new t((function(t,n){var i;i=r.subscribe((function(t){if(i)try{e(t)}catch(e){n(e),i.unsubscribe()}else e(t)}),n,t)}))},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[a.observable]=function(){return this},e.create=function(t){return new e(t)},e}();t.Observable=s},2320:(e,t)=>{"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},3147:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(r(5239).Subscriber);t.OuterSubscriber=i},7875:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8314),a=r(9082),s=r(4859),o=r(1073),u=r(7376),c=r(3189),l=function(e){function t(t,r,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=n,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=r<1?1:r}return n(t,e),t.prototype.next=function(t){var r=this._getNow();this._events.push(new d(r,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,r=this._trimBufferThenGetEvents(),n=this.scheduler;if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError||this.isStopped?t=s.Subscription.EMPTY:(this.observers.push(e),t=new c.SubjectSubscription(this,e)),n&&e.add(e=new o.ObserveOnSubscriber(e,n));for(var i=r.length,a=0;a<i&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||a.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,a=0;a<i&&!(e-n[a].time<r);)a++;return i>t&&(a=Math.max(a,i-t)),a>0&&n.splice(0,a),n},t}(i.Subject);t.ReplaySubject=l;var d=function(e,t){this.time=e,this.value=t}},3422:(e,t)=>{"use strict";var r=function(){function e(t,r){void 0===r&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();t.Scheduler=r},8314:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),a=r(5239),s=r(4859),o=r(7376),u=r(3189),c=r(2992),l=function(e){function t(t){e.call(this,t),this.destination=t}return n(t,e),t}(a.Subscriber);t.SubjectSubscriber=l;var d=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return n(t,e),t.prototype[c.rxSubscriber]=function(){return new l(this)},t.prototype.lift=function(e){var t=new h(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new o.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new o.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new o.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new o.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new o.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(e.complete(),s.Subscription.EMPTY):(this.observers.push(e),new u.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new h(e,t)},t}(i.Observable);t.Subject=d;var h=function(e){function t(t,r){e.call(this),this.destination=t,this.source=r}return n(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):s.Subscription.EMPTY},t}(d);t.AnonymousSubject=h},3189:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r){e.call(this),this.subject=t,this.subscriber=r,this.closed=!1}return n(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(r(4859).Subscription);t.SubjectSubscription=i},5239:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(1404),a=r(4859),s=r(2320),o=r(2992),u=function(e){function t(r,n,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!r){this.destination=s.empty;break}if("object"==typeof r){r instanceof t?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,r,n,i)}}return n(t,e),t.prototype[o.rxSubscriber]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(a.Subscription);t.Subscriber=u;var c=function(e){function t(t,r,n,a){var o;e.call(this),this._parentSubscriber=t;var u=this;i.isFunction(r)?o=r:r&&(o=r.next,n=r.error,a=r.complete,r!==s.empty&&(u=Object.create(r),i.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=o,this._error=n,this._complete=a}return n(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){if(!this.isStopped){var e=this._parentSubscriber;this._complete?e.syncErrorThrowable?(this.__tryOrSetError(e,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},4859:(e,t,r)=>{"use strict";var n=r(5936),i=r(7620),a=r(1404),s=r(6447),o=r(4456),u=r(6288),c=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var r=this,c=r._parent,d=r._parents,h=r._unsubscribe,p=r._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,m=d?d.length:0;c;)c.remove(this),c=++f<m&&d[f]||null;if(a.isFunction(h))s.tryCatch(h).call(this)===o.errorObject&&(t=!0,e=e||(o.errorObject.e instanceof u.UnsubscriptionError?l(o.errorObject.e.errors):[o.errorObject.e]));if(n.isArray(p))for(f=-1,m=p.length;++f<m;){var g=p[f];if(i.isObject(g))if(s.tryCatch(g.unsubscribe).call(g)===o.errorObject){t=!0,e=e||[];var y=o.errorObject.e;y instanceof u.UnsubscriptionError?e=e.concat(l(y.errors)):e.push(y)}}if(t)throw new u.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var r=t;switch(typeof t){case"function":r=new e(t);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.prototype._addParent=function(e){var t=this._parent,r=this._parents;t&&t!==e?r?-1===r.indexOf(e)&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=((t=new e).closed=!0,t),e}();function l(e){return e.reduce((function(e,t){return e.concat(t instanceof u.UnsubscriptionError?t.errors:t)}),[])}t.Subscription=c},2761:(e,t,r)=>{"use strict";var n=r(5100),i=r(1071);n.Observable.combineLatest=i.combineLatest},3810:(e,t,r)=>{"use strict";var n=r(5100),i=r(5167);n.Observable.concat=i.concat},7492:(e,t,r)=>{"use strict";var n=r(5100),i=r(6256);n.Observable.empty=i.empty},4115:(e,t,r)=>{"use strict";var n=r(5100),i=r(7038);n.Observable.from=i.from},496:(e,t,r)=>{"use strict";var n=r(5100),i=r(9126);n.Observable.fromEvent=i.fromEvent},3705:(e,t,r)=>{"use strict";var n=r(5100),i=r(9535);n.Observable.fromEventPattern=i.fromEventPattern},6651:(e,t,r)=>{"use strict";var n=r(5100),i=r(8808);n.Observable.fromPromise=i.fromPromise},6514:(e,t,r)=>{"use strict";var n=r(5100),i=r(1775);n.Observable.interval=i.interval},757:(e,t,r)=>{"use strict";var n=r(5100),i=r(3943);n.Observable.merge=i.merge},4005:(e,t,r)=>{"use strict";var n=r(5100),i=r(4403);n.Observable.never=i.never},8713:(e,t,r)=>{"use strict";var n=r(5100),i=r(9325);n.Observable.of=i.of},8678:(e,t,r)=>{"use strict";var n=r(5100),i=r(1208);n.Observable.race=i.raceStatic},7049:(e,t,r)=>{"use strict";var n=r(5100),i=r(1344);n.Observable.throw=i._throw},3538:(e,t,r)=>{"use strict";var n=r(5100),i=r(4903);n.Observable.timer=i.timer},7701:(e,t,r)=>{"use strict";var n=r(5100),i=r(5545);n.Observable.zip=i.zip},242:(e,t,r)=>{"use strict";var n=r(5100),i=r(4402);n.Observable.prototype.buffer=i.buffer},2433:(e,t,r)=>{"use strict";var n=r(5100),i=r(4824);n.Observable.prototype.catch=i._catch,n.Observable.prototype._catch=i._catch},1354:(e,t,r)=>{"use strict";var n=r(5100),i=r(3339);n.Observable.prototype.combineLatest=i.combineLatest},9794:(e,t,r)=>{"use strict";var n=r(5100),i=r(8311);n.Observable.prototype.concat=i.concat},2743:(e,t,r)=>{"use strict";var n=r(5100),i=r(6358);n.Observable.prototype.delay=i.delay},2276:(e,t,r)=>{"use strict";var n=r(5100),i=r(2339);n.Observable.prototype.distinct=i.distinct},1639:(e,t,r)=>{"use strict";var n=r(5100),i=r(5275);n.Observable.prototype.distinctUntilChanged=i.distinctUntilChanged},6165:(e,t,r)=>{"use strict";var n=r(5100),i=r(1490);n.Observable.prototype.do=i._do,n.Observable.prototype._do=i._do},7775:(e,t,r)=>{"use strict";var n=r(5100),i=r(2044);n.Observable.prototype.filter=i.filter},5285:(e,t,r)=>{"use strict";var n=r(5100),i=r(8616);n.Observable.prototype.first=i.first},5251:(e,t,r)=>{"use strict";var n=r(5100),i=r(7774);n.Observable.prototype.let=i.letProto,n.Observable.prototype.letBind=i.letProto},6771:(e,t,r)=>{"use strict";var n=r(5100),i=r(9987);n.Observable.prototype.map=i.map},6261:(e,t,r)=>{"use strict";var n=r(5100),i=r(1727);n.Observable.prototype.mapTo=i.mapTo},7537:(e,t,r)=>{"use strict";var n=r(5100),i=r(4039);n.Observable.prototype.merge=i.merge},8788:(e,t,r)=>{"use strict";var n=r(5100),i=r(493);n.Observable.prototype.mergeMap=i.mergeMap,n.Observable.prototype.flatMap=i.mergeMap},3449:(e,t,r)=>{"use strict";var n=r(5100),i=r(5760);n.Observable.prototype.flatMapTo=i.mergeMapTo,n.Observable.prototype.mergeMapTo=i.mergeMapTo},6593:(e,t,r)=>{"use strict";var n=r(5100),i=r(6064);n.Observable.prototype.mergeScan=i.mergeScan},8321:(e,t,r)=>{"use strict";var n=r(5100),i=r(1786);n.Observable.prototype.pairwise=i.pairwise},60:(e,t,r)=>{"use strict";var n=r(5100),i=r(1686);n.Observable.prototype.partition=i.partition},1082:(e,t,r)=>{"use strict";var n=r(5100),i=r(5490);n.Observable.prototype.pluck=i.pluck},6679:(e,t,r)=>{"use strict";var n=r(5100),i=r(9916);n.Observable.prototype.publish=i.publish},2417:(e,t,r)=>{"use strict";var n=r(5100),i=r(7634);n.Observable.prototype.publishBehavior=i.publishBehavior},6873:(e,t,r)=>{"use strict";var n=r(5100),i=r(8563);n.Observable.prototype.publishReplay=i.publishReplay},3502:(e,t,r)=>{"use strict";var n=r(5100),i=r(7733);n.Observable.prototype.reduce=i.reduce},4507:(e,t,r)=>{"use strict";var n=r(5100),i=r(151);n.Observable.prototype.sampleTime=i.sampleTime},5532:(e,t,r)=>{"use strict";var n=r(5100),i=r(8076);n.Observable.prototype.scan=i.scan},2285:(e,t,r)=>{"use strict";var n=r(5100),i=r(5192);n.Observable.prototype.share=i.share},6095:(e,t,r)=>{"use strict";var n=r(5100),i=r(7232);n.Observable.prototype.skip=i.skip},2821:(e,t,r)=>{"use strict";var n=r(5100),i=r(8225);n.Observable.prototype.skipUntil=i.skipUntil},3187:(e,t,r)=>{"use strict";var n=r(5100),i=r(775);n.Observable.prototype.skipWhile=i.skipWhile},8316:(e,t,r)=>{"use strict";var n=r(5100),i=r(341);n.Observable.prototype.startWith=i.startWith},1544:(e,t,r)=>{"use strict";var n=r(5100),i=r(9318);n.Observable.prototype.switchMap=i.switchMap},7619:(e,t,r)=>{"use strict";var n=r(5100),i=r(9881);n.Observable.prototype.switchMapTo=i.switchMapTo},1498:(e,t,r)=>{"use strict";var n=r(5100),i=r(4545);n.Observable.prototype.take=i.take},8409:(e,t,r)=>{"use strict";var n=r(5100),i=r(1305);n.Observable.prototype.takeUntil=i.takeUntil},600:(e,t,r)=>{"use strict";var n=r(5100),i=r(4686);n.Observable.prototype.takeWhile=i.takeWhile},9739:(e,t,r)=>{"use strict";var n=r(5100),i=r(2508);n.Observable.prototype.throttleTime=i.throttleTime},279:(e,t,r)=>{"use strict";var n=r(5100),i=r(9090);n.Observable.prototype.withLatestFrom=i.withLatestFrom},8391:(e,t,r)=>{"use strict";var n=r(5100),i=r(8655);n.Observable.prototype.zip=i.zipProto},1235:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),a=r(4819),s=r(9735),o=function(e){function t(t,r){e.call(this),this.arrayLike=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(t,e),t.create=function(e,r){var n=e.length;return 0===n?new s.EmptyObservable:1===n?new a.ScalarObservable(e[0],r):new t(e,r)},t.dispatch=function(e){var t=e.arrayLike,r=e.index,n=e.length,i=e.subscriber;i.closed||(r>=n?i.complete():(i.next(t[r]),e.index=r+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.arrayLike,n=this.scheduler,i=r.length;if(n)return n.schedule(t.dispatch,0,{arrayLike:r,index:0,length:i,subscriber:e});for(var a=0;a<i&&!e.closed;a++)e.next(r[a]);e.complete()},t}(i.Observable);t.ArrayLikeObservable=o},3418:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),a=r(4819),s=r(9735),o=r(93),u=function(e){function t(t,r){e.call(this),this.array=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(t,e),t.create=function(e,r){return new t(e,r)},t.of=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var n=e[e.length-1];o.isScheduler(n)?e.pop():n=null;var i=e.length;return i>1?new t(e,n):1===i?new a.ScalarObservable(e[0],n):new s.EmptyObservable(n)},t.dispatch=function(e){var t=e.array,r=e.index,n=e.count,i=e.subscriber;r>=n?i.complete():(i.next(t[r]),i.closed||(e.index=r+1,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.array,n=r.length,i=this.scheduler;if(i)return i.schedule(t.dispatch,0,{array:r,index:0,count:n,subscriber:e});for(var a=0;a<n&&!e.closed;a++)e.next(r[a]);e.complete()},t}(i.Observable);t.ArrayObservable=u},8852:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8314),a=r(5100),s=r(5239),o=r(4859),u=function(e){function t(t,r){e.call(this),this.source=t,this.subjectFactory=r,this._refCount=0}return n(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||((e=this._connection=new o.Subscription).add(this.source.subscribe(new c(this.getSubject(),this))),e.closed?(this._connection=null,e=o.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return this.lift(new l(this))},t}(a.Observable);t.ConnectableObservable=u,t.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:u.prototype._subscribe},getSubject:{value:u.prototype.getSubject},connect:{value:u.prototype.connect},refCount:{value:u.prototype.refCount}};var c=function(e){function t(t,r){e.call(this,t),this.connectable=r}return n(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.SubjectSubscriber),l=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new d(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i},e}(),d=function(e){function t(t,r){e.call(this,t),this.connectable=r}return n(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(s.Subscriber)},9735:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t){e.call(this),this.scheduler=t}return n(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){e.subscriber.complete()},t.prototype._subscribe=function(e){var r=this.scheduler;if(r)return r.schedule(t.dispatch,0,{subscriber:e});e.complete()},t}(r(5100).Observable);t.EmptyObservable=i},4521:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r){e.call(this),this.error=t,this.scheduler=r}return n(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.error;e.subscriber.error(t)},t.prototype._subscribe=function(e){var r=this.error,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{error:r,subscriber:e});e.error(r)},t}(r(5100).Observable);t.ErrorObservable=i},9483:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),a=r(6447),s=r(1404),o=r(4456),u=r(4859),c=Object.prototype.toString;var l=function(e){function t(t,r,n,i){e.call(this),this.sourceObj=t,this.eventName=r,this.selector=n,this.options=i}return n(t,e),t.create=function(e,r,n,i){return s.isFunction(n)&&(i=n,n=void 0),new t(e,r,i,n)},t.setupSubscription=function(e,r,n,i,a){var s;if(function(e){return!!e&&"[object NodeList]"===c.call(e)}(e)||function(e){return!!e&&"[object HTMLCollection]"===c.call(e)}(e))for(var o=0,l=e.length;o<l;o++)t.setupSubscription(e[o],r,n,i,a);else if(function(e){return!!e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var d=e;e.addEventListener(r,n,a),s=function(){return d.removeEventListener(r,n)}}else if(function(e){return!!e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var h=e;e.on(r,n),s=function(){return h.off(r,n)}}else{if(!function(e){return!!e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e))throw new TypeError("Invalid event target");var p=e;e.addListener(r,n),s=function(){return p.removeListener(r,n)}}i.add(new u.Subscription(s))},t.prototype._subscribe=function(e){var r=this.sourceObj,n=this.eventName,i=this.options,s=this.selector,u=s?function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=a.tryCatch(s).apply(void 0,t);n===o.errorObject?e.error(o.errorObject.e):e.next(n)}:function(t){return e.next(t)};t.setupSubscription(r,n,u,e,i)},t}(i.Observable);t.FromEventObservable=l},3083:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(1404),a=r(5100),s=r(4859),o=function(e){function t(t,r,n){e.call(this),this.addHandler=t,this.removeHandler=r,this.selector=n}return n(t,e),t.create=function(e,r,n){return new t(e,r,n)},t.prototype._subscribe=function(e){var t=this,r=this.removeHandler,n=this.selector?function(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];t._callSelector(e,r)}:function(t){e.next(t)},a=this._callAddHandler(n,e);i.isFunction(r)&&e.add(new s.Subscription((function(){r(n,a)})))},t.prototype._callSelector=function(e,t){try{var r=this.selector.apply(this,t);e.next(r)}catch(t){e.error(t)}},t.prototype._callAddHandler=function(e,t){try{return this.addHandler(e)||null}catch(e){t.error(e)}},t}(a.Observable);t.FromEventPatternObservable=o},7305:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5936),a=r(2900),s=r(338),o=r(6694),u=r(8770),c=r(3418),l=r(1235),d=r(5810),h=r(5100),p=r(1073),f=r(683),m=function(e){function t(t,r){e.call(this,null),this.ish=t,this.scheduler=r}return n(t,e),t.create=function(e,r){if(null!=e){if("function"==typeof e[f.observable])return e instanceof h.Observable&&!r?e:new t(e,r);if(i.isArray(e))return new c.ArrayObservable(e,r);if(s.isPromise(e))return new o.PromiseObservable(e,r);if("function"==typeof e[d.iterator]||"string"==typeof e)return new u.IteratorObservable(e,r);if(a.isArrayLike(e))return new l.ArrayLikeObservable(e,r)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")},t.prototype._subscribe=function(e){var t=this.ish,r=this.scheduler;return null==r?t[f.observable]().subscribe(e):t[f.observable]().subscribe(new p.ObserveOnSubscriber(e,r,0))},t}(h.Observable);t.FromObservable=m},1763:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3523),a=r(5100),s=r(8404),o=function(e){function t(t,r){void 0===t&&(t=0),void 0===r&&(r=s.async),e.call(this),this.period=t,this.scheduler=r,(!i.isNumeric(t)||t<0)&&(this.period=0),r&&"function"==typeof r.schedule||(this.scheduler=s.async)}return n(t,e),t.create=function(e,r){return void 0===e&&(e=0),void 0===r&&(r=s.async),new t(e,r)},t.dispatch=function(e){var t=e.index,r=e.subscriber,n=e.period;r.next(t),r.closed||(e.index+=1,this.schedule(e,n))},t.prototype._subscribe=function(e){var r=this.period,n=this.scheduler;e.add(n.schedule(t.dispatch,r,{index:0,subscriber:e,period:r}))},t}(a.Observable);t.IntervalObservable=o},8770:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(7919),a=r(5100),s=r(5810),o=function(e){function t(t,r){if(e.call(this),this.scheduler=r,null==t)throw new Error("iterator cannot be null.");this.iterator=function(e){var t=e[s.iterator];if(!t&&"string"==typeof e)return new u(e);if(!t&&void 0!==e.length)return new c(e);if(!t)throw new TypeError("object is not iterable");return e[s.iterator]()}(t)}return n(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.index,r=e.hasError,n=e.iterator,i=e.subscriber;if(r)i.error(e.error);else{var a=n.next();a.done?i.complete():(i.next(a.value),e.index=t+1,i.closed?"function"==typeof n.return&&n.return():this.schedule(e))}},t.prototype._subscribe=function(e){var r=this.iterator,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{index:0,iterator:r,subscriber:e});for(;;){var i=r.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed){"function"==typeof r.return&&r.return();break}}},t}(a.Observable);t.IteratorObservable=o;var u=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length),this.str=e,this.idx=t,this.len=r}return e.prototype[s.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},e}(),c=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=function(e){var t=+e.length;if(isNaN(t))return 0;if(0===t||(r=t,"number"!=typeof r||!i.root.isFinite(r)))return t;var r;if((t=function(e){var t=+e;if(0===t)return t;if(isNaN(t))return t;return t<0?-1:1}(t)*Math.floor(Math.abs(t)))<=0)return 0;if(t>l)return l;return t}(e)),this.arr=e,this.idx=t,this.len=r}return e.prototype[s.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},e}();var l=Math.pow(2,53)-1},5659:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5100),a=r(4985),s=function(e){function t(){e.call(this)}return n(t,e),t.create=function(){return new t},t.prototype._subscribe=function(e){a.noop()},t}(i.Observable);t.NeverObservable=s},6694:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(7919),a=function(e){function t(t,r){e.call(this),this.promise=t,this.scheduler=r}return n(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t=this,r=this.promise,n=this.scheduler;if(null==n)this._isScalar?e.closed||(e.next(this.value),e.complete()):r.then((function(r){t.value=r,t._isScalar=!0,e.closed||(e.next(r),e.complete())}),(function(t){e.closed||e.error(t)})).then(null,(function(e){i.root.setTimeout((function(){throw e}))}));else if(this._isScalar){if(!e.closed)return n.schedule(s,0,{value:this.value,subscriber:e})}else r.then((function(r){t.value=r,t._isScalar=!0,e.closed||e.add(n.schedule(s,0,{value:r,subscriber:e}))}),(function(t){e.closed||e.add(n.schedule(o,0,{err:t,subscriber:e}))})).then(null,(function(e){i.root.setTimeout((function(){throw e}))}))},t}(r(5100).Observable);function s(e){var t=e.value,r=e.subscriber;r.closed||(r.next(t),r.complete())}function o(e){var t=e.err,r=e.subscriber;r.closed||r.error(t)}t.PromiseObservable=a},4819:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r){e.call(this),this.value=t,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return n(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.done,r=e.value,n=e.subscriber;t?n.complete():(n.next(r),n.closed||(e.done=!0,this.schedule(e)))},t.prototype._subscribe=function(e){var r=this.value,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{done:!1,value:r,subscriber:e});e.next(r),e.closed||e.complete()},t}(r(5100).Observable);t.ScalarObservable=i},2453:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3523),a=r(5100),s=r(8404),o=r(93),u=r(1589),c=function(e){function t(t,r,n){void 0===t&&(t=0),e.call(this),this.period=-1,this.dueTime=0,i.isNumeric(r)?this.period=Number(r)<1?1:Number(r):o.isScheduler(r)&&(n=r),o.isScheduler(n)||(n=s.async),this.scheduler=n,this.dueTime=u.isDate(t)?+t-this.scheduler.now():t}return n(t,e),t.create=function(e,r,n){return void 0===e&&(e=0),new t(e,r,n)},t.dispatch=function(e){var t=e.index,r=e.period,n=e.subscriber;if(n.next(t),!n.closed){if(-1===r)return n.complete();e.index=t+1,this.schedule(e,r)}},t.prototype._subscribe=function(e){var r=this,n=r.period,i=r.dueTime;return r.scheduler.schedule(t.dispatch,i,{index:0,period:n,subscriber:e})},t}(a.Observable);t.TimerObservable=c},1071:(e,t,r)=>{"use strict";var n=r(93),i=r(5936),a=r(3418),s=r(3339);t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null,o=null;return n.isScheduler(e[e.length-1])&&(o=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&i.isArray(e[0])&&(e=e[0]),new a.ArrayObservable(e,o).lift(new s.CombineLatestOperator(r))}},5167:(e,t,r)=>{"use strict";var n=r(8311);t.concat=n.concatStatic},6256:(e,t,r)=>{"use strict";var n=r(9735);t.empty=n.EmptyObservable.create},7038:(e,t,r)=>{"use strict";var n=r(7305);t.from=n.FromObservable.create},9126:(e,t,r)=>{"use strict";var n=r(9483);t.fromEvent=n.FromEventObservable.create},9535:(e,t,r)=>{"use strict";var n=r(3083);t.fromEventPattern=n.FromEventPatternObservable.create},8808:(e,t,r)=>{"use strict";var n=r(6694);t.fromPromise=n.PromiseObservable.create},1775:(e,t,r)=>{"use strict";var n=r(1763);t.interval=n.IntervalObservable.create},3943:(e,t,r)=>{"use strict";var n=r(4039);t.merge=n.mergeStatic},4403:(e,t,r)=>{"use strict";var n=r(5659);t.never=n.NeverObservable.create},9325:(e,t,r)=>{"use strict";var n=r(3418);t.of=n.ArrayObservable.of},1344:(e,t,r)=>{"use strict";var n=r(4521);t._throw=n.ErrorObservable.create},4903:(e,t,r)=>{"use strict";var n=r(2453);t.timer=n.TimerObservable.create},5545:(e,t,r)=>{"use strict";var n=r(8655);t.zip=n.zipStatic},4402:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),a=r(8794);t.buffer=function(e){return this.lift(new s(e))};var s=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.closingNotifier))},e}(),o=function(e){function t(t,r){e.call(this,t),this.buffer=[],this.add(a.subscribeToResult(this,r))}return n(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(e,t,r,n,i){var a=this.buffer;this.buffer=[],this.destination.next(a)},t}(i.OuterSubscriber)},4824:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),a=r(8794);t._catch=function(e){var t=new s(e),r=this.lift(t);return t.caught=r};var s=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.selector,this.caught))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.selector=r,this.caught=n}return n(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=void 0;try{r=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),this.add(a.subscribeToResult(this,r))}},t}(i.OuterSubscriber)},3339:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3418),a=r(5936),s=r(3147),o=r(8794),u={};t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&a.isArray(e[0])&&(e=e[0].slice()),e.unshift(this),this.lift.call(new i.ArrayObservable(e),new c(r))};var c=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.project))},e}();t.CombineLatestOperator=c;var l=function(e){function t(t,r){e.call(this,t),this.project=r,this.active=0,this.values=[],this.observables=[]}return n(t,e),t.prototype._next=function(e){this.values.push(u),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add(o.subscribeToResult(this,n,n,r))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){var a=this.values,s=a[r],o=this.toRespond?s===u?--this.toRespond:this.toRespond:0;a[r]=t,0===o&&(this.project?this._tryProject(a):this.destination.next(a.slice()))},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(s.OuterSubscriber);t.CombineLatestSubscriber=l},8311:(e,t,r)=>{"use strict";var n=r(5100),i=r(93),a=r(3418),s=r(895);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null,o=e;return i.isScheduler(o[e.length-1])&&(r=o.pop()),null===r&&1===e.length&&e[0]instanceof n.Observable?e[0]:new a.ArrayObservable(e,r).lift(new s.MergeAllOperator(1))}t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(o.apply(void 0,[this].concat(e)))},t.concatStatic=o},6358:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8404),a=r(1589),s=r(5239),o=r(8270);t.delay=function(e,t){void 0===t&&(t=i.async);var r=a.isDate(e)?+e-t.now():Math.abs(e);return this.lift(new u(r,t))};var u=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.delay,this.scheduler))},e}(),c=function(e){function t(t,r,n){e.call(this,t),this.delay=r,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}return n(t,e),t.dispatch=function(e){for(var t=e.source,r=t.queue,n=e.scheduler,i=e.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(i);if(r.length>0){var a=Math.max(0,r[0].time-n.now());this.schedule(e,a)}else t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,r=new l(t.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(o.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e)},t.prototype._complete=function(){this.scheduleNotification(o.Notification.createComplete())},t}(s.Subscriber),l=function(e,t){this.time=e,this.notification=t}},2339:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),a=r(8794),s=r(6900);t.distinct=function(e,t){return this.lift(new o(e,t))};var o=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.keySelector,this.flushes))},e}(),u=function(e){function t(t,r,n){e.call(this,t),this.keySelector=r,this.values=new s.Set,n&&this.add(a.subscribeToResult(this,n))}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.values.clear()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,r=this.destination;try{t=this.keySelector(e)}catch(e){return void r.error(e)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var r=this.values;r.has(e)||(r.add(e),this.destination.next(t))},t}(i.OuterSubscriber);t.DistinctSubscriber=u},5275:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),a=r(6447),s=r(4456);t.distinctUntilChanged=function(e,t){return this.lift(new o(e,t))};var o=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.compare,this.keySelector))},e}(),u=function(e){function t(t,r,n){e.call(this,t),this.keySelector=n,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}return n(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=e;if(this.keySelector&&(t=a.tryCatch(this.keySelector)(e))===s.errorObject)return this.destination.error(s.errorObject.e);var r=!1;if(this.hasKey){if((r=a.tryCatch(this.compare)(this.key,t))===s.errorObject)return this.destination.error(s.errorObject.e)}else this.hasKey=!0;!1===Boolean(r)&&(this.key=t,this.destination.next(e))},t}(i.Subscriber)},1490:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t._do=function(e,t,r){return this.lift(new a(e,t,r))};var a=function(){function e(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.nextOrObserver,this.error,this.complete))},e}(),s=function(e){function t(t,r,n,a){e.call(this,t);var s=new i.Subscriber(r,n,a);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return n(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},t.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(i.Subscriber)},2044:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.filter=function(e,t){return this.lift(new a(e,t))};var a=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.thisArg))},e}(),s=function(e){function t(t,r,n){e.call(this,t),this.predicate=r,this.thisArg=n,this.count=0,this.predicate=r}return n(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(i.Subscriber)},8616:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),a=r(2107);t.first=function(e,t,r){return this.lift(new s(e,t,r,this))};var s=function(){function e(e,t,r,n){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),o=function(e){function t(t,r,n,i,a){e.call(this,t),this.predicate=r,this.resultSelector=n,this.defaultValue=i,this.source=a,this.index=0,this.hasCompleted=!1,this._emitted=!1}return n(t,e),t.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},t.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}r&&this._emit(e,t)},t.prototype._emit=function(e,t){this.resultSelector?this._tryResultSelector(e,t):this._emitFinal(e)},t.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this._emitFinal(r)},t.prototype._emitFinal=function(e){var t=this.destination;this._emitted||(this._emitted=!0,t.next(e),t.complete(),this.hasCompleted=!0)},t.prototype._complete=function(){var e=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||e.error(new a.EmptyError):(e.next(this.defaultValue),e.complete())},t}(i.Subscriber)},7774:(e,t)=>{"use strict";t.letProto=function(e){return e(this)}},9987:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.map=function(e,t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new a(e,t))};var a=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))},e}();t.MapOperator=a;var s=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.count=0,this.thisArg=n||this}return n(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.Subscriber)},1727:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.mapTo=function(e){return this.lift(new a(e))};var a=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.value))},e}(),s=function(e){function t(t,r){e.call(this,t),this.value=r}return n(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(i.Subscriber)},4039:(e,t,r)=>{"use strict";var n=r(5100),i=r(3418),a=r(895),s=r(93);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=Number.POSITIVE_INFINITY,o=null,u=e[e.length-1];return s.isScheduler(u)?(o=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof u&&(r=e.pop()),null===o&&1===e.length&&e[0]instanceof n.Observable?e[0]:new i.ArrayObservable(e,o).lift(new a.MergeAllOperator(r))}t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(o.apply(void 0,[this].concat(e)))},t.mergeStatic=o},895:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),a=r(8794);t.mergeAll=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new s(e))};var s=function(){function e(e){this.concurrent=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.concurrent))},e}();t.MergeAllOperator=s;var o=function(e){function t(t,r){e.call(this,t),this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0}return n(t,e),t.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(a.subscribeToResult(this,e))):this.buffer.push(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber);t.MergeAllSubscriber=o},493:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8794),a=r(3147);t.mergeMap=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof t&&(r=t,t=null),this.lift(new s(e,t,r))};var s=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.project,this.resultSelector,this.concurrent))},e}();t.MergeMapOperator=s;var o=function(e){function t(t,r,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.project=r,this.resultSelector=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){this.add(i.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){this.resultSelector?this._notifyResultSelector(e,t,r,n):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,r,n){var i;try{i=this.resultSelector(e,t,r,n)}catch(e){return void this.destination.error(e)}this.destination.next(i)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(a.OuterSubscriber);t.MergeMapSubscriber=o},5760:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),a=r(8794);t.mergeMapTo=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof t&&(r=t,t=null),this.lift(new s(e,t,r))};var s=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.ish=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.ish,this.resultSelector,this.concurrent))},e}();t.MergeMapToOperator=s;var o=function(e){function t(t,r,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.ish=r,this.resultSelector=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.resultSelector,r=this.index++,n=this.ish,i=this.destination;this.active++,this._innerSub(n,i,t,e,r)}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,r,n,i){this.add(a.subscribeToResult(this,e,n,i))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){var a=this.resultSelector,s=this.destination;a?this.trySelectResult(e,t,r,n):s.next(t)},t.prototype.trySelectResult=function(e,t,r,n){var i,a=this.resultSelector,s=this.destination;try{i=a(e,t,r,n)}catch(e){return void s.error(e)}s.next(i)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber);t.MergeMapToSubscriber=o},6064:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(6447),a=r(4456),s=r(8794),o=r(3147);t.mergeScan=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),this.lift(new u(e,t,r))};var u=function(){function e(e,t,r){this.accumulator=e,this.seed=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.accumulator,this.seed,this.concurrent))},e}();t.MergeScanOperator=u;var c=function(e){function t(t,r,n,i){e.call(this,t),this.accumulator=r,this.acc=n,this.concurrent=i,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,r=i.tryCatch(this.accumulator)(this.acc,e),n=this.destination;r===a.errorObject?n.error(a.errorObject.e):(this.active++,this._innerSub(r,e,t))}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,r){this.add(s.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t.prototype.notifyNext=function(e,t,r,n,i){var a=this.destination;this.acc=t,this.hasValue=!0,a.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(o.OuterSubscriber);t.MergeScanSubscriber=c},900:(e,t,r)=>{"use strict";var n=r(8852);t.multicast=function(e,t){var r;if(r="function"==typeof e?e:function(){return e},"function"==typeof t)return this.lift(new i(r,t));var a=Object.create(this,n.connectableObservableDescriptor);return a.source=this,a.subjectFactory=r,a};var i=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var r=this.selector,n=this.subjectFactory(),i=r(n).subscribe(e);return i.add(t.subscribe(n)),i},e}();t.MulticastOperator=i},1073:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),a=r(8270);t.observeOn=function(e,t){return void 0===t&&(t=0),this.lift(new s(e,t))};var s=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.scheduler,this.delay))},e}();t.ObserveOnOperator=s;var o=function(e){function t(t,r,n){void 0===n&&(n=0),e.call(this,t),this.scheduler=r,this.delay=n}return n(t,e),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new u(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(a.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(a.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(a.Notification.createComplete())},t}(i.Subscriber);t.ObserveOnSubscriber=o;var u=function(e,t){this.notification=e,this.destination=t};t.ObserveOnMessage=u},1786:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.pairwise=function(){return this.lift(new a)};var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t),this.hasPrev=!1}return n(t,e),t.prototype._next=function(e){this.hasPrev?this.destination.next([this.prev,e]):this.hasPrev=!0,this.prev=e},t}(i.Subscriber)},1686:(e,t,r)=>{"use strict";var n=r(1088),i=r(2044);t.partition=function(e,t){return[i.filter.call(this,e,t),i.filter.call(this,n.not(e,t))]}},5490:(e,t,r)=>{"use strict";var n=r(9987);function i(e,t){return function(r){for(var n=r,i=0;i<t;i++){var a=n[e[i]];if(void 0===a)return;n=a}return n}}t.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e.length;if(0===r)throw new Error("list of properties cannot be empty.");return n.map.call(this,i(e,r))}},9916:(e,t,r)=>{"use strict";var n=r(8314),i=r(900);t.publish=function(e){return e?i.multicast.call(this,(function(){return new n.Subject}),e):i.multicast.call(this,new n.Subject)}},7634:(e,t,r)=>{"use strict";var n=r(9122),i=r(900);t.publishBehavior=function(e){return i.multicast.call(this,new n.BehaviorSubject(e))}},8563:(e,t,r)=>{"use strict";var n=r(7875),i=r(900);t.publishReplay=function(e,t,r){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY),i.multicast.call(this,new n.ReplaySubject(e,t,r))}},1208:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5936),a=r(3418),s=r(3147),o=r(8794);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(1===e.length){if(!i.isArray(e[0]))return e[0];e=e[0]}return new a.ArrayObservable(e).lift(new c)}t.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&i.isArray(e[0])&&(e=e[0]),this.lift.call(u.apply(void 0,[this].concat(e)))},t.raceStatic=u;var c=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new l(e))},e}();t.RaceOperator=c;var l=function(e){function t(t){e.call(this,t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return n(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var r=0;r<t&&!this.hasFirst;r++){var n=e[r],i=o.subscribeToResult(this,n,n,r);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,r,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var a=0;a<this.subscriptions.length;a++)if(a!==r){var s=this.subscriptions[a];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(s.OuterSubscriber);t.RaceSubscriber=l},7733:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.reduce=function(e,t){var r=!1;return arguments.length>=2&&(r=!0),this.lift(new a(e,t,r))};var a=function(){function e(e,t,r){void 0===r&&(r=!1),this.accumulator=e,this.seed=t,this.hasSeed=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.accumulator,this.seed,this.hasSeed))},e}();t.ReduceOperator=a;var s=function(e){function t(t,r,n,i){e.call(this,t),this.accumulator=r,this.hasSeed=i,this.index=0,this.hasValue=!1,this.acc=n,this.hasSeed||this.index++}return n(t,e),t.prototype._next=function(e){this.hasValue||(this.hasValue=this.hasSeed)?this._tryReduce(e):(this.acc=e,this.hasValue=!0)},t.prototype._tryReduce=function(e){var t;try{t=this.accumulator(this.acc,e,this.index++)}catch(e){return void this.destination.error(e)}this.acc=t},t.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc),this.destination.complete()},t}(i.Subscriber);t.ReduceSubscriber=s},151:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),a=r(8404);t.sampleTime=function(e,t){return void 0===t&&(t=a.async),this.lift(new s(e,t))};var s=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.period,this.scheduler))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.period=r,this.scheduler=n,this.hasValue=!1,this.add(n.schedule(u,r,{subscriber:this,period:r}))}return n(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(i.Subscriber);function u(e){var t=e.subscriber,r=e.period;t.notifyNext(),this.schedule(e,r)}},8076:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.scan=function(e,t){var r=!1;return arguments.length>=2&&(r=!0),this.lift(new a(e,t,r))};var a=function(){function e(e,t,r){void 0===r&&(r=!1),this.accumulator=e,this.seed=t,this.hasSeed=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.accumulator,this.seed,this.hasSeed))},e}(),s=function(e){function t(t,r,n,i){e.call(this,t),this.accumulator=r,this._seed=n,this.hasSeed=i,this.index=0}return n(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.accumulator(this.seed,e,r)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(i.Subscriber)},5192:(e,t,r)=>{"use strict";var n=r(900),i=r(8314);function a(){return new i.Subject}t.share=function(){return n.multicast.call(this,a).refCount()}},7232:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.skip=function(e){return this.lift(new a(e))};var a=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.total))},e}(),s=function(e){function t(t,r){e.call(this,t),this.total=r,this.count=0}return n(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(i.Subscriber)},8225:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),a=r(8794);t.skipUntil=function(e){return this.lift(new s(e))};var s=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.notifier))},e}(),o=function(e){function t(t,r){e.call(this,t),this.hasValue=!1,this.isInnerStopped=!1,this.add(a.subscribeToResult(this,r))}return n(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype._complete=function(){this.isInnerStopped?e.prototype._complete.call(this):this.unsubscribe()},t.prototype.notifyNext=function(e,t,r,n,i){this.hasValue=!0},t.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&e.prototype._complete.call(this)},t}(i.OuterSubscriber)},775:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.skipWhile=function(e){return this.lift(new a(e))};var a=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate))},e}(),s=function(e){function t(t,r){e.call(this,t),this.predicate=r,this.skipping=!0,this.index=0}return n(t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}},t}(i.Subscriber)},341:(e,t,r)=>{"use strict";var n=r(3418),i=r(4819),a=r(9735),s=r(8311),o=r(93);t.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e[e.length-1];o.isScheduler(r)?e.pop():r=null;var u=e.length;return 1===u?s.concatStatic(new i.ScalarObservable(e[0],r),this):u>1?s.concatStatic(new n.ArrayObservable(e,r),this):s.concatStatic(new a.EmptyObservable(r),this)}},9318:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),a=r(8794);t.switchMap=function(e,t){return this.lift(new s(e,t))};var s=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.project,this.resultSelector))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.project=r,this.resultSelector=n,this.index=0}return n(t,e),t.prototype._next=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){var n=this.innerSubscription;n&&n.unsubscribe(),this.add(this.innerSubscription=a.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,n,i){this.resultSelector?this._tryNotifyNext(e,t,r,n):this.destination.next(t)},t.prototype._tryNotifyNext=function(e,t,r,n){var i;try{i=this.resultSelector(e,t,r,n)}catch(e){return void this.destination.error(e)}this.destination.next(i)},t}(i.OuterSubscriber)},9881:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),a=r(8794);t.switchMapTo=function(e,t){return this.lift(new s(e,t))};var s=function(){function e(e,t){this.observable=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.observable,this.resultSelector))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.inner=r,this.resultSelector=n,this.index=0}return n(t,e),t.prototype._next=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),this.add(this.innerSubscription=a.subscribeToResult(this,this.inner,e,this.index++))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,n,i){var a=this.resultSelector,s=this.destination;a?this.tryResultSelector(e,t,r,n):s.next(t)},t.prototype.tryResultSelector=function(e,t,r,n){var i,a=this.resultSelector,s=this.destination;try{i=a(e,t,r,n)}catch(e){return void s.error(e)}s.next(i)},t}(i.OuterSubscriber)},4545:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),a=r(521),s=r(9735);t.take=function(e){return 0===e?new s.EmptyObservable:this.lift(new o(e))};var o=function(){function e(e){if(this.total=e,this.total<0)throw new a.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.total))},e}(),u=function(e){function t(t,r){e.call(this,t),this.total=r,this.count=0}return n(t,e),t.prototype._next=function(e){var t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))},t}(i.Subscriber)},1305:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),a=r(8794);t.takeUntil=function(e){return this.lift(new s(e))};var s=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.notifier))},e}(),o=function(e){function t(t,r){e.call(this,t),this.notifier=r,this.add(a.subscribeToResult(this,r))}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.complete()},t.prototype.notifyComplete=function(){},t}(i.OuterSubscriber)},4686:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239);t.takeWhile=function(e){return this.lift(new a(e))};var a=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate))},e}(),s=function(e){function t(t,r){e.call(this,t),this.predicate=r,this.index=0}return n(t,e),t.prototype._next=function(e){var t,r=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void r.error(e)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var r=this.destination;Boolean(t)?r.next(e):r.complete()},t}(i.Subscriber)},2508:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(5239),a=r(8404);t.throttleTime=function(e,t){return void 0===t&&(t=a.async),this.lift(new s(e,t))};var s=function(){function e(e,t){this.duration=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.duration,this.scheduler))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.duration=r,this.scheduler=n}return n(t,e),t.prototype._next=function(e){this.throttled||(this.add(this.throttled=this.scheduler.schedule(u,this.duration,{subscriber:this})),this.destination.next(e))},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(e.unsubscribe(),this.remove(e),this.throttled=null)},t}(i.Subscriber);function u(e){e.subscriber.clearThrottle()}},9090:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3147),a=r(8794);t.withLatestFrom=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];"function"==typeof t[t.length-1]&&(e=t.pop());var n=t;return this.lift(new s(n,e))};var s=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.observables,this.project))},e}(),o=function(e){function t(t,r,n){e.call(this,t),this.observables=r,this.project=n,this.toRespond=[];var i=r.length;this.values=new Array(i);for(var s=0;s<i;s++)this.toRespond.push(s);for(s=0;s<i;s++){var o=r[s];this.add(a.subscribeToResult(this,o,o,s))}}return n(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.values[r]=t;var a=this.toRespond;if(a.length>0){var s=a.indexOf(r);-1!==s&&a.splice(s,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.OuterSubscriber)},8655:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(3418),a=r(5936),s=r(5239),o=r(3147),u=r(8794),c=r(5810);function l(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e[e.length-1];return"function"==typeof r&&e.pop(),new i.ArrayObservable(e).lift(new d(r))}t.zipProto=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(l.apply(void 0,[this].concat(e)))},t.zipStatic=l;var d=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new h(e,this.project))},e}();t.ZipOperator=d;var h=function(e){function t(t,r,n){void 0===n&&(n=Object.create(null)),e.call(this,t),this.iterators=[],this.active=0,this.project="function"==typeof r?r:null,this.values=n}return n(t,e),t.prototype._next=function(e){var t=this.iterators;a.isArray(e)?t.push(new f(e)):"function"==typeof e[c.iterator]?t.push(new p(e[c.iterator]())):t.push(new m(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(0!==t){this.active=t;for(var r=0;r<t;r++){var n=e[r];n.stillUnsubscribed?this.add(n.subscribe(n,r)):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,r=this.destination,n=0;n<t;n++){if("function"==typeof(s=e[n]).hasValue&&!s.hasValue())return}var i=!1,a=[];for(n=0;n<t;n++){var s,o=(s=e[n]).next();if(s.hasCompleted()&&(i=!0),o.done)return void r.complete();a.push(o.value)}this.project?this._tryProject(a):r.next(a),i&&r.complete()},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(s.Subscriber);t.ZipSubscriber=h;var p=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),f=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[c.iterator]=function(){return this},e.prototype.next=function(e){var t=this.index++,r=this.array;return t<this.length?{value:r[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),m=function(e){function t(t,r,n){e.call(this,t),this.parent=r,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return n(t,e),t.prototype[c.iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return u.subscribeToResult(this,this.observable,this,t)},t}(o.OuterSubscriber)},3896:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r){e.call(this)}return n(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(r(4859).Subscription);t.Action=i},3569:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(2932),a=r(3833),s=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return n(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=a.AnimationFrame.requestAnimationFrame(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(a.AnimationFrame.cancelAnimationFrame(r),t.scheduled=void 0)},t}(i.AsyncAction);t.AnimationFrameAction=s},4737:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(r(884).AsyncScheduler);t.AnimationFrameScheduler=i},2932:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(7919),a=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r,this.pending=!1}return n(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),i.root.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&this.delay===r)return t;i.root.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r=!1,n=void 0;try{this.work(e)}catch(e){r=!0,n=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,n=r.indexOf(this);this.work=null,this.delay=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null))},t}(r(3896).Action);t.AsyncAction=a},884:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return n(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(r(3422).Scheduler);t.AsyncScheduler=i},1807:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return n(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,n):t.flush(this)},t}(r(2932).AsyncAction);t.QueueAction=i},2824:function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(r(884).AsyncScheduler);t.QueueScheduler=i},4401:(e,t,r)=>{"use strict";var n=r(3569),i=r(4737);t.r=new i.AnimationFrameScheduler(n.AnimationFrameAction)},8404:(e,t,r)=>{"use strict";var n=r(2932),i=r(884);t.async=new i.AsyncScheduler(n.AsyncAction)},9082:(e,t,r)=>{"use strict";var n=r(1807),i=r(2824);t.queue=new i.QueueScheduler(n.QueueAction)},5810:(e,t,r)=>{"use strict";var n=r(7919);function i(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var r=e.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=e.Map;if(n)for(var i=Object.getOwnPropertyNames(n.prototype),a=0;a<i.length;++a){var s=i[a];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}t.symbolIteratorPonyfill=i,t.iterator=i(n.root),t.$$iterator=t.iterator},683:(e,t,r)=>{"use strict";var n=r(7919);function i(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}t.getSymbolObservable=i,t.observable=i(n.root),t.$$observable=t.observable},2992:(e,t,r)=>{"use strict";var n=r(7919).root.Symbol;t.rxSubscriber="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},3833:(e,t,r)=>{"use strict";var n=r(7919),i=function(e){e.requestAnimationFrame?(this.cancelAnimationFrame=e.cancelAnimationFrame.bind(e),this.requestAnimationFrame=e.requestAnimationFrame.bind(e)):e.mozRequestAnimationFrame?(this.cancelAnimationFrame=e.mozCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.mozRequestAnimationFrame.bind(e)):e.webkitRequestAnimationFrame?(this.cancelAnimationFrame=e.webkitCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.webkitRequestAnimationFrame.bind(e)):e.msRequestAnimationFrame?(this.cancelAnimationFrame=e.msCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.msRequestAnimationFrame.bind(e)):e.oRequestAnimationFrame?(this.cancelAnimationFrame=e.oCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.oRequestAnimationFrame.bind(e)):(this.cancelAnimationFrame=e.clearTimeout.bind(e),this.requestAnimationFrame=function(t){return e.setTimeout(t,1e3/60)})};t.RequestAnimationFrameDefinition=i,t.AnimationFrame=new i(n.root)},521:function(e,t){"use strict";var r=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=function(e){function t(){var t=e.call(this,"argument out of range");this.name=t.name="ArgumentOutOfRangeError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);t.ArgumentOutOfRangeError=n},2107:function(e,t){"use strict";var r=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=function(e){function t(){var t=e.call(this,"no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);t.EmptyError=n},7376:function(e,t){"use strict";var r=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);t.ObjectUnsubscribedError=n},6900:(e,t,r)=>{"use strict";var n=r(7919);function i(){return function(){function e(){this._values=[]}return e.prototype.add=function(e){this.has(e)||this._values.push(e)},e.prototype.has=function(e){return-1!==this._values.indexOf(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._values.length=0},e}()}t.minimalSetImpl=i,t.Set=n.root.Set||i()},6288:function(e,t){"use strict";var r=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=function(e){function t(t){e.call(this),this.errors=t;var r=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return r(t,e),t}(Error);t.UnsubscriptionError=n},4456:(e,t)=>{"use strict";t.errorObject={e:{}}},5936:(e,t)=>{"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},2900:(e,t)=>{"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length}},1589:(e,t)=>{"use strict";t.isDate=function(e){return e instanceof Date&&!isNaN(+e)}},1404:(e,t)=>{"use strict";t.isFunction=function(e){return"function"==typeof e}},3523:(e,t,r)=>{"use strict";var n=r(5936);t.isNumeric=function(e){return!n.isArray(e)&&e-parseFloat(e)+1>=0}},7620:(e,t)=>{"use strict";t.isObject=function(e){return null!=e&&"object"==typeof e}},338:(e,t)=>{"use strict";t.isPromise=function(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}},93:(e,t)=>{"use strict";t.isScheduler=function(e){return e&&"function"==typeof e.schedule}},4985:(e,t)=>{"use strict";t.noop=function(){}},1088:(e,t)=>{"use strict";t.not=function(e,t){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=e,r.thisArg=t,r}},7919:(e,t)=>{"use strict";if(t.root="object"==typeof window&&window.window===window&&window||"object"==typeof self&&self.self===self&&self||!1,!t.root)throw new Error("RxJS could not find any global context (window, self, global)")},8794:(e,t,r)=>{"use strict";var n=r(7919),i=r(2900),a=r(338),s=r(7620),o=r(5100),u=r(5810),c=r(7056),l=r(683);t.subscribeToResult=function(e,t,r,d){var h=new c.InnerSubscriber(e,r,d);if(h.closed)return null;if(t instanceof o.Observable)return t._isScalar?(h.next(t.value),h.complete(),null):t.subscribe(h);if(i.isArrayLike(t)){for(var p=0,f=t.length;p<f&&!h.closed;p++)h.next(t[p]);h.closed||h.complete()}else{if(a.isPromise(t))return t.then((function(e){h.closed||(h.next(e),h.complete())}),(function(e){return h.error(e)})).then(null,(function(e){n.root.setTimeout((function(){throw e}))})),h;if(t&&"function"==typeof t[u.iterator])for(var m=t[u.iterator]();;){var g=m.next();if(g.done){h.complete();break}if(h.next(g.value),h.closed)break}else if(t&&"function"==typeof t[l.observable]){var y=t[l.observable]();if("function"==typeof y.subscribe)return y.subscribe(new c.InnerSubscriber(e,r,d));h.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var v="You provided "+(s.isObject(t)?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";h.error(new TypeError(v))}}return null}},9510:(e,t,r)=>{"use strict";var n=r(5239),i=r(2992),a=r(2320);t.toSubscriber=function(e,t,r){if(e){if(e instanceof n.Subscriber)return e;if(e[i.rxSubscriber])return e[i.rxSubscriber]()}return e||t||r?new n.Subscriber(e,t,r):new n.Subscriber(a.empty)}},6447:(e,t,r)=>{"use strict";var n,i=r(4456);function a(){try{return n.apply(this,arguments)}catch(e){return i.errorObject.e=e,i.errorObject}}t.tryCatch=function(e){return n=e,a}},9945:function(e){var t,r,n,i,a;t=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/;?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=a.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=a.normalizePath(i.path),a.buildURLFromParts(i)}var s=a.parseURL(t);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return n.alwaysNormalize?(s.path=a.normalizePath(s.path),a.buildURLFromParts(s)):t;var o=a.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var u=r.exec(o.path);o.netLoc=u[1],o.path=u[2]}o.netLoc&&!o.path&&(o.path="/");var c={scheme:o.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(c.netLoc=o.netLoc,"/"!==s.path[0]))if(s.path){var l=o.path,d=l.substring(0,l.lastIndexOf("/")+1)+s.path;c.path=a.normalizePath(d)}else c.path=o.path,s.params||(c.params=o.params,s.query||(c.query=o.query));return null===c.path&&(c.path=n.alwaysNormalize?a.normalizePath(s.path):s.path),a.buildURLFromParts(c)},parseURL:function(e){var r=t.exec(e);return r?{scheme:r[1]||"",netLoc:r[2]||"",path:r[3]||"",params:r[4]||"",query:r[5]||"",fragment:r[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(i,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=a},5387:function(e){
/**
 * @license
 * Video.js 7.2.2 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */
e.exports=function(){var e="7.2.2",t="undefined"!=typeof window?window:"undefined"!=typeof self?self:{};function r(e,t){return e(t={exports:{}},t.exports),t.exports}var n,i="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},a={},s=Object.freeze({default:a}),o=s&&a||s,u=void 0!==t?t:"undefined"!=typeof window?window:{};"undefined"!=typeof document?n=document:(n=u["__GLOBAL_DOCUMENT_CACHE@4"])||(n=u["__GLOBAL_DOCUMENT_CACHE@4"]=o);var c=n,l=void 0,d="info",h=[],p=function(e,t){var r=l.levels[d],n=new RegExp("^("+r+")$");if("log"!==e&&t.unshift(e.toUpperCase()+":"),h&&h.push([].concat(t)),t.unshift("VIDEOJS:"),i.console){var a=i.console[e];a||"debug"!==e||(a=i.console.info||i.console.log),a&&r&&n.test(e)&&a[Array.isArray(t)?"apply":"call"](i.console,t)}};(l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];p("log",t)}).levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:d},l.level=function(e){if("string"==typeof e){if(!l.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');d=e}return d},l.history=function(){return h?[].concat(h):[]},l.history.clear=function(){h&&(h.length=0)},l.history.disable=function(){null!==h&&(h.length=0,h=null)},l.history.enable=function(){null===h&&(h=[])},l.error=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return p("error",t)},l.warn=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return p("warn",t)},l.debug=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return p("debug",t)};var f=l;function m(e){return e.replace(/\n\r?\s*/g,"")}var g=function(e){for(var t="",r=0;r<arguments.length;r++)t+=m(e[r])+(arguments[r+1]||"");return t},y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},b=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},_=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},T=function(e,t){return e.raw=t,e},w=Object.prototype.toString,S=function(e){return O(e)?Object.keys(e):[]};function C(e,t){S(e).forEach((function(r){return t(e[r],r)}))}function k(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return S(e).reduce((function(r,n){return t(r,e[n],n)}),r)}function E(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Object.assign?Object.assign.apply(Object,[e].concat(r)):(r.forEach((function(t){t&&C(t,(function(t,r){e[r]=t}))})),e)}function O(e){return!!e&&"object"===(void 0===e?"undefined":y(e))}function A(e){return O(e)&&"[object Object]"===w.call(e)&&e.constructor===Object}function x(e,t){if(!e||!t)return"";if("function"==typeof i.getComputedStyle){var r=i.getComputedStyle(e);return r?r[t]:""}return""}var P=T(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);function L(e){return"string"==typeof e&&/\S/.test(e)}function M(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function I(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function D(){return c===i.document}function U(e){return O(e)&&1===e.nodeType}function R(){try{return i.parent!==i.self}catch(e){return!0}}function j(e){return function(t,r){if(!L(t))return c[e](null);L(r)&&(r=c.querySelector(r));var n=U(r)?r:c;return n[e]&&n[e](t)}}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],i=c.createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){var r=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(f.warn(g(P,e,r)),i.setAttribute(e,r)):"textContent"===e?B(i,r):i[e]=r})),Object.getOwnPropertyNames(r).forEach((function(e){i.setAttribute(e,r[e])})),n&&ie(i,n),i}function B(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function $(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function F(e,t){return M(t),e.classList?e.classList.contains(t):I(t).test(e.className)}function V(e,t){return e.classList?e.classList.add(t):F(e,t)||(e.className=(e.className+" "+t).trim()),e}function H(e,t){return e.classList?e.classList.remove(t):(M(t),e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")),e}function q(e,t,r){var n=F(e,t);if("function"==typeof r&&(r=r(e,t)),"boolean"!=typeof r&&(r=!n),r!==n)return r?V(e,t):H(e,t),e}function z(e,t){Object.getOwnPropertyNames(t).forEach((function(r){var n=t[r];null==n||!1===n?e.removeAttribute(r):e.setAttribute(r,!0===n?"":n)}))}function W(e){var t={},r=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0)for(var n=e.attributes,i=n.length-1;i>=0;i--){var a=n[i].name,s=n[i].value;"boolean"!=typeof e[a]&&-1===r.indexOf(","+a+",")||(s=null!==s),t[a]=s}return t}function G(e,t){return e.getAttribute(t)}function X(e,t,r){e.setAttribute(t,r)}function K(e,t){e.removeAttribute(t)}function Y(){c.body.focus(),c.onselectstart=function(){return!1}}function Q(){c.onselectstart=function(){return!0}}function J(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),r={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(r[e]=t[e])})),r.height||(r.height=parseFloat(x(e,"height"))),r.width||(r.width=parseFloat(x(e,"width"))),r}}function Z(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var r=c.documentElement,n=c.body,a=r.clientLeft||n.clientLeft||0,s=i.pageXOffset||n.scrollLeft,o=t.left+s-a,u=r.clientTop||n.clientTop||0,l=i.pageYOffset||n.scrollTop,d=t.top+l-u;return{left:Math.round(o),top:Math.round(d)}}function ee(e,t){var r={},n=Z(e),i=e.offsetWidth,a=e.offsetHeight,s=n.top,o=n.left,u=t.pageY,c=t.pageX;return t.changedTouches&&(c=t.changedTouches[0].pageX,u=t.changedTouches[0].pageY),r.y=Math.max(0,Math.min(1,(s-u+a)/a)),r.x=Math.max(0,Math.min(1,(c-o)/i)),r}function te(e){return O(e)&&3===e.nodeType}function re(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function ne(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return"function"==typeof e&&(e=e()),U(e)||te(e)?e:"string"==typeof e&&/\S/.test(e)?c.createTextNode(e):void 0})).filter((function(e){return e}))}function ie(e,t){return ne(t).forEach((function(t){return e.appendChild(t)})),e}function ae(e,t){return ie(re(e),t)}function se(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||0===e.button&&1===e.buttons}var oe=j("querySelector"),ue=j("querySelectorAll"),ce=Object.freeze({isReal:D,isEl:U,isInFrame:R,createEl:N,textContent:B,prependTo:$,hasClass:F,addClass:V,removeClass:H,toggleClass:q,setAttributes:z,getAttributes:W,getAttribute:G,setAttribute:X,removeAttribute:K,blockTextSelection:Y,unblockTextSelection:Q,getBoundingClientRect:J,findPosition:Z,getPointerPosition:ee,isTextNode:te,emptyEl:re,normalizeContent:ne,appendContent:ie,insertContent:ae,isSingleLeftClick:se,$:oe,$$:ue}),le=1;function de(){return le++}var he={},pe="vdata"+(new Date).getTime();function fe(e){var t=e[pe];return t||(t=e[pe]=de()),he[t]||(he[t]={}),he[t]}function me(e){var t=e[pe];return!!t&&!!Object.getOwnPropertyNames(he[t]).length}function ge(e){var t=e[pe];if(t){delete he[t];try{delete e[pe]}catch(t){e.removeAttribute?e.removeAttribute(pe):e[pe]=null}}}function ye(e,t){var r=fe(e);0===r.handlers[t].length&&(delete r.handlers[t],e.removeEventListener?e.removeEventListener(t,r.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,r.dispatcher)),Object.getOwnPropertyNames(r.handlers).length<=0&&(delete r.handlers,delete r.dispatcher,delete r.disabled),0===Object.getOwnPropertyNames(r).length&&ge(e)}function ve(e,t,r,n){r.forEach((function(r){e(t,r,n)}))}function be(e){function t(){return!0}function r(){return!1}if(!e||!e.isPropagationStopped){var n=e||i.event;for(var a in e={},n)"layerX"!==a&&"layerY"!==a&&"keyLocation"!==a&&"webkitMovementX"!==a&&"webkitMovementY"!==a&&("returnValue"===a&&n.preventDefault||(e[a]=n[a]));if(e.target||(e.target=e.srcElement||c),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){n.preventDefault&&n.preventDefault(),e.returnValue=!1,n.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),e.cancelBubble=!0,n.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=r,e.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=r,null!==e.clientX&&void 0!==e.clientX){var s=c.documentElement,o=c.body;e.pageX=e.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}var _e=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){_e=!0}});i.addEventListener("test",null,e),i.removeEventListener("test",null,e)}catch(e){}}();var Te=["touchstart","touchmove"];function we(e,t,r){if(Array.isArray(t))return ve(we,e,t,r);var n=fe(e);if(n.handlers||(n.handlers={}),n.handlers[t]||(n.handlers[t]=[]),r.guid||(r.guid=de()),n.handlers[t].push(r),n.dispatcher||(n.disabled=!1,n.dispatcher=function(t,r){if(!n.disabled){t=be(t);var i=n.handlers[t.type];if(i)for(var a=i.slice(0),s=0,o=a.length;s<o&&!t.isImmediatePropagationStopped();s++)try{a[s].call(e,t,r)}catch(e){f.error(e)}}}),1===n.handlers[t].length)if(e.addEventListener){var i=!1;_e&&Te.indexOf(t)>-1&&(i={passive:!0}),e.addEventListener(t,n.dispatcher,i)}else e.attachEvent&&e.attachEvent("on"+t,n.dispatcher)}function Se(e,t,r){if(me(e)){var n=fe(e);if(n.handlers){if(Array.isArray(t))return ve(Se,e,t,r);var i=function(e,t){n.handlers[t]=[],ye(e,t)};if(void 0!==t){var a=n.handlers[t];if(a)if(r){if(r.guid)for(var s=0;s<a.length;s++)a[s].guid===r.guid&&a.splice(s--,1);ye(e,t)}else i(e,t)}else for(var o in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},o)&&i(e,o)}}}function Ce(e,t,r){var n=me(e)?fe(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=be(t),n.dispatcher&&n.dispatcher.call(e,t,r),i&&!t.isPropagationStopped()&&!0===t.bubbles)Ce.call(null,i,t,r);else if(!i&&!t.defaultPrevented){var a=fe(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function ke(e,t,r){if(Array.isArray(t))return ve(ke,e,t,r);var n=function n(){Se(e,t,n),r.apply(this,arguments)};n.guid=r.guid=r.guid||de(),we(e,t,n)}var Ee=Object.freeze({fixEvent:be,on:we,off:Se,trigger:Ce,one:ke}),Oe=!1,Ae=void 0,xe=function(){if(D()&&!1!==Ae.options.autoSetup){var e=Array.prototype.slice.call(c.getElementsByTagName("video")),t=Array.prototype.slice.call(c.getElementsByTagName("audio")),r=Array.prototype.slice.call(c.getElementsByTagName("video-js")),n=e.concat(t,r);if(n&&n.length>0)for(var i=0,a=n.length;i<a;i++){var s=n[i];if(!s||!s.getAttribute){Pe(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&Ae(s)}else Oe||Pe(1)}};function Pe(e,t){t&&(Ae=t),i.setTimeout(xe,e)}D()&&"complete"===c.readyState?Oe=!0:ke(i,"load",(function(){Oe=!0}));var Le=function(e){var t=c.createElement("style");return t.className=e,t},Me=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},Ie=function(e,t,r){t.guid||(t.guid=de());var n=function(){return t.apply(e,arguments)};return n.guid=r?r+"_"+t.guid:t.guid,n},De=function(e,t){var r=Date.now();return function(){var n=Date.now();n-r>=t&&(e.apply(void 0,arguments),r=n)}},Ue=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,a=void 0,s=function(){n.clearTimeout(a),a=null},o=function(){var i=this,s=arguments,o=function(){a=null,o=null,r||e.apply(i,s)};!a&&r&&e.apply(i,s),n.clearTimeout(a),a=n.setTimeout(o,t)};return o.cancel=s,o},Re=function(){};Re.prototype.allowedEvents_={},Re.prototype.on=function(e,t){var r=this.addEventListener;this.addEventListener=function(){},we(this,e,t),this.addEventListener=r},Re.prototype.addEventListener=Re.prototype.on,Re.prototype.off=function(e,t){Se(this,e,t)},Re.prototype.removeEventListener=Re.prototype.off,Re.prototype.one=function(e,t){var r=this.addEventListener;this.addEventListener=function(){},ke(this,e,t),this.addEventListener=r},Re.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=be(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Ce(this,e)},Re.prototype.dispatchEvent=Re.prototype.trigger;var je=void 0;Re.prototype.queueTrigger=function(e){var t=this;je||(je=new Map);var r=e.type||e,n=je.get(this);n||(n=new Map,je.set(this,n));var a=n.get(r);n.delete(r),i.clearTimeout(a);var s=i.setTimeout((function(){0===n.size&&(n=null,je.delete(t)),t.trigger(e)}),0);n.set(r,s)};var Ne=function(e){return e instanceof Re||!!e.eventBusEl_&&["on","one","off","trigger"].every((function(t){return"function"==typeof e[t]}))},Be=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},$e=function(e){if(!e.nodeName&&!Ne(e))throw new Error("Invalid target; must be a DOM node or evented object.")},Fe=function(e){if(!Be(e))throw new Error("Invalid event type; must be a non-empty string or array.")},Ve=function(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")},He=function(e,t){var r=t.length<3||t[0]===e||t[0]===e.eventBusEl_,n=void 0,i=void 0,a=void 0;return r?(n=e.eventBusEl_,t.length>=3&&t.shift(),i=t[0],a=t[1]):(n=t[0],i=t[1],a=t[2]),$e(n),Fe(i),Ve(a),{isTargetingSelf:r,target:n,type:i,listener:a=Ie(e,a)}},qe=function(e,t,r,n){$e(e),e.nodeName?Ee[t](e,r,n):e[t](r,n)},ze={on:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=He(this,r),a=i.isTargetingSelf,s=i.target,o=i.type,u=i.listener;if(qe(s,"on",o,u),!a){var c=function(){return e.off(s,o,u)};c.guid=u.guid;var l=function(){return e.off("dispose",c)};l.guid=u.guid,qe(this,"on","dispose",c),qe(s,"on","dispose",l)}},one:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=He(this,r),a=i.isTargetingSelf,s=i.target,o=i.type,u=i.listener;if(a)qe(s,"one",o,u);else{var c=function t(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];e.off(s,o,t),u.apply(null,n)};c.guid=u.guid,qe(s,"one",o,c)}},off:function(e,t,r){if(!e||Be(e))Se(this.eventBusEl_,e,t);else{var n=e,i=t;$e(n),Fe(i),Ve(r),r=Ie(this,r),this.off("dispose",r),n.nodeName?(Se(n,i,r),Se(n,"dispose",r)):Ne(n)&&(n.off(i,r),n.off("dispose",r))}},trigger:function(e,t){return Ce(this.eventBusEl_,e,t)}};function We(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).eventBusKey;if(t){if(!e[t].nodeName)throw new Error('The eventBusKey "'+t+'" does not refer to an element.');e.eventBusEl_=e[t]}else e.eventBusEl_=N("span",{className:"vjs-event-bus"});return E(e,ze),e.on("dispose",(function(){e.off(),i.setTimeout((function(){e.eventBusEl_=null}),0)})),e}var Ge={state:{},setState:function(e){var t=this;"function"==typeof e&&(e=e());var r=void 0;return C(e,(function(e,n){t.state[n]!==e&&((r=r||{})[n]={from:t.state[n],to:e}),t.state[n]=e})),r&&Ne(this)&&this.trigger({changes:r,type:"statechanged"}),r}};function Xe(e,t){return E(e,Ge),e.state=E({},e.state,t),"function"==typeof e.handleStateChanged&&Ne(e)&&e.on("statechanged",e.handleStateChanged),e}function Ke(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}function Ye(e,t){return Ke(e)===Ke(t)}function Qe(){for(var e={},t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach((function(t){t&&C(t,(function(t,r){A(t)?(A(e[r])||(e[r]={}),e[r]=Qe(e[r],t)):e[r]=t}))})),e}var Je=function(){function e(t,r,n){if(v(this,e),!t&&this.play?this.player_=t=this:this.player_=t,this.options_=Qe({},this.options_),r=this.options_=Qe(this.options_,r),this.id_=r.id||r.el&&r.el.id,!this.id_){var i=t&&t.id&&t.id()||"no_player";this.id_=i+"_component_"+de()}this.name_=r.name||null,r.el?this.el_=r.el:!1!==r.createEl&&(this.el_=this.createEl()),!1!==r.evented&&We(this,{eventBusKey:this.el_?"el_":null}),Xe(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},!1!==r.initChildren&&this.initChildren(),this.ready(n),!1!==r.reportTouchActivity&&this.enableTouchActivity()}return e.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),ge(this.el_),this.el_=null),this.player_=null},e.prototype.player=function(){return this.player_},e.prototype.options=function(e){return f.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e?(this.options_=Qe(this.options_,e),this.options_):this.options_},e.prototype.el=function(){return this.el_},e.prototype.createEl=function(e,t,r){return N(e,t,r)},e.prototype.localize=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),a=i&&i[n],s=n&&n.split("-")[0],o=i&&i[s],u=r;return a&&a[e]?u=a[e]:o&&o[e]&&(u=o[e]),t&&(u=u.replace(/\{(\d+)\}/g,(function(e,r){var n=t[r-1],i=n;return void 0===n&&(i=e),i}))),u},e.prototype.contentEl=function(){return this.contentEl_||this.el_},e.prototype.id=function(){return this.id_},e.prototype.name=function(){return this.name_},e.prototype.children=function(){return this.children_},e.prototype.getChildById=function(e){return this.childIndex_[e]},e.prototype.getChild=function(e){if(e)return e=Ke(e),this.childNameIndex_[e]},e.prototype.addChild=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.children_.length,i=void 0,a=void 0;if("string"==typeof t){a=Ke(t);var s=r.componentClass||a;r.name=a;var o=e.getComponent(s);if(!o)throw new Error("Component "+s+" does not exist");if("function"!=typeof o)return null;i=new o(this.player_||this,r)}else i=t;if(this.children_.splice(n,0,i),"function"==typeof i.id&&(this.childIndex_[i.id()]=i),(a=a||i.name&&Ke(i.name()))&&(this.childNameIndex_[a]=i),"function"==typeof i.el&&i.el()){var u=this.contentEl().children[n]||null;this.contentEl().insertBefore(i.el(),u)}return i},e.prototype.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,r=this.children_.length-1;r>=0;r--)if(this.children_[r]===e){t=!0,this.children_.splice(r,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},e.prototype.initChildren=function(){var t=this,r=this.options_.children;if(r){var n=this.options_,i=function(e){var r=e.name,i=e.opts;if(void 0!==n[r]&&(i=n[r]),!1!==i){!0===i&&(i={}),i.playerOptions=t.options_.playerOptions;var a=t.addChild(r,i);a&&(t[r]=a)}},a=void 0,s=e.getComponent("Tech");(a=Array.isArray(r)?r:Object.keys(r)).concat(Object.keys(this.options_).filter((function(e){return!a.some((function(t){return"string"==typeof t?e===t:e===t.name}))}))).map((function(e){var n=void 0,i=void 0;return"string"==typeof e?i=r[n=e]||t.options_[n]||{}:(n=e.name,i=e),{name:n,opts:i}})).filter((function(t){var r=e.getComponent(t.opts.componentClass||Ke(t.name));return r&&!s.isTech(r)})).forEach(i)}},e.prototype.buildCSSClass=function(){return""},e.prototype.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},e.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)},e.prototype.$=function(e,t){return oe(e,t||this.contentEl())},e.prototype.$$=function(e,t){return ue(e,t||this.contentEl())},e.prototype.hasClass=function(e){return F(this.el_,e)},e.prototype.addClass=function(e){V(this.el_,e)},e.prototype.removeClass=function(e){H(this.el_,e)},e.prototype.toggleClass=function(e,t){q(this.el_,e,t)},e.prototype.show=function(){this.removeClass("vjs-hidden")},e.prototype.hide=function(){this.addClass("vjs-hidden")},e.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")},e.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.prototype.getAttribute=function(e){return G(this.el_,e)},e.prototype.setAttribute=function(e,t){X(this.el_,e,t)},e.prototype.removeAttribute=function(e){K(this.el_,e)},e.prototype.width=function(e,t){return this.dimension("width",e,t)},e.prototype.height=function(e,t){return this.dimension("height",e,t)},e.prototype.dimensions=function(e,t){this.width(e,!0),this.height(t)},e.prototype.dimension=function(e,t,r){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(r||this.trigger("componentresize"));if(!this.el_)return 0;var n=this.el_.style[e],i=n.indexOf("px");return-1!==i?parseInt(n.slice(0,i),10):parseInt(this.el_["offset"+Ke(e)],10)},e.prototype.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof i.getComputedStyle){var r=i.getComputedStyle(this.el_);t=r.getPropertyValue(e)||r[e]}if(0===(t=parseFloat(t))){var n="offset"+Ke(e);t=this.el_[n]}return t},e.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.prototype.currentWidth=function(){return this.currentDimension("width")},e.prototype.currentHeight=function(){return this.currentDimension("height")},e.prototype.focus=function(){this.el_.focus()},e.prototype.blur=function(){this.el_.blur()},e.prototype.emitTapEvents=function(){var e=0,t=null,r=10,n=200,i=void 0;this.on("touchstart",(function(r){1===r.touches.length&&(t={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},e=(new Date).getTime(),i=!0)})),this.on("touchmove",(function(e){if(e.touches.length>1)i=!1;else if(t){var n=e.touches[0].pageX-t.pageX,a=e.touches[0].pageY-t.pageY;Math.sqrt(n*n+a*a)>r&&(i=!1)}}));var a=function(){i=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",(function(r){t=null,!0===i&&(new Date).getTime()-e<n&&(r.preventDefault(),this.trigger("tap"))}))},e.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e=Ie(this.player(),this.player().reportUserActivity),t=void 0;this.on("touchstart",(function(){e(),this.clearInterval(t),t=this.setInterval(e,250)}));var r=function(r){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",r),this.on("touchcancel",r)}},e.prototype.setTimeout=function(e,t){var r,n,a=this;return e=Ie(this,e),r=i.setTimeout((function(){a.off("dispose",n),e()}),t),(n=function(){return a.clearTimeout(r)}).guid="vjs-timeout-"+r,this.on("dispose",n),r},e.prototype.clearTimeout=function(e){i.clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},e.prototype.setInterval=function(e,t){var r=this;e=Ie(this,e);var n=i.setInterval(e,t),a=function(){return r.clearInterval(n)};return a.guid="vjs-interval-"+n,this.on("dispose",a),n},e.prototype.clearInterval=function(e){i.clearInterval(e);var t=function(){};return t.guid="vjs-interval-"+e,this.off("dispose",t),e},e.prototype.requestAnimationFrame=function(e){var t,r,n=this;return this.supportsRaf_?(e=Ie(this,e),t=i.requestAnimationFrame((function(){n.off("dispose",r),e()})),(r=function(){return n.cancelAnimationFrame(t)}).guid="vjs-raf-"+t,this.on("dispose",r),t):this.setTimeout(e,1e3/60)},e.prototype.cancelAnimationFrame=function(e){if(this.supportsRaf_){i.cancelAnimationFrame(e);var t=function(){};return t.guid="vjs-raf-"+e,this.off("dispose",t),e}return this.clearTimeout(e)},e.registerComponent=function(t,r){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var n=e.getComponent("Tech"),i=n&&n.isTech(r),a=e===r||e.prototype.isPrototypeOf(r.prototype);if(i||!a){var s=void 0;throw s=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+t+'"; '+s+".")}t=Ke(t),e.components_||(e.components_={});var o=e.getComponent("Player");if("Player"===t&&o&&o.players){var u=o.players,c=Object.keys(u);if(u&&c.length>0&&c.map((function(e){return u[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=r,r},e.getComponent=function(t){if(t)return t=Ke(t),e.components_&&e.components_[t]?e.components_[t]:void 0},e}();Je.prototype.supportsRaf_="function"==typeof i.requestAnimationFrame&&"function"==typeof i.cancelAnimationFrame,Je.registerComponent("Component",Je);var Ze,et=i.navigator&&i.navigator.userAgent||"",tt=/AppleWebKit\/([\d.]+)/i.exec(et),rt=tt?parseFloat(tt.pop()):null,nt=/iPad/i.test(et),it=/iPhone/i.test(et)&&!nt,at=/iPod/i.test(et),st=it||nt||at,ot=(Ze=et.match(/OS (\d+)_/i))&&Ze[1]?Ze[1]:null,ut=/Android/i.test(et),ct=function(){var e=et.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);return t&&r?parseFloat(e[1]+"."+e[2]):t||null}(),lt=ut&&ct<5&&rt<537,dt=/Firefox/i.test(et),ht=/Edge/i.test(et),pt=!ht&&(/Chrome/i.test(et)||/CriOS/i.test(et)),ft=function(){var e=et.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),mt=function(){var e=/MSIE\s(\d+)\.\d/.exec(et),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(et)&&/rv:11.0/.test(et)&&(t=11),t}(),gt=/Safari/i.test(et)&&!pt&&!ut&&!ht,yt=(gt||st)&&!pt,vt=D()&&("ontouchstart"in i||i.navigator.maxTouchPoints||i.DocumentTouch&&i.document instanceof i.DocumentTouch),bt=Object.freeze({IS_IPAD:nt,IS_IPHONE:it,IS_IPOD:at,IS_IOS:st,IOS_VERSION:ot,IS_ANDROID:ut,ANDROID_VERSION:ct,IS_NATIVE_ANDROID:lt,IS_FIREFOX:dt,IS_EDGE:ht,IS_CHROME:pt,CHROME_VERSION:ft,IE_VERSION:mt,IS_SAFARI:gt,IS_ANY_SAFARI:yt,TOUCH_ENABLED:vt});function _t(e,t,r){if("number"!=typeof t||t<0||t>r)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+r+").")}function Tt(e,t,r,n){return _t(e,n,r.length-1),r[n][t]}function wt(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:Tt.bind(null,"start",0,e),end:Tt.bind(null,"end",1,e)}}function St(e,t){return Array.isArray(e)?wt(e):void 0===e||void 0===t?wt():wt([[e,t]])}function Ct(e,t){var r=0,n=void 0,i=void 0;if(!t)return 0;e&&e.length||(e=St(0,0));for(var a=0;a<e.length;a++)n=e.start(a),(i=e.end(a))>t&&(i=t),r+=i-n;return r/t}for(var kt={},Et=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Ot=Et[0],At=void 0,xt=0;xt<Et.length;xt++)if(Et[xt][1]in c){At=Et[xt];break}if(At)for(var Pt=0;Pt<At.length;Pt++)kt[Ot[Pt]]=At[Pt];function Lt(e){if(e instanceof Lt)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:O(e)&&("number"==typeof e.code&&(this.code=e.code),E(this,e)),this.message||(this.message=Lt.defaultMessages[this.code]||"")}Lt.prototype.code=0,Lt.prototype.message="",Lt.prototype.status=null,Lt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Lt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Mt=0;Mt<Lt.errorTypes.length;Mt++)Lt[Lt.errorTypes[Mt]]=Mt,Lt.prototype[Lt.errorTypes[Mt]]=Mt;var It=Dt;function Dt(e,t){var r,n=null;try{r=JSON.parse(e,t)}catch(e){n=e}return[n,r]}function Ut(e){return null!=e&&"function"==typeof e.then}function Rt(e){Ut(e)&&e.then(null,(function(e){}))}var jt=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(t,r,n){return e[r]&&(t[r]=e[r]),t}),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})},Nt={textTracksToJson:function(e){var t=e.$$("track"),r=Array.prototype.map.call(t,(function(e){return e.track}));return Array.prototype.map.call(t,(function(e){var t=jt(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===r.indexOf(e)})).map(jt))},jsonToTextTracks:function(e,t){return e.forEach((function(e){var r=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((function(e){return r.addCue(e)}))})),t.textTracks()},trackToJson_:jt},Bt="vjs-modal-dialog",$t=27,Ft=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=N("div",{className:Bt+"-content"},{role:"document"}),i.descEl_=N("p",{className:Bt+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),B(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.prototype.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},t.prototype.buildCSSClass=function(){return Bt+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},t.prototype.handleKeyPress=function(e){e.which===$t&&this.closeable()&&this.close()},t.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")},t.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.prototype.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",Ie(this,this.handleKeyPress)),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.prototype.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.prototype.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",Ie(this,this.handleKeyPress)),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.prototype.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,r=this.getChild("closeButton");if(t&&!r){var n=this.contentEl_;this.contentEl_=this.el_,r=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(r,"close",this.close)}!t&&r&&(this.off(r,"close",this.close),this.removeChild(r),r.dispose())}return this.closeable_},t.prototype.fill=function(){this.fillWith(this.content())},t.prototype.fillWith=function(e){var t=this.contentEl(),r=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(t),this.empty(),ae(t,e),this.trigger("modalfill"),n?r.insertBefore(t,n):r.appendChild(t);var i=this.getChild("closeButton");i&&r.appendChild(i.el_)},t.prototype.empty=function(){this.trigger("beforemodalempty"),re(this.contentEl()),this.trigger("modalempty")},t.prototype.content=function(e){return void 0!==e&&(this.content_=e),this.content_},t.prototype.conditionalFocus_=function(){var e=c.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus(),this.on(c,"keydown",this.handleKeyDown))},t.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(c,"keydown",this.handleKeyDown)},t.prototype.handleKeyDown=function(e){if(9===e.which){for(var t=this.focusableEls_(),r=this.el_.querySelector(":focus"),n=void 0,i=0;i<t.length;i++)if(r===t[i]){n=i;break}c.activeElement===this.el_&&(n=0),e.shiftKey&&0===n?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||n!==t.length-1||(t[0].focus(),e.preventDefault())}},t.prototype.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(function(e){return(e instanceof i.HTMLAnchorElement||e instanceof i.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof i.HTMLInputElement||e instanceof i.HTMLSelectElement||e instanceof i.HTMLTextAreaElement||e instanceof i.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof i.HTMLIFrameElement||e instanceof i.HTMLObjectElement||e instanceof i.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")}))},t}(Je);Ft.prototype.options_={pauseOnOpen:!0,temporary:!0},Je.registerComponent("ModalDialog",Ft);var Vt=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];v(this,t);var n=_(this,e.call(this));n.tracks_=[],Object.defineProperty(n,"length",{get:function(){return this.tracks_.length}});for(var i=0;i<r.length;i++)n.addTrack(r[i]);return n}return b(t,e),t.prototype.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},t.prototype.removeTrack=function(e){for(var t=void 0,r=0,n=this.length;r<n;r++)if(this[r]===e){(t=this[r]).off&&t.off(),this.tracks_.splice(r,1);break}t&&this.trigger({track:t,type:"removetrack"})},t.prototype.getTrackById=function(e){for(var t=null,r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===e){t=i;break}}return t},t}(Re);for(var Ht in Vt.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Vt.prototype.allowedEvents_)Vt.prototype["on"+Ht]=null;var qt=function(e,t){for(var r=0;r<e.length;r++)Object.keys(e[r]).length&&t.id!==e[r].id&&(e[r].enabled=!1)},zt=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];v(this,t);for(var n=r.length-1;n>=0;n--)if(r[n].enabled){qt(r,r[n]);break}var i=_(this,e.call(this,r));return i.changing_=!1,i}return b(t,e),t.prototype.addTrack=function(t){var r=this;t.enabled&&qt(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("enabledchange",(function(){r.changing_||(r.changing_=!0,qt(r,t),r.changing_=!1,r.trigger("change"))}))},t}(Vt),Wt=function(e,t){for(var r=0;r<e.length;r++)Object.keys(e[r]).length&&t.id!==e[r].id&&(e[r].selected=!1)},Gt=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];v(this,t);for(var n=r.length-1;n>=0;n--)if(r[n].selected){Wt(r,r[n]);break}var i=_(this,e.call(this,r));return i.changing_=!1,Object.defineProperty(i,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),i}return b(t,e),t.prototype.addTrack=function(t){var r=this;t.selected&&Wt(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("selectedchange",(function(){r.changing_||(r.changing_=!0,Wt(r,t),r.changing_=!1,r.trigger("change"))}))},t}(Vt),Xt=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.addTrack=function(t){e.prototype.addTrack.call(this,t),t.addEventListener("modechange",Ie(this,(function(){this.queueTrigger("change")}))),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",Ie(this,(function(){this.trigger("selectedlanguagechange")})))},t}(Vt),Kt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];v(this,e),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var r=0,n=t.length;r<n;r++)this.addTrackElement_(t[r])}return e.prototype.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},e.prototype.getTrackElementByTrack_=function(e){for(var t=void 0,r=0,n=this.trackElements_.length;r<n;r++)if(e===this.trackElements_[r].track){t=this.trackElements_[r];break}return t},e.prototype.removeTrackElement_=function(e){for(var t=0,r=this.trackElements_.length;t<r;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},e}(),Yt=function(){function e(t){v(this,e),e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}return e.prototype.setCues_=function(e){var t=this.length||0,r=0,n=e.length;this.cues_=e,this.length_=e.length;var i=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<n)for(r=t;r<n;r++)i.call(this,r)},e.prototype.getCueById=function(e){for(var t=null,r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===e){t=i;break}}return t},e}(),Qt={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Jt={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Zt={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},er={disabled:"disabled",hidden:"hidden",showing:"showing"},tr=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,t);var n=_(this,e.call(this)),i={id:r.id||"vjs_track_"+de(),kind:r.kind||"",label:r.label||"",language:r.language||""},a=function(e){Object.defineProperty(n,e,{get:function(){return i[e]},set:function(){}})};for(var s in i)a(s);return n}return b(t,e),t}(Re),rr=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],r=c.createElement("a");r.href=e;var n=""===r.host&&"file:"!==r.protocol,a=void 0;n&&((a=c.createElement("div")).innerHTML='<a href="'+e+'"></a>',r=a.firstChild,a.setAttribute("style","display:none; position:absolute;"),c.body.appendChild(a));for(var s={},o=0;o<t.length;o++)s[t[o]]=r[t[o]];return"http:"===s.protocol&&(s.host=s.host.replace(/:80$/,"")),"https:"===s.protocol&&(s.host=s.host.replace(/:443$/,"")),s.protocol||(s.protocol=i.location.protocol),n&&c.body.removeChild(a),s},nr=function(e){if(!e.match(/^https?:\/\//)){var t=c.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},ir=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(e);if(t)return t.pop().toLowerCase()}return""},ar=function(e){var t=i.location,r=rr(e);return(":"===r.protocol?t.protocol:r.protocol)+r.host!==t.protocol+t.host},sr=Object.freeze({parseUrl:rr,getAbsoluteURL:nr,getFileExtension:ir,isCrossOrigin:ar}),or=cr,ur=Object.prototype.toString;function cr(e){var t=ur.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}var lr=r((function(e,t){function r(e){return e.replace(/^\s*|\s*$/g,"")}(t=e.exports=r).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}})),dr=(lr.left,lr.right,fr),hr=Object.prototype.toString,pr=Object.prototype.hasOwnProperty;function fr(e,t,r){if(!or(t))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this),"[object Array]"===hr.call(e)?mr(e,t,r):"string"==typeof e?gr(e,t,r):yr(e,t,r)}function mr(e,t,r){for(var n=0,i=e.length;n<i;n++)pr.call(e,n)&&t.call(r,e[n],n,e)}function gr(e,t,r){for(var n=0,i=e.length;n<i;n++)t.call(r,e.charAt(n),n,e)}function yr(e,t,r){for(var n in e)pr.call(e,n)&&t.call(r,e[n],n,e)}var vr=function(e){return"[object Array]"===Object.prototype.toString.call(e)},br=function(e){if(!e)return{};var t={};return dr(lr(e).split("\n"),(function(e){var r=e.indexOf(":"),n=lr(e.slice(0,r)).toLowerCase(),i=lr(e.slice(r+1));void 0===t[n]?t[n]=i:vr(t[n])?t[n].push(i):t[n]=[t[n],i]})),t},_r=wr,Tr=Object.prototype.hasOwnProperty;function wr(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)Tr.call(r,n)&&(e[n]=r[n])}return e}var Sr=Or;function Cr(e,t){for(var r=0;r<e.length;r++)t(e[r])}function kr(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Er(e,t,r){var n=e;return or(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=_r(t,{uri:e}),n.callback=r,n}function Or(e,t,r){return Ar(t=Er(e,t,r))}function Ar(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,r=function(r,n,i){t||(t=!0,e.callback(r,n,i))};function n(){4===c.readyState&&setTimeout(s,0)}function i(){var e=void 0;if(e=c.response?c.response:c.responseText||xr(c),g)try{e=JSON.parse(e)}catch(e){}return e}function a(e){return clearTimeout(l),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,r(e,y)}function s(){if(!u){var t;clearTimeout(l),t=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var n=y,a=null;return 0!==t?(n={body:i(),statusCode:t,method:h,headers:{},url:d,rawRequest:c},c.getAllResponseHeaders&&(n.headers=br(c.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),r(a,n,n.body)}}var o,u,c=e.xhr||null;c||(c=e.cors||e.useXDR?new Or.XDomainRequest:new Or.XMLHttpRequest);var l,d=c.url=e.uri||e.url,h=c.method=e.method||"GET",p=e.body||e.data,f=c.headers=e.headers||{},m=!!e.sync,g=!1,y={body:void 0,headers:{},statusCode:0,method:h,url:d,rawRequest:c};if("json"in e&&!1!==e.json&&(g=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),p=JSON.stringify(!0===e.json?p:e.json))),c.onreadystatechange=n,c.onload=s,c.onerror=a,c.onprogress=function(){},c.onabort=function(){u=!0},c.ontimeout=a,c.open(h,d,!m,e.username,e.password),m||(c.withCredentials=!!e.withCredentials),!m&&e.timeout>0&&(l=setTimeout((function(){if(!u){u=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",a(e)}}),e.timeout)),c.setRequestHeader)for(o in f)f.hasOwnProperty(o)&&c.setRequestHeader(o,f[o]);else if(e.headers&&!kr(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(p||null),c}function xr(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function Pr(){}Or.XMLHttpRequest=i.XMLHttpRequest||Pr,Or.XDomainRequest="withCredentials"in new Or.XMLHttpRequest?Or.XMLHttpRequest:i.XDomainRequest,Cr(["get","put","post","patch","head","delete"],(function(e){Or["delete"===e?"del":e]=function(t,r,n){return(r=Er(t,r,n)).method=e.toUpperCase(),Ar(r)}}));var Lr=function(e,t){var r=new i.WebVTT.Parser(i,i.vttjs,i.WebVTT.StringDecoder()),n=[];r.oncue=function(e){t.addCue(e)},r.onparsingerror=function(e){n.push(e)},r.onflush=function(){t.trigger({type:"loadeddata",target:t})},r.parse(e),n.length>0&&(i.console&&i.console.groupCollapsed&&i.console.groupCollapsed("Text Track parsing errors for "+t.src),n.forEach((function(e){return f.error(e)})),i.console&&i.console.groupEnd&&i.console.groupEnd()),r.flush()},Mr=function(e,t){var r={uri:e},n=ar(e);n&&(r.cors=n),Sr(r,Ie(this,(function(e,r,n){if(e)return f.error(e,r);if(t.loaded_=!0,"function"!=typeof i.WebVTT){if(t.tech_){var a=function(){return Lr(n,t)};t.tech_.on("vttjsloaded",a),t.tech_.on("vttjserror",(function(){f.error("vttjs failed to load, stopping trying to process "+t.src),t.tech_.off("vttjsloaded",a)}))}}else Lr(n,t)})))},Ir=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(v(this,t),!r.tech)throw new Error("A tech was not provided.");var n=Qe(r,{kind:Zt[r.kind]||"subtitles",language:r.language||r.srclang||""}),i=er[n.mode]||"disabled",a=n.default;"metadata"!==n.kind&&"chapters"!==n.kind||(i="hidden");var s=_(this,e.call(this,n));s.tech_=n.tech,s.cues_=[],s.activeCues_=[];var o=new Yt(s.cues_),u=new Yt(s.activeCues_),c=!1,l=Ie(s,(function(){this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1)}));return"disabled"!==i&&s.tech_.ready((function(){s.tech_.on("timeupdate",l)}),!0),Object.defineProperties(s,{default:{get:function(){return a},set:function(){}},mode:{get:function(){return i},set:function(e){var t=this;er[e]&&("showing"===(i=e)&&this.tech_.ready((function(){t.tech_.on("timeupdate",l)}),!0),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?o:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return u;for(var e=this.tech_.currentTime(),t=[],r=0,n=this.cues.length;r<n;r++){var i=this.cues[r];(i.startTime<=e&&i.endTime>=e||i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e)&&t.push(i)}if(c=!1,t.length!==this.activeCues_.length)c=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(c=!0);return this.activeCues_=t,u.setCues_(this.activeCues_),u},set:function(){}}}),n.src?(s.src=n.src,Mr(n.src,s)):s.loaded_=!0,s}return b(t,e),t.prototype.addCue=function(e){var t=e;if(i.vttjs&&!(e instanceof i.vttjs.VTTCue)){for(var r in t=new i.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)r in t||(t[r]=e[r]);t.id=e.id,t.originalCue_=e}for(var n=this.tech_.textTracks(),a=0;a<n.length;a++)n[a]!==this&&n[a].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},t.prototype.removeCue=function(e){for(var t=this.cues_.length;t--;){var r=this.cues_[t];if(r===e||r.originalCue_&&r.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(tr);Ir.prototype.allowedEvents_={cuechange:"cuechange"};var Dr=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,t);var n=Qe(r,{kind:Jt[r.kind]||""}),i=_(this,e.call(this,n)),a=!1;return Object.defineProperty(i,"enabled",{get:function(){return a},set:function(e){"boolean"==typeof e&&e!==a&&(a=e,this.trigger("enabledchange"))}}),n.enabled&&(i.enabled=n.enabled),i.loaded_=!0,i}return b(t,e),t}(tr),Ur=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,t);var n=Qe(r,{kind:Qt[r.kind]||""}),i=_(this,e.call(this,n)),a=!1;return Object.defineProperty(i,"selected",{get:function(){return a},set:function(e){"boolean"==typeof e&&e!==a&&(a=e,this.trigger("selectedchange"))}}),n.selected&&(i.selected=n.selected),i}return b(t,e),t}(tr),Rr=0,jr=1,Nr=2,Br=3,$r=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,t);var n=_(this,e.call(this)),i=void 0,a=new Ir(r);return n.kind=a.kind,n.src=a.src,n.srclang=a.language,n.label=a.label,n.default=a.default,Object.defineProperties(n,{readyState:{get:function(){return i}},track:{get:function(){return a}}}),i=Rr,a.addEventListener("loadeddata",(function(){i=Nr,n.trigger({type:"load",target:n})})),n}return b(t,e),t}(Re);$r.prototype.allowedEvents_={load:"load"},$r.NONE=Rr,$r.LOADING=jr,$r.LOADED=Nr,$r.ERROR=Br;var Fr={audio:{ListClass:zt,TrackClass:Dr,capitalName:"Audio"},video:{ListClass:Gt,TrackClass:Ur,capitalName:"Video"},text:{ListClass:Xt,TrackClass:Ir,capitalName:"Text"}};Object.keys(Fr).forEach((function(e){Fr[e].getterName=e+"Tracks",Fr[e].privateName=e+"Tracks_"}));var Vr={remoteText:{ListClass:Xt,TrackClass:Ir,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Kt,TrackClass:$r,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Hr=Qe(Fr,Vr);Vr.names=Object.keys(Vr),Fr.names=Object.keys(Fr),Hr.names=[].concat(Vr.names).concat(Fr.names);var qr=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function zr(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function Wr(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function Gr(){this.values=qr(null)}function Xr(e,t,r,n){var i=n?e.split(n):[e];for(var a in i)if("string"==typeof i[a]){var s=i[a].split(r);2===s.length&&t(s[0],s[1])}}function Kr(e,t,r){var n=e;function i(){var t=Wr(e);if(null===t)throw new zr(zr.Errors.BadTimeStamp,"Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(e,t){var n=new Gr;Xr(e,(function(e,t){switch(e){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];n.integer(e,s),n.percent(e,s)&&n.set("snapToLines",!1),n.alt(e,s,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start","middle","end"]);break;case"position":a=t.split(","),n.percent(e,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start","middle","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","middle","end","left","right"])}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical",""),t.line=n.get("line","auto"),t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align","middle"),t.position=n.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align),t.positionAlign=n.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}function s(){e=e.replace(/^\s+/,"")}if(s(),t.startTime=i(),s(),"--\x3e"!==e.substr(0,3))throw new zr(zr.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),s(),t.endTime=i(),s(),a(e,t)}zr.prototype=qr(Error.prototype),zr.prototype.constructor=zr,zr.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Gr.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var Yr={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""},Qr={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Jr={v:"title",lang:"lang"},Zr={rt:"ruby"};function en(e,t){function r(){if(!t)return null;function e(e){return t=t.substr(e.length),e}var r=t.match(/^([^<]*)(<[^>]*>?)?/);return e(r[1]?r[1]:r[2])}function n(e){return Yr[e]}function i(e){for(;p=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(p[0],n);return e}function a(e,t){return!Zr[t.localName]||Zr[t.localName]===e.localName}function s(t,r){var n=Qr[t];if(!n)return null;var i=e.document.createElement(n);i.localName=n;var a=Jr[t];return a&&r&&(i[a]=r.trim()),i}for(var o,u=e.document.createElement("div"),c=u,l=[];null!==(o=r());)if("<"!==o[0])c.appendChild(e.document.createTextNode(i(o)));else{if("/"===o[1]){l.length&&l[l.length-1]===o.substr(2).replace(">","")&&(l.pop(),c=c.parentNode);continue}var d,h=Wr(o.substr(1,o.length-2));if(h){d=e.document.createProcessingInstruction("timestamp",h),c.appendChild(d);continue}var p=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(d=s(p[1],p[3])))continue;if(!a(c,d))continue;p[2]&&(d.className=p[2].substr(1).replace("."," ")),l.push(p[1]),c.appendChild(d),c=d}return u}var tn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function rn(e){for(var t=0;t<tn.length;t++){var r=tn[t];if(e>=r[0]&&e<=r[1])return!0}return!1}function nn(e){var t=[],r="";if(!e||!e.childNodes)return"ltr";function n(e,t){for(var r=t.childNodes.length-1;r>=0;r--)e.push(t.childNodes[r])}function i(e){if(!e||!e.length)return null;var t=e.pop(),r=t.textContent||t.innerText;if(r){var a=r.match(/^.*(\n|\r)/);return a?(e.length=0,a[0]):r}return"ruby"===t.tagName?i(e):t.childNodes?(n(e,t),i(e)):void 0}for(n(t,e);r=i(t);)for(var a=0;a<r.length;a++)if(rn(r.charCodeAt(a)))return"rtl";return"ltr"}function an(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,r=t.textTrackList,n=0,i=0;i<r.length&&r[i]!==t;i++)"showing"===r[i].mode&&n++;return-1*++n}function sn(){}function on(e,t,r){sn.call(this),this.cue=t,this.cueDiv=en(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={direction:nn(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":i=t.position;break;case"middle":i=t.position-t.size/2;break;case"end":i=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function un(e){var t,r,n,i;if(e.div){r=e.div.offsetHeight,n=e.div.offsetWidth,i=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||r,this.bottom=e.bottom||i+(e.height||r),this.width=e.width||n,this.lineHeight=void 0!==t?t:e.lineHeight}function cn(e,t,r,n){function i(e,t){for(var i,a=new un(e),s=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(r,t[o])||e.within(r)&&e.overlapsAny(n);)e.move(t[o]);if(e.within(r))return e;var u=e.intersectPercentage(r);s>u&&(i=new un(e),s=u),e=new un(a)}return i||a}var a=new un(t),s=t.cue,o=an(s),u=[];if(s.snapToLines){var c;switch(s.vertical){case"":u=["+y","-y"],c="height";break;case"rl":u=["+x","-x"],c="width";break;case"lr":u=["-x","+x"],c="width"}var l=a.lineHeight,d=l*Math.round(o),h=r[c]+l,p=u[0];Math.abs(d)>h&&(d=d<0?-1:1,d*=Math.ceil(h/l)*l),o<0&&(d+=""===s.vertical?r.height:r.width,u=u.reverse()),a.move(p,d)}else{var f=a.lineHeight/r.height*100;switch(s.lineAlign){case"middle":o-=f/2;break;case"end":o-=f}switch(s.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}u=["+y","-x","+x","-y"],a=new un(t)}var m=i(a,u);t.move(m.toCSSCompatValues(r))}function ln(){}sn.prototype.applyStyles=function(e,t){for(var r in t=t||this.div,e)e.hasOwnProperty(r)&&(t.style[r]=e[r])},sn.prototype.formatStyle=function(e,t){return 0===e?0:e+t},on.prototype=qr(sn.prototype),on.prototype.constructor=on,un.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},un.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},un.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},un.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},un.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},un.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},un.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},un.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,r=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||r}},ln.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},ln.convertCueToDOMTree=function(e,t){return e&&t?en(e,t):null};var dn=.05,hn="sans-serif",pn="1.5%";ln.processCues=function(e,t,r){if(!e||!t||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var n=e.document.createElement("div");function i(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin=pn,r.appendChild(n),i(t)){var a=[],s=un.getSimpleBoxPosition(n),o={font:Math.round(s.height*dn*100)/100+"px "+hn};!function(){for(var r,i,u=0;u<t.length;u++)i=t[u],r=new on(e,i,o),n.appendChild(r.div),cn(e,r,s,a),i.displayState=r.div,a.push(un.getSimpleBoxPosition(r))}()}else for(var u=0;u<t.length;u++)n.appendChild(t[u].displayState)},ln.Parser=function(e,t,r){r||(r=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=r||new TextDecoder("utf8"),this.regionList=[]},ln.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof zr))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function r(){for(var e=t.buffer,r=0;r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var n=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),n}function n(e){var r=new Gr;if(Xr(e,(function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var i=new Gr;if(i.percent("x",n[0]),i.percent("y",n[1]),!i.has("x")||!i.has("y"))break;r.set(e+"X",i.get("x")),r.set(e+"Y",i.get("y"));break;case"scroll":r.alt(e,t,["up"])}}),/=/,/\s/),r.has("id")){var n=new(t.vttjs.VTTRegion||t.window.VTTRegion);n.width=r.get("width",100),n.lines=r.get("lines",3),n.regionAnchorX=r.get("regionanchorX",0),n.regionAnchorY=r.get("regionanchorY",100),n.viewportAnchorX=r.get("viewportanchorX",0),n.viewportAnchorY=r.get("viewportanchorY",100),n.scroll=r.get("scroll",""),t.onregion&&t.onregion(n),t.regionList.push({id:r.get("id"),region:n})}}function i(e){var r=new Gr;Xr(e,(function(e,t){switch(e){case"MPEGT":r.integer(e+"S",t);break;case"LOCA":r.set(e+"L",Wr(t))}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:r.get("MPEGTS"),LOCAL:r.get("LOCAL")})}function a(e){e.match(/X-TIMESTAMP-MAP/)?Xr(e,(function(e,t){switch(e){case"X-TIMESTAMP-MAP":i(t)}}),/=/):Xr(e,(function(e,t){switch(e){case"Region":n(t)}}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var s;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var o=(s=r()).match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new zr(zr.Errors.BadSignature);t.state="HEADER"}for(var u=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(u?u=!1:s=r(),t.state){case"HEADER":/:/.test(s)?a(s):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;if(t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,""),t.state="CUE",-1===s.indexOf("--\x3e")){t.cue.id=s;continue}case"CUE":try{Kr(s,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var c=-1!==s.indexOf("--\x3e");if(!s||c&&(u=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=s;continue;case"BADCUE":s||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new zr(zr.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var fn=ln,mn="auto",gn={"":1,lr:1,rl:1},yn={start:1,middle:1,end:1,left:1,right:1};function vn(e){return"string"==typeof e&&!!gn[e.toLowerCase()]&&e.toLowerCase()}function bn(e){return"string"==typeof e&&!!yn[e.toLowerCase()]&&e.toLowerCase()}function _n(e,t,r){this.hasBeenReset=!1;var n="",i=!1,a=e,s=t,o=r,u=null,c="",l=!0,d="auto",h="start",p=50,f="middle",m=50,g="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(e){n=""+e}},pauseOnExit:{enumerable:!0,get:function(){return i},set:function(e){i=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(e){u=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(e){var t=vn(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");c=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return l},set:function(e){l=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&e!==mn)throw new SyntaxError("An invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=bn(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");h=t,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=bn(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");f=t,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(e){var t=bn(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}}}),this.displayState=void 0}_n.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Tn=_n,wn={"":!0,up:!0};function Sn(e){return"string"==typeof e&&!!wn[e.toLowerCase()]&&e.toLowerCase()}function Cn(e){return"number"==typeof e&&e>=0&&e<=100}function kn(){var e=100,t=3,r=0,n=100,i=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!Cn(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(e){if(!Cn(e))throw new Error("RegionAnchorX must be between 0 and 100.");n=e}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!Cn(e))throw new Error("RegionAnchorY must be between 0 and 100.");r=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!Cn(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!Cn(e))throw new Error("ViewportAnchorX must be between 0 and 100.");i=e}},scroll:{enumerable:!0,get:function(){return s},set:function(e){var t=Sn(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");s=t}}})}var En=kn,On=r((function(e){var t=e.exports={WebVTT:fn,VTTCue:Tn,VTTRegion:En};i.vttjs=t,i.WebVTT=t.WebVTT;var r=t.VTTCue,n=t.VTTRegion,a=i.VTTCue,s=i.VTTRegion;t.shim=function(){i.VTTCue=r,i.VTTRegion=n},t.restore=function(){i.VTTCue=a,i.VTTRegion=s},i.VTTCue||t.shim()}));function An(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=e.textTracks();i.kind=t,r&&(i.label=r),n&&(i.language=n),i.tech=e;var s=new Hr.text.TrackClass(i);return a.addTrack(s),s}On.WebVTT,On.VTTCue,On.VTTRegion;var xn=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};v(this,t),r.reportTouchActivity=!1;var i=_(this,e.call(this,null,r,n));return i.hasStarted_=!1,i.on("playing",(function(){this.hasStarted_=!0})),i.on("loadstart",(function(){this.hasStarted_=!1})),Hr.names.forEach((function(e){var t=Hr[e];r&&r[t.getterName]&&(i[t.privateName]=r[t.getterName])})),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(e){!1===r["native"+e+"Tracks"]&&(i["featuresNative"+e+"Tracks"]=!1)})),!1===r.nativeCaptions||!1===r.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==r.nativeCaptions&&!0!==r.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.autoRemoteTextTracks_=new Hr.text.ListClass,i.initTrackListeners(),r.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}return b(t,e),t.prototype.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",(function(){return t.setTimeout((function(){return t.triggerSourceset(e)}),1)})),this.trigger({src:e,type:"sourceset"})},t.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},t.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},t.prototype.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ie(this,(function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)},t.prototype.onDurationChange=function(e){this.duration_=this.duration()},t.prototype.buffered=function(){return St(0,0)},t.prototype.bufferedPercent=function(){return Ct(this.buffered(),this.duration_)},t.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},t.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},t.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},t.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.dispose=function(){this.clearTracks(Fr.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},t.prototype.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach((function(e){for(var r=t[e+"Tracks"]()||[],n=r.length;n--;){var i=r[n];"text"===e&&t.removeRemoteTextTrack(i),r.removeTrack(i)}}))},t.prototype.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var r=e[t];this.removeRemoteTextTrack(r)}},t.prototype.reset=function(){},t.prototype.error=function(e){return void 0!==e&&(this.error_=new Lt(e),this.trigger("error")),this.error_},t.prototype.played=function(){return this.hasStarted_?St(0,0):St()},t.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.initTrackListeners=function(){var e=this;Fr.names.forEach((function(t){var r=Fr[t],n=function(){e.trigger(t+"trackchange")},i=e[r.getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),e.on("dispose",(function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)}))}))},t.prototype.addWebVttScript_=function(){var e=this;if(!i.WebVTT)if(c.body.contains(this.el())){if(!this.options_["vtt.js"]&&A(On)&&Object.keys(On).length>0)return void this.trigger("vttjsloaded");var t=c.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",(function(){t.onload=null,t.onerror=null})),i.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},t.prototype.emulateTextTracks=function(){var e=this,t=this.textTracks(),r=this.remoteTextTracks(),n=function(e){return t.addTrack(e.track)},i=function(e){return t.removeTrack(e.track)};r.on("addtrack",n),r.on("removetrack",i),this.addWebVttScript_();var a=function(){return e.trigger("texttrackchange")},s=function(){a();for(var e=0;e<t.length;e++){var r=t[e];r.removeEventListener("cuechange",a),"showing"===r.mode&&r.addEventListener("cuechange",a)}};s(),t.addEventListener("change",s),t.addEventListener("addtrack",s),t.addEventListener("removetrack",s),this.on("dispose",(function(){r.off("addtrack",n),r.off("removetrack",i),t.removeEventListener("change",s),t.removeEventListener("addtrack",s),t.removeEventListener("removetrack",s);for(var e=0;e<t.length;e++)t[e].removeEventListener("cuechange",a)}))},t.prototype.addTextTrack=function(e,t,r){if(!e)throw new Error("TextTrack kind is required but was not provided");return An(this,e,t,r)},t.prototype.createRemoteTextTrack=function(e){var t=Qe(e,{tech:this});return new Vr.remoteTextEl.TrackClass(t)},t.prototype.addRemoteTextTrack=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1],n=this.createRemoteTextTrack(t);return!0!==r&&!1!==r&&(f.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),r=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==r&&this.ready((function(){return e.autoRemoteTextTracks_.addTrack(n.track)})),n},t.prototype.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},t.prototype.getVideoPlaybackQuality=function(){return{}},t.prototype.setPoster=function(){},t.prototype.playsinline=function(){},t.prototype.setPlaysinline=function(){},t.prototype.overrideNativeAudioTracks=function(){},t.prototype.overrideNativeVideoTracks=function(){},t.prototype.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,r){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,r){if(t.techs_||(t.techs_={}),!t.isTech(r))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Ke(e),t.techs_[e]=r,"Tech"!==e&&t.defaultTechOrder_.push(e),r},t.getTech=function(e){if(e)return e=Ke(e),t.techs_&&t.techs_[e]?t.techs_[e]:i&&i.videojs&&i.videojs[e]?(f.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),i.videojs[e]):void 0},t}(Je);Hr.names.forEach((function(e){var t=Hr[e];xn.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),xn.prototype.featuresVolumeControl=!0,xn.prototype.featuresMuteControl=!0,xn.prototype.featuresFullscreenResize=!1,xn.prototype.featuresPlaybackRate=!1,xn.prototype.featuresProgressEvents=!1,xn.prototype.featuresSourceset=!1,xn.prototype.featuresTimeupdateEvents=!1,xn.prototype.featuresNativeTextTracks=!1,xn.withSourceHandlers=function(e){e.registerSourceHandler=function(t,r){var n=e.sourceHandlers;n||(n=e.sourceHandlers=[]),void 0===r&&(r=n.length),n.splice(r,0,t)},e.canPlayType=function(t){for(var r=e.sourceHandlers||[],n=void 0,i=0;i<r.length;i++)if(n=r[i].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,r){for(var n=e.sourceHandlers||[],i=0;i<n.length;i++)if(n[i].canHandleSource(t,r))return n[i];return null},e.canPlaySource=function(t,r){var n=e.selectSourceHandler(t,r);return n?n.canHandleSource(t,r):""},["seekable","seeking","duration"].forEach((function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){var r=e.selectSourceHandler(t,this.options_);r||(e.nativeSourceHandler?r=e.nativeSourceHandler:f.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),r!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=r.handleSource(t,this,this.options_),this.on("dispose",this.disposeSourceHandler)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Je.registerComponent("Tech",xn),xn.registerTech("Tech",xn),xn.defaultTechOrder_=[];var Pn={},Ln={},Mn={};function In(e,t){Pn[e]=Pn[e]||[],Pn[e].push(t)}function Dn(e,t,r){e.setTimeout((function(){return Wn(t,Pn[t.type],r,e)}),1)}function Un(e,t){e.forEach((function(e){return e.setTech&&e.setTech(t)}))}function Rn(e,t,r){return e.reduceRight(Vn(r),t[r]())}function jn(e,t,r,n){return t[r](e.reduce(Vn(r),n))}function Nn(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i="call"+Ke(r),a=e.reduce(Vn(i),n),s=a===Mn,o=s?null:t[r](a);return Hn(e,r,o,s),o}var Bn={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},$n={setCurrentTime:1},Fn={play:1,pause:1};function Vn(e){return function(t,r){return t===Mn?Mn:r[e]?r[e](t):t}}function Hn(e,t,r,n){for(var i=e.length-1;i>=0;i--){var a=e[i];a[t]&&a[t](n,r)}}function qn(e){Ln[e.id()]=null}function zn(e,t){var r=Ln[e.id()],n=null;if(null==r)return n=t(e),Ln[e.id()]=[[t,n]],n;for(var i=0;i<r.length;i++){var a=r[i],s=a[0],o=a[1];s===t&&(n=o)}return null===n&&(n=t(e),r.push([t,n])),n}function Wn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2],n=arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=t[0],o=t.slice(1);if("string"==typeof s)Wn(e,Pn[s],r,n,i,a);else if(s){var u=zn(n,s);if(!u.setSource)return i.push(u),Wn(e,o,r,n,i,a);u.setSource(E({},e),(function(t,s){if(t)return Wn(e,o,r,n,i,a);i.push(u),Wn(s,e.type===s.type?o:Pn[s.type],r,n,i,a)}))}else o.length?Wn(e,o,r,n,i,a):a?r(e,i):Wn(e,Pn["*"],r,n,i,!0)}var Gn={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},Xn=function(){var e=ir(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"");return Gn[e.toLowerCase()]||""},Kn=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var r=e.cache_.sources.filter((function(e){return e.src===t}));if(r.length)return r[0].type;for(var n=e.$$("source"),i=0;i<n.length;i++){var a=n[i];if(a.type&&a.src&&a.src===t)return a.type}return Xn(t)},Yn=function e(t){if(Array.isArray(t)){var r=[];t.forEach((function(t){t=e(t),Array.isArray(t)?r=r.concat(t):O(t)&&r.push(t)})),t=r}else t="string"==typeof t&&t.trim()?[Qn({src:t})]:O(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[Qn(t)]:[];return t};function Qn(e){var t=Xn(e.src);return!e.type&&t&&(e.type=t),e}var Jn=function(e){function t(r,n,i){v(this,t);var a=Qe({createEl:!1},n),s=_(this,e.call(this,r,a,i));if(n.playerOptions.sources&&0!==n.playerOptions.sources.length)r.src(n.playerOptions.sources);else for(var o=0,u=n.playerOptions.techOrder;o<u.length;o++){var c=Ke(u[o]),l=xn.getTech(c);if(c||(l=Je.getComponent(c)),l&&l.isSupported()){r.loadTech_(c);break}}return s}return b(t,e),t}(Je);Je.registerComponent("MediaLoader",Jn);var Zn=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.emitTapEvents(),i.enable(),i}return b(t,e),t.prototype.createEl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r=E({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},r),"button"===t&&f.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),n=E({role:"button"},n),this.tabIndex_=r.tabIndex;var i=e.prototype.createEl.call(this,t,r,n);return this.createControlTextEl(i),i},t.prototype.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},t.prototype.createControlTextEl=function(e){return this.controlTextEl_=N("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.prototype.controlText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===e)return this.controlText_||"Need Text";var r=this.localize(e);this.controlText_=e,B(this.controlTextEl_,r),this.nonIconControl||t.setAttribute("title",r)},t.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},t.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},t.prototype.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},t.prototype.handleClick=function(e){},t.prototype.handleFocus=function(e){we(c,"keydown",Ie(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.trigger("click")):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t.prototype.handleBlur=function(e){Se(c,"keydown",Ie(this,this.handleKeyPress))},t}(Je);Je.registerComponent("ClickableComponent",Zn);var ei=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.update(),r.on("posterchange",Ie(i,i.update)),i}return b(t,e),t.prototype.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},t.prototype.createEl=function(){return N("div",{className:"vjs-poster",tabIndex:-1})},t.prototype.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},t.prototype.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},t.prototype.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?Rt(this.player_.play()):this.player_.pause())},t}(Zn);Je.registerComponent("PosterImage",ei);var ti="#222",ri="#ccc",ni={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function ii(e,t){var r=void 0;if(4===e.length)r=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");r=e.slice(1)}return"rgba("+parseInt(r.slice(0,2),16)+","+parseInt(r.slice(2,4),16)+","+parseInt(r.slice(4,6),16)+","+t+")"}function ai(e,t,r){try{e.style[t]=r}catch(e){return}}var si=function(e){function t(r,n,i){v(this,t);var a=_(this,e.call(this,r,n,i));return r.on("loadstart",Ie(a,a.toggleDisplay)),r.on("texttrackchange",Ie(a,a.updateDisplay)),r.on("loadstart",Ie(a,a.preselectTrack)),r.ready(Ie(a,(function(){if(r.tech_&&r.tech_.featuresNativeTextTracks)this.hide();else{r.on("fullscreenchange",Ie(this,this.updateDisplay));for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()}}))),a}return b(t,e),t.prototype.preselectTrack=function(){for(var e={captions:1,subtitles:1},t=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage,n=void 0,i=void 0,a=void 0,s=0;s<t.length;s++){var o=t[s];r&&r.enabled&&r.language===o.language?o.kind===r.kind?a=o:a||(a=o):r&&!r.enabled?(a=null,n=null,i=null):o.default&&("descriptions"!==o.kind||n?o.kind in e&&!i&&(i=o):n=o)}a?a.mode="showing":i?i.mode="showing":n&&(n.mode="showing")},t.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.prototype.clearDisplay=function(){"function"==typeof i.WebVTT&&i.WebVTT.processCues(i,[],this.el_)},t.prototype.updateDisplay=function(){var e=this.player_.textTracks();this.clearDisplay();for(var t=null,r=null,n=e.length;n--;){var i=e[n];"showing"===i.mode&&("descriptions"===i.kind?t=i:r=i)}r?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(r)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))},t.prototype.updateForTrack=function(e){if("function"==typeof i.WebVTT&&e.activeCues){for(var t=[],r=0;r<e.activeCues.length;r++)t.push(e.activeCues[r]);if(i.WebVTT.processCues(i,t,this.el_),this.player_.textTrackSettings)for(var n=this.player_.textTrackSettings.getValues(),a=t.length;a--;){var s=t[a];if(s){var o=s.displayState;if(n.color&&(o.firstChild.style.color=n.color),n.textOpacity&&ai(o.firstChild,"color",ii(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(o.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&ai(o.firstChild,"backgroundColor",ii(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?ai(o,"backgroundColor",ii(n.windowColor,n.windowOpacity)):o.style.backgroundColor=n.windowColor),n.edgeStyle&&("dropshadow"===n.edgeStyle?o.firstChild.style.textShadow="2px 2px 3px "+ti+", 2px 2px 4px "+ti+", 2px 2px 5px "+ti:"raised"===n.edgeStyle?o.firstChild.style.textShadow="1px 1px "+ti+", 2px 2px "+ti+", 3px 3px "+ti:"depressed"===n.edgeStyle?o.firstChild.style.textShadow="1px 1px "+ri+", 0 1px "+ri+", -1px -1px "+ti+", 0 -1px "+ti:"uniform"===n.edgeStyle&&(o.firstChild.style.textShadow="0 0 4px "+ti+", 0 0 4px "+ti+", 0 0 4px "+ti+", 0 0 4px "+ti)),n.fontPercent&&1!==n.fontPercent){var u=i.parseFloat(o.style.fontSize);o.style.fontSize=u*n.fontPercent+"px",o.style.height="auto",o.style.top="auto",o.style.bottom="2px"}n.fontFamily&&"default"!==n.fontFamily&&("small-caps"===n.fontFamily?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=ni[n.fontFamily])}}}},t}(Je);Je.registerComponent("TextTrackDisplay",si);var oi=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),r=this.localize(t?"Audio Player":"Video Player"),n=N("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[r])}),i=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(n),i},t}(Je);Je.registerComponent("LoadingSpinner",oi);var ui=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e="button",t=E({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),r=E({type:"button"},r);var n=Je.prototype.createEl.call(this,e,t,r);return this.createControlTextEl(n),n},t.prototype.addChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.constructor.name;return f.warn("Adding an actionable (user controllable) child to a Button ("+r+") is not supported; use a ClickableComponent instead."),Je.prototype.addChild.call(this,e,t)},t.prototype.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.prototype.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.prototype.handleKeyPress=function(t){32!==t.which&&13!==t.which&&e.prototype.handleKeyPress.call(this,t)},t}(Zn);Je.registerComponent("Button",ui);var ci=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.mouseused_=!1,i.on("mousedown",i.handleMouseDown),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-big-play-button"},t.prototype.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)Rt(t);else{var r=this.player_.getChild("controlBar"),n=r&&r.getChild("playToggle");if(n){var i=function(){return n.focus()};Ut(t)?t.then(i,(function(){})):this.setTimeout(i,1)}else this.player_.focus()}},t.prototype.handleKeyPress=function(t){this.mouseused_=!1,e.prototype.handleKeyPress.call(this,t)},t.prototype.handleMouseDown=function(e){this.mouseused_=!0},t}(ui);ci.prototype.controlText_="Play Video",Je.registerComponent("BigPlayButton",ci);var li=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.controlText(n&&n.controlText||i.localize("Close")),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},t}(ui);Je.registerComponent("CloseButton",li);var di=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.on(r,"play",i.handlePlay),i.on(r,"pause",i.handlePause),i.on(r,"ended",i.handleEnded),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},t.prototype.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.prototype.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.prototype.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},t}(ui);di.prototype.controlText_="Play",Je.registerComponent("PlayToggle",di);var hi=function(e,t){e=e<0?0:e;var r=Math.floor(e%60),n=Math.floor(e/60%60),i=Math.floor(e/3600),a=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(i=n=r="-"),(i=i>0||s>0?i+":":"")+(n=((i||a>=10)&&n<10?"0"+n:n)+":")+(r=r<10?"0"+r:r)},pi=hi;function fi(e){pi=e}function mi(){pi=hi}function gi(e){return pi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e)}var yi=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.throttledUpdateContent=De(Ie(i,i.updateContent),25),i.on(r,"timeupdate",i.throttledUpdateContent),i}return b(t,e),t.prototype.createEl=function(t){var r=this.buildCSSClass(),n=e.prototype.createEl.call(this,"div",{className:r+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+"</span>"});return this.contentEl_=N("span",{className:r+"-display"},{"aria-live":"off"}),this.updateTextNode_(),n.appendChild(this.contentEl_),n},t.prototype.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},t.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=c.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},t.prototype.formatTime_=function(e){return gi(e)},t.prototype.updateFormattedTime_=function(e){var t=this.formatTime_(e);t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},t.prototype.updateContent=function(e){},t}(Je);yi.prototype.labelText_="Time",yi.prototype.controlText_="Time",Je.registerComponent("TimeDisplay",yi);var vi=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.on(r,"ended",i.handleEnded),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-current-time"},t.prototype.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(t)},t.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},t}(yi);vi.prototype.labelText_="Current Time",vi.prototype.controlText_="Current Time",Je.registerComponent("CurrentTimeDisplay",vi);var bi=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.on(r,"durationchange",i.updateContent),i.on(r,"loadedmetadata",i.throttledUpdateContent),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-duration"},t.prototype.updateContent=function(e){var t=this.player_.duration();t&&this.duration_!==t&&(this.duration_=t,this.updateFormattedTime_(t))},t}(yi);bi.prototype.labelText_="Duration",bi.prototype.controlText_="Duration",Je.registerComponent("DurationDisplay",bi);var _i=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t}(Je);Je.registerComponent("TimeDivider",_i);var Ti=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.on(r,"durationchange",i.throttledUpdateContent),i.on(r,"ended",i.handleEnded),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-remaining-time"},t.prototype.formatTime_=function(t){return"-"+e.prototype.formatTime_.call(this,t)},t.prototype.updateContent=function(e){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},t.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)},t}(yi);Ti.prototype.labelText_="Remaining Time",Ti.prototype.controlText_="Remaining Time",Je.registerComponent("RemainingTimeDisplay",Ti);var wi=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.updateShowing(),i.on(i.player(),"durationchange",i.updateShowing),i}return b(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=N("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},t.prototype.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(Je);Je.registerComponent("LiveDisplay",wi);var Si=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}return b(t,e),t.prototype.enabled=function(){return this.enabled_},t.prototype.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.prototype.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.prototype.createEl=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.className=r.className+" vjs-slider",r=E({tabIndex:0},r),n=E({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),e.prototype.createEl.call(this,t,r,n)},t.prototype.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||pt||e.preventDefault(),Y(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.prototype.handleMouseMove=function(e){},t.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;Q(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},t.prototype.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!=e||e<0||e===1/0)&&(e=0);var r=(100*e).toFixed(2)+"%",n=t.el().style;return this.vertical()?n.height=r:n.width=r,e}}},t.prototype.calculateDistance=function(e){var t=ee(this.el_,e);return this.vertical()?t.y:t.x},t.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},t.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},t.prototype.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(Je);Je.registerComponent("Slider",Si);var Ci=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.partEls_=[],i.on(r,"progress",i.update),i}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},t.prototype.dispose=function(){this.partEls_=null,e.prototype.dispose.call(this)},t.prototype.update=function(e){var t=this.player_.buffered(),r=this.player_.duration(),n=this.player_.bufferedEnd(),i=this.partEls_,a=function(e,t){var r=e/t||0;return 100*(r>=1?1:r)+"%"};this.el_.style.width=a(n,r);for(var s=0;s<t.length;s++){var o=t.start(s),u=t.end(s),c=i[s];c||(c=this.el_.appendChild(N()),i[s]=c),c.style.left=a(o,n),c.style.width=a(u-o,n)}for(var l=i.length;l>t.length;l--)this.el_.removeChild(i[l-1]);i.length=t.length},t}(Je);Je.registerComponent("LoadProgressBar",Ci);var ki=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},t.prototype.update=function(e,t,r){var n=J(this.el_),i=J(this.player_.el()),a=e.width*t;if(i&&n){var s=e.left-i.left+a,o=e.width-a+(i.right-e.right),u=n.width/2;s<u?u+=u-s:o<u&&(u=o),u<0?u=0:u>n.width&&(u=n.width),this.el_.style.right="-"+u+"px",B(this.el_,r)}},t}(Je);Je.registerComponent("TimeTooltip",ki);var Ei=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},t.prototype.update=function(e,t){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame((function(){var n=gi(r.player_.scrubbing()?r.player_.getCache().currentTime:r.player_.currentTime(),r.player_.duration()),i=r.getChild("timeTooltip");i&&i.update(e,t,n)}))},t}(Je);Ei.prototype.options_={children:[]},st||ut||Ei.prototype.options_.children.push("timeTooltip"),Je.registerComponent("PlayProgressBar",Ei);var Oi=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.update=De(Ie(i,i.update),25),i}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.prototype.update=function(e,t){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame((function(){var n=r.player_.duration(),i=gi(t*n,n);r.el_.style.left=e.width*t+"px",r.getChild("timeTooltip").update(e,t,i)}))},t}(Je);Oi.prototype.options_={children:["timeTooltip"]},Je.registerComponent("MouseTimeDisplay",Oi);var Ai=5,xi=30,Pi=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.setEventHandlers_(),i}return b(t,e),t.prototype.setEventHandlers_=function(){var e=this;this.update=De(Ie(this,this.update),xi),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.updateInterval=null,this.on(this.player_,["playing"],(function(){e.clearInterval(e.updateInterval),e.updateInterval=e.setInterval((function(){e.requestAnimationFrame((function(){e.update()}))}),xi)})),this.on(this.player_,["ended","pause","waiting"],(function(){e.clearInterval(e.updateInterval)})),this.on(this.player_,["timeupdate","ended"],this.update)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.prototype.update_=function(e,t){var r=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[gi(e,r),gi(r,r)],"{1} of {2}")),this.bar.update(J(this.el_),t)},t.prototype.update=function(t){var r=e.prototype.update.call(this);return this.update_(this.getCurrentTime_(),r),r},t.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.prototype.handleEnded=function(e){this.update_(this.player_.duration(),1)},t.prototype.getPercent=function(){var e=this.getCurrentTime_()/this.player_.duration();return e>=1?1:e||0},t.prototype.handleMouseDown=function(t){se(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},t.prototype.handleMouseMove=function(e){if(se(e)){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1),this.player_.currentTime(t)}},t.prototype.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},t.prototype.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},t.prototype.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&Rt(this.player_.play())},t.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+Ai)},t.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-Ai)},t.prototype.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleAction(t)):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t}(Si);Pi.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},st||ut||Pi.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Pi.prototype.playerEvent="timeupdate",Je.registerComponent("SeekBar",Pi);var Li=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.handleMouseMove=De(Ie(i,i.handleMouseMove),25),i.throttledHandleMouseSeek=De(Ie(i,i.handleMouseSeek),25),i.enable(),i}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.prototype.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var r=t.getChild("mouseTimeDisplay"),n=t.el(),i=J(n),a=ee(n,e).x;a>1?a=1:a<0&&(a=0),r&&r.update(i,a)}},t.prototype.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},t.prototype.enabled=function(){return this.enabled_},t.prototype.disable=function(){this.children().forEach((function(e){return e.disable&&e.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},t.prototype.enable=function(){this.children().forEach((function(e){return e.enable&&e.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t}(Je);Li.prototype.options_={children:["seekBar"]},Je.registerComponent("ProgressControl",Li);var Mi=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.on(r,"fullscreenchange",i.handleFullscreenChange),!1===c[kt.fullscreenEnabled]&&i.disable(),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.prototype.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(ui);Mi.prototype.controlText_="Fullscreen",Je.registerComponent("FullscreenToggle",Mi);var Ii=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))},Di=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(Je);Je.registerComponent("VolumeLevel",Di);var Ui=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.on("slideractive",i.updateLastVolume_),i.on(r,"volumechange",i.updateARIAAttributes),r.ready((function(){return i.updateARIAAttributes()})),i}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.prototype.handleMouseDown=function(t){se(t)&&e.prototype.handleMouseDown.call(this,t)},t.prototype.handleMouseMove=function(e){se(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},t.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.prototype.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},t.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},t.prototype.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",(function(){0===e.player_.volume()&&e.player_.lastVolume_(t)}))},t}(Si);Ui.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Ui.prototype.playerEvent="volumechange",Je.registerComponent("VolumeBar",Ui);var Ri=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,t),n.vertical=n.vertical||!1,(void 0===n.volumeBar||A(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical);var i=_(this,e.call(this,r,n));return Ii(i,r),i.throttledHandleMouseMove=De(Ie(i,i.handleMouseMove),25),i.on("mousedown",i.handleMouseDown),i.on("touchstart",i.handleMouseDown),i.on(i.volumeBar,["focus","slideractive"],(function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")})),i.on(i.volumeBar,["blur","sliderinactive"],(function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")})),i}return b(t,e),t.prototype.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},t.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t.prototype.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(Je);Ri.prototype.options_={children:["volumeBar"]},Je.registerComponent("VolumeControl",Ri);var ji=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))},Ni=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return ji(i,r),i.on(r,["loadstart","volumechange"],i.update),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){var t=this.player_.volume(),r=this.player_.lastVolume_();if(0===t){var n=r<.1?.1:r;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},t.prototype.update=function(e){this.updateIcon_(),this.updateControlText_()},t.prototype.updateIcon_=function(){var e=this.player_.volume(),t=3;st&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var r=0;r<4;r++)H(this.el_,"vjs-vol-"+r);V(this.el_,"vjs-vol-"+t)},t.prototype.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(ui);Ni.prototype.controlText_="Mute",Je.registerComponent("MuteToggle",Ni);var Bi=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,t),void 0!==n.inline?n.inline=n.inline:n.inline=!0,(void 0===n.volumeControl||A(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline);var i=_(this,e.call(this,r,n));return i.on(r,["loadstart"],i.volumePanelState_),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}return b(t,e),t.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},t.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.prototype.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.prototype.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},t}(Je);Bi.prototype.options_={children:["muteToggle","volumeControl"]},Je.registerComponent("VolumePanel",Bi);var $i=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return n&&(i.menuButton_=n.menuButton),i.focusedChild_=-1,i.on("keydown",i.handleKeyPress),i}return b(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",Ie(this,(function(t){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus())})))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=N(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var r=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return r.appendChild(this.contentEl_),we(r,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),r},t.prototype.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},t.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},t.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},t.prototype.focus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(Je);Je.registerComponent("Menu",$i);var Fi=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,t);var i=_(this,e.call(this,r,n));i.menuButton_=new ui(r,n),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var a=ui.prototype.buildCSSClass();return i.menuButton_.el_.className=i.buildCSSClass()+" "+a,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0,i.on(i.menuButton_,"tap",i.handleClick),i.on(i.menuButton_,"click",i.handleClick),i.on(i.menuButton_,"focus",i.handleFocus),i.on(i.menuButton_,"blur",i.handleBlur),i.on("keydown",i.handleSubmenuKeyPress),i}return b(t,e),t.prototype.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},t.prototype.createMenu=function(){var e=new $i(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=N("li",{className:"vjs-menu-title",innerHTML:Ke(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,e.children_.unshift(t),$(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var r=0;r<this.items.length;r++)e.addItem(this.items[r]);return e},t.prototype.createItems=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.prototype.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+ui.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},t.prototype.controlText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(e,t)},t.prototype.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",Ie(this,(function(e){this.unpressButton(),this.el_.blur()}))),this.buttonPressed_?this.unpressButton():this.pressButton()},t.prototype.focus=function(){this.menuButton_.focus()},t.prototype.blur=function(){this.menuButton_.blur()},t.prototype.handleFocus=function(){we(c,"keydown",Ie(this,this.handleKeyPress))},t.prototype.handleBlur=function(){Se(c,"keydown",Ie(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus())):38!==e.which&&40!==e.which||this.buttonPressed_||(this.pressButton(),e.preventDefault())},t.prototype.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus()))},t.prototype.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),st&&R())return;this.menu.focus()}},t.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.prototype.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.prototype.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(Je);Je.registerComponent("MenuButton",Fi);var Vi=function(e){function t(r,n){v(this,t);var i=n.tracks,a=_(this,e.call(this,r,n));if(a.items.length<=1&&a.hide(),!i)return _(a);var s=Ie(a,a.update);return i.addEventListener("removetrack",s),i.addEventListener("addtrack",s),a.player_.on("ready",s),a.player_.on("dispose",(function(){i.removeEventListener("removetrack",s),i.removeEventListener("addtrack",s)})),a}return b(t,e),t}(Fi);Je.registerComponent("TrackButton",Vi);var Hi=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.selectable=n.selectable,i.isSelected_=n.selected||!1,i.multiSelectable=n.multiSelectable,i.selected(i.isSelected_),i.selectable?i.multiSelectable?i.el_.setAttribute("role","menuitemcheckbox"):i.el_.setAttribute("role","menuitemradio"):i.el_.setAttribute("role","menuitem"),i}return b(t,e),t.prototype.createEl=function(t,r,n){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",E({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},r),n)},t.prototype.handleClick=function(e){this.selected(!0)},t.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(Zn);Je.registerComponent("MenuItem",Hi);var qi=function(e){function t(r,n){v(this,t);var a=n.track,s=r.textTracks();n.label=a.label||a.language||"Unknown",n.selected="showing"===a.mode;var o=_(this,e.call(this,r,n));o.track=a;var u=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.handleTracksChange.apply(o,t)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.handleSelectedLanguageChange.apply(o,t)};if(r.on(["loadstart","texttrackchange"],u),s.addEventListener("change",u),s.addEventListener("selectedlanguagechange",l),o.on("dispose",(function(){r.off(["loadstart","texttrackchange"],u),s.removeEventListener("change",u),s.removeEventListener("selectedlanguagechange",l)})),void 0===s.onchange){var d=void 0;o.on(["tap","click"],(function(){if("object"!==y(i.Event))try{d=new i.Event("change")}catch(e){}d||(d=c.createEvent("Event")).initEvent("change",!0,!0),s.dispatchEvent(d)}))}return o.handleTracksChange(),o}return b(t,e),t.prototype.handleClick=function(t){var r=this.track.kind,n=this.track.kinds,i=this.player_.textTracks();if(n||(n=[r]),e.prototype.handleClick.call(this,t),i)for(var a=0;a<i.length;a++){var s=i[a];s===this.track&&n.indexOf(s.kind)>-1?"showing"!==s.mode&&(s.mode="showing"):"disabled"!==s.mode&&(s.mode="disabled")}},t.prototype.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},t.prototype.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.prototype.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(Hi);Je.registerComponent("TextTrackMenuItem",qi);var zi=function(e){function t(r,n){return v(this,t),n.track={player:r,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,_(this,e.call(this,r,n))}return b(t,e),t.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),r=!0,n=0,i=t.length;n<i;n++){var a=t[n];if(this.options_.kinds.indexOf(a.kind)>-1&&"showing"===a.mode){r=!1;break}}r!==this.isSelected_&&this.selected(r)},t.prototype.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),r=!0,n=0,i=t.length;n<i;n++){var a=t[n];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&"showing"===a.mode){r=!1;break}}r&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(qi);Je.registerComponent("OffTextTrackMenuItem",zi);var Wi=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v(this,t),n.tracks=r.textTracks(),_(this,e.call(this,r,n))}return b(t,e),t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qi,r=void 0;this.label_&&(r=this.label_+" off"),e.push(new zi(this.player_,{kinds:this.kinds_,kind:this.kind_,label:r})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var i=0;i<n.length;i++){var a=n[i];if(this.kinds_.indexOf(a.kind)>-1){var s=new t(this.player_,{track:a,selectable:!0,multiSelectable:!1});s.addClass("vjs-"+a.kind+"-menu-item"),e.push(s)}}return e},t}(Vi);Je.registerComponent("TextTrackButton",Wi);var Gi=function(e){function t(r,n){v(this,t);var i=n.track,a=n.cue,s=r.currentTime();n.selectable=!0,n.multiSelectable=!1,n.label=a.text,n.selected=a.startTime<=s&&s<a.endTime;var o=_(this,e.call(this,r,n));return o.track=i,o.cue=a,i.addEventListener("cuechange",Ie(o,o.update)),o}return b(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.prototype.update=function(e){var t=this.cue,r=this.player_.currentTime();this.selected(t.startTime<=r&&r<t.endTime)},t}(Hi);Je.registerComponent("ChaptersTrackMenuItem",Gi);var Xi=function(e){function t(r,n,i){return v(this,t),_(this,e.call(this,r,n,i))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},t.prototype.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var r=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);r&&r.addEventListener("load",this.updateHandler_)}}},t.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var r=e[t];if(r.kind===this.kind_)return r}},t.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ke(this.kind_))},t.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},t.prototype.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var r=0,n=t.length;r<n;r++){var i=t[r],a=new Gi(this.player_,{track:this.track_,cue:i});e.push(a)}return e},t}(Wi);Xi.prototype.kind_="chapters",Xi.prototype.controlText_="Chapters",Je.registerComponent("ChaptersButton",Xi);var Ki=function(e){function t(r,n,i){v(this,t);var a=_(this,e.call(this,r,n,i)),s=r.textTracks(),o=Ie(a,a.handleTracksChange);return s.addEventListener("change",o),a.on("dispose",(function(){s.removeEventListener("change",o)})),a}return b(t,e),t.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),r=!1,n=0,i=t.length;n<i;n++){var a=t[n];if(a.kind!==this.kind_&&"showing"===a.mode){r=!0;break}}r?this.disable():this.enable()},t.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Wi);Ki.prototype.kind_="descriptions",Ki.prototype.controlText_="Descriptions",Je.registerComponent("DescriptionsButton",Ki);var Yi=function(e){function t(r,n,i){return v(this,t),_(this,e.call(this,r,n,i))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Wi);Yi.prototype.kind_="subtitles",Yi.prototype.controlText_="Subtitles",Je.registerComponent("SubtitlesButton",Yi);var Qi=function(e){function t(r,n){v(this,t),n.track={player:r,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem";var i=_(this,e.call(this,r,n));return i.addClass("vjs-texttrack-settings"),i.controlText(", opens "+n.kind+" settings dialog"),i}return b(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(qi);Je.registerComponent("CaptionSettingsMenuItem",Qi);var Ji=function(e){function t(r,n,i){return v(this,t),_(this,e.call(this,r,n,i))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Qi(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(Wi);Ji.prototype.kind_="captions",Ji.prototype.controlText_="Captions",Je.registerComponent("CaptionsButton",Ji);var Zi=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(t,r,n){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),i+="</span>",e.prototype.createEl.call(this,t,E({innerHTML:i},r),n)},t}(qi);Je.registerComponent("SubsCapsMenuItem",Zi);var ea=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,t);var i=_(this,e.call(this,r,n));return i.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)>-1&&(i.label_="captions"),i.menuButton_.controlText(Ke(i.label_)),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Qi(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=e.prototype.createItems.call(this,t,Zi)},t}(Wi);ea.prototype.kinds_=["captions","subtitles"],ea.prototype.controlText_="Subtitles",Je.registerComponent("SubsCapsButton",ea);var ta=function(e){function t(r,n){v(this,t);var i=n.track,a=r.audioTracks();n.label=i.label||i.language||"Unknown",n.selected=i.enabled;var s=_(this,e.call(this,r,n));s.track=i,s.addClass("vjs-"+i.kind+"-menu-item");var o=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s.handleTracksChange.apply(s,t)};return a.addEventListener("change",o),s.on("dispose",(function(){a.removeEventListener("change",o)})),s}return b(t,e),t.prototype.createEl=function(t,r,n){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),i+="</span>",e.prototype.createEl.call(this,t,E({innerHTML:i},r),n)},t.prototype.handleClick=function(t){var r=this.player_.audioTracks();e.prototype.handleClick.call(this,t);for(var n=0;n<r.length;n++){var i=r[n];i.enabled=i===this.track}},t.prototype.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(Hi);Je.registerComponent("AudioTrackMenuItem",ta);var ra=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v(this,t),n.tracks=r.audioTracks(),_(this,e.call(this,r,n))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;for(var t=this.player_.audioTracks(),r=0;r<t.length;r++){var n=t[r];e.push(new ta(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e},t}(Vi);ra.prototype.controlText_="Audio Track",Je.registerComponent("AudioTrackButton",ra);var na=function(e){function t(r,n){v(this,t);var i=n.rate,a=parseFloat(i,10);n.label=i,n.selected=1===a,n.selectable=!0,n.multiSelectable=!1;var s=_(this,e.call(this,r,n));return s.label=i,s.rate=a,s.on(r,"ratechange",s.update),s}return b(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.prototype.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(Hi);na.prototype.contentElType="button",Je.registerComponent("PlaybackRateMenuItem",na);var ia=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.updateVisibility(),i.updateLabel(),i.on(r,"loadstart",i.updateVisibility),i.on(r,"ratechange",i.updateLabel),i}return b(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=N("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},t.prototype.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},t.prototype.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.createMenu=function(){var e=new $i(this.player()),t=this.playbackRates();if(t)for(var r=t.length-1;r>=0;r--)e.addChild(new na(this.player(),{rate:t[r]+"x"}));return e},t.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.prototype.handleClick=function(e){for(var t=this.player().playbackRate(),r=this.playbackRates(),n=r[0],i=0;i<r.length;i++)if(r[i]>t){n=r[i];break}this.player().playbackRate(n)},t.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.prototype.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.prototype.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(Fi);ia.prototype.controlText_="Playback Rate",Je.registerComponent("PlaybackRateMenuButton",ia);var aa=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(Je);Je.registerComponent("Spacer",aa);var sa=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML="",t},t}(aa);Je.registerComponent("CustomControlSpacer",sa);var oa=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Je);oa.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},Je.registerComponent("ControlBar",oa);var ua=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n));return i.on(r,"error",i.open),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},t.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(Ft);ua.prototype.options_=Qe(Ft.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Je.registerComponent("ErrorDisplay",ua);var ca="vjs-text-track-settings",la=["#000","Black"],da=["#00F","Blue"],ha=["#0FF","Cyan"],pa=["#0F0","Green"],fa=["#F0F","Magenta"],ma=["#F00","Red"],ga=["#FFF","White"],ya=["#FF0","Yellow"],va=["1","Opaque"],ba=["0.5","Semi-Transparent"],_a=["0","Transparent"],Ta={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[la,ga,ma,pa,da,ya,fa,ha]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[va,ba,_a]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[ga,la,ma,pa,da,ya,fa,ha]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[va,ba]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[_a,ba,va]}};function wa(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}function Sa(e,t){return wa(e.options[e.options.selectedIndex].value,t)}function Ca(e,t,r){if(t)for(var n=0;n<e.options.length;n++)if(wa(e.options[n].value,r)===t){e.selectedIndex=n;break}}Ta.windowColor.options=Ta.backgroundColor.options;var ka=function(e){function t(r,n){v(this,t),n.temporary=!1;var i=_(this,e.call(this,r,n));return i.updateDisplay=Ie(i,i.updateDisplay),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=N("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===n.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",(function(){i.saveSettings(),i.close()})),i.on(i.$(".vjs-default-button"),"click",(function(){i.setDefaults(),i.updateDisplay()})),C(Ta,(function(e){i.on(i.$(e.selector),"change",i.updateDisplay)})),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}return b(t,e),t.prototype.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},t.prototype.createElSelect_=function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",i=Ta[e],a=i.id.replace("%s",this.id_),s=[r,a].join(" ").trim();return["<"+n+' id="'+a+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(i.label),"</"+n+">",'<select aria-labelledby="'+s+'">'].concat(i.options.map((function(e){var r=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+r+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+r+'">',t.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")},t.prototype.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElColors_=function(){return N("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.prototype.createElFont_=function(){return N("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.prototype.createElControls_=function(){var e=this.localize("restore all settings to the default values");return N("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.prototype.label=function(){return this.localize("Caption Settings Dialog")},t.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.prototype.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.prototype.getValues=function(){var e=this;return k(Ta,(function(t,r,n){var i=Sa(e.$(r.selector),r.parser);return void 0!==i&&(t[n]=i),t}),{})},t.prototype.setValues=function(e){var t=this;C(Ta,(function(r,n){Ca(t.$(r.selector),e[n],r.parser)}))},t.prototype.setDefaults=function(){var e=this;C(Ta,(function(t){var r=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=r}))},t.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(i.localStorage.getItem(ca))}catch(e){f.warn(e)}e&&this.setValues(e)},t.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?i.localStorage.setItem(ca,JSON.stringify(e)):i.localStorage.removeItem(ca)}catch(e){f.warn(e)}}},t.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(c,"keydown",this.handleKeyDown);var e=this.player_.controlBar,t=e&&e.subsCapsButton,r=e&&e.captionsButton;t?t.focus():r&&r.focus()},t}(Ft);Je.registerComponent("TextTrackSettings",ka);var Ea=function(e){function t(r,n){v(this,t);var a=n.ResizeObserver||i.ResizeObserver;null===n.ResizeObserver&&(a=!1);var s=Qe({createEl:!a,reportTouchActivity:!1},n),o=_(this,e.call(this,r,s));return o.ResizeObserver=n.ResizeObserver||i.ResizeObserver,o.loadListener_=null,o.resizeObserver_=null,o.debouncedHandler_=Ue((function(){o.resizeHandler()}),100,!1,r),a?(o.resizeObserver_=new o.ResizeObserver(o.debouncedHandler_),o.resizeObserver_.observe(r.el())):(o.loadListener_=function(){o.el_.contentWindow&&we(o.el_.contentWindow,"resize",o.debouncedHandler_),o.off("load",o.loadListener_)},o.on("load",o.loadListener_)),o}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},t.prototype.resizeHandler=function(){this.player_.trigger("playerresize")},t.prototype.dispose=function(){this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&Se(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,e.prototype.dispose.call(this)},t}(Je);Je.registerComponent("ResizeManager",Ea);var Oa=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var r=e.$$("source"),n=[],i="";if(!r.length)return!1;for(var a=0;a<r.length;a++){var s=r[a].src;s&&-1===n.indexOf(s)&&n.push(s)}return!!n.length&&(1===n.length&&(i=n[0]),e.triggerSourceset(i),!0)},Aa=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=c.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var r=c.createDocumentFragment();t.childNodes.length;)r.appendChild(t.childNodes[0]);return this.innerText="",i.Element.prototype.appendChild.call(this,r),this.innerHTML}}),xa=function(e,t){for(var r={},n=0;n<e.length&&!((r=Object.getOwnPropertyDescriptor(e[n],t))&&r.set&&r.get);n++);return r.enumerable=!0,r.configurable=!0,r},Pa=function(e){return xa([e.el(),i.HTMLMediaElement.prototype,i.Element.prototype,Aa],"innerHTML")},La=function(e){var t=e.el();if(!t.resetSourceWatch_){var r={},n=Pa(e),i=function(r){return function(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r.apply(t,i);return Oa(e),s}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){t[e]&&(r[e]=t[e],t[e]=i(r[e]))})),Object.defineProperty(t,"innerHTML",Qe(n,{set:i(n.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(r).forEach((function(e){t[e]=r[e]})),Object.defineProperty(t,"innerHTML",n)},e.one("sourceset",t.resetSourceWatch_)}},Ma=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?nr(i.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return i.Element.prototype.setAttribute.call(this,"src",e),e}}),Ia=function(e){return xa([e.el(),i.HTMLMediaElement.prototype,Ma],"src")},Da=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var r=Ia(e),n=t.setAttribute,i=t.load;Object.defineProperty(t,"src",Qe(r,{set:function(n){var i=r.set.call(t,n);return e.triggerSourceset(t.src),i}})),t.setAttribute=function(r,i){var a=n.call(t,r,i);return/src/i.test(r)&&e.triggerSourceset(t.src),a},t.load=function(){var r=i.call(t);return Oa(e)||(e.triggerSourceset(""),La(e)),r},t.currentSrc?e.triggerSourceset(t.currentSrc):Oa(e)||La(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=i,t.setAttribute=n,Object.defineProperty(t,"src",r),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},Ua=T(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),Ra=function(e){function t(r,n){v(this,t);var i=_(this,e.call(this,r,n)),a=r.source,s=!1;if(a&&(i.el_.currentSrc!==a.src||r.tag&&3===r.tag.initNetworkState_)?i.setSource(a):i.handleLateInit_(i.el_),r.enableSourceset&&i.setupSourcesetHandling_(),i.el_.hasChildNodes()){for(var o=i.el_.childNodes,u=o.length,c=[];u--;){var l=o[u];"track"===l.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(l),i.remoteTextTracks().addTrack(l.track),i.textTracks().addTrack(l.track),s||i.el_.hasAttribute("crossorigin")||!ar(l.src)||(s=!0)):c.push(l))}for(var d=0;d<c.length;d++)i.el_.removeChild(c[d])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&s&&f.warn(g(Ua)),i.restoreMetadataTracksInIOSNativePlayer_(),(vt||it||lt)&&!0===r.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}return b(t,e),t.prototype.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},t.prototype.setupSourcesetHandling_=function(){Da(this)},t.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var e=this.textTracks(),t=void 0,r=function(){t=[];for(var r=0;r<e.length;r++){var n=e[r];"metadata"===n.kind&&t.push({track:n,storedMode:n.mode})}};r(),e.addEventListener("change",r),this.on("dispose",(function(){return e.removeEventListener("change",r)}));var n=function r(){for(var n=0;n<t.length;n++){var i=t[n];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}e.removeEventListener("change",r)};this.on("webkitbeginfullscreen",(function(){e.removeEventListener("change",r),e.removeEventListener("change",n),e.addEventListener("change",n)})),this.on("webkitendfullscreen",(function(){e.removeEventListener("change",r),e.addEventListener("change",r),e.removeEventListener("change",n)}))},t.prototype.overrideNative_=function(e,t){var r=this;if(t===this["featuresNative"+e+"Tracks"]){var n=e.toLowerCase();this[n+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach((function(e){r.el()[n+"Tracks"].removeEventListener(e,r[n+"TracksListeners_"][e])})),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n)}},t.prototype.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},t.prototype.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},t.prototype.proxyNativeTracksForType_=function(e){var t=this,r=Fr[e],n=this.el()[r.getterName],i=this[r.getterName]();if(this["featuresNative"+r.capitalName+"Tracks"]&&n&&n.addEventListener){var a={change:function(e){i.trigger({type:"change",target:i,currentTarget:i,srcElement:i})},addtrack:function(e){i.addTrack(e.track)},removetrack:function(e){i.removeTrack(e.track)}},s=function(){for(var e=[],t=0;t<i.length;t++){for(var r=!1,a=0;a<n.length;a++)if(n[a]===i[t]){r=!0;break}r||e.push(i[t])}for(;e.length;)i.removeTrack(e.shift())};this[r.getterName+"Listeners_"]=a,Object.keys(a).forEach((function(e){var r=a[e];n.addEventListener(e,r),t.on("dispose",(function(t){return n.removeEventListener(e,r)}))})),this.on("loadstart",s),this.on("dispose",(function(e){return t.off("loadstart",s)}))}},t.prototype.proxyNativeTracks_=function(){var e=this;Fr.names.forEach((function(t){e.proxyNativeTracksForType_(t)}))},t.prototype.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var r=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(r,e),t.disposeMediaElement(e),e=r}else{e=c.createElement("video");var n=Qe({},this.options_.tag&&W(this.options_.tag));vt&&!0===this.options_.nativeControlsForTouch||delete n.controls,z(e,E(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&X(e,"preload",this.options_.preload);for(var i=["loop","muted","playsinline","autoplay"],a=0;a<i.length;a++){var s=i[a],o=this.options_[s];void 0!==o&&(o?X(e,s,s):K(e,s),e[s]=o)}return e},t.prototype.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,r=function(){t=!0};this.on("loadstart",r);var n=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready((function(){this.off("loadstart",r),this.off("loadedmetadata",n),t||this.trigger("loadstart")}))}var i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready((function(){i.forEach((function(e){this.trigger(e)}),this)}))}},t.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){f(e,"Video is not ready. (Video.js)")}},t.prototype.duration=function(){var e=this;if(this.el_.duration===1/0&&ut&&pt&&0===this.el_.currentTime){var t=function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN},t.prototype.width=function(){return this.el_.offsetWidth},t.prototype.height=function(){return this.el_.offsetHeight},t.prototype.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},r=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",r),this.on("dispose",(function(){e.off("webkitbeginfullscreen",r),e.off("webkitendfullscreen",t)}))}},t.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=i.navigator&&i.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},t.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout((function(){e.pause(),e.webkitEnterFullScreen()}),0)):e.webkitEnterFullScreen()},t.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},t.prototype.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},t.prototype.reset=function(){t.resetMediaElement(this.el_)},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.prototype.setControls=function(e){this.el_.controls=!!e},t.prototype.addTextTrack=function(t,r,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,r,n):e.prototype.addTextTrack.call(this,t,r,n)},t.prototype.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var r=c.createElement("track");return t.kind&&(r.kind=t.kind),t.label&&(r.label=t.label),(t.language||t.srclang)&&(r.srclang=t.language||t.srclang),t.default&&(r.default=t.default),t.id&&(r.id=t.id),t.src&&(r.src=t.src),r},t.prototype.addRemoteTextTrack=function(t,r){var n=e.prototype.addRemoteTextTrack.call(this,t,r);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},t.prototype.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var r=this.$$("track"),n=r.length;n--;)t!==r[n]&&t!==r[n].track||this.el().removeChild(r[n])},t.prototype.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),i.performance&&"function"==typeof i.performance.now?e.creationTime=i.performance.now():i.performance&&i.performance.timing&&"number"==typeof i.performance.timing.navigationStart&&(e.creationTime=i.Date.now()-i.performance.timing.navigationStart),e},t}(xn);if(D()){Ra.TEST_VID=c.createElement("video");var ja=c.createElement("track");ja.kind="captions",ja.srclang="en",ja.label="English",Ra.TEST_VID.appendChild(ja)}Ra.isSupported=function(){try{Ra.TEST_VID.volume=.5}catch(e){return!1}return!(!Ra.TEST_VID||!Ra.TEST_VID.canPlayType)},Ra.canPlayType=function(e){return Ra.TEST_VID.canPlayType(e)},Ra.canPlaySource=function(e,t){return Ra.canPlayType(e.type)},Ra.canControlVolume=function(){try{var e=Ra.TEST_VID.volume;return Ra.TEST_VID.volume=e/2+.1,e!==Ra.TEST_VID.volume}catch(e){return!1}},Ra.canMuteVolume=function(){try{var e=Ra.TEST_VID.muted;return Ra.TEST_VID.muted=!e,Ra.TEST_VID.muted?X(Ra.TEST_VID,"muted","muted"):K(Ra.TEST_VID,"muted","muted"),e!==Ra.TEST_VID.muted}catch(e){return!1}},Ra.canControlPlaybackRate=function(){if(ut&&pt&&ft<58)return!1;try{var e=Ra.TEST_VID.playbackRate;return Ra.TEST_VID.playbackRate=e/2+.1,e!==Ra.TEST_VID.playbackRate}catch(e){return!1}},Ra.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(c.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(c.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(c.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(c.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Ra.supportsNativeTextTracks=function(){return yt||st&&pt},Ra.supportsNativeVideoTracks=function(){return!(!Ra.TEST_VID||!Ra.TEST_VID.videoTracks)},Ra.supportsNativeAudioTracks=function(){return!(!Ra.TEST_VID||!Ra.TEST_VID.audioTracks)},Ra.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Ra.prototype.featuresVolumeControl=Ra.canControlVolume(),Ra.prototype.featuresMuteControl=Ra.canMuteVolume(),Ra.prototype.featuresPlaybackRate=Ra.canControlPlaybackRate(),Ra.prototype.featuresSourceset=Ra.canOverrideAttributes(),Ra.prototype.movingMediaElementInDOM=!st,Ra.prototype.featuresFullscreenResize=!0,Ra.prototype.featuresProgressEvents=!0,Ra.prototype.featuresTimeupdateEvents=!0,Ra.prototype.featuresNativeTextTracks=Ra.supportsNativeTextTracks(),Ra.prototype.featuresNativeVideoTracks=Ra.supportsNativeVideoTracks(),Ra.prototype.featuresNativeAudioTracks=Ra.supportsNativeAudioTracks();var Na=Ra.TEST_VID&&Ra.TEST_VID.constructor.prototype.canPlayType,Ba=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;Ra.patchCanPlayType=function(){ct>=4&&!dt&&!pt&&(Ra.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&Ba.test(e)?"maybe":Na.call(this,e)})},Ra.unpatchCanPlayType=function(){var e=Ra.TEST_VID.constructor.prototype.canPlayType;return Ra.TEST_VID.constructor.prototype.canPlayType=Na,e},Ra.patchCanPlayType(),Ra.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},Ra.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),r=t.length;r--;)e.removeChild(t[r]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){Ra.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){Ra.prototype["set"+Ke(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach((function(e){Ra.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach((function(e){Ra.prototype["set"+Ke(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){Ra.prototype[e]=function(){return this.el_[e]()}})),xn.withSourceHandlers(Ra),Ra.nativeSourceHandler={},Ra.nativeSourceHandler.canPlayType=function(e){try{return Ra.TEST_VID.canPlayType(e)}catch(e){return""}},Ra.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Ra.nativeSourceHandler.canPlayType(e.type);if(e.src){var r=ir(e.src);return Ra.nativeSourceHandler.canPlayType("video/"+r)}return""},Ra.nativeSourceHandler.handleSource=function(e,t,r){t.setSrc(e.src)},Ra.nativeSourceHandler.dispose=function(){},Ra.registerSourceHandler(Ra.nativeSourceHandler),xn.registerTech("Html5",Ra);var $a=T(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),Fa=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Va={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Ha=function(t){function r(n,i,a){if(v(this,r),n.id=n.id||i.id||"vjs_video_"+de(),(i=E(r.getTagSettings(n),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if("function"==typeof n.closest){var s=n.closest("[lang]");s&&s.getAttribute&&(i.language=s.getAttribute("lang"))}else for(var o=n;o&&1===o.nodeType;){if(W(o).hasOwnProperty("lang")){i.language=o.getAttribute("lang");break}o=o.parentNode}var u=_(this,t.call(this,null,i,a));if(u.isPosterFromTech_=!1,u.queuedCallbacks_=[],u.isReady_=!1,u.hasStarted_=!1,u.userActive_=!1,!u.options_||!u.options_.techOrder||!u.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(u.tag=n,u.tagAttributes=n&&W(n),u.language(u.options_.language),i.languages){var c={};Object.getOwnPropertyNames(i.languages).forEach((function(e){c[e.toLowerCase()]=i.languages[e]})),u.languages_=c}else u.languages_=r.prototype.options_.languages;u.cache_={},u.poster_=i.poster||"",u.controls_=!!i.controls,u.cache_.lastVolume=1,n.controls=!1,n.removeAttribute("controls"),n.hasAttribute("autoplay")?u.options_.autoplay=!0:u.autoplay(u.options_.autoplay),u.scrubbing_=!1,u.el_=u.createEl(),u.cache_.lastPlaybackRate=u.defaultPlaybackRate(),We(u,{eventBusKey:"el_"});var l=Qe(u.options_);if(i.plugins){var d=i.plugins;Object.keys(d).forEach((function(e){if("function"!=typeof this[e])throw new Error('plugin "'+e+'" does not exist');this[e](d[e])}),u)}u.options_.playerOptions=l,u.middleware_=[],u.initChildren(),u.isAudio("audio"===n.nodeName.toLowerCase()),u.controls()?u.addClass("vjs-controls-enabled"):u.addClass("vjs-controls-disabled"),u.el_.setAttribute("role","region"),u.isAudio()?u.el_.setAttribute("aria-label",u.localize("Audio Player")):u.el_.setAttribute("aria-label",u.localize("Video Player")),u.isAudio()&&u.addClass("vjs-audio"),u.flexNotSupported_()&&u.addClass("vjs-no-flex"),st||u.addClass("vjs-workinghover"),r.players[u.id_]=u;var h=e.split(".")[0];return u.addClass("vjs-v"+h),u.userActive(!0),u.reportUserActivity(),u.one("play",u.listenForUserActivity_),u.on("fullscreenchange",u.handleFullscreenChange_),u.on("stageclick",u.handleStageClick_),u.changingSrc_=!1,u.playWaitingForReady_=!1,u.playOnLoadstart_=null,u}return b(r,t),r.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),r.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),qn(this),t.prototype.dispose.call(this)},r.prototype.createEl=function(){var e=this.tag,r=void 0,n=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),a="video-js"===this.tag.tagName.toLowerCase();n?r=this.el_=e.parentNode:a||(r=this.el_=t.prototype.createEl.call(this,"div"));var s=W(e);if(a){for(r=this.el_=e,e=this.tag=c.createElement("video");r.children.length;)e.appendChild(r.firstChild);F(r,"video-js")||V(r,"video-js"),r.appendChild(e),n=this.playerElIngest_=r,Object.keys(r).forEach((function(t){e[t]=r[t]}))}if(e.setAttribute("tabindex","-1"),mt&&e.setAttribute("role","application"),e.removeAttribute("width"),e.removeAttribute("height"),Object.getOwnPropertyNames(s).forEach((function(t){a&&"class"===t||r.setAttribute(t,s[t]),a&&e.setAttribute(t,s[t])})),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=r.player=this,this.addClass("vjs-paused"),!0!==i.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Le("vjs-styles-dimensions");var o=oe(".vjs-styles-defaults"),u=oe("head");u.insertBefore(this.styleEl_,o?o.nextSibling:u.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var l=e.getElementsByTagName("a"),d=0;d<l.length;d++){var h=l.item(d);V(h,"vjs-hidden"),h.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!n&&e.parentNode.insertBefore(r,e),$(e,r),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_=r,r},r.prototype.width=function(e){return this.dimension("width",e)},r.prototype.height=function(e){return this.dimension("height",e)},r.prototype.dimension=function(e,t){var r=e+"_";if(void 0===t)return this[r]||0;if(""===t)return this[r]=void 0,void this.updateStyleEl_();var n=parseFloat(t);isNaN(n)?f.error('Improper value "'+t+'" supplied for for '+e):(this[r]=n,this.updateStyleEl_())},r.prototype.fluid=function(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,e?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),this.updateStyleEl_()},r.prototype.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},r.prototype.updateStyleEl_=function(){if(!0!==i.VIDEOJS_NO_DYNAMIC_STYLE){var e=void 0,t=void 0,r=void 0,n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),a=n[1]/n[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/a:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*a,r=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(r),Me(this.styleEl_,"\n      ."+r+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+r+".vjs-fluid {\n        padding-top: "+100*a+"%;\n      }\n    ")}else{var s="number"==typeof this.width_?this.width_:this.options_.width,o="number"==typeof this.height_?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(s>=0&&(u.width=s),o>=0&&(u.height=o))}},r.prototype.loadTech_=function(e,t){var r=this;this.tech_&&this.unloadTech_();var n=Ke(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(xn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;var a={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+n+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Hr.names.forEach((function(e){var t=Hr[e];a[t.getterName]=r[t.privateName]})),E(a,this.options_[n]),E(a,this.options_[i]),E(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);var s=xn.getTech(e);if(!s)throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'");this.tech_=new s(a),this.tech_.ready(Ie(this,this.handleTechReady_),!0),Nt.jsonToTextTracks(this.textTracksJson_||[],this.tech_),Fa.forEach((function(e){r.on(r.tech_,e,r["handleTech"+Ke(e)+"_"])})),Object.keys(Va).forEach((function(e){r.on(r.tech_,e,(function(t){0===r.tech_.playbackRate()&&r.tech_.seeking()?r.queuedCallbacks_.push({callback:r["handleTech"+Va[e]+"_"].bind(r),event:t}):r["handleTech"+Va[e]+"_"](t)}))})),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||$(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},r.prototype.unloadTech_=function(){var e=this;Hr.names.forEach((function(t){var r=Hr[t];e[r.privateName]=e[r.getterName]()})),this.textTracksJson_=Nt.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},r.prototype.tech=function(e){return void 0===e&&f.warn(g($a)),this.tech_},r.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},r.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},r.prototype.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},r.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},r.prototype.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var r=function(){var e=t.muted();t.muted(!0);var r=t.play();if(r&&r.then&&r.catch)return r.catch((function(r){t.muted(e)}))},n=void 0;if("any"===e?(n=this.play())&&n.then&&n.catch&&n.catch((function(){return r()})):n="muted"===e?r():this.play(),n&&n.then&&n.catch)return n.then((function(){t.trigger({type:"autoplay-success",autoplay:e})})).catch((function(r){t.trigger({type:"autoplay-failure",autoplay:e})}))}},r.prototype.updateSourceCaches_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e,r="";if("string"!=typeof t&&(t=e.src,r=e.type),!/^blob:/.test(t)){this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!r&&(r=Kn(this,t)),this.cache_.source=Qe({},e,{src:t,type:r});for(var n=this.cache_.sources.filter((function(e){return e.src&&e.src===t})),i=[],a=this.$$("source"),s=[],o=0;o<a.length;o++){var u=W(a[o]);i.push(u),u.src&&u.src===t&&s.push(u.src)}s.length&&!n.length?this.cache_.sources=i:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}},r.prototype.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_&&(this.updateSourceCaches_(e.src),!e.src)){var r=function e(r){"sourceset"!==r.type&&t.updateSourceCaches_(t.techGet_("currentSrc")),t.tech_.off(["sourceset","loadstart"],e)};this.tech_.one(["sourceset","loadstart"],r)}this.trigger({src:e.src,type:"sourceset"})},r.prototype.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},r.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},r.prototype.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},r.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",(function(){return e.removeClass("vjs-waiting")}))},r.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},r.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},r.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},r.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},r.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},r.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(f.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},r.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},r.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},r.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},r.prototype.handleTechClick_=function(e){se(e)&&this.controls_&&(this.paused()?Rt(this.play()):this.pause())},r.prototype.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(t){return t.contains(e.target)}))||(this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},r.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},r.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},r.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},r.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},r.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},r.prototype.handleStageClick_=function(){this.reportUserActivity()},r.prototype.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},r.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)},r.prototype.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},r.prototype.getCache=function(){return this.cache_},r.prototype.techCall_=function(e,t){this.ready((function(){if(e in $n)return jn(this.middleware_,this.tech_,e,t);if(e in Fn)return Nn(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw f(e),e}}),!0)},r.prototype.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Bn)return Rn(this.middleware_,this.tech_,e);if(e in Fn)return Nn(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw f("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw f("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw f(t),t}}},r.prototype.play=function(){var e=this,t=this.options_.Promise||i.Promise;return t?new t((function(t){e.play_(t)})):this.play_()},r.prototype.play_=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;if(this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return void t(this.techGet_("play"));this.playOnLoadstart_=function(){e.playOnLoadstart_=null,t(e.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready((function(){e.playWaitingForReady_=!1,t(e.play())}))}},r.prototype.pause=function(){this.techCall_("pause")},r.prototype.paused=function(){return!1!==this.techGet_("paused")},r.prototype.played=function(){return this.techGet_("played")||St(0,0)},r.prototype.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},r.prototype.currentTime=function(e){return void 0!==e?(e<0&&(e=0),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},r.prototype.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},r.prototype.remainingTime=function(){return this.duration()-this.currentTime()},r.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},r.prototype.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=St(0,0)),e},r.prototype.bufferedPercent=function(){return Ct(this.buffered(),this.duration())},r.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),r=e.end(e.length-1);return r>t&&(r=t),r},r.prototype.volume=function(e){var t=void 0;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},r.prototype.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},r.prototype.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},r.prototype.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},r.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},r.prototype.isFullscreen=function(e){if(void 0===e)return!!this.isFullscreen_;this.isFullscreen_=!!e},r.prototype.requestFullscreen=function(){var e=kt;this.isFullscreen(!0),e.requestFullscreen?(we(c,e.fullscreenchange,Ie(this,(function t(r){this.isFullscreen(c[e.fullscreenElement]),!1===this.isFullscreen()&&Se(c,e.fullscreenchange,t),this.trigger("fullscreenchange")}))),this.el_[e.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},r.prototype.exitFullscreen=function(){var e=kt;this.isFullscreen(!1),e.requestFullscreen?c[e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},r.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=c.documentElement.style.overflow,we(c,"keydown",Ie(this,this.fullWindowOnEscKey)),c.documentElement.style.overflow="hidden",V(c.body,"vjs-full-window"),this.trigger("enterFullWindow")},r.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},r.prototype.exitFullWindow=function(){this.isFullWindow=!1,Se(c,"keydown",this.fullWindowOnEscKey),c.documentElement.style.overflow=this.docOrigOverflow,H(c.body,"vjs-full-window"),this.trigger("exitFullWindow")},r.prototype.canPlayType=function(e){for(var t=void 0,r=0,n=this.options_.techOrder;r<n.length;r++){var i=n[r],a=xn.getTech(i);if(a||(a=Je.getComponent(i)),a){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else f.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},r.prototype.selectSource=function(e){var t=this,r=this.options_.techOrder.map((function(e){return[e,xn.getTech(e)]})).filter((function(e){var t=e[0],r=e[1];return r?r.isSupported():(f.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),n=function(e,t,r){var n=void 0;return e.some((function(e){return t.some((function(t){if(n=r(e,t))return!0}))})),n},i=function(e){return function(t,r){return e(r,t)}},a=function(e,r){var n=e[0];if(e[1].canPlaySource(r,t.options_[n.toLowerCase()]))return{source:r,tech:n}};return(this.options_.sourceOrder?n(e,r,i(a)):n(r,e,a))||!1},r.prototype.src=function(e){var t=this;if(void 0===e)return this.cache_.src||"";var r=Yn(e);r.length?(this.changingSrc_=!0,this.cache_.sources=r,this.updateSourceCaches_(r[0]),Dn(this,r[0],(function(e,n){if(t.middleware_=n,t.cache_.sources=r,t.updateSourceCaches_(e),t.src_(e))return r.length>1?t.src(r.slice(1)):(t.changingSrc_=!1,t.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0),void t.triggerReady());Un(n,t.tech_)}))):this.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0)},r.prototype.src_=function(e){var t=this,r=this.selectSource([e]);return!r||(Ye(r.tech,this.techName_)?(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1):(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready((function(){t.changingSrc_=!1})),!1))},r.prototype.load=function(){this.techCall_("load")},r.prototype.reset=function(){this.tech_&&this.tech_.clearTracks("text"),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},r.prototype.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},r.prototype.currentSource=function(){return this.cache_.source||{}},r.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},r.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""},r.prototype.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},r.prototype.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t=void 0;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=t||this.options_.autoplay,this.tech_&&this.techCall_("setAutoplay",t)},r.prototype.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},r.prototype.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},r.prototype.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},r.prototype.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},r.prototype.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},r.prototype.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},r.prototype.error=function(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new Lt(e),this.addClass("vjs-error"),f.error("(CODE:"+this.error_.code+" "+Lt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},r.prototype.reportUserActivity=function(e){this.userActivity_=!0},r.prototype.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},r.prototype.listenForUserActivity_=function(){var e=void 0,t=void 0,r=void 0,n=Ie(this,this.reportUserActivity),i=function(e){e.screenX===t&&e.screenY===r||(t=e.screenX,r=e.screenY,n())},a=function(){n(),this.clearInterval(e),e=this.setInterval(n,250)},s=function(t){n(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",i),this.on("mouseup",s),this.on("keydown",n),this.on("keyup",n);var o=void 0;this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o);var e=this.options_.inactivityTimeout;e<=0||(o=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}}),250)},r.prototype.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},r.prototype.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},r.prototype.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},r.prototype.addTextTrack=function(e,t,r){if(this.tech_)return this.tech_.addTextTrack(e,t,r)},r.prototype.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},r.prototype.removeRemoteTextTrack=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).track,t=void 0===e?arguments[0]:e;if(this.tech_)return this.tech_.removeRemoteTextTrack(t)},r.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},r.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},r.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},r.prototype.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},r.prototype.languages=function(){return Qe(r.prototype.options_.languages,this.languages_)},r.prototype.toJSON=function(){var e=Qe(this.options_),t=e.tracks;e.tracks=[];for(var r=0;r<t.length;r++){var n=t[r];(n=Qe(n)).player=void 0,e.tracks[r]=n}return e},r.prototype.createModal=function(e,t){var r=this;(t=t||{}).content=e||"";var n=new Ft(this,t);return this.addChild(n),n.on("dispose",(function(){r.removeChild(n)})),n.open(),n},r.getTagSettings=function(e){var t={sources:[],tracks:[]},r=W(e),n=r["data-setup"];if(F(e,"vjs-fluid")&&(r.fluid=!0),null!==n){var i=It(n||"{}"),a=i[0],s=i[1];a&&f.error(a),E(r,s)}if(E(t,r),e.hasChildNodes())for(var o=e.childNodes,u=0,c=o.length;u<c;u++){var l=o[u],d=l.nodeName.toLowerCase();"source"===d?t.sources.push(W(l)):"track"===d&&t.tracks.push(W(l))}return t},r.prototype.flexNotSupported_=function(){var e=c.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},r}(Je);Hr.names.forEach((function(e){var t=Hr[e];Ha.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),Ha.players={};var qa=i.navigator;Ha.prototype.options_={techOrder:xn.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:qa&&(qa.languages&&qa.languages[0]||qa.userLanguage||qa.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){Ha.prototype[e]=function(){return this.techGet_(e)}})),Fa.forEach((function(e){Ha.prototype["handleTech"+Ke(e)+"_"]=function(){return this.trigger(e)}})),Je.registerComponent("Player",Ha);var za="plugin",Wa="activePlugins_",Ga={},Xa=function(e){return Ga.hasOwnProperty(e)},Ka=function(e){return Xa(e)?Ga[e]:void 0},Ya=function(e,t){e[Wa]=e[Wa]||{},e[Wa][t]=!0},Qa=function(e,t,r){var n=(r?"before":"")+"pluginsetup";e.trigger(n,t),e.trigger(n+":"+t.name,t)},Ja=function(e,t){var r=function(){Qa(this,{name:e,plugin:t,instance:null},!0);var r=t.apply(this,arguments);return Ya(this,e),Qa(this,{name:e,plugin:t,instance:r}),r};return Object.keys(t).forEach((function(e){r[e]=t[e]})),r},Za=function(e,t){return t.prototype.name=e,function(){Qa(this,{name:e,plugin:t,instance:null},!0);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=new(Function.prototype.bind.apply(t,[null].concat([this].concat(n))));return this[e]=function(){return a},Qa(this,a.getEventHash()),a}},es=function(){function e(t){if(v(this,e),this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,We(this),delete this.trigger,Xe(this,this.constructor.defaultState),Ya(t,this.name),this.dispose=Ie(this,this.dispose),t.on("dispose",this.dispose)}return e.prototype.version=function(){return this.constructor.VERSION},e.prototype.getEventHash=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.name=this.name,e.plugin=this.constructor,e.instance=this,e},e.prototype.trigger=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce(this.eventBusEl_,e,this.getEventHash(t))},e.prototype.handleStateChanged=function(e){},e.prototype.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Wa][e]=!1,this.player=this.state=null,t[e]=Za(e,Ga[e])},e.isBasic=function(t){var r="string"==typeof t?Ka(t):t;return"function"==typeof r&&!e.prototype.isPrototypeOf(r.prototype)},e.registerPlugin=function(t,r){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+(void 0===t?"undefined":y(t))+".");if(Xa(t))f.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Ha.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof r)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+(void 0===r?"undefined":y(r))+".");return Ga[t]=r,t!==za&&(e.isBasic(r)?Ha.prototype[t]=Ja(t,r):Ha.prototype[t]=Za(t,r)),r},e.deregisterPlugin=function(e){if(e===za)throw new Error("Cannot de-register base plugin.");Xa(e)&&(delete Ga[e],delete Ha.prototype[e])},e.getPlugins=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(Ga),t=void 0;return e.forEach((function(e){var r=Ka(e);r&&((t=t||{})[e]=r)})),t},e.getPluginVersion=function(e){var t=Ka(e);return t&&t.VERSION||""},e}();es.getPlugin=Ka,es.BASE_PLUGIN_NAME=za,es.registerPlugin(za,es),Ha.prototype.usingPlugin=function(e){return!!this[Wa]&&!0===this[Wa][e]},Ha.prototype.hasPlugin=function(e){return!!Xa(e)};var ts=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":y(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)},rs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(){e.apply(this,arguments)},n={};for(var i in"object"===(void 0===t?"undefined":y(t))?(t.constructor!==Object.prototype.constructor&&(r=t.constructor),n=t):"function"==typeof t&&(r=t),ts(r,e),n)n.hasOwnProperty(i)&&(r.prototype[i]=n[i]);return r},ns=function(e){return 0===e.indexOf("#")?e.slice(1):e};function is(e,t,r){var n=is.getPlayer(e);if(n)return t&&f.warn('Player "'+e+'" is already initialised. Options will not be applied.'),r&&n.ready(r),n;var i="string"==typeof e?oe("#"+ns(e)):e;if(!U(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");c.body.contains(i)||f.warn("The element supplied is not included in the DOM"),t=t||{},is.hooks("beforesetup").forEach((function(e){var r=e(i,Qe(t));O(r)&&!Array.isArray(r)?t=Qe(t,r):f.error("please return an object in beforesetup hooks")}));var a=Je.getComponent("Player");return n=new a(i,t,r),is.hooks("setup").forEach((function(e){return e(n)})),n}if(is.hooks_={},is.hooks=function(e,t){return is.hooks_[e]=is.hooks_[e]||[],t&&(is.hooks_[e]=is.hooks_[e].concat(t)),is.hooks_[e]},is.hook=function(e,t){is.hooks(e,t)},is.hookOnce=function(e,t){is.hooks(e,[].concat(t).map((function(t){return function r(){return is.removeHook(e,r),t.apply(void 0,arguments)}})))},is.removeHook=function(e,t){var r=is.hooks(e).indexOf(t);return!(r<=-1||(is.hooks_[e]=is.hooks_[e].slice(),is.hooks_[e].splice(r,1),0))},!0!==i.VIDEOJS_NO_DYNAMIC_STYLE&&D()){var as=oe(".vjs-styles-defaults");if(!as){as=Le("vjs-styles-defaults");var ss=oe("head");ss&&ss.insertBefore(as,ss.firstChild),Me(as,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}return Pe(1,is),is.VERSION=e,is.options=Ha.prototype.options_,is.getPlayers=function(){return Ha.players},is.getPlayer=function(e){var t=Ha.players,r=void 0;if("string"==typeof e){var n=ns(e),i=t[n];if(i)return i;r=oe("#"+n)}else r=e;if(U(r)){var a=r,s=a.player,o=a.playerId;if(s||t[o])return s||t[o]}},is.getAllPlayers=function(){return Object.keys(Ha.players).map((function(e){return Ha.players[e]})).filter(Boolean)},is.players=Ha.players,is.getComponent=Je.getComponent,is.registerComponent=function(e,t){xn.isTech(t)&&f.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Je.registerComponent.call(Je,e,t)},is.getTech=xn.getTech,is.registerTech=xn.registerTech,is.use=In,Object.defineProperty(is,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(is.middleware,"TERMINATOR",{value:Mn,writeable:!1,enumerable:!0}),is.browser=bt,is.TOUCH_ENABLED=vt,is.extend=rs,is.mergeOptions=Qe,is.bind=Ie,is.registerPlugin=es.registerPlugin,is.deregisterPlugin=es.deregisterPlugin,is.plugin=function(e,t){return f.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),es.registerPlugin(e,t)},is.getPlugins=es.getPlugins,is.getPlugin=es.getPlugin,is.getPluginVersion=es.getPluginVersion,is.addLanguage=function(e,t){var r;return e=(""+e).toLowerCase(),is.options.languages=Qe(is.options.languages,((r={})[e]=t,r)),is.options.languages[e]},is.log=f,is.createTimeRange=is.createTimeRanges=St,is.formatTime=gi,is.setFormatTime=fi,is.resetFormatTime=mi,is.parseUrl=rr,is.isCrossOrigin=ar,is.EventTarget=Re,is.on=we,is.one=ke,is.off=Se,is.trigger=Ce,is.xhr=Sr,is.TextTrack=Ir,is.AudioTrack=Dr,is.VideoTrack=Ur,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){is[e]=function(){return f.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),ce[e].apply(null,arguments)}})),is.computedStyle=x,is.dom=ce,is.url=sr,is}()},9994:(e,t,r)=>{var n,i="undefined"!=typeof window?window:{},a=r(6533);"undefined"!=typeof document?n=document:(n=i["__GLOBAL_DOCUMENT_CACHE@4"])||(n=i["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=n},3372:e=>{var t;t="undefined"!=typeof window?window:"undefined"!=typeof self?self:{},e.exports=t},6533:()=>{}},t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(7878),r(7657),r(9074),r(2298),r(4244),r(8938);r(4924)})();