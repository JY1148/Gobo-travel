{"ast":null,"code":"import _defineProperty from\"/Users/jinzhouyan/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/jinzhouyan/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jinzhouyan/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";var _extraReducers;import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import axios from\"axios\";import{checkout}from\"../shoppingCart/slice\";var initialState={loading:false,error:null,currentOrder:null};export var placeOrder=createAsyncThunk(\"order/placeOrder\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(paramaters,thunkAPI){var _yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"http://123.56.149.216:8080/api/orders/\".concat(paramaters.orderId,\"/placeOrder\"),null,{headers:{Authorization:\"bearer \".concat(paramaters.jwt)}});case 2:_yield$axios$post=_context.sent;data=_yield$axios$post.data;return _context.abrupt(\"return\",data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());export var orderSlice=createSlice({name:\"order\",initialState:initialState,reducers:{},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,placeOrder.pending.type,function(state){//return {...state, loading:true};\nstate.loading=true;}),_defineProperty(_extraReducers,placeOrder.fulfilled.type,function(state,action){state.loading=false;state.currentOrder=action.payload;state.error=null;}),_defineProperty(_extraReducers,placeOrder.rejected.type,function(state,action){state.loading=false;state.error=action.payload;}),_defineProperty(_extraReducers,checkout.pending.type,function(state){//return {...state, loading:true};\nstate.loading=true;}),_defineProperty(_extraReducers,checkout.fulfilled.type,function(state,action){state.loading=false;state.currentOrder=action.payload;state.error=null;}),_defineProperty(_extraReducers,checkout.rejected.type,function(state,action){state.loading=false;state.error=action.payload;}),_extraReducers)});","map":{"version":3,"sources":["/Users/jinzhouyan/Desktop/react-travel/src/redux/order/slice.ts"],"names":["createSlice","createAsyncThunk","axios","checkout","initialState","loading","error","currentOrder","placeOrder","paramaters","thunkAPI","post","orderId","headers","Authorization","jwt","data","orderSlice","name","reducers","extraReducers","pending","type","state","fulfilled","action","payload","rejected"],"mappings":"yeAAA,OAASA,WAAT,CAAqCC,gBAArC,KAA6D,kBAA7D,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,uBAAzB,CAOA,GAAMC,CAAAA,YAAwB,CAAG,CAC7BC,OAAO,CAAE,KADoB,CAE7BC,KAAK,CAAE,IAFsB,CAG7BC,YAAY,CAAE,IAHe,CAAjC,CAMA,MAAO,IAAMC,CAAAA,UAAU,CAAGP,gBAAgB,CACtC,kBADsC,0FAEtC,iBAAOQ,UAAP,CAAqDC,QAArD,mKAC2BR,CAAAA,KAAK,CAACS,IAAN,iDACsBF,UAAU,CAACG,OADjC,gBAEjB,IAFiB,CAEX,CACRC,OAAO,CAAE,CACLC,aAAa,kBAAYL,UAAU,CAACM,GAAvB,CADR,CADD,CAFW,CAD3B,wCACYC,IADZ,mBACYA,IADZ,iCAQWA,IARX,wDAFsC,mEAAnC,CAcP,MAAO,IAAMC,CAAAA,UAAU,CAAGjB,WAAW,CAAC,CAClCkB,IAAI,CAAE,OAD4B,CAElCd,YAAY,CAAZA,YAFkC,CAGlCe,QAAQ,CAAE,EAHwB,CAK/BC,aAAa,mDACXZ,UAAU,CAACa,OAAX,CAAmBC,IADR,CACe,SAACC,KAAD,CAAW,CAClC;AACAA,KAAK,CAAClB,OAAN,CAAgB,IAAhB,CACH,CAJW,iCAKXG,UAAU,CAACgB,SAAX,CAAqBF,IALV,CAKiB,SAACC,KAAD,CAAQE,MAAR,CAAmB,CAC5CF,KAAK,CAAClB,OAAN,CAAgB,KAAhB,CACAkB,KAAK,CAAChB,YAAN,CAAqBkB,MAAM,CAACC,OAA5B,CACAH,KAAK,CAACjB,KAAN,CAAc,IAAd,CACH,CATW,iCAUXE,UAAU,CAACmB,QAAX,CAAoBL,IAVT,CAUgB,SAACC,KAAD,CAAQE,MAAR,CAAiD,CACzEF,KAAK,CAAClB,OAAN,CAAgB,KAAhB,CACAkB,KAAK,CAACjB,KAAN,CAAcmB,MAAM,CAACC,OAArB,CACH,CAbW,iCAcXvB,QAAQ,CAACkB,OAAT,CAAiBC,IAdN,CAca,SAACC,KAAD,CAAW,CAChC;AACAA,KAAK,CAAClB,OAAN,CAAgB,IAAhB,CACH,CAjBW,iCAkBXF,QAAQ,CAACqB,SAAT,CAAmBF,IAlBR,CAkBe,SAACC,KAAD,CAAQE,MAAR,CAAmB,CAC1CF,KAAK,CAAClB,OAAN,CAAgB,KAAhB,CACAkB,KAAK,CAAChB,YAAN,CAAqBkB,MAAM,CAACC,OAA5B,CACAH,KAAK,CAACjB,KAAN,CAAc,IAAd,CACH,CAtBW,iCAuBXH,QAAQ,CAACwB,QAAT,CAAkBL,IAvBP,CAuBc,SAACC,KAAD,CAAQE,MAAR,CAAiD,CACvEF,KAAK,CAAClB,OAAN,CAAgB,KAAhB,CACAkB,KAAK,CAACjB,KAAN,CAAcmB,MAAM,CAACC,OAArB,CACH,CA1BW,iBALkB,CAAD,CAA9B","sourcesContent":["import { createSlice, PayloadAction, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { checkout } from \"../shoppingCart/slice\";\ninterface OrderState {\n    loading: boolean;\n    error: string | null;\n    currentOrder: any;\n}\n\nconst initialState: OrderState = {\n    loading: false,\n    error: null,\n    currentOrder: null,\n\n}\nexport const placeOrder = createAsyncThunk(\n    \"order/placeOrder\",\n    async (paramaters: { jwt: string, orderId: string }, thunkAPI) => {\n        const { data } = await axios.post(\n            `http://123.56.149.216:8080/api/orders/${paramaters.orderId}/placeOrder`\n            , null, {\n            headers: {\n                Authorization: `bearer ${paramaters.jwt}`\n            }\n        });\n        return data;\n    }\n)\n\nexport const orderSlice = createSlice({\n    name: \"order\",\n    initialState,\n    reducers: {\n\n    }, extraReducers: {\n        [placeOrder.pending.type]: (state) => {\n            //return {...state, loading:true};\n            state.loading = true;\n        },\n        [placeOrder.fulfilled.type]: (state, action) => {\n            state.loading = false;\n            state.currentOrder = action.payload;\n            state.error = null;\n        },\n        [placeOrder.rejected.type]: (state, action: PayloadAction<string | null>) => {\n            state.loading = false;\n            state.error = action.payload;\n        },\n        [checkout.pending.type]: (state) => {\n            //return {...state, loading:true};\n            state.loading = true;\n        },\n        [checkout.fulfilled.type]: (state, action) => {\n            state.loading = false;\n            state.currentOrder = action.payload;\n            state.error = null;\n        },\n        [checkout.rejected.type]: (state, action: PayloadAction<string | null>) => {\n            state.loading = false;\n            state.error = action.payload;\n        }\n    }\n})"]},"metadata":{},"sourceType":"module"}