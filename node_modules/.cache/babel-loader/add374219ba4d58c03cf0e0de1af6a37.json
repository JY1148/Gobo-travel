{"ast":null,"code":"import React from\"react\";import styles from\"./ShoppingCart.module.css\";import{MainLayout}from\"../../layouts/mainLayout\";import{Row,Col,Affix}from\"antd\";import{ProductList,PaymentCard}from\"../../components\";import{useSelector}from\"../../redux/hooks\";import{useDispatch}from\"react-redux\";import{clearShoppingCartItem,checkout}from\"../../redux/shoppingCart/slice\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ShoppingCartPage=function ShoppingCartPage(props){var shoppingCartLoading=useSelector(function(s){return s.shoppingCart.loading;});var shoppingCartItems=useSelector(function(s){return s.shoppingCart.items;});var jwt=useSelector(function(s){return s.user.token;});var dispatch=useDispatch();var history=useHistory();return/*#__PURE__*/_jsx(MainLayout,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(\"div\",{className:styles[\"product-list-container\"],children:/*#__PURE__*/_jsx(ProductList,{data:shoppingCartItems.map(function(s){return s.touristRoute;})})})}),/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Affix,{children:/*#__PURE__*/_jsx(\"div\",{className:styles[\"payment-card-container\"],children:/*#__PURE__*/_jsx(PaymentCard,{loading:shoppingCartLoading,originalPrice:shoppingCartItems.map(function(s){return s.originalPrice;}).reduce(function(a,b){return a+b;},0),price:shoppingCartItems.map(function(s){return s.originalPrice*(s.discountPresent?s.discountPresent:1);}).reduce(function(a,b){return a+b;},0),onCheckout:function onCheckout(){if(shoppingCartItems.length<=0){return;}dispatch(checkout(jwt));history.push(\"./placeOrder\");},onShoppingCartClear:function onShoppingCartClear(){dispatch(clearShoppingCartItem({jwt:jwt,itemIds:shoppingCartItems.map(function(s){return s.id;})}));}})})})})]})});};","map":{"version":3,"sources":["/Users/jinzhouyan/Desktop/react-travel/src/pages/shoppigCart/ShoppingCart.tsx"],"names":["React","styles","MainLayout","Row","Col","Affix","ProductList","PaymentCard","useSelector","useDispatch","clearShoppingCartItem","checkout","useHistory","ShoppingCartPage","props","shoppingCartLoading","s","shoppingCart","loading","shoppingCartItems","items","jwt","user","token","dispatch","history","map","touristRoute","originalPrice","reduce","a","b","discountPresent","length","push","itemIds","id"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,2BAAnB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,OAASC,GAAT,CAAcC,GAAd,CAAmBC,KAAnB,KAAgC,MAAhC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,kBAAzC,CACA,OAASC,WAAT,KAA4B,mBAA5B,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,qBAAT,CAA+BC,QAA/B,KAA+C,gCAA/C,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,wFAEA,MAAO,IAAMC,CAAAA,gBAA0B,CAAG,QAA7BA,CAAAA,gBAA6B,CAACC,KAAD,CAAW,CACnD,GAAMC,CAAAA,mBAAmB,CAAGP,WAAW,CAAC,SAACQ,CAAD,QAAOA,CAAAA,CAAC,CAACC,YAAF,CAAeC,OAAtB,EAAD,CAAvC,CACA,GAAMC,CAAAA,iBAAiB,CAAGX,WAAW,CAAC,SAACQ,CAAD,QAAOA,CAAAA,CAAC,CAACC,YAAF,CAAeG,KAAtB,EAAD,CAArC,CACA,GAAMC,CAAAA,GAAG,CAAGb,WAAW,CAAC,SAACQ,CAAD,QAAOA,CAAAA,CAAC,CAACM,IAAF,CAAOC,KAAd,EAAD,CAAvB,CAEA,GAAMC,CAAAA,QAAQ,CAAGf,WAAW,EAA5B,CACA,GAAMgB,CAAAA,OAAO,CAAGb,UAAU,EAA1B,CAEA,mBACE,KAAC,UAAD,wBACE,MAAC,GAAD,yBACE,KAAC,GAAD,EAAK,IAAI,CAAE,EAAX,uBACE,YAAK,SAAS,CAAEX,MAAM,CAAC,wBAAD,CAAtB,uBACE,KAAC,WAAD,EAAa,IAAI,CAAEkB,iBAAiB,CAACO,GAAlB,CAAsB,SAACV,CAAD,QAAOA,CAAAA,CAAC,CAACW,YAAT,EAAtB,CAAnB,EADF,EADF,EADF,cAME,KAAC,GAAD,EAAK,IAAI,CAAE,CAAX,uBACE,KAAC,KAAD,wBACE,YAAK,SAAS,CAAE1B,MAAM,CAAC,wBAAD,CAAtB,uBACE,KAAC,WAAD,EACE,OAAO,CAAEc,mBADX,CAEE,aAAa,CAAEI,iBAAiB,CAC7BO,GADY,CACR,SAACV,CAAD,QAAOA,CAAAA,CAAC,CAACY,aAAT,EADQ,EAEZC,MAFY,CAEL,SAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAAGC,CAAd,EAFK,CAEY,CAFZ,CAFjB,CAKE,KAAK,CAAEZ,iBAAiB,CACrBO,GADI,CAEH,SAACV,CAAD,QACEA,CAAAA,CAAC,CAACY,aAAF,EACCZ,CAAC,CAACgB,eAAF,CAAoBhB,CAAC,CAACgB,eAAtB,CAAwC,CADzC,CADF,EAFG,EAMJH,MANI,CAMG,SAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAAGC,CAAd,EANH,CAMoB,CANpB,CALT,CAYE,UAAU,CAAE,qBAAM,CACd,GAAGZ,iBAAiB,CAACc,MAAlB,EAA0B,CAA7B,CAA+B,CAC3B,OACH,CACDT,QAAQ,CAACb,QAAQ,CAACU,GAAD,CAAT,CAAR,CACAI,OAAO,CAACS,IAAR,CAAa,cAAb,EACH,CAlBH,CAmBE,mBAAmB,CAAE,8BAAM,CACzBV,QAAQ,CACNd,qBAAqB,CAAC,CACpBW,GAAG,CAAHA,GADoB,CAEpBc,OAAO,CAAEhB,iBAAiB,CAACO,GAAlB,CAAsB,SAACV,CAAD,QAAOA,CAAAA,CAAC,CAACoB,EAAT,EAAtB,CAFW,CAAD,CADf,CAAR,CAMD,CA1BH,EADF,EADF,EADF,EANF,GADF,EADF,CA6CD,CArDM","sourcesContent":["import React from \"react\";\nimport styles from \"./ShoppingCart.module.css\";\nimport { MainLayout } from \"../../layouts/mainLayout\";\nimport { Row, Col, Affix } from \"antd\";\nimport { ProductList, PaymentCard } from \"../../components\";\nimport { useSelector } from \"../../redux/hooks\";\nimport { useDispatch } from \"react-redux\";\nimport { clearShoppingCartItem,checkout } from \"../../redux/shoppingCart/slice\";\nimport { useHistory } from \"react-router-dom\";\n\nexport const ShoppingCartPage: React.FC = (props) => {\n  const shoppingCartLoading = useSelector((s) => s.shoppingCart.loading);\n  const shoppingCartItems = useSelector((s) => s.shoppingCart.items);\n  const jwt = useSelector((s) => s.user.token) as string;\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  return (\n    <MainLayout>\n      <Row>\n        <Col span={16}>\n          <div className={styles[\"product-list-container\"]}>\n            <ProductList data={shoppingCartItems.map((s) => s.touristRoute)} />\n          </div>\n        </Col>\n        <Col span={8}>\n          <Affix>\n            <div className={styles[\"payment-card-container\"]}>\n              <PaymentCard\n                loading={shoppingCartLoading}\n                originalPrice={shoppingCartItems\n                  .map((s) => s.originalPrice)\n                  .reduce((a, b) => a + b, 0)}\n                price={shoppingCartItems\n                  .map(\n                    (s) =>\n                      s.originalPrice *\n                      (s.discountPresent ? s.discountPresent : 1)\n                  )\n                  .reduce((a, b) => a + b, 0)}\n                onCheckout={() => {\n                    if(shoppingCartItems.length<=0){\n                        return\n                    }\n                    dispatch(checkout(jwt))\n                    history.push(\"./placeOrder\")\n                }}\n                onShoppingCartClear={() => {\n                  dispatch(\n                    clearShoppingCartItem({\n                      jwt,\n                      itemIds: shoppingCartItems.map((s) => s.id),\n                    })\n                  );\n                }}\n              />\n            </div>\n          </Affix>\n        </Col>\n      </Row>\n    </MainLayout>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}