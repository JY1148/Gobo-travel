{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jinzhouyan/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jinzhouyan/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from\"react\";import{useParams}from\"react-router-dom\";import{Spin,Row,Col,Divider,Typography,Anchor,Menu}from\"antd\";import styles from\"./DetailPage.module.css\";import{ProductIntro,ProductComments}from\"../../components\";import{DatePicker,Button}from\"antd\";import{commentMockData}from\"./mockup\";import{getProductDetail}from\"../../redux/productDetail/slice\";import{useSelector}from\"../../redux/hooks\";import{useDispatch}from\"react-redux\";import{MainLayout}from\"../../layouts/mainLayout\";import{ShoppingCartOutlined}from\"@ant-design/icons\";import{addShoppingCartItem}from\"../../redux/shoppingCart/slice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RangePicker=DatePicker.RangePicker;export var DetailPage=function DetailPage(){var _useParams=useParams(),touristRouteId=_useParams.touristRouteId;// const [loading, setLoading] = useState<boolean>(true);\n// const [product, setProduct] = useState<any>(null);\n// const [error, setError] = useState<string | null>(null);\nvar loading=useSelector(function(state){return state.productDetail.loading;});var product=useSelector(function(state){return state.productDetail.data;});var error=useSelector(function(state){return state.productDetail.error;});var dispatch=useDispatch();var jwt=useSelector(function(s){return s.user.token;});var shoppingCartLoading=useSelector(function(s){return s.shoppingCart.loading;});useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(getProductDetail(touristRouteId));case 1:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);if(loading){return/*#__PURE__*/_jsx(Spin,{size:\"large\",style:{marginTop:200,marginBottom:200,marginLeft:\"auto\",marginRight:\"auto\",width:\"100%\"}});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Website Error: \",error,\" \"]});}return/*#__PURE__*/_jsxs(MainLayout,{children:[/*#__PURE__*/_jsx(\"div\",{className:styles[\"product-intro-container\"],children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{span:13,children:/*#__PURE__*/_jsx(ProductIntro,{title:product.title,shortDescription:product.shortDescription,price:product.originalPrice,coupons:product.coupons,points:product.points,discount:product.price,rating:product.rating,pictures:product.touristRoutePictures.map(function(p){return p.url;})})}),/*#__PURE__*/_jsxs(Col,{span:11,children:[/*#__PURE__*/_jsxs(Button,{style:{marginTop:50,marginBottom:30,display:\"block\"},type:\"primary\",danger:true,loading:shoppingCartLoading,onClick:function onClick(){dispatch(addShoppingCartItem({jwt:jwt,touristRouteId:product.id}));},children:[/*#__PURE__*/_jsx(ShoppingCartOutlined,{}),\"Add to cart\"]}),/*#__PURE__*/_jsx(RangePicker,{open:true,style:{marginTop:20}})]})]})}),/*#__PURE__*/_jsx(Anchor,{className:styles[\"product-detail-anchor\"],children:/*#__PURE__*/_jsxs(Menu,{mode:\"horizontal\",children:[/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(Anchor.Link,{href:\"#feature\",title:\"\\u4EA7\\u54C1\\u7279\\u8272\"})},\"1\"),/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(Anchor.Link,{href:\"#fees\",title:\"\\u8D39\\u7528\"})},\"2\"),/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(Anchor.Link,{href:\"#notes\",title:\"\\u9884\\u5B9A\\u987B\\u77E5\"})},\"3\"),/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(Anchor.Link,{href:\"#comments\",title:\"\\u7528\\u6237\\u8BC4\\u4EF7\"})},\"4\")]})}),/*#__PURE__*/_jsx(\"div\",{id:\"feature\",className:styles[\"product-detail-container\"]}),/*#__PURE__*/_jsx(Divider,{orientation:\"center\",children:/*#__PURE__*/_jsx(Typography.Title,{level:3,children:\"\\u4EA7\\u54C1\\u7279\\u8272\"})}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:product.features},style:{margin:50}}),/*#__PURE__*/_jsx(\"div\",{id:\"fees\",className:styles[\"product-detail-container\"]}),/*#__PURE__*/_jsx(Divider,{orientation:\"center\",children:/*#__PURE__*/_jsx(Typography.Title,{level:3,children:\"\\u8D39\\u7528\"})}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:product.fees},style:{margin:50}}),/*#__PURE__*/_jsx(\"div\",{id:\"notes\",className:styles[\"product-detail-container\"]}),/*#__PURE__*/_jsx(Divider,{orientation:\"center\",children:/*#__PURE__*/_jsx(Typography.Title,{level:3,children:\"\\u9884\\u5B9A\\u987B\\u77E5\"})}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:product.notes},style:{margin:50}}),/*#__PURE__*/_jsx(\"div\",{id:\"comments\",className:styles[\"product-detail-container\"]}),/*#__PURE__*/_jsx(Divider,{orientation:\"center\",children:/*#__PURE__*/_jsx(Typography.Title,{level:3,children:\"\\u7528\\u6237\\u8BC4\\u4EF7\"})}),/*#__PURE__*/_jsx(\"div\",{style:{margin:40},children:/*#__PURE__*/_jsx(ProductComments,{data:commentMockData})})]});};","map":{"version":3,"sources":["/Users/jinzhouyan/Desktop/react-travel/src/pages/detail/DetailPage.tsx"],"names":["React","useEffect","useParams","Spin","Row","Col","Divider","Typography","Anchor","Menu","styles","ProductIntro","ProductComments","DatePicker","Button","commentMockData","getProductDetail","useSelector","useDispatch","MainLayout","ShoppingCartOutlined","addShoppingCartItem","RangePicker","DetailPage","touristRouteId","loading","state","productDetail","product","data","error","dispatch","jwt","s","user","token","shoppingCartLoading","shoppingCart","fetchData","marginTop","marginBottom","marginLeft","marginRight","width","title","shortDescription","originalPrice","coupons","points","price","rating","touristRoutePictures","map","p","url","display","id","__html","features","margin","fees","notes"],"mappings":"uTAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAA2C,OAA3C,CACA,OAA8BC,SAA9B,KAA+C,kBAA/C,CAEA,OAASC,IAAT,CAAeC,GAAf,CAAoBC,GAApB,CAAyBC,OAAzB,CAAkCC,UAAlC,CAA8CC,MAA9C,CAAsDC,IAAtD,KAAkE,MAAlE,CACA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,OAGEC,YAHF,CAIEC,eAJF,KAKO,kBALP,CAMA,OAASC,UAAT,CAA4BC,MAA5B,KAA0C,MAA1C,CACA,OAASC,eAAT,KAAgC,UAAhC,CACA,OAEEC,gBAFF,KAGO,iCAHP,CAIA,OAASC,WAAT,KAA4B,mBAA5B,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,OAASC,oBAAT,KAAqC,mBAArC,CACA,OAASC,mBAAT,KAAoC,gCAApC,C,wFACA,GAAQC,CAAAA,WAAR,CAAwBT,UAAxB,CAAQS,WAAR,CAMA,MAAO,IAAMC,CAAAA,UAAsD,CAAG,QAAzDA,CAAAA,UAAyD,EAAM,CAC1E,eAA2BrB,SAAS,EAApC,CAAQsB,cAAR,YAAQA,cAAR,CACA;AACA;AACA;AACA,GAAMC,CAAAA,OAAO,CAAGR,WAAW,CAAC,SAACS,KAAD,QAAWA,CAAAA,KAAK,CAACC,aAAN,CAAoBF,OAA/B,EAAD,CAA3B,CACA,GAAMG,CAAAA,OAAO,CAAGX,WAAW,CAAC,SAACS,KAAD,QAAWA,CAAAA,KAAK,CAACC,aAAN,CAAoBE,IAA/B,EAAD,CAA3B,CACA,GAAMC,CAAAA,KAAK,CAAGb,WAAW,CAAC,SAACS,KAAD,QAAWA,CAAAA,KAAK,CAACC,aAAN,CAAoBG,KAA/B,EAAD,CAAzB,CAEA,GAAMC,CAAAA,QAAQ,CAAGb,WAAW,EAA5B,CAEA,GAAMc,CAAAA,GAAG,CAAGf,WAAW,CAAC,SAAAgB,CAAC,QAAIA,CAAAA,CAAC,CAACC,IAAF,CAAOC,KAAX,EAAF,CAAvB,CACA,GAAMC,CAAAA,mBAAmB,CAAGnB,WAAW,CAAC,SAACgB,CAAD,QAAOA,CAAAA,CAAC,CAACI,YAAF,CAAeZ,OAAtB,EAAD,CAAvC,CAEAxB,SAAS,CAAC,UAAM,CACd,GAAMqC,CAAAA,SAAS,0FAAG,mIAChBP,QAAQ,CAACf,gBAAgB,CAACQ,cAAD,CAAjB,CAAR,CADgB,sDAAH,kBAATc,CAAAA,SAAS,0CAAf,CAGAA,SAAS,GACV,CALQ,CAKN,EALM,CAAT,CAMA,GAAIb,OAAJ,CAAa,CACX,mBACE,KAAC,IAAD,EACE,IAAI,CAAC,OADP,CAEE,KAAK,CAAE,CACLc,SAAS,CAAE,GADN,CAELC,YAAY,CAAE,GAFT,CAGLC,UAAU,CAAE,MAHP,CAILC,WAAW,CAAE,MAJR,CAKLC,KAAK,CAAE,MALF,CAFT,EADF,CAYD,CACD,GAAIb,KAAJ,CAAW,CACT,mBAAO,yCAAqBA,KAArB,OAAP,CACD,CACD,mBACE,MAAC,UAAD,yBACE,YAAK,SAAS,CAAEpB,MAAM,CAAC,yBAAD,CAAtB,uBACE,MAAC,GAAD,yBACE,KAAC,GAAD,EAAK,IAAI,CAAE,EAAX,uBACE,KAAC,YAAD,EACE,KAAK,CAAEkB,OAAO,CAACgB,KADjB,CAEE,gBAAgB,CAAEhB,OAAO,CAACiB,gBAF5B,CAGE,KAAK,CAAEjB,OAAO,CAACkB,aAHjB,CAIE,OAAO,CAAElB,OAAO,CAACmB,OAJnB,CAKE,MAAM,CAAEnB,OAAO,CAACoB,MALlB,CAME,QAAQ,CAAEpB,OAAO,CAACqB,KANpB,CAOE,MAAM,CAAErB,OAAO,CAACsB,MAPlB,CAQE,QAAQ,CAAEtB,OAAO,CAACuB,oBAAR,CAA6BC,GAA7B,CAAiC,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACC,GAAT,EAAjC,CARZ,EADF,EADF,cAaE,MAAC,GAAD,EAAK,IAAI,CAAE,EAAX,wBACE,MAAC,MAAD,EACE,KAAK,CAAE,CAACf,SAAS,CAAC,EAAX,CAAeC,YAAY,CAAC,EAA5B,CAAgCe,OAAO,CAAC,OAAxC,CADT,CAEE,IAAI,CAAC,SAFP,CAGE,MAAM,KAHR,CAIE,OAAO,CAAEnB,mBAJX,CAKE,OAAO,CAAE,kBAAI,CACXL,QAAQ,CAACV,mBAAmB,CAAC,CAACW,GAAG,CAAHA,GAAD,CAAMR,cAAc,CAAEI,OAAO,CAAC4B,EAA9B,CAAD,CAApB,CAAR,CACD,CAPH,wBASE,KAAC,oBAAD,IATF,iBADF,cAaE,KAAC,WAAD,EAAa,IAAI,KAAjB,CAAkB,KAAK,CAAE,CAAEjB,SAAS,CAAE,EAAb,CAAzB,EAbF,GAbF,GADF,EADF,cAgCE,KAAC,MAAD,EAAQ,SAAS,CAAE7B,MAAM,CAAC,uBAAD,CAAzB,uBACE,MAAC,IAAD,EAAM,IAAI,CAAC,YAAX,wBACE,KAAC,IAAD,CAAM,IAAN,wBACE,KAAC,MAAD,CAAQ,IAAR,EAAa,IAAI,CAAC,UAAlB,CAA6B,KAAK,CAAC,0BAAnC,EADF,EAAe,GAAf,CADF,cAIE,KAAC,IAAD,CAAM,IAAN,wBACE,KAAC,MAAD,CAAQ,IAAR,EAAa,IAAI,CAAC,OAAlB,CAA0B,KAAK,CAAC,cAAhC,EADF,EAAe,GAAf,CAJF,cAOE,KAAC,IAAD,CAAM,IAAN,wBACE,KAAC,MAAD,CAAQ,IAAR,EAAa,IAAI,CAAC,QAAlB,CAA2B,KAAK,CAAC,0BAAjC,EADF,EAAe,GAAf,CAPF,cAUE,KAAC,IAAD,CAAM,IAAN,wBACE,KAAC,MAAD,CAAQ,IAAR,EAAa,IAAI,CAAC,WAAlB,CAA8B,KAAK,CAAC,0BAApC,EADF,EAAe,GAAf,CAVF,GADF,EAhCF,cAgDE,YAAK,EAAE,CAAC,SAAR,CAAkB,SAAS,CAAEA,MAAM,CAAC,0BAAD,CAAnC,EAhDF,cAiDE,KAAC,OAAD,EAAS,WAAW,CAAE,QAAtB,uBACE,KAAC,UAAD,CAAY,KAAZ,EAAkB,KAAK,CAAE,CAAzB,sCADF,EAjDF,cAoDE,YACE,uBAAuB,CAAE,CAAE+C,MAAM,CAAE7B,OAAO,CAAC8B,QAAlB,CAD3B,CAEE,KAAK,CAAE,CAAEC,MAAM,CAAE,EAAV,CAFT,EApDF,cAwDE,YAAK,EAAE,CAAC,MAAR,CAAe,SAAS,CAAEjD,MAAM,CAAC,0BAAD,CAAhC,EAxDF,cAyDE,KAAC,OAAD,EAAS,WAAW,CAAE,QAAtB,uBACE,KAAC,UAAD,CAAY,KAAZ,EAAkB,KAAK,CAAE,CAAzB,0BADF,EAzDF,cA4DE,YACE,uBAAuB,CAAE,CAAE+C,MAAM,CAAE7B,OAAO,CAACgC,IAAlB,CAD3B,CAEE,KAAK,CAAE,CAAED,MAAM,CAAE,EAAV,CAFT,EA5DF,cAgEE,YAAK,EAAE,CAAC,OAAR,CAAgB,SAAS,CAAEjD,MAAM,CAAC,0BAAD,CAAjC,EAhEF,cAiEE,KAAC,OAAD,EAAS,WAAW,CAAE,QAAtB,uBACE,KAAC,UAAD,CAAY,KAAZ,EAAkB,KAAK,CAAE,CAAzB,sCADF,EAjEF,cAoEE,YACE,uBAAuB,CAAE,CAAE+C,MAAM,CAAE7B,OAAO,CAACiC,KAAlB,CAD3B,CAEE,KAAK,CAAE,CAAEF,MAAM,CAAE,EAAV,CAFT,EApEF,cAwEE,YAAK,EAAE,CAAC,UAAR,CAAmB,SAAS,CAAEjD,MAAM,CAAC,0BAAD,CAApC,EAxEF,cAyEE,KAAC,OAAD,EAAS,WAAW,CAAE,QAAtB,uBACE,KAAC,UAAD,CAAY,KAAZ,EAAkB,KAAK,CAAE,CAAzB,sCADF,EAzEF,cA4EE,YAAK,KAAK,CAAE,CAAEiD,MAAM,CAAE,EAAV,CAAZ,uBACE,KAAC,eAAD,EAAiB,IAAI,CAAE5C,eAAvB,EADF,EA5EF,GADF,CAkFD,CAvHM","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { RouteComponentProps, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Spin, Row, Col, Divider, Typography, Anchor, Menu } from \"antd\";\nimport styles from \"./DetailPage.module.css\";\nimport {\n  Header,\n  Footer,\n  ProductIntro,\n  ProductComments,\n} from \"../../components\";\nimport { DatePicker, Space, Button } from \"antd\";\nimport { commentMockData } from \"./mockup\";\nimport {\n  productDetailSlice,\n  getProductDetail,\n} from \"../../redux/productDetail/slice\";\nimport { useSelector } from \"../../redux/hooks\";\nimport { useDispatch } from \"react-redux\";\nimport { MainLayout } from \"../../layouts/mainLayout\";\nimport { ShoppingCartOutlined } from \"@ant-design/icons\";\nimport { addShoppingCartItem } from \"../../redux/shoppingCart/slice\";\nconst { RangePicker } = DatePicker;\n\ninterface MatchParams {\n  touristRouteId: string;\n}\n\nexport const DetailPage: React.FC<RouteComponentProps<MatchParams>> = () => {\n  const { touristRouteId } = useParams<MatchParams>();\n  // const [loading, setLoading] = useState<boolean>(true);\n  // const [product, setProduct] = useState<any>(null);\n  // const [error, setError] = useState<string | null>(null);\n  const loading = useSelector((state) => state.productDetail.loading);\n  const product = useSelector((state) => state.productDetail.data);\n  const error = useSelector((state) => state.productDetail.error);\n\n  const dispatch = useDispatch();\n\n  const jwt = useSelector(s => s.user.token) as string\n  const shoppingCartLoading = useSelector((s) => s.shoppingCart.loading) \n  \n  useEffect(() => {\n    const fetchData = async () => {\n      dispatch(getProductDetail(touristRouteId));\n    };\n    fetchData();\n  }, []);\n  if (loading) {\n    return (\n      <Spin\n        size=\"large\"\n        style={{\n          marginTop: 200,\n          marginBottom: 200,\n          marginLeft: \"auto\",\n          marginRight: \"auto\",\n          width: \"100%\",\n        }}\n      />\n    );\n  }\n  if (error) {\n    return <div>Website Error: {error} </div>;\n  }\n  return (\n    <MainLayout>\n      <div className={styles[\"product-intro-container\"]}>\n        <Row>\n          <Col span={13}>\n            <ProductIntro\n              title={product.title}\n              shortDescription={product.shortDescription}\n              price={product.originalPrice}\n              coupons={product.coupons}\n              points={product.points}\n              discount={product.price}\n              rating={product.rating}\n              pictures={product.touristRoutePictures.map((p) => p.url)}\n            />\n          </Col>\n          <Col span={11}>\n            <Button\n              style={{marginTop:50, marginBottom:30, display:\"block\"}}\n              type=\"primary\"\n              danger\n              loading={shoppingCartLoading}\n              onClick={()=>{\n                dispatch(addShoppingCartItem({jwt, touristRouteId: product.id}))\n              }}\n            >\n              <ShoppingCartOutlined/>\n              Add to cart\n            </Button>\n            <RangePicker open style={{ marginTop: 20 }} />\n          </Col>\n        </Row>\n      </div>\n      <Anchor className={styles[\"product-detail-anchor\"]}>\n        <Menu mode=\"horizontal\">\n          <Menu.Item key=\"1\">\n            <Anchor.Link href=\"#feature\" title=\"产品特色\"></Anchor.Link>\n          </Menu.Item>\n          <Menu.Item key=\"2\">\n            <Anchor.Link href=\"#fees\" title=\"费用\"></Anchor.Link>\n          </Menu.Item>\n          <Menu.Item key=\"3\">\n            <Anchor.Link href=\"#notes\" title=\"预定须知\"></Anchor.Link>\n          </Menu.Item>\n          <Menu.Item key=\"4\">\n            <Anchor.Link href=\"#comments\" title=\"用户评价\"></Anchor.Link>\n          </Menu.Item>\n        </Menu>\n      </Anchor>\n      <div id=\"feature\" className={styles[\"product-detail-container\"]}></div>\n      <Divider orientation={\"center\"}>\n        <Typography.Title level={3}>产品特色</Typography.Title>\n      </Divider>\n      <div\n        dangerouslySetInnerHTML={{ __html: product.features }}\n        style={{ margin: 50 }}\n      ></div>\n      <div id=\"fees\" className={styles[\"product-detail-container\"]}></div>\n      <Divider orientation={\"center\"}>\n        <Typography.Title level={3}>费用</Typography.Title>\n      </Divider>\n      <div\n        dangerouslySetInnerHTML={{ __html: product.fees }}\n        style={{ margin: 50 }}\n      ></div>\n      <div id=\"notes\" className={styles[\"product-detail-container\"]}></div>\n      <Divider orientation={\"center\"}>\n        <Typography.Title level={3}>预定须知</Typography.Title>\n      </Divider>\n      <div\n        dangerouslySetInnerHTML={{ __html: product.notes }}\n        style={{ margin: 50 }}\n      ></div>\n      <div id=\"comments\" className={styles[\"product-detail-container\"]}></div>\n      <Divider orientation={\"center\"}>\n        <Typography.Title level={3}>用户评价</Typography.Title>\n      </Divider>\n      <div style={{ margin: 40 }}>\n        <ProductComments data={commentMockData} />\n      </div>\n    </MainLayout>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}