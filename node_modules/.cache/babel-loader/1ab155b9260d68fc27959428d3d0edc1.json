{"ast":null,"code":"import _objectSpread from\"/Users/jinzhouyan/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/Users/jinzhouyan/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"component\",\"isAuthenticated\"];import React,{useEffect}from\"react\";import styles from\"./App.module.css\";import{BrowserRouter,Route,Switch}from\"react-router-dom\";import{HomePage,SignInPage,RegisterPage,DetailPage,SearchPage,ShoppingCartPage,PlaceOrderPage}from\"./pages\";import{Redirect}from\"react-router-dom\";import{useSelector}from\"./redux/hooks\";import{useDispatch}from\"react-redux\";import{getShoppingCart}from\"./redux/shoppingCart/slice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PrivateRoute=function PrivateRoute(_ref){var component=_ref.component,isAuthenticated=_ref.isAuthenticated,rest=_objectWithoutProperties(_ref,_excluded);var routeComponent=function routeComponent(props){return isAuthenticated?/*#__PURE__*/React.createElement(component,props):/*#__PURE__*/_jsx(Redirect,{to:{pathname:\"/signIn\"}});};return/*#__PURE__*/_jsx(Route,_objectSpread({render:routeComponent},rest));};function App(){var jwt=useSelector(function(s){return s.user.token;});var dispatch=useDispatch();useEffect(function(){if(jwt){dispatch(getShoppingCart(jwt));}},[jwt]);return/*#__PURE__*/_jsx(\"div\",{className:styles.App,children:/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:HomePage}),/*#__PURE__*/_jsx(Route,{path:\"/signIn\",component:SignInPage}),/*#__PURE__*/_jsx(Route,{path:\"/register\",component:RegisterPage}),/*#__PURE__*/_jsx(Route,{path:\"/detail/:touristRouteId\",component:DetailPage}),/*#__PURE__*/_jsx(Route,{path:\"/search/:keywords?\",component:SearchPage}),/*#__PURE__*/_jsx(PrivateRoute,{isAuthenticated:jwt!=null,path:\"/shoppingCart\",component:ShoppingCartPage}),/*#__PURE__*/_jsx(PrivateRoute,{isAuthenticated:jwt!=null,path:\"/placeOrder\",component:PlaceOrderPage}),/*#__PURE__*/_jsx(Route,{render:function render(){return/*#__PURE__*/_jsx(\"h1\",{children:\"404 Page Not Found\"});}})]})})});}export default App;","map":{"version":3,"sources":["/Users/jinzhouyan/Desktop/react-travel/src/App.tsx"],"names":["React","useEffect","styles","BrowserRouter","Route","Switch","HomePage","SignInPage","RegisterPage","DetailPage","SearchPage","ShoppingCartPage","PlaceOrderPage","Redirect","useSelector","useDispatch","getShoppingCart","PrivateRoute","component","isAuthenticated","rest","routeComponent","props","createElement","pathname","App","jwt","s","user","token","dispatch"],"mappings":"2XAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,CACA,OAASC,aAAT,CAAwBC,KAAxB,CAA+BC,MAA/B,KAA6C,kBAA7C,CACA,OACEC,QADF,CAEEC,UAFF,CAGEC,YAHF,CAIEC,UAJF,CAKEC,UALF,CAMEC,gBANF,CAOEC,cAPF,KAQO,SARP,CASA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAASC,WAAT,KAA4B,eAA5B,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,eAAT,KAAgC,4BAAhC,C,wFAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAA6C,IAA1CC,CAAAA,SAA0C,MAA1CA,SAA0C,CAA/BC,eAA+B,MAA/BA,eAA+B,CAAXC,IAAW,0CAChE,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,KAAD,CAAW,CAChC,MAAOH,CAAAA,eAAe,cACpBnB,KAAK,CAACuB,aAAN,CAAoBL,SAApB,CAA+BI,KAA/B,CADoB,cAGpB,KAAC,QAAD,EAAU,EAAE,CAAE,CAAEE,QAAQ,CAAE,SAAZ,CAAd,EAHF,CAKD,CAND,CAOA,mBAAO,KAAC,KAAD,gBAAO,MAAM,CAAEH,cAAf,EAAmCD,IAAnC,EAAP,CACD,CATD,CAUA,QAASK,CAAAA,GAAT,EAAe,CACb,GAAMC,CAAAA,GAAG,CAAGZ,WAAW,CAAC,SAACa,CAAD,QAAOA,CAAAA,CAAC,CAACC,IAAF,CAAOC,KAAd,EAAD,CAAvB,CACA,GAAMC,CAAAA,QAAQ,CAAGf,WAAW,EAA5B,CAEAd,SAAS,CAAC,UAAM,CACd,GAAIyB,GAAJ,CAAS,CACPI,QAAQ,CAACd,eAAe,CAACU,GAAD,CAAhB,CAAR,CACD,CACF,CAJQ,CAIN,CAACA,GAAD,CAJM,CAAT,CAMA,mBACE,YAAK,SAAS,CAAExB,MAAM,CAACuB,GAAvB,uBACE,KAAC,aAAD,wBACE,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,SAAS,CAAEnB,QAAjC,EADF,cAEE,KAAC,KAAD,EAAO,IAAI,CAAC,SAAZ,CAAsB,SAAS,CAAEC,UAAjC,EAFF,cAGE,KAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAwB,SAAS,CAAEC,YAAnC,EAHF,cAIE,KAAC,KAAD,EAAO,IAAI,CAAC,yBAAZ,CAAsC,SAAS,CAAEC,UAAjD,EAJF,cAKE,KAAC,KAAD,EAAO,IAAI,CAAC,oBAAZ,CAAiC,SAAS,CAAEC,UAA5C,EALF,cAME,KAAC,YAAD,EACE,eAAe,CAAEgB,GAAG,EAAI,IAD1B,CAEE,IAAI,CAAC,eAFP,CAGE,SAAS,CAAEf,gBAHb,EANF,cAWE,KAAC,YAAD,EACE,eAAe,CAAEe,GAAG,EAAI,IAD1B,CAEE,IAAI,CAAC,aAFP,CAGE,SAAS,CAAEd,cAHb,EAXF,cAgBE,KAAC,KAAD,EAAO,MAAM,CAAE,qCAAM,0CAAN,EAAf,EAhBF,GADF,EADF,EADF,CAwBD,CAED,cAAea,CAAAA,GAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport styles from \"./App.module.css\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport {\n  HomePage,\n  SignInPage,\n  RegisterPage,\n  DetailPage,\n  SearchPage,\n  ShoppingCartPage,\n  PlaceOrderPage\n} from \"./pages\";\nimport { Redirect } from \"react-router-dom\";\nimport { useSelector } from \"./redux/hooks\";\nimport { useDispatch } from \"react-redux\";\nimport { getShoppingCart } from \"./redux/shoppingCart/slice\";\n\nconst PrivateRoute = ({ component, isAuthenticated, ...rest }) => {\n  const routeComponent = (props) => {\n    return isAuthenticated ? (\n      React.createElement(component, props)\n    ) : (\n      <Redirect to={{ pathname: \"/signIn\" }} />\n    );\n  };\n  return <Route render={routeComponent} {...rest} />;\n};\nfunction App() {\n  const jwt = useSelector((s) => s.user.token);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (jwt) {\n      dispatch(getShoppingCart(jwt));\n    }\n  }, [jwt]);\n\n  return (\n    <div className={styles.App}>\n      <BrowserRouter>\n        <Switch>\n          <Route exact path=\"/\" component={HomePage} />\n          <Route path=\"/signIn\" component={SignInPage} />\n          <Route path=\"/register\" component={RegisterPage} />\n          <Route path=\"/detail/:touristRouteId\" component={DetailPage} />\n          <Route path=\"/search/:keywords?\" component={SearchPage} />\n          <PrivateRoute\n            isAuthenticated={jwt != null}\n            path=\"/shoppingCart\"\n            component={ShoppingCartPage}\n          />\n          <PrivateRoute\n            isAuthenticated={jwt != null}\n            path=\"/placeOrder\"\n            component={PlaceOrderPage}\n          />\n          <Route render={() => <h1>404 Page Not Found</h1>} />\n        </Switch>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}