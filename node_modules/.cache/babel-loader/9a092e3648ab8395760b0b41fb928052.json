{"ast":null,"code":"import _defineProperty from\"/Users/jinzhouyan/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/jinzhouyan/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jinzhouyan/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";var _extraReducers;import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import axios from\"axios\";var initialState={loading:true,error:null,items:[]};export var getShoppingCart=createAsyncThunk(\"shoppingCart/getShoppingCart\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(jwt,thunkAPI){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://123.56.149.216:8080/api/shoppingCart\",{headers:{Authorization:\"bearer \".concat(jwt)}});case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;return _context.abrupt(\"return\",data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());export var addShoppingCartItem=createAsyncThunk(\"shoppingCart/addShoppingCartItem\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(parameters,thunkAPI){var _yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"http://123.56.149.216:8080/api/shoppingCart/items\",{touristRouteId:parameters.touristRouteId},{headers:{Authorization:\"bearer \".concat(parameters.jwt)}});case 2:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;return _context2.abrupt(\"return\",data);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());export var checkout=createAsyncThunk(\"shoppingCart/checkout\",/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(jwt,thunkAPI){var _yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.post(\"http://123.56.149.216:8080/api/shoppingCart/checkout\",null,{headers:{Authorization:\"bearer \".concat(jwt)}});case 2:_yield$axios$post2=_context3.sent;data=_yield$axios$post2.data;return _context3.abrupt(\"return\",data);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}());export var clearShoppingCartItem=createAsyncThunk(\"shoppingCart/clearShoppingCartItem\",/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(parameters,thunkAPI){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.delete(\"http://123.56.149.216:8080/api/shoppingCart/items/(\".concat(parameters.itemIds.join(','),\")\"),{headers:{Authorization:\"bearer \".concat(parameters.jwt)}});case 2:return _context4.abrupt(\"return\",_context4.sent);case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}());export var shoppingCartSlice=createSlice({name:\"shoppingCart\",initialState:initialState,reducers:{},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,getShoppingCart.pending.type,function(state){//return {...state, loading:true};\nstate.loading=true;}),_defineProperty(_extraReducers,getShoppingCart.fulfilled.type,function(state,action){state.loading=false;state.items=action.payload.shoppingCartItems;state.error=null;}),_defineProperty(_extraReducers,getShoppingCart.rejected.type,function(state,action){state.loading=false;state.error=action.payload;}),_defineProperty(_extraReducers,addShoppingCartItem.pending.type,function(state){//return {...state, loading:true};\nstate.loading=true;}),_defineProperty(_extraReducers,addShoppingCartItem.fulfilled.type,function(state,action){state.loading=false;state.items=action.payload.shoppingCartItems;state.error=null;}),_defineProperty(_extraReducers,addShoppingCartItem.rejected.type,function(state,action){state.loading=false;state.error=action.payload;}),_defineProperty(_extraReducers,clearShoppingCartItem.pending.type,function(state){//return {...state, loading:true};\nstate.loading=true;}),_defineProperty(_extraReducers,clearShoppingCartItem.fulfilled.type,function(state){state.loading=false;state.items=[];state.error=null;}),_defineProperty(_extraReducers,clearShoppingCartItem.rejected.type,function(state,action){state.loading=false;state.error=action.payload;}),_defineProperty(_extraReducers,checkout.pending.type,function(state){//return {...state, loading:true};\nstate.loading=true;}),_defineProperty(_extraReducers,checkout.fulfilled.type,function(state,action){state.loading=false;state.items=[];state.error=null;}),_defineProperty(_extraReducers,checkout.rejected.type,function(state,action){state.loading=false;state.error=action.payload;}),_extraReducers)});","map":{"version":3,"sources":["/Users/jinzhouyan/Desktop/react-travel/src/redux/shoppingCart/slice.ts"],"names":["createSlice","createAsyncThunk","axios","initialState","loading","error","items","getShoppingCart","jwt","thunkAPI","get","headers","Authorization","data","addShoppingCartItem","parameters","post","touristRouteId","checkout","clearShoppingCartItem","delete","itemIds","join","shoppingCartSlice","name","reducers","extraReducers","pending","type","state","fulfilled","action","payload","shoppingCartItems","rejected"],"mappings":"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","sourcesContent":["import { createSlice, PayloadAction, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\ninterface ShoppingCartState {\n    loading: boolean;\n    error: string | null;\n    items: any[];\n}\n\nconst initialState: ShoppingCartState = {\n    loading: true,\n    error: null,\n    items: [],\n\n}\nexport const getShoppingCart = createAsyncThunk(\n    \"shoppingCart/getShoppingCart\",\n    async (jwt: string, thunkAPI) => {\n        const { data } = await axios.get(\n            `http://123.56.149.216:8080/api/shoppingCart`,\n            {\n                headers: {\n                    Authorization: `bearer ${jwt}`\n                }\n            }\n        );\n        return data;\n    }\n)\n\nexport const addShoppingCartItem = createAsyncThunk(\n    \"shoppingCart/addShoppingCartItem\",\n    async (parameters: { jwt: string, touristRouteId: string }, thunkAPI) => {\n        const { data } = await axios.post(\n            `http://123.56.149.216:8080/api/shoppingCart/items`,\n            {\n                touristRouteId: parameters.touristRouteId\n            },\n            {\n                headers: {\n                    Authorization: `bearer ${parameters.jwt}`\n                },\n            }\n        );\n        return data;\n    }\n)\n\nexport const checkout = createAsyncThunk(\n    \"shoppingCart/checkout\",\n    async (jwt: string, thunkAPI) => {\n        const { data } = await axios.post(\n            `http://123.56.149.216:8080/api/shoppingCart/checkout`,\n            null,\n            {\n                headers: {\n                    Authorization: `bearer ${jwt}`,\n                },\n            }\n        );\n        return data;\n    }\n)\n\n\nexport const clearShoppingCartItem = createAsyncThunk(\n    \"shoppingCart/clearShoppingCartItem\",\n    async (parameters: { jwt: string, itemIds: number[] }, thunkAPI) => {\n        return await axios.delete(\n            `http://123.56.149.216:8080/api/shoppingCart/items/(${parameters.itemIds.join(',')})`,\n            {\n                headers: {\n                    Authorization: `bearer ${parameters.jwt}`\n                },\n            }\n        );\n    }\n)\n\nexport const shoppingCartSlice = createSlice({\n    name: \"shoppingCart\",\n    initialState,\n    reducers: {\n\n    }, extraReducers: {\n        [getShoppingCart.pending.type]: (state) => {\n            //return {...state, loading:true};\n            state.loading = true;\n        },\n        [getShoppingCart.fulfilled.type]: (state, action) => {\n            state.loading = false;\n            state.items = action.payload.shoppingCartItems;\n            state.error = null;\n        },\n        [getShoppingCart.rejected.type]: (state, action: PayloadAction<string | null>) => {\n            state.loading = false;\n            state.error = action.payload;\n        },\n        [addShoppingCartItem.pending.type]: (state) => {\n            //return {...state, loading:true};\n            state.loading = true;\n        },\n        [addShoppingCartItem.fulfilled.type]: (state, action) => {\n            state.loading = false;\n            state.items = action.payload.shoppingCartItems;\n            state.error = null;\n        },\n        [addShoppingCartItem.rejected.type]: (state, action: PayloadAction<string | null>) => {\n            state.loading = false;\n            state.error = action.payload;\n        },\n        [clearShoppingCartItem.pending.type]: (state) => {\n            //return {...state, loading:true};\n            state.loading = true;\n        },\n        [clearShoppingCartItem.fulfilled.type]: (state) => {\n            state.loading = false;\n            state.items = [];\n            state.error = null;\n        },\n        [clearShoppingCartItem.rejected.type]: (state, action: PayloadAction<string | null>) => {\n            state.loading = false;\n            state.error = action.payload;\n        },\n        [checkout.pending.type]: (state) => {\n            //return {...state, loading:true};\n            state.loading = true;\n        },\n        [checkout.fulfilled.type]: (state, action) => {\n            state.loading = false;\n            state.items = [];\n            state.error = null;\n        },\n        [checkout.rejected.type]: (state, action: PayloadAction<string | null>) => {\n            state.loading = false;\n            state.error = action.payload;\n        },\n\n    }\n})"]},"metadata":{},"sourceType":"module"}