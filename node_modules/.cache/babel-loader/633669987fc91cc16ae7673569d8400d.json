{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nconst initialState = {\n  loading: true,\n  error: null,\n  items: []\n};\nexport const getShoppingCart = createAsyncThunk(\"shoppingCart/getShoppingCart\", async (jwt, thunkAPI) => {\n  const {\n    data\n  } = await axios.get(`http://123.56.149.216:8080/api/shoppingCart`, {\n    headers: {\n      Authorization: `bearer ${jwt}`\n    }\n  });\n  return data;\n});\nexport const addShoppingCartItem = createAsyncThunk(\"shoppingCart/addShoppingCartItem\", async (parameters, thunkAPI) => {\n  const {\n    data\n  } = await axios.post(`http://123.56.149.216:8080/api/shoppingCart/items`, {\n    touristRouteId: parameters.touristRouteId\n  }, {\n    headers: {\n      Authorization: `bearer ${parameters.jwt}`\n    }\n  });\n  return data;\n});\nexport const clearShoppingCartItem = createAsyncThunk(\"shoppingCart/clearShoppingCartItem\", async (parameters, thunkAPI) => {\n  return await axios.delete(`http://123.56.149.216:8080/api/shoppingCart/items/(${parameters.itemIds.join(',')})`, {\n    headers: {\n      Authorization: `bearer ${parameters.jwt}`\n    }\n  });\n});\nexport const shoppingCartSlice = createSlice({\n  name: \"shoppingCart\",\n  initialState,\n  reducers: {},\n  extraReducers: {\n    [getShoppingCart.pending.type]: state => {\n      //return {...state, loading:true};\n      state.loading = true;\n    },\n    [getShoppingCart.fulfilled.type]: (state, action) => {\n      state.loading = false;\n      state.items = action.payload.shoppingCartItems;\n      state.error = null;\n    },\n    [getShoppingCart.rejected.type]: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    },\n    [addShoppingCartItem.pending.type]: state => {\n      //return {...state, loading:true};\n      state.loading = true;\n    },\n    [addShoppingCartItem.fulfilled.type]: (state, action) => {\n      state.loading = false;\n      state.items = action.payload.shoppingCartItems;\n      state.error = null;\n    },\n    [addShoppingCartItem.rejected.type]: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    },\n    [clearShoppingCartItem.pending.type]: state => {\n      //return {...state, loading:true};\n      state.loading = true;\n    },\n    [clearShoppingCartItem.fulfilled.type]: state => {\n      state.loading = false;\n      state.items = [];\n      state.error = null;\n    },\n    [clearShoppingCartItem.rejected.type]: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    }\n  }\n});","map":{"version":3,"sources":["/Users/jinzhouyan/Desktop/react-travel/src/redux/shoppingCart/slice.ts"],"names":["createSlice","createAsyncThunk","axios","initialState","loading","error","items","getShoppingCart","jwt","thunkAPI","data","get","headers","Authorization","addShoppingCartItem","parameters","post","touristRouteId","clearShoppingCartItem","delete","itemIds","join","shoppingCartSlice","name","reducers","extraReducers","pending","type","state","fulfilled","action","payload","shoppingCartItems","rejected"],"mappings":"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","sourcesContent":["import { createSlice, PayloadAction, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\ninterface ShoppingCartState {\n    loading: boolean;\n    error: string | null;\n    items: any[];\n}\n\nconst initialState: ShoppingCartState = {\n    loading: true,\n    error: null,\n    items: [],\n\n}\nexport const getShoppingCart = createAsyncThunk(\n    \"shoppingCart/getShoppingCart\",\n    async (jwt: string, thunkAPI) => {\n        const { data } = await axios.get(\n            `http://123.56.149.216:8080/api/shoppingCart`,\n            {\n                headers: {\n                    Authorization: `bearer ${jwt}`\n                }\n            }\n        );\n        return data;\n    }\n)\n\nexport const addShoppingCartItem = createAsyncThunk(\n    \"shoppingCart/addShoppingCartItem\",\n    async (parameters: { jwt: string, touristRouteId: string }, thunkAPI) => {\n        const { data } = await axios.post(\n            `http://123.56.149.216:8080/api/shoppingCart/items`,\n            {\n                touristRouteId: parameters.touristRouteId\n            },\n            {\n                headers: {\n                    Authorization: `bearer ${parameters.jwt}`\n                },\n            }\n        );\n        return data;\n    }\n)\n\n\nexport const clearShoppingCartItem = createAsyncThunk(\n    \"shoppingCart/clearShoppingCartItem\",\n    async (parameters: { jwt: string, itemIds: number[] }, thunkAPI) => {\n        return await axios.delete(\n            `http://123.56.149.216:8080/api/shoppingCart/items/(${parameters.itemIds.join(',')})`,\n            {\n                headers: {\n                    Authorization: `bearer ${parameters.jwt}`\n                },\n            }\n        );\n    }\n)\n\nexport const shoppingCartSlice = createSlice({\n    name: \"shoppingCart\",\n    initialState,\n    reducers: {\n\n    }, extraReducers: {\n        [getShoppingCart.pending.type]: (state) => {\n            //return {...state, loading:true};\n            state.loading = true;\n        },\n        [getShoppingCart.fulfilled.type]: (state, action) => {\n            state.loading = false;\n            state.items = action.payload.shoppingCartItems;\n            state.error = null;\n        },\n        [getShoppingCart.rejected.type]: (state, action: PayloadAction<string | null>) => {\n            state.loading = false;\n            state.error = action.payload;\n        },\n        [addShoppingCartItem.pending.type]: (state) => {\n            //return {...state, loading:true};\n            state.loading = true;\n        },\n        [addShoppingCartItem.fulfilled.type]: (state, action) => {\n            state.loading = false;\n            state.items = action.payload.shoppingCartItems;\n            state.error = null;\n        },\n        [addShoppingCartItem.rejected.type]: (state, action: PayloadAction<string | null>) => {\n            state.loading = false;\n            state.error = action.payload;\n        },\n        [clearShoppingCartItem.pending.type]: (state) => {\n            //return {...state, loading:true};\n            state.loading = true;\n        },\n        [clearShoppingCartItem.fulfilled.type]: (state) => {\n            state.loading = false;\n            state.items = [];\n            state.error = null;\n        },\n        [clearShoppingCartItem.rejected.type]: (state, action: PayloadAction<string | null>) => {\n            state.loading = false;\n            state.error = action.payload;\n        },\n\n    }\n})"]},"metadata":{},"sourceType":"module"}