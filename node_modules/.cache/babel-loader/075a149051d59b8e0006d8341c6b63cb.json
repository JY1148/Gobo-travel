{"ast":null,"code":"import styles from\"./SearchPage.module.css\";import React,{useEffect}from\"react\";import{FilterArea,ProductList}from\"../../components\";import{useParams,useLocation}from\"react-router-dom\";import{Spin}from\"antd\";import{searchProduct}from\"../../redux/productSearch/slice\";import{useSelector}from\"../../redux/hooks\";import{useDispatch}from\"react-redux\";import{MainLayout}from\"../../layouts/mainLayout\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var SearchPage=function SearchPage(){var _useParams=useParams(),keywords=_useParams.keywords;var loading=useSelector(function(state){return state.productSearch.loading;});var error=useSelector(function(state){return state.productSearch.error;});var productList=useSelector(function(state){return state.productSearch.data;});var pagination=useSelector(function(state){return state.productSearch.pagination;});var dispatch=useDispatch();var location=useLocation();useEffect(function(){dispatch(searchProduct({nextPage:1,pageSize:10,keywords:keywords}));},[location]);var onPageChange=function onPageChange(nextPage,pageSize){dispatch(searchProduct({nextPage:nextPage,pageSize:pageSize,keywords:keywords}));};if(loading){return/*#__PURE__*/_jsx(Spin,{size:\"large\",style:{marginTop:200,marginBottom:200,marginLeft:\"auto\",marginRight:\"auto\",width:\"100%\"}});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Website Error: \",error,\" \"]});}return/*#__PURE__*/_jsxs(MainLayout,{children:[/*#__PURE__*/_jsx(\"div\",{className:styles[\"product-list-container\"]}),/*#__PURE__*/_jsx(FilterArea,{}),/*#__PURE__*/_jsx(\"div\",{className:styles[\"product-list-container\"]}),/*#__PURE__*/_jsx(ProductList,{data:productList,paging:pagination,onPageChange:onPageChange})]});};","map":{"version":3,"sources":["/Users/jinzhouyan/Desktop/react-travel/src/pages/search/Searchpage.tsx"],"names":["styles","React","useEffect","FilterArea","ProductList","useParams","useLocation","Spin","searchProduct","useSelector","useDispatch","MainLayout","SearchPage","keywords","loading","state","productSearch","error","productList","data","pagination","dispatch","location","nextPage","pageSize","onPageChange","marginTop","marginBottom","marginLeft","marginRight","width"],"mappings":"AAAA,MAAOA,CAAAA,MAAP,KAAmB,yBAAnB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAAyBC,UAAzB,CAAqCC,WAArC,KAAwD,kBAAxD,CACA,OAASC,SAAT,CAAoBC,WAApB,KAAuC,kBAAvC,CACA,OAASC,IAAT,KAAqB,MAArB,CACA,OAASC,aAAT,KAA8B,iCAA9B,CACA,OAASC,WAAT,KAA4B,mBAA5B,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,UAAT,KAA2B,0BAA3B,C,wFAKA,MAAO,IAAMC,CAAAA,UAAoB,CAAG,QAAvBA,CAAAA,UAAuB,EAAM,CACxC,eAAqBP,SAAS,EAA9B,CAAQQ,QAAR,YAAQA,QAAR,CAEA,GAAMC,CAAAA,OAAO,CAAGL,WAAW,CAAC,SAACM,KAAD,QAAWA,CAAAA,KAAK,CAACC,aAAN,CAAoBF,OAA/B,EAAD,CAA3B,CACA,GAAMG,CAAAA,KAAK,CAAGR,WAAW,CAAC,SAACM,KAAD,QAAWA,CAAAA,KAAK,CAACC,aAAN,CAAoBC,KAA/B,EAAD,CAAzB,CACA,GAAMC,CAAAA,WAAW,CAAGT,WAAW,CAAC,SAACM,KAAD,QAAWA,CAAAA,KAAK,CAACC,aAAN,CAAoBG,IAA/B,EAAD,CAA/B,CACA,GAAMC,CAAAA,UAAU,CAAGX,WAAW,CAAC,SAACM,KAAD,QAAWA,CAAAA,KAAK,CAACC,aAAN,CAAoBI,UAA/B,EAAD,CAA9B,CAEA,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CACA,GAAMY,CAAAA,QAAQ,CAAGhB,WAAW,EAA5B,CAEAJ,SAAS,CAAC,UAAM,CACdmB,QAAQ,CAACb,aAAa,CAAC,CAAEe,QAAQ,CAAE,CAAZ,CAAeC,QAAQ,CAAE,EAAzB,CAA6BX,QAAQ,CAARA,QAA7B,CAAD,CAAd,CAAR,CACD,CAFQ,CAEN,CAACS,QAAD,CAFM,CAAT,CAIA,GAAMG,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACF,QAAD,CAAWC,QAAX,CAAwB,CAC3CH,QAAQ,CAACb,aAAa,CAAC,CAAEe,QAAQ,CAARA,QAAF,CAAYC,QAAQ,CAARA,QAAZ,CAAsBX,QAAQ,CAARA,QAAtB,CAAD,CAAd,CAAR,CACD,CAFD,CAGA,GAAIC,OAAJ,CAAa,CACX,mBACE,KAAC,IAAD,EACE,IAAI,CAAC,OADP,CAEE,KAAK,CAAE,CACLY,SAAS,CAAE,GADN,CAELC,YAAY,CAAE,GAFT,CAGLC,UAAU,CAAE,MAHP,CAILC,WAAW,CAAE,MAJR,CAKLC,KAAK,CAAE,MALF,CAFT,EADF,CAYD,CACD,GAAIb,KAAJ,CAAW,CACT,mBAAO,yCAAqBA,KAArB,OAAP,CACD,CAED,mBACE,MAAC,UAAD,yBAEE,YAAK,SAAS,CAAEjB,MAAM,CAAC,wBAAD,CAAtB,EAFF,cAGE,KAAC,UAAD,IAHF,cAKE,YAAK,SAAS,CAAEA,MAAM,CAAC,wBAAD,CAAtB,EALF,cAME,KAAC,WAAD,EACE,IAAI,CAAEkB,WADR,CAEE,MAAM,CAAEE,UAFV,CAGE,YAAY,CAAEK,YAHhB,EANF,GADF,CAcD,CAlDM","sourcesContent":["import styles from \"./SearchPage.module.css\";\nimport React, { useEffect } from \"react\";\nimport { Header, Footer, FilterArea, ProductList } from \"../../components\";\nimport { useParams, useLocation } from \"react-router-dom\";\nimport { Spin } from \"antd\";\nimport { searchProduct } from \"../../redux/productSearch/slice\";\nimport { useSelector } from \"../../redux/hooks\";\nimport { useDispatch } from \"react-redux\";\nimport { MainLayout } from \"../../layouts/mainLayout\";\ninterface MatchParams {\n  keywords: string;\n}\n\nexport const SearchPage: React.FC = () => {\n  const { keywords } = useParams<MatchParams>();\n\n  const loading = useSelector((state) => state.productSearch.loading);\n  const error = useSelector((state) => state.productSearch.error);\n  const productList = useSelector((state) => state.productSearch.data);\n  const pagination = useSelector((state) => state.productSearch.pagination);\n\n  const dispatch = useDispatch();\n  const location = useLocation();\n\n  useEffect(() => {\n    dispatch(searchProduct({ nextPage: 1, pageSize: 10, keywords }));\n  }, [location]);\n\n  const onPageChange = (nextPage, pageSize) => {\n    dispatch(searchProduct({ nextPage, pageSize, keywords }));\n  };\n  if (loading) {\n    return (\n      <Spin\n        size=\"large\"\n        style={{\n          marginTop: 200,\n          marginBottom: 200,\n          marginLeft: \"auto\",\n          marginRight: \"auto\",\n          width: \"100%\",\n        }}\n      />\n    );\n  }\n  if (error) {\n    return <div>Website Error: {error} </div>;\n  }\n\n  return (\n    <MainLayout>\n      {/* 分类过滤器 */}\n      <div className={styles[\"product-list-container\"]}></div>\n      <FilterArea />\n      {/* 产品列表 */}\n      <div className={styles[\"product-list-container\"]}></div>\n      <ProductList\n        data={productList}\n        paging={pagination}\n        onPageChange={onPageChange}\n      />\n    </MainLayout>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}