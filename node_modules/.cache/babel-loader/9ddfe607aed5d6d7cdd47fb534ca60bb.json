{"ast":null,"code":"var _jsxFileName = \"/Users/jinzhouyan/Desktop/react-travel/src/components/header/Header.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport styles from \"./Header.module.css\";\nimport logo from \"../../assets/logo.svg\";\nimport { Layout, Typography, Input, Menu, Button, Dropdown } from \"antd\";\nimport { GlobalOutlined } from \"@ant-design/icons\";\nimport { useHistory, useLocation, useParams, useRouteMatch } from \"react-router-dom\";\nimport { useSelector } from \"../../redux/hooks\";\nimport { useDispatch } from \"react-redux\";\nimport { addLanguageActionCreator, changeLanguageActionCreator } from \"../../redux/language/languageAction\";\nimport { useTranslation } from \"react-i18next\";\nimport jwt_decode from \"jwt-decode\";\nimport { UserSlice } from \"../../redux/user/slice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Header = () => {\n  _s();\n\n  const history = useHistory();\n  const location = useLocation();\n  const params = useParams();\n  const match = useRouteMatch();\n  const language = useSelector(state => state.language.language);\n  const languageList = useSelector(state => state.language.languageList);\n  const dispatch = useDispatch();\n  const {\n    t\n  } = useTranslation();\n  const jwt = useSelector(s => s.user.token);\n  const [username, setUsername] = useState(\"\");\n  const shoppingCartItems = useSelector(s => s.shoppingCart.items);\n  const shoppingCartLoading = useSelector(s => s.shoppingCart.loading);\n  const shoppingCartError = useSelector(s => s.shoppingCart.error);\n  useEffect(() => {\n    if (jwt) {\n      const token = jwt_decode(jwt);\n      setUsername(token.username);\n    }\n  }, [jwt]);\n\n  const menuClickHandler = e => {\n    console.log(e); // this.setState({ language: e.key });\n\n    if (e.key === \"more\") {\n      dispatch(addLanguageActionCreator(\"新语言\", \"new_lang\"));\n    } else {\n      dispatch(changeLanguageActionCreator(e.key));\n    }\n  };\n\n  const onLogout = () => {\n    dispatch(UserSlice.actions.logOut());\n    history.push(\"/\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles[\"app-header\"],\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles[\"top-header\"],\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.inner,\n        children: [/*#__PURE__*/_jsxDEV(Typography.Text, {\n          children: t(\"header.slogan\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Dropdown.Button, {\n          style: {\n            marginLeft: 15\n          },\n          overlay: /*#__PURE__*/_jsxDEV(Menu, {\n            onClick: menuClickHandler,\n            children: [languageList.map(l => {\n              return /*#__PURE__*/_jsxDEV(Menu.Item, {\n                children: l.name\n              }, l.code, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 26\n              }, this);\n            }), /*#__PURE__*/_jsxDEV(Menu.Item, {\n              children: t(\"header.add_new_language\")\n            }, \"more\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this),\n          icon: /*#__PURE__*/_jsxDEV(GlobalOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 19\n          }, this),\n          children: language === \"en\" ? \"English\" : \"中文\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), jwt ? /*#__PURE__*/_jsxDEV(Button.Group, {\n          className: styles[\"button-group\"],\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [t(\"header.welcome\"), /*#__PURE__*/_jsxDEV(Typography.Text, {\n              strong: true,\n              children: username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            loading: shoppingCartLoading,\n            onClick: () => history.push(\"/shoppingCart\"),\n            children: [t(\"header.shoppingCart\"), \"(\", shoppingCartItems.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: onLogout,\n            children: t(\"header.signOut\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Button.Group, {\n          className: styles[\"button-group\"],\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => history.push(\"/register\"),\n            children: t(\"header.register\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => history.push(\"/signIn\"),\n            children: t(\"header.login\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Layout.Header, {\n      className: styles[\"main-header\"],\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: () => history.push(\"/\"),\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: logo,\n          alt: \"logo\",\n          className: styles[\"App-logo\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography.Title, {\n          level: 3,\n          className: styles[\"title\"],\n          children: t(\"header.title\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input.Search, {\n        placeholder: \"Please type your dream destination\",\n        className: styles[\"search-input\"],\n        onSearch: keywords => history.push(\"/search/\" + keywords)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n      mode: \"horizontal\",\n      className: styles[\"main-menu\"],\n      children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: t(\"header.home_page\")\n      }, 1, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: t(\"header.Stays\")\n      }, 2, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: t(\"header.Flights\")\n      }, 3, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: t(\"header.Cars\")\n      }, 4, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: t(\"header.Packages\")\n      }, 5, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: t(\"header.Cruises\")\n      }, 6, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: t(\"header.Road Trip\")\n      }, 7, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: t(\"header.Family\")\n      }, 8, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: t(\"header.Romantic\")\n      }, 9, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: t(\"header.Solo traveler\")\n      }, 10, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: t(\"header.Beach\")\n      }, 11, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: t(\"header.Pet-friendly\")\n      }, 12, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: t(\"header.Luxury\")\n      }, 13, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: t(\"header.All-Inclusive\")\n      }, 14, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Header, \"yhRNv3cpmXB9iaa2l4URx8mnUXk=\", false, function () {\n  return [useHistory, useLocation, useParams, useRouteMatch, useSelector, useSelector, useDispatch, useTranslation, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = Header;\n\nvar _c;\n\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"sources":["/Users/jinzhouyan/Desktop/react-travel/src/components/header/Header.tsx"],"names":["React","useState","useEffect","styles","Layout","Typography","Input","Menu","Button","Dropdown","GlobalOutlined","useHistory","useLocation","useParams","useRouteMatch","useSelector","useDispatch","addLanguageActionCreator","changeLanguageActionCreator","useTranslation","jwt_decode","UserSlice","Header","history","location","params","match","language","state","languageList","dispatch","t","jwt","s","user","token","username","setUsername","shoppingCartItems","shoppingCart","items","shoppingCartLoading","loading","shoppingCartError","error","menuClickHandler","e","console","log","key","onLogout","actions","logOut","push","inner","marginLeft","map","l","name","code","length","logo","keywords"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport styles from \"./Header.module.css\";\nimport logo from \"../../assets/logo.svg\";\nimport { Layout, Typography, Input, Menu, Button, Dropdown } from \"antd\";\nimport {\n  GlobalOutlined,\n  FacebookOutlined,\n  TwitterOutlined,\n  InstagramOutlined,\n  WhatsAppOutlined,\n} from \"@ant-design/icons\";\nimport {\n  useHistory,\n  useLocation,\n  useParams,\n  useRouteMatch,\n} from \"react-router-dom\";\nimport { useSelector } from \"../../redux/hooks\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  LanguageActionTypes,\n  addLanguageActionCreator,\n  changeLanguageActionCreator,\n} from \"../../redux/language/languageAction\";\nimport { useTranslation } from \"react-i18next\";\nimport jwt_decode, { JwtPayload as DefaultJwtPayload } from \"jwt-decode\";\nimport { UserSlice } from \"../../redux/user/slice\";\n\ninterface JwtPayload extends DefaultJwtPayload {\n  username: string;\n}\n\nexport const Header: React.FC = () => {\n  const history = useHistory();\n  const location = useLocation();\n  const params = useParams();\n  const match = useRouteMatch();\n  const language = useSelector((state) => state.language.language);\n  const languageList = useSelector((state) => state.language.languageList);\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n\n  const jwt = useSelector((s) => s.user.token);\n  const [username, setUsername] = useState(\"\");\n\n  const shoppingCartItems = useSelector((s) => s.shoppingCart.items);\n  const shoppingCartLoading = useSelector((s) => s.shoppingCart.loading);\n  const shoppingCartError = useSelector((s) => s.shoppingCart.error);\n\n  useEffect(() => {\n    if (jwt) {\n      const token = jwt_decode<JwtPayload>(jwt);\n      setUsername(token.username);\n    }\n  }, [jwt]);\n\n  const menuClickHandler = (e) => {\n    console.log(e);\n    // this.setState({ language: e.key });\n    if (e.key === \"more\") {\n      dispatch(addLanguageActionCreator(\"新语言\", \"new_lang\"));\n    } else {\n      dispatch(changeLanguageActionCreator(e.key));\n    }\n  };\n\n  const onLogout = () => {\n    dispatch(UserSlice.actions.logOut());\n    history.push(\"/\");\n  };\n\n  return (\n    <div className={styles[\"app-header\"]}>\n      <div className={styles[\"top-header\"]}>\n        <div className={styles.inner}>\n          <Typography.Text>{t(\"header.slogan\")}</Typography.Text>\n          <Dropdown.Button\n            style={{ marginLeft: 15 }}\n            overlay={\n              <Menu onClick={menuClickHandler}>\n                {languageList.map((l) => {\n                  return <Menu.Item key={l.code}>{l.name}</Menu.Item>;\n                })}\n                <Menu.Item key={\"more\"}>\n                  {t(\"header.add_new_language\")}\n                </Menu.Item>\n              </Menu>\n            }\n            icon={<GlobalOutlined />}\n          >\n            {language === \"en\" ? \"English\" : \"中文\"}\n          </Dropdown.Button>\n          {jwt ? (\n            <Button.Group className={styles[\"button-group\"]}>\n              <span>\n                {t(\"header.welcome\")}\n                <Typography.Text strong>{username}</Typography.Text>\n              </span>\n              <Button\n                loading={shoppingCartLoading}\n                onClick={() => history.push(\"/shoppingCart\")}\n              >\n                {t(\"header.shoppingCart\")}({shoppingCartItems.length})\n              </Button>\n              <Button onClick={onLogout}>{t(\"header.signOut\")}</Button>\n            </Button.Group>\n          ) : (\n            <Button.Group className={styles[\"button-group\"]}>\n              <Button onClick={() => history.push(\"/register\")}>\n                {t(\"header.register\")}\n              </Button>\n              <Button onClick={() => history.push(\"/signIn\")}>\n                {t(\"header.login\")}\n              </Button>\n            </Button.Group>\n          )}\n        </div>\n      </div>\n      <Layout.Header className={styles[\"main-header\"]}>\n        <span onClick={() => history.push(\"/\")}>\n          <img src={logo} alt=\"logo\" className={styles[\"App-logo\"]} />\n          <Typography.Title level={3} className={styles[\"title\"]}>\n            {t(\"header.title\")}\n          </Typography.Title>\n        </span>\n        <Input.Search\n          placeholder=\"Please type your dream destination\"\n          className={styles[\"search-input\"]}\n          onSearch={(keywords) => history.push(\"/search/\" + keywords)}\n        />\n      </Layout.Header>\n      <Menu mode={\"horizontal\"} className={styles[\"main-menu\"]}>\n        <Menu.Item key={1}>{t(\"header.home_page\")}</Menu.Item>\n        <Menu.Item key={2}>{t(\"header.Stays\")}</Menu.Item>\n        <Menu.Item key={3}>{t(\"header.Flights\")}</Menu.Item>\n        <Menu.Item key={4}>{t(\"header.Cars\")}</Menu.Item>\n        <Menu.Item key={5}>{t(\"header.Packages\")}</Menu.Item>\n        <Menu.Item key={6}>{t(\"header.Cruises\")}</Menu.Item>\n        <Menu.Item key={7}>{t(\"header.Road Trip\")}</Menu.Item>\n        <Menu.Item key={8}>{t(\"header.Family\")}</Menu.Item>\n        <Menu.Item key={9}>{t(\"header.Romantic\")}</Menu.Item>\n        <Menu.Item key={10}>{t(\"header.Solo traveler\")}</Menu.Item>\n        <Menu.Item key={11}>{t(\"header.Beach\")}</Menu.Item>\n        <Menu.Item key={12}>{t(\"header.Pet-friendly\")}</Menu.Item>\n        <Menu.Item key={13}>{t(\"header.Luxury\")}</Menu.Item>\n        <Menu.Item key={14}>{t(\"header.All-Inclusive\")}</Menu.Item>\n      </Menu>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}