{"ast":null,"code":"import _defineProperty from\"/Users/jinzhouyan/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/jinzhouyan/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jinzhouyan/Desktop/react-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";var _extraReducers;import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import axios from\"axios\";var initialState={loading:false,error:null,token:null};export var signIn=createAsyncThunk(\"user/signIn\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(paramaters,thunkAPI){var _yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"http://123.56.149.216:8080/auth/login\",{email:paramaters.email,password:paramaters.password});case 2:_yield$axios$post=_context.sent;data=_yield$axios$post.data;return _context.abrupt(\"return\",data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());export var UserSlice=createSlice({name:\"user\",initialState:initialState,reducers:{logOut:function logOut(state){state.token=null;state.error=null;state.loading=false;}},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,signIn.pending.type,function(state){//return {...state, loading:true};\nstate.loading=true;}),_defineProperty(_extraReducers,signIn.fulfilled.type,function(state,action){console.log(action.payload);state.loading=false;state.token=action.payload.token;state.error=null;}),_defineProperty(_extraReducers,signIn.rejected.type,function(state,action){state.loading=false;state.error=action.payload;}),_extraReducers)});","map":{"version":3,"sources":["/Users/jinzhouyan/Desktop/react-travel/src/redux/user/slice.ts"],"names":["createSlice","createAsyncThunk","axios","initialState","loading","error","token","signIn","paramaters","thunkAPI","post","email","password","data","UserSlice","name","reducers","logOut","state","extraReducers","pending","type","fulfilled","action","console","log","payload","rejected"],"mappings":"yeAAA,OAASA,WAAT,CAAqCC,gBAArC,KAA6D,kBAA7D,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAQA,GAAMC,CAAAA,YAAuB,CAAG,CAC5BC,OAAO,CAAE,KADmB,CAE5BC,KAAK,CAAE,IAFqB,CAG5BC,KAAK,CAAE,IAHqB,CAAhC,CAMA,MAAO,IAAMC,CAAAA,MAAM,CAAGN,gBAAgB,CAClC,aADkC,0FAElC,iBAAOO,UAAP,CAGGC,QAHH,mKAI2BP,CAAAA,KAAK,CAACQ,IAAN,yCACkB,CACrCC,KAAK,CAAEH,UAAU,CAACG,KADmB,CAErCC,QAAQ,CAAEJ,UAAU,CAACI,QAFgB,CADlB,CAJ3B,wCAIYC,IAJZ,mBAIYA,IAJZ,iCAUWA,IAVX,wDAFkC,mEAA/B,CAgBP,MAAO,IAAMC,CAAAA,SAAS,CAAGd,WAAW,CAAC,CACjCe,IAAI,CAAE,MAD2B,CAEjCZ,YAAY,CAAZA,YAFiC,CAGjCa,QAAQ,CAAE,CACNC,MAAM,CAAE,gBAACC,KAAD,CAAS,CACbA,KAAK,CAACZ,KAAN,CAAc,IAAd,CACAY,KAAK,CAACb,KAAN,CAAY,IAAZ,CACAa,KAAK,CAACd,OAAN,CAAgB,KAAhB,CACH,CALK,CAHuB,CAS9Be,aAAa,mDACXZ,MAAM,CAACa,OAAP,CAAeC,IADJ,CACW,SAACH,KAAD,CAAW,CAC9B;AACAA,KAAK,CAACd,OAAN,CAAgB,IAAhB,CACH,CAJW,iCAKXG,MAAM,CAACe,SAAP,CAAiBD,IALN,CAKa,SAACH,KAAD,CAAQK,MAAR,CAAmB,CACxCC,OAAO,CAACC,GAAR,CAAYF,MAAM,CAACG,OAAnB,EACAR,KAAK,CAACd,OAAN,CAAgB,KAAhB,CACAc,KAAK,CAACZ,KAAN,CAAciB,MAAM,CAACG,OAAP,CAAepB,KAA7B,CACAY,KAAK,CAACb,KAAN,CAAc,IAAd,CACH,CAVW,iCAWXE,MAAM,CAACoB,QAAP,CAAgBN,IAXL,CAWY,SAACH,KAAD,CAAQK,MAAR,CAAiD,CACrEL,KAAK,CAACd,OAAN,CAAgB,KAAhB,CACAc,KAAK,CAACb,KAAN,CAAckB,MAAM,CAACG,OAArB,CACH,CAdW,iBATiB,CAAD,CAA7B","sourcesContent":["import { createSlice, PayloadAction, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\ninterface UserState {\n    loading: boolean;\n    error: string | null;\n    token: string | null;\n}\n\nconst initialState: UserState = {\n    loading: false,\n    error: null,\n    token: null,\n\n}\nexport const signIn = createAsyncThunk(\n    \"user/signIn\",\n    async (paramaters: {\n        email: string,\n        password: string,\n    }, thunkAPI) => {\n        const { data } = await axios.post(\n        `http://123.56.149.216:8080/auth/login`, {\n            email: paramaters.email,\n            password: paramaters.password\n            }\n        );\n        return data;\n    }\n);\n\nexport const UserSlice = createSlice({\n    name: \"user\",\n    initialState,\n    reducers: {\n        logOut: (state)=>{\n            state.token = null;\n            state.error=null;\n            state.loading = false;\n        }\n    }, extraReducers: {\n        [signIn.pending.type]: (state) => {\n            //return {...state, loading:true};\n            state.loading = true;\n        },\n        [signIn.fulfilled.type]: (state, action) => {\n            console.log(action.payload);\n            state.loading = false;\n            state.token = action.payload.token;\n            state.error = null;\n        },\n        [signIn.rejected.type]: (state, action: PayloadAction<string | null>) => {\n            state.loading = false;\n            state.error = action.payload\n        }\n    }\n})"]},"metadata":{},"sourceType":"module"}